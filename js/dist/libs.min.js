/*! robospace 2014-01-10 08:01 */
this.JSON || (this.JSON = {}), function() {
    function f(a) {
        return 10 > a ? "0" + a : a;
    }
    function quote(a) {
        return escapable.lastIndex = 0, escapable.test(a) ? '"' + a.replace(escapable, function(a) {
            var b = meta[a];
            return "string" == typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + a + '"';
    }
    function str(a, b) {
        var c, d, e, f, g, h = gap, i = b[a];
        switch (i && "object" == typeof i && "function" == typeof i.toJSON && (i = i.toJSON(a)), 
        "function" == typeof rep && (i = rep.call(b, a, i)), typeof i) {
          case "string":
            return quote(i);

          case "number":
            return isFinite(i) ? String(i) : "null";

          case "boolean":
          case "null":
            return String(i);

          case "object":
            if (!i) return "null";
            if (gap += indent, g = [], "[object Array]" === Object.prototype.toString.apply(i)) {
                for (f = i.length, c = 0; f > c; c += 1) g[c] = str(c, i) || "null";
                return e = 0 === g.length ? "[]" : gap ? "[\n" + gap + g.join(",\n" + gap) + "\n" + h + "]" : "[" + g.join(",") + "]", 
                gap = h, e;
            }
            if (rep && "object" == typeof rep) for (f = rep.length, c = 0; f > c; c += 1) d = rep[c], 
            "string" == typeof d && (e = str(d, i), e && g.push(quote(d) + (gap ? ": " : ":") + e)); else for (d in i) Object.hasOwnProperty.call(i, d) && (e = str(d, i), 
            e && g.push(quote(d) + (gap ? ": " : ":") + e));
            return e = 0 === g.length ? "{}" : gap ? "{\n" + gap + g.join(",\n" + gap) + "\n" + h + "}" : "{" + g.join(",") + "}", 
            gap = h, e;
        }
    }
    "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function() {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null;
    }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
        return this.valueOf();
    });
    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = {
        "\b": "\\b",
        "	": "\\t",
        "\n": "\\n",
        "\f": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
    }, rep;
    "function" != typeof JSON.stringify && (JSON.stringify = function(a, b, c) {
        var d;
        if (gap = "", indent = "", "number" == typeof c) for (d = 0; c > d; d += 1) indent += " "; else "string" == typeof c && (indent = c);
        if (rep = b, b && "function" != typeof b && ("object" != typeof b || "number" != typeof b.length)) throw new Error("JSON.stringify");
        return str("", {
            "": a
        });
    }), "function" != typeof JSON.parse && (JSON.parse = function(text, reviver) {
        function walk(a, b) {
            var c, d, e = a[b];
            if (e && "object" == typeof e) for (c in e) Object.hasOwnProperty.call(e, c) && (d = walk(e, c), 
            void 0 !== d ? e[c] = d : delete e[c]);
            return reviver.call(a, b, e);
        }
        var j;
        if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
        })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), 
        "function" == typeof reviver ? walk({
            "": j
        }, "") : j;
        throw new SyntaxError("JSON.parse");
    });
}(), function(a, b) {
    function c(a) {
        var b = a.length, c = fb.type(a);
        return fb.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || "function" !== c && (0 === b || "number" == typeof b && b > 0 && b - 1 in a);
    }
    function d(a) {
        var b = ob[a] = {};
        return fb.each(a.match(hb) || [], function(a, c) {
            b[c] = !0;
        }), b;
    }
    function e() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {};
            }
        }), this.expando = fb.expando + Math.random();
    }
    function f(a, c, d) {
        var e;
        if (d === b && 1 === a.nodeType) if (e = "data-" + c.replace(sb, "-$1").toLowerCase(), 
        d = a.getAttribute(e), "string" == typeof d) {
            try {
                d = "true" === d ? !0 : "false" === d ? !1 : "null" === d ? null : +d + "" === d ? +d : rb.test(d) ? JSON.parse(d) : d;
            } catch (f) {}
            pb.set(a, c, d);
        } else d = b;
        return d;
    }
    function g() {
        return !0;
    }
    function h() {
        return !1;
    }
    function i() {
        try {
            return T.activeElement;
        } catch (a) {}
    }
    function j(a, b) {
        for (;(a = a[b]) && 1 !== a.nodeType; ) ;
        return a;
    }
    function k(a, b, c) {
        if (fb.isFunction(b)) return fb.grep(a, function(a, d) {
            return !!b.call(a, d, a) !== c;
        });
        if (b.nodeType) return fb.grep(a, function(a) {
            return a === b !== c;
        });
        if ("string" == typeof b) {
            if (Cb.test(b)) return fb.filter(b, a, c);
            b = fb.filter(b, a);
        }
        return fb.grep(a, function(a) {
            return bb.call(b, a) >= 0 !== c;
        });
    }
    function l(a, b) {
        return fb.nodeName(a, "table") && fb.nodeName(1 === b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a;
    }
    function m(a) {
        return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a;
    }
    function n(a) {
        var b = Nb.exec(a.type);
        return b ? a.type = b[1] : a.removeAttribute("type"), a;
    }
    function o(a, b) {
        for (var c = a.length, d = 0; c > d; d++) qb.set(a[d], "globalEval", !b || qb.get(b[d], "globalEval"));
    }
    function p(a, b) {
        var c, d, e, f, g, h, i, j;
        if (1 === b.nodeType) {
            if (qb.hasData(a) && (f = qb.access(a), g = qb.set(b, f), j = f.events)) {
                delete g.handle, g.events = {};
                for (e in j) for (c = 0, d = j[e].length; d > c; c++) fb.event.add(b, e, j[e][c]);
            }
            pb.hasData(a) && (h = pb.access(a), i = fb.extend({}, h), pb.set(b, i));
        }
    }
    function q(a, c) {
        var d = a.getElementsByTagName ? a.getElementsByTagName(c || "*") : a.querySelectorAll ? a.querySelectorAll(c || "*") : [];
        return c === b || c && fb.nodeName(a, c) ? fb.merge([ a ], d) : d;
    }
    function r(a, b) {
        var c = b.nodeName.toLowerCase();
        "input" === c && Kb.test(a.type) ? b.checked = a.checked : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue);
    }
    function s(a, b) {
        if (b in a) return b;
        for (var c = b.charAt(0).toUpperCase() + b.slice(1), d = b, e = _b.length; e--; ) if (b = _b[e] + c, 
        b in a) return b;
        return d;
    }
    function t(a, b) {
        return a = b || a, "none" === fb.css(a, "display") || !fb.contains(a.ownerDocument, a);
    }
    function u(b) {
        return a.getComputedStyle(b, null);
    }
    function v(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = qb.get(d, "olddisplay"), 
        c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && t(d) && (f[g] = qb.access(d, "olddisplay", z(d.nodeName)))) : f[g] || (e = t(d), 
        (c && "none" !== c || !e) && qb.set(d, "olddisplay", e ? c : fb.css(d, "display"))));
        for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
        return a;
    }
    function w(a, b, c) {
        var d = Ub.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b;
    }
    function x(a, b, c, d, e) {
        for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += fb.css(a, c + $b[f], !0, e)), 
        d ? ("content" === c && (g -= fb.css(a, "padding" + $b[f], !0, e)), "margin" !== c && (g -= fb.css(a, "border" + $b[f] + "Width", !0, e))) : (g += fb.css(a, "padding" + $b[f], !0, e), 
        "padding" !== c && (g += fb.css(a, "border" + $b[f] + "Width", !0, e)));
        return g;
    }
    function y(a, b, c) {
        var d = !0, e = "width" === b ? a.offsetWidth : a.offsetHeight, f = u(a), g = fb.support.boxSizing && "border-box" === fb.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
            if (e = Qb(a, b, f), (0 > e || null == e) && (e = a.style[b]), Vb.test(e)) return e;
            d = g && (fb.support.boxSizingReliable || e === a.style[b]), e = parseFloat(e) || 0;
        }
        return e + x(a, b, c || (g ? "border" : "content"), d, f) + "px";
    }
    function z(a) {
        var b = T, c = Xb[a];
        return c || (c = A(a, b), "none" !== c && c || (Rb = (Rb || fb("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(b.documentElement), 
        b = (Rb[0].contentWindow || Rb[0].contentDocument).document, b.write("<!doctype html><html><body>"), 
        b.close(), c = A(a, b), Rb.detach()), Xb[a] = c), c;
    }
    function A(a, b) {
        var c = fb(b.createElement(a)).appendTo(b.body), d = fb.css(c[0], "display");
        return c.remove(), d;
    }
    function B(a, b, c, d) {
        var e;
        if (fb.isArray(b)) fb.each(b, function(b, e) {
            c || bc.test(a) ? d(a, e) : B(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d);
        }); else if (c || "object" !== fb.type(b)) d(a, b); else for (e in b) B(a + "[" + e + "]", b[e], c, d);
    }
    function C(a) {
        return function(b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e = 0, f = b.toLowerCase().match(hb) || [];
            if (fb.isFunction(c)) for (;d = f[e++]; ) "+" === d[0] ? (d = d.slice(1) || "*", 
            (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c);
        };
    }
    function D(a, c, d, e) {
        function f(i) {
            var j;
            return g[i] = !0, fb.each(a[i] || [], function(a, i) {
                var k = i(c, d, e);
                return "string" != typeof k || h || g[k] ? h ? !(j = k) : b : (c.dataTypes.unshift(k), 
                f(k), !1);
            }), j;
        }
        var g = {}, h = a === sc;
        return f(c.dataTypes[0]) || !g["*"] && f("*");
    }
    function E(a, c) {
        var d, e, f = fb.ajaxSettings.flatOptions || {};
        for (d in c) c[d] !== b && ((f[d] ? a : e || (e = {}))[d] = c[d]);
        return e && fb.extend(!0, a, e), a;
    }
    function F(a, c, d) {
        for (var e, f, g, h, i = a.contents, j = a.dataTypes; "*" === j[0]; ) j.shift(), 
        e === b && (e = a.mimeType || c.getResponseHeader("Content-Type"));
        if (e) for (f in i) if (i[f] && i[f].test(e)) {
            j.unshift(f);
            break;
        }
        if (j[0] in d) g = j[0]; else {
            for (f in d) {
                if (!j[0] || a.converters[f + " " + j[0]]) {
                    g = f;
                    break;
                }
                h || (h = f);
            }
            g = g || h;
        }
        return g ? (g !== j[0] && j.unshift(g), d[g]) : b;
    }
    function G(a, b, c, d) {
        var e, f, g, h, i, j = {}, k = a.dataTypes.slice();
        if (k[1]) for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
        for (f = k.shift(); f; ) if (a.responseFields[f] && (c[a.responseFields[f]] = b), 
        !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift()) if ("*" === f) f = i; else if ("*" !== i && i !== f) {
            if (g = j[i + " " + f] || j["* " + f], !g) for (e in j) if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                break;
            }
            if (g !== !0) if (g && a["throws"]) b = g(b); else try {
                b = g(b);
            } catch (l) {
                return {
                    state: "parsererror",
                    error: g ? l : "No conversion from " + i + " to " + f
                };
            }
        }
        return {
            state: "success",
            data: b
        };
    }
    function H() {
        return setTimeout(function() {
            Bc = b;
        }), Bc = fb.now();
    }
    function I(a, b, c) {
        for (var d, e = (Hc[b] || []).concat(Hc["*"]), f = 0, g = e.length; g > f; f++) if (d = e[f].call(c, b, a)) return d;
    }
    function J(a, b, c) {
        var d, e, f = 0, g = Gc.length, h = fb.Deferred().always(function() {
            delete i.elem;
        }), i = function() {
            if (e) return !1;
            for (var b = Bc || H(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
            return h.notifyWith(a, [ j, f, c ]), 1 > f && i ? c : (h.resolveWith(a, [ j ]), 
            !1);
        }, j = h.promise({
            elem: a,
            props: fb.extend({}, b),
            opts: fb.extend(!0, {
                specialEasing: {}
            }, c),
            originalProperties: b,
            originalOptions: c,
            startTime: Bc || H(),
            duration: c.duration,
            tweens: [],
            createTween: function(b, c) {
                var d = fb.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                return j.tweens.push(d), d;
            },
            stop: function(b) {
                var c = 0, d = b ? j.tweens.length : 0;
                if (e) return this;
                for (e = !0; d > c; c++) j.tweens[c].run(1);
                return b ? h.resolveWith(a, [ j, b ]) : h.rejectWith(a, [ j, b ]), this;
            }
        }), k = j.props;
        for (K(k, j.opts.specialEasing); g > f; f++) if (d = Gc[f].call(j, a, k, j.opts)) return d;
        return fb.map(k, I, j), fb.isFunction(j.opts.start) && j.opts.start.call(a, j), 
        fb.fx.timer(fb.extend(i, {
            elem: a,
            anim: j,
            queue: j.opts.queue
        })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always);
    }
    function K(a, b) {
        var c, d, e, f, g;
        for (c in a) if (d = fb.camelCase(c), e = b[d], f = a[c], fb.isArray(f) && (e = f[1], 
        f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = fb.cssHooks[d], g && "expand" in g) {
            f = g.expand(f), delete a[d];
            for (c in f) c in a || (a[c] = f[c], b[c] = e);
        } else b[d] = e;
    }
    function L(a, c, d) {
        var e, f, g, h, i, j, k = this, l = {}, m = a.style, n = a.nodeType && t(a), o = qb.get(a, "fxshow");
        d.queue || (i = fb._queueHooks(a, "fx"), null == i.unqueued && (i.unqueued = 0, 
        j = i.empty.fire, i.empty.fire = function() {
            i.unqueued || j();
        }), i.unqueued++, k.always(function() {
            k.always(function() {
                i.unqueued--, fb.queue(a, "fx").length || i.empty.fire();
            });
        })), 1 === a.nodeType && ("height" in c || "width" in c) && (d.overflow = [ m.overflow, m.overflowX, m.overflowY ], 
        "inline" === fb.css(a, "display") && "none" === fb.css(a, "float") && (m.display = "inline-block")), 
        d.overflow && (m.overflow = "hidden", k.always(function() {
            m.overflow = d.overflow[0], m.overflowX = d.overflow[1], m.overflowY = d.overflow[2];
        }));
        for (e in c) if (f = c[e], Dc.exec(f)) {
            if (delete c[e], g = g || "toggle" === f, f === (n ? "hide" : "show")) {
                if ("show" !== f || !o || o[e] === b) continue;
                n = !0;
            }
            l[e] = o && o[e] || fb.style(a, e);
        }
        if (!fb.isEmptyObject(l)) {
            o ? "hidden" in o && (n = o.hidden) : o = qb.access(a, "fxshow", {}), g && (o.hidden = !n), 
            n ? fb(a).show() : k.done(function() {
                fb(a).hide();
            }), k.done(function() {
                var b;
                qb.remove(a, "fxshow");
                for (b in l) fb.style(a, b, l[b]);
            });
            for (e in l) h = I(n ? o[e] : 0, e, k), e in o || (o[e] = h.start, n && (h.end = h.start, 
            h.start = "width" === e || "height" === e ? 1 : 0));
        }
    }
    function M(a, b, c, d, e) {
        return new M.prototype.init(a, b, c, d, e);
    }
    function N(a, b) {
        var c, d = {
            height: a
        }, e = 0;
        for (b = b ? 1 : 0; 4 > e; e += 2 - b) c = $b[e], d["margin" + c] = d["padding" + c] = a;
        return b && (d.opacity = d.width = a), d;
    }
    function O(a) {
        return fb.isWindow(a) ? a : 9 === a.nodeType && a.defaultView;
    }
    var P, Q, R = typeof b, S = a.location, T = a.document, U = T.documentElement, V = a.jQuery, W = a.$, X = {}, Y = [], Z = "2.0.3", $ = Y.concat, _ = Y.push, ab = Y.slice, bb = Y.indexOf, cb = X.toString, db = X.hasOwnProperty, eb = Z.trim, fb = function(a, b) {
        return new fb.fn.init(a, b, P);
    }, gb = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, hb = /\S+/g, ib = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, jb = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, kb = /^-ms-/, lb = /-([\da-z])/gi, mb = function(a, b) {
        return b.toUpperCase();
    }, nb = function() {
        T.removeEventListener("DOMContentLoaded", nb, !1), a.removeEventListener("load", nb, !1), 
        fb.ready();
    };
    fb.fn = fb.prototype = {
        jquery: Z,
        constructor: fb,
        init: function(a, c, d) {
            var e, f;
            if (!a) return this;
            if ("string" == typeof a) {
                if (e = "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && a.length >= 3 ? [ null, a, null ] : ib.exec(a), 
                !e || !e[1] && c) return !c || c.jquery ? (c || d).find(a) : this.constructor(c).find(a);
                if (e[1]) {
                    if (c = c instanceof fb ? c[0] : c, fb.merge(this, fb.parseHTML(e[1], c && c.nodeType ? c.ownerDocument || c : T, !0)), 
                    jb.test(e[1]) && fb.isPlainObject(c)) for (e in c) fb.isFunction(this[e]) ? this[e](c[e]) : this.attr(e, c[e]);
                    return this;
                }
                return f = T.getElementById(e[2]), f && f.parentNode && (this.length = 1, this[0] = f), 
                this.context = T, this.selector = a, this;
            }
            return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : fb.isFunction(a) ? d.ready(a) : (a.selector !== b && (this.selector = a.selector, 
            this.context = a.context), fb.makeArray(a, this));
        },
        selector: "",
        length: 0,
        toArray: function() {
            return ab.call(this);
        },
        get: function(a) {
            return null == a ? this.toArray() : 0 > a ? this[this.length + a] : this[a];
        },
        pushStack: function(a) {
            var b = fb.merge(this.constructor(), a);
            return b.prevObject = this, b.context = this.context, b;
        },
        each: function(a, b) {
            return fb.each(this, a, b);
        },
        ready: function(a) {
            return fb.ready.promise().done(a), this;
        },
        slice: function() {
            return this.pushStack(ab.apply(this, arguments));
        },
        first: function() {
            return this.eq(0);
        },
        last: function() {
            return this.eq(-1);
        },
        eq: function(a) {
            var b = this.length, c = +a + (0 > a ? b : 0);
            return this.pushStack(c >= 0 && b > c ? [ this[c] ] : []);
        },
        map: function(a) {
            return this.pushStack(fb.map(this, function(b, c) {
                return a.call(b, c, b);
            }));
        },
        end: function() {
            return this.prevObject || this.constructor(null);
        },
        push: _,
        sort: [].sort,
        splice: [].splice
    }, fb.fn.init.prototype = fb.fn, fb.extend = fb.fn.extend = function() {
        var a, c, d, e, f, g, h = arguments[0] || {}, i = 1, j = arguments.length, k = !1;
        for ("boolean" == typeof h && (k = h, h = arguments[1] || {}, i = 2), "object" == typeof h || fb.isFunction(h) || (h = {}), 
        j === i && (h = this, --i); j > i; i++) if (null != (a = arguments[i])) for (c in a) d = h[c], 
        e = a[c], h !== e && (k && e && (fb.isPlainObject(e) || (f = fb.isArray(e))) ? (f ? (f = !1, 
        g = d && fb.isArray(d) ? d : []) : g = d && fb.isPlainObject(d) ? d : {}, h[c] = fb.extend(k, g, e)) : e !== b && (h[c] = e));
        return h;
    }, fb.extend({
        expando: "jQuery" + (Z + Math.random()).replace(/\D/g, ""),
        noConflict: function(b) {
            return a.$ === fb && (a.$ = W), b && a.jQuery === fb && (a.jQuery = V), fb;
        },
        isReady: !1,
        readyWait: 1,
        holdReady: function(a) {
            a ? fb.readyWait++ : fb.ready(!0);
        },
        ready: function(a) {
            (a === !0 ? --fb.readyWait : fb.isReady) || (fb.isReady = !0, a !== !0 && --fb.readyWait > 0 || (Q.resolveWith(T, [ fb ]), 
            fb.fn.trigger && fb(T).trigger("ready").off("ready")));
        },
        isFunction: function(a) {
            return "function" === fb.type(a);
        },
        isArray: Array.isArray,
        isWindow: function(a) {
            return null != a && a === a.window;
        },
        isNumeric: function(a) {
            return !isNaN(parseFloat(a)) && isFinite(a);
        },
        type: function(a) {
            return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? X[cb.call(a)] || "object" : typeof a;
        },
        isPlainObject: function(a) {
            if ("object" !== fb.type(a) || a.nodeType || fb.isWindow(a)) return !1;
            try {
                if (a.constructor && !db.call(a.constructor.prototype, "isPrototypeOf")) return !1;
            } catch (b) {
                return !1;
            }
            return !0;
        },
        isEmptyObject: function(a) {
            var b;
            for (b in a) return !1;
            return !0;
        },
        error: function(a) {
            throw Error(a);
        },
        parseHTML: function(a, b, c) {
            if (!a || "string" != typeof a) return null;
            "boolean" == typeof b && (c = b, b = !1), b = b || T;
            var d = jb.exec(a), e = !c && [];
            return d ? [ b.createElement(d[1]) ] : (d = fb.buildFragment([ a ], b, e), e && fb(e).remove(), 
            fb.merge([], d.childNodes));
        },
        parseJSON: JSON.parse,
        parseXML: function(a) {
            var c, d;
            if (!a || "string" != typeof a) return null;
            try {
                d = new DOMParser(), c = d.parseFromString(a, "text/xml");
            } catch (e) {
                c = b;
            }
            return (!c || c.getElementsByTagName("parsererror").length) && fb.error("Invalid XML: " + a), 
            c;
        },
        noop: function() {},
        globalEval: function(a) {
            var b, c = eval;
            a = fb.trim(a), a && (1 === a.indexOf("use strict") ? (b = T.createElement("script"), 
            b.text = a, T.head.appendChild(b).parentNode.removeChild(b)) : c(a));
        },
        camelCase: function(a) {
            return a.replace(kb, "ms-").replace(lb, mb);
        },
        nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase();
        },
        each: function(a, b, d) {
            var e, f = 0, g = a.length, h = c(a);
            if (d) {
                if (h) for (;g > f && (e = b.apply(a[f], d), e !== !1); f++) ; else for (f in a) if (e = b.apply(a[f], d), 
                e === !1) break;
            } else if (h) for (;g > f && (e = b.call(a[f], f, a[f]), e !== !1); f++) ; else for (f in a) if (e = b.call(a[f], f, a[f]), 
            e === !1) break;
            return a;
        },
        trim: function(a) {
            return null == a ? "" : eb.call(a);
        },
        makeArray: function(a, b) {
            var d = b || [];
            return null != a && (c(Object(a)) ? fb.merge(d, "string" == typeof a ? [ a ] : a) : _.call(d, a)), 
            d;
        },
        inArray: function(a, b, c) {
            return null == b ? -1 : bb.call(b, a, c);
        },
        merge: function(a, c) {
            var d = c.length, e = a.length, f = 0;
            if ("number" == typeof d) for (;d > f; f++) a[e++] = c[f]; else for (;c[f] !== b; ) a[e++] = c[f++];
            return a.length = e, a;
        },
        grep: function(a, b, c) {
            var d, e = [], f = 0, g = a.length;
            for (c = !!c; g > f; f++) d = !!b(a[f], f), c !== d && e.push(a[f]);
            return e;
        },
        map: function(a, b, d) {
            var e, f = 0, g = a.length, h = c(a), i = [];
            if (h) for (;g > f; f++) e = b(a[f], f, d), null != e && (i[i.length] = e); else for (f in a) e = b(a[f], f, d), 
            null != e && (i[i.length] = e);
            return $.apply([], i);
        },
        guid: 1,
        proxy: function(a, c) {
            var d, e, f;
            return "string" == typeof c && (d = a[c], c = a, a = d), fb.isFunction(a) ? (e = ab.call(arguments, 2), 
            f = function() {
                return a.apply(c || this, e.concat(ab.call(arguments)));
            }, f.guid = a.guid = a.guid || fb.guid++, f) : b;
        },
        access: function(a, c, d, e, f, g, h) {
            var i = 0, j = a.length, k = null == d;
            if ("object" === fb.type(d)) {
                f = !0;
                for (i in d) fb.access(a, c, i, d[i], !0, g, h);
            } else if (e !== b && (f = !0, fb.isFunction(e) || (h = !0), k && (h ? (c.call(a, e), 
            c = null) : (k = c, c = function(a, b, c) {
                return k.call(fb(a), c);
            })), c)) for (;j > i; i++) c(a[i], d, h ? e : e.call(a[i], i, c(a[i], d)));
            return f ? a : k ? c.call(a) : j ? c(a[0], d) : g;
        },
        now: Date.now,
        swap: function(a, b, c, d) {
            var e, f, g = {};
            for (f in b) g[f] = a.style[f], a.style[f] = b[f];
            e = c.apply(a, d || []);
            for (f in b) a.style[f] = g[f];
            return e;
        }
    }), fb.ready.promise = function(b) {
        return Q || (Q = fb.Deferred(), "complete" === T.readyState ? setTimeout(fb.ready) : (T.addEventListener("DOMContentLoaded", nb, !1), 
        a.addEventListener("load", nb, !1))), Q.promise(b);
    }, fb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
        X["[object " + b + "]"] = b.toLowerCase();
    }), P = fb(T), function(a, b) {
        function c(a, b, c, d) {
            var e, f, g, h, i, j, k, l, o, p;
            if ((b ? b.ownerDocument || b : O) !== G && F(b), b = b || G, c = c || [], !a || "string" != typeof a) return c;
            if (1 !== (h = b.nodeType) && 9 !== h) return [];
            if (I && !d) {
                if (e = tb.exec(a)) if (g = e[1]) {
                    if (9 === h) {
                        if (f = b.getElementById(g), !f || !f.parentNode) return c;
                        if (f.id === g) return c.push(f), c;
                    } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g) return c.push(f), 
                    c;
                } else {
                    if (e[2]) return ab.apply(c, b.getElementsByTagName(a)), c;
                    if ((g = e[3]) && x.getElementsByClassName && b.getElementsByClassName) return ab.apply(c, b.getElementsByClassName(g)), 
                    c;
                }
                if (x.qsa && (!J || !J.test(a))) {
                    if (l = k = N, o = b, p = 9 === h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
                        for (j = m(a), (k = b.getAttribute("id")) ? l = k.replace(wb, "\\$&") : b.setAttribute("id", l), 
                        l = "[id='" + l + "'] ", i = j.length; i--; ) j[i] = l + n(j[i]);
                        o = nb.test(a) && b.parentNode || b, p = j.join(",");
                    }
                    if (p) try {
                        return ab.apply(c, o.querySelectorAll(p)), c;
                    } catch (q) {} finally {
                        k || b.removeAttribute("id");
                    }
                }
            }
            return v(a.replace(kb, "$1"), b, c, d);
        }
        function d() {
            function a(c, d) {
                return b.push(c += " ") > z.cacheLength && delete a[b.shift()], a[c] = d;
            }
            var b = [];
            return a;
        }
        function e(a) {
            return a[N] = !0, a;
        }
        function f(a) {
            var b = G.createElement("div");
            try {
                return !!a(b);
            } catch (c) {
                return !1;
            } finally {
                b.parentNode && b.parentNode.removeChild(b), b = null;
            }
        }
        function g(a, b) {
            for (var c = a.split("|"), d = a.length; d--; ) z.attrHandle[c[d]] = b;
        }
        function h(a, b) {
            var c = b && a, d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || X) - (~a.sourceIndex || X);
            if (d) return d;
            if (c) for (;c = c.nextSibling; ) if (c === b) return -1;
            return a ? 1 : -1;
        }
        function i(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a;
            };
        }
        function j(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a;
            };
        }
        function k(a) {
            return e(function(b) {
                return b = +b, e(function(c, d) {
                    for (var e, f = a([], c.length, b), g = f.length; g--; ) c[e = f[g]] && (c[e] = !(d[e] = c[e]));
                });
            });
        }
        function l() {}
        function m(a, b) {
            var d, e, f, g, h, i, j, k = S[a + " "];
            if (k) return b ? 0 : k.slice(0);
            for (h = a, i = [], j = z.preFilter; h; ) {
                (!d || (e = lb.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), 
                d = !1, (e = mb.exec(h)) && (d = e.shift(), f.push({
                    value: d,
                    type: e[0].replace(kb, " ")
                }), h = h.slice(d.length));
                for (g in z.filter) !(e = rb[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), 
                f.push({
                    value: d,
                    type: g,
                    matches: e
                }), h = h.slice(d.length));
                if (!d) break;
            }
            return b ? h.length : h ? c.error(a) : S(a, i).slice(0);
        }
        function n(a) {
            for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
            return d;
        }
        function o(a, b, c) {
            var d = b.dir, e = c && "parentNode" === d, f = Q++;
            return b.first ? function(b, c, f) {
                for (;b = b[d]; ) if (1 === b.nodeType || e) return a(b, c, f);
            } : function(b, c, g) {
                var h, i, j, k = P + " " + f;
                if (g) {
                    for (;b = b[d]; ) if ((1 === b.nodeType || e) && a(b, c, g)) return !0;
                } else for (;b = b[d]; ) if (1 === b.nodeType || e) if (j = b[N] || (b[N] = {}), 
                (i = j[d]) && i[0] === k) {
                    if ((h = i[1]) === !0 || h === y) return h === !0;
                } else if (i = j[d] = [ k ], i[1] = a(b, c, g) || y, i[1] === !0) return !0;
            };
        }
        function p(a) {
            return a.length > 1 ? function(b, c, d) {
                for (var e = a.length; e--; ) if (!a[e](b, c, d)) return !1;
                return !0;
            } : a[0];
        }
        function q(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++) (f = a[h]) && (!c || c(f, d, e)) && (g.push(f), 
            j && b.push(h));
            return g;
        }
        function r(a, b, c, d, f, g) {
            return d && !d[N] && (d = r(d)), f && !f[N] && (f = r(f, g)), e(function(e, g, h, i) {
                var j, k, l, m = [], n = [], o = g.length, p = e || u(b || "*", h.nodeType ? [ h ] : h, []), r = !a || !e && b ? p : q(p, m, a, h, i), s = c ? f || (e ? a : o || d) ? [] : g : r;
                if (c && c(r, s, h, i), d) for (j = q(s, n), d(j, [], h, i), k = j.length; k--; ) (l = j[k]) && (s[n[k]] = !(r[n[k]] = l));
                if (e) {
                    if (f || a) {
                        if (f) {
                            for (j = [], k = s.length; k--; ) (l = s[k]) && j.push(r[k] = l);
                            f(null, s = [], j, i);
                        }
                        for (k = s.length; k--; ) (l = s[k]) && (j = f ? cb.call(e, l) : m[k]) > -1 && (e[j] = !(g[j] = l));
                    }
                } else s = q(s === g ? s.splice(o, s.length) : s), f ? f(null, g, s, i) : ab.apply(g, s);
            });
        }
        function s(a) {
            for (var b, c, d, e = a.length, f = z.relative[a[0].type], g = f || z.relative[" "], h = f ? 1 : 0, i = o(function(a) {
                return a === b;
            }, g, !0), j = o(function(a) {
                return cb.call(b, a) > -1;
            }, g, !0), k = [ function(a, c, d) {
                return !f && (d || c !== D) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d));
            } ]; e > h; h++) if (c = z.relative[a[h].type]) k = [ o(p(k), c) ]; else {
                if (c = z.filter[a[h].type].apply(null, a[h].matches), c[N]) {
                    for (d = ++h; e > d && !z.relative[a[d].type]; d++) ;
                    return r(h > 1 && p(k), h > 1 && n(a.slice(0, h - 1).concat({
                        value: " " === a[h - 2].type ? "*" : ""
                    })).replace(kb, "$1"), c, d > h && s(a.slice(h, d)), e > d && s(a = a.slice(d)), e > d && n(a));
                }
                k.push(c);
            }
            return p(k);
        }
        function t(a, b) {
            var d = 0, f = b.length > 0, g = a.length > 0, h = function(e, h, i, j, k) {
                var l, m, n, o = [], p = 0, r = "0", s = e && [], t = null != k, u = D, v = e || g && z.find.TAG("*", k && h.parentNode || h), w = P += null == u ? 1 : Math.random() || .1;
                for (t && (D = h !== G && h, y = d); null != (l = v[r]); r++) {
                    if (g && l) {
                        for (m = 0; n = a[m++]; ) if (n(l, h, i)) {
                            j.push(l);
                            break;
                        }
                        t && (P = w, y = ++d);
                    }
                    f && ((l = !n && l) && p--, e && s.push(l));
                }
                if (p += r, f && r !== p) {
                    for (m = 0; n = b[m++]; ) n(s, o, h, i);
                    if (e) {
                        if (p > 0) for (;r--; ) s[r] || o[r] || (o[r] = $.call(j));
                        o = q(o);
                    }
                    ab.apply(j, o), t && !e && o.length > 0 && p + b.length > 1 && c.uniqueSort(j);
                }
                return t && (P = w, D = u), s;
            };
            return f ? e(h) : h;
        }
        function u(a, b, d) {
            for (var e = 0, f = b.length; f > e; e++) c(a, b[e], d);
            return d;
        }
        function v(a, b, c, d) {
            var e, f, g, h, i, j = m(a);
            if (!d && 1 === j.length) {
                if (f = j[0] = j[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && x.getById && 9 === b.nodeType && I && z.relative[f[1].type]) {
                    if (b = (z.find.ID(g.matches[0].replace(xb, yb), b) || [])[0], !b) return c;
                    a = a.slice(f.shift().value.length);
                }
                for (e = rb.needsContext.test(a) ? 0 : f.length; e-- && (g = f[e], !z.relative[h = g.type]); ) if ((i = z.find[h]) && (d = i(g.matches[0].replace(xb, yb), nb.test(f[0].type) && b.parentNode || b))) {
                    if (f.splice(e, 1), a = d.length && n(f), !a) return ab.apply(c, d), c;
                    break;
                }
            }
            return C(a, j)(d, b, !I, c, nb.test(a)), c;
        }
        var w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N = "sizzle" + -new Date(), O = a.document, P = 0, Q = 0, R = d(), S = d(), T = d(), U = !1, V = function(a, b) {
            return a === b ? (U = !0, 0) : 0;
        }, W = typeof b, X = 1 << 31, Y = {}.hasOwnProperty, Z = [], $ = Z.pop, _ = Z.push, ab = Z.push, bb = Z.slice, cb = Z.indexOf || function(a) {
            for (var b = 0, c = this.length; c > b; b++) if (this[b] === a) return b;
            return -1;
        }, db = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", eb = "[\\x20\\t\\r\\n\\f]", gb = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", hb = gb.replace("w", "w#"), ib = "\\[" + eb + "*(" + gb + ")" + eb + "*(?:([*^$|!~]?=)" + eb + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + hb + ")|)|)" + eb + "*\\]", jb = ":(" + gb + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + ib.replace(3, 8) + ")*)|.*)\\)|)", kb = RegExp("^" + eb + "+|((?:^|[^\\\\])(?:\\\\.)*)" + eb + "+$", "g"), lb = RegExp("^" + eb + "*," + eb + "*"), mb = RegExp("^" + eb + "*([>+~]|" + eb + ")" + eb + "*"), nb = RegExp(eb + "*[+~]"), ob = RegExp("=" + eb + "*([^\\]'\"]*)" + eb + "*\\]", "g"), pb = RegExp(jb), qb = RegExp("^" + hb + "$"), rb = {
            ID: RegExp("^#(" + gb + ")"),
            CLASS: RegExp("^\\.(" + gb + ")"),
            TAG: RegExp("^(" + gb.replace("w", "w*") + ")"),
            ATTR: RegExp("^" + ib),
            PSEUDO: RegExp("^" + jb),
            CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + eb + "*(even|odd|(([+-]|)(\\d*)n|)" + eb + "*(?:([+-]|)" + eb + "*(\\d+)|))" + eb + "*\\)|)", "i"),
            bool: RegExp("^(?:" + db + ")$", "i"),
            needsContext: RegExp("^" + eb + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + eb + "*((?:-\\d)?\\d*)" + eb + "*\\)|)(?=[^-]|$)", "i")
        }, sb = /^[^{]+\{\s*\[native \w/, tb = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ub = /^(?:input|select|textarea|button)$/i, vb = /^h\d$/i, wb = /'|\\/g, xb = RegExp("\\\\([\\da-f]{1,6}" + eb + "?|(" + eb + ")|.)", "ig"), yb = function(a, b, c) {
            var d = "0x" + b - 65536;
            return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(55296 | d >> 10, 56320 | 1023 & d);
        };
        try {
            ab.apply(Z = bb.call(O.childNodes), O.childNodes), Z[O.childNodes.length].nodeType;
        } catch (zb) {
            ab = {
                apply: Z.length ? function(a, b) {
                    _.apply(a, bb.call(b));
                } : function(a, b) {
                    for (var c = a.length, d = 0; a[c++] = b[d++]; ) ;
                    a.length = c - 1;
                }
            };
        }
        B = c.isXML = function(a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName : !1;
        }, x = c.support = {}, F = c.setDocument = function(a) {
            var c = a ? a.ownerDocument || a : O, d = c.defaultView;
            return c !== G && 9 === c.nodeType && c.documentElement ? (G = c, H = c.documentElement, 
            I = !B(c), d && d.attachEvent && d !== d.top && d.attachEvent("onbeforeunload", function() {
                F();
            }), x.attributes = f(function(a) {
                return a.className = "i", !a.getAttribute("className");
            }), x.getElementsByTagName = f(function(a) {
                return a.appendChild(c.createComment("")), !a.getElementsByTagName("*").length;
            }), x.getElementsByClassName = f(function(a) {
                return a.innerHTML = "<div class='a'></div><div class='a i'></div>", a.firstChild.className = "i", 
                2 === a.getElementsByClassName("i").length;
            }), x.getById = f(function(a) {
                return H.appendChild(a).id = N, !c.getElementsByName || !c.getElementsByName(N).length;
            }), x.getById ? (z.find.ID = function(a, b) {
                if (typeof b.getElementById !== W && I) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [ c ] : [];
                }
            }, z.filter.ID = function(a) {
                var b = a.replace(xb, yb);
                return function(a) {
                    return a.getAttribute("id") === b;
                };
            }) : (delete z.find.ID, z.filter.ID = function(a) {
                var b = a.replace(xb, yb);
                return function(a) {
                    var c = typeof a.getAttributeNode !== W && a.getAttributeNode("id");
                    return c && c.value === b;
                };
            }), z.find.TAG = x.getElementsByTagName ? function(a, c) {
                return typeof c.getElementsByTagName !== W ? c.getElementsByTagName(a) : b;
            } : function(a, b) {
                var c, d = [], e = 0, f = b.getElementsByTagName(a);
                if ("*" === a) {
                    for (;c = f[e++]; ) 1 === c.nodeType && d.push(c);
                    return d;
                }
                return f;
            }, z.find.CLASS = x.getElementsByClassName && function(a, c) {
                return typeof c.getElementsByClassName !== W && I ? c.getElementsByClassName(a) : b;
            }, K = [], J = [], (x.qsa = sb.test(c.querySelectorAll)) && (f(function(a) {
                a.innerHTML = "<select><option selected=''></option></select>", a.querySelectorAll("[selected]").length || J.push("\\[" + eb + "*(?:value|" + db + ")"), 
                a.querySelectorAll(":checked").length || J.push(":checked");
            }), f(function(a) {
                var b = c.createElement("input");
                b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("t", ""), a.querySelectorAll("[t^='']").length && J.push("[*^$]=" + eb + "*(?:''|\"\")"), 
                a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), 
                J.push(",.*:");
            })), (x.matchesSelector = sb.test(L = H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && f(function(a) {
                x.disconnectedMatch = L.call(a, "div"), L.call(a, "[s!='']:x"), K.push("!=", jb);
            }), J = J.length && RegExp(J.join("|")), K = K.length && RegExp(K.join("|")), M = sb.test(H.contains) || H.compareDocumentPosition ? function(a, b) {
                var c = 9 === a.nodeType ? a.documentElement : a, d = b && b.parentNode;
                return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)));
            } : function(a, b) {
                if (b) for (;b = b.parentNode; ) if (b === a) return !0;
                return !1;
            }, V = H.compareDocumentPosition ? function(a, b) {
                if (a === b) return U = !0, 0;
                var d = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition(b);
                return d ? 1 & d || !x.sortDetached && b.compareDocumentPosition(a) === d ? a === c || M(O, a) ? -1 : b === c || M(O, b) ? 1 : E ? cb.call(E, a) - cb.call(E, b) : 0 : 4 & d ? -1 : 1 : a.compareDocumentPosition ? -1 : 1;
            } : function(a, b) {
                var d, e = 0, f = a.parentNode, g = b.parentNode, i = [ a ], j = [ b ];
                if (a === b) return U = !0, 0;
                if (!f || !g) return a === c ? -1 : b === c ? 1 : f ? -1 : g ? 1 : E ? cb.call(E, a) - cb.call(E, b) : 0;
                if (f === g) return h(a, b);
                for (d = a; d = d.parentNode; ) i.unshift(d);
                for (d = b; d = d.parentNode; ) j.unshift(d);
                for (;i[e] === j[e]; ) e++;
                return e ? h(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0;
            }, c) : G;
        }, c.matches = function(a, b) {
            return c(a, null, null, b);
        }, c.matchesSelector = function(a, b) {
            if ((a.ownerDocument || a) !== G && F(a), b = b.replace(ob, "='$1']"), !(!x.matchesSelector || !I || K && K.test(b) || J && J.test(b))) try {
                var d = L.call(a, b);
                if (d || x.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d;
            } catch (e) {}
            return c(b, G, null, [ a ]).length > 0;
        }, c.contains = function(a, b) {
            return (a.ownerDocument || a) !== G && F(a), M(a, b);
        }, c.attr = function(a, c) {
            (a.ownerDocument || a) !== G && F(a);
            var d = z.attrHandle[c.toLowerCase()], e = d && Y.call(z.attrHandle, c.toLowerCase()) ? d(a, c, !I) : b;
            return e === b ? x.attributes || !I ? a.getAttribute(c) : (e = a.getAttributeNode(c)) && e.specified ? e.value : null : e;
        }, c.error = function(a) {
            throw Error("Syntax error, unrecognized expression: " + a);
        }, c.uniqueSort = function(a) {
            var b, c = [], d = 0, e = 0;
            if (U = !x.detectDuplicates, E = !x.sortStable && a.slice(0), a.sort(V), U) {
                for (;b = a[e++]; ) b === a[e] && (d = c.push(e));
                for (;d--; ) a.splice(c[d], 1);
            }
            return a;
        }, A = c.getText = function(a) {
            var b, c = "", d = 0, e = a.nodeType;
            if (e) {
                if (1 === e || 9 === e || 11 === e) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += A(a);
                } else if (3 === e || 4 === e) return a.nodeValue;
            } else for (;b = a[d]; d++) c += A(b);
            return c;
        }, z = c.selectors = {
            cacheLength: 50,
            createPseudo: e,
            match: rb,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(a) {
                    return a[1] = a[1].replace(xb, yb), a[3] = (a[4] || a[5] || "").replace(xb, yb), 
                    "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4);
                },
                CHILD: function(a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || c.error(a[0]), 
                    a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && c.error(a[0]), 
                    a;
                },
                PSEUDO: function(a) {
                    var c, d = !a[5] && a[2];
                    return rb.CHILD.test(a[0]) ? null : (a[3] && a[4] !== b ? a[2] = a[4] : d && pb.test(d) && (c = m(d, !0)) && (c = d.indexOf(")", d.length - c) - d.length) && (a[0] = a[0].slice(0, c), 
                    a[2] = d.slice(0, c)), a.slice(0, 3));
                }
            },
            filter: {
                TAG: function(a) {
                    var b = a.replace(xb, yb).toLowerCase();
                    return "*" === a ? function() {
                        return !0;
                    } : function(a) {
                        return a.nodeName && a.nodeName.toLowerCase() === b;
                    };
                },
                CLASS: function(a) {
                    var b = R[a + " "];
                    return b || (b = RegExp("(^|" + eb + ")" + a + "(" + eb + "|$)")) && R(a, function(a) {
                        return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== W && a.getAttribute("class") || "");
                    });
                },
                ATTR: function(a, b, d) {
                    return function(e) {
                        var f = c.attr(e, a);
                        return null == f ? "!=" === b : b ? (f += "", "=" === b ? f === d : "!=" === b ? f !== d : "^=" === b ? d && 0 === f.indexOf(d) : "*=" === b ? d && f.indexOf(d) > -1 : "$=" === b ? d && f.slice(-d.length) === d : "~=" === b ? (" " + f + " ").indexOf(d) > -1 : "|=" === b ? f === d || f.slice(0, d.length + 1) === d + "-" : !1) : !0;
                    };
                },
                CHILD: function(a, b, c, d, e) {
                    var f = "nth" !== a.slice(0, 3), g = "last" !== a.slice(-4), h = "of-type" === b;
                    return 1 === d && 0 === e ? function(a) {
                        return !!a.parentNode;
                    } : function(b, c, i) {
                        var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling", q = b.parentNode, r = h && b.nodeName.toLowerCase(), s = !i && !h;
                        if (q) {
                            if (f) {
                                for (;p; ) {
                                    for (l = b; l = l[p]; ) if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                    o = p = "only" === a && !o && "nextSibling";
                                }
                                return !0;
                            }
                            if (o = [ g ? q.firstChild : q.lastChild ], g && s) {
                                for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], 
                                l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop(); ) if (1 === l.nodeType && ++m && l === b) {
                                    k[a] = [ P, n, m ];
                                    break;
                                }
                            } else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P) m = j[1]; else for (;(l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r : 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [ P, m ]), 
                            l !== b)); ) ;
                            return m -= e, m === d || 0 === m % d && m / d >= 0;
                        }
                    };
                },
                PSEUDO: function(a, b) {
                    var d, f = z.pseudos[a] || z.setFilters[a.toLowerCase()] || c.error("unsupported pseudo: " + a);
                    return f[N] ? f(b) : f.length > 1 ? (d = [ a, a, "", b ], z.setFilters.hasOwnProperty(a.toLowerCase()) ? e(function(a, c) {
                        for (var d, e = f(a, b), g = e.length; g--; ) d = cb.call(a, e[g]), a[d] = !(c[d] = e[g]);
                    }) : function(a) {
                        return f(a, 0, d);
                    }) : f;
                }
            },
            pseudos: {
                not: e(function(a) {
                    var b = [], c = [], d = C(a.replace(kb, "$1"));
                    return d[N] ? e(function(a, b, c, e) {
                        for (var f, g = d(a, null, e, []), h = a.length; h--; ) (f = g[h]) && (a[h] = !(b[h] = f));
                    }) : function(a, e, f) {
                        return b[0] = a, d(b, null, f, c), !c.pop();
                    };
                }),
                has: e(function(a) {
                    return function(b) {
                        return c(a, b).length > 0;
                    };
                }),
                contains: e(function(a) {
                    return function(b) {
                        return (b.textContent || b.innerText || A(b)).indexOf(a) > -1;
                    };
                }),
                lang: e(function(a) {
                    return qb.test(a || "") || c.error("unsupported lang: " + a), a = a.replace(xb, yb).toLowerCase(), 
                    function(b) {
                        var c;
                        do if (c = I ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), 
                        c === a || 0 === c.indexOf(a + "-"); while ((b = b.parentNode) && 1 === b.nodeType);
                        return !1;
                    };
                }),
                target: function(b) {
                    var c = a.location && a.location.hash;
                    return c && c.slice(1) === b.id;
                },
                root: function(a) {
                    return a === H;
                },
                focus: function(a) {
                    return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex);
                },
                enabled: function(a) {
                    return a.disabled === !1;
                },
                disabled: function(a) {
                    return a.disabled === !0;
                },
                checked: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected;
                },
                selected: function(a) {
                    return a.parentNode && a.parentNode.selectedIndex, a.selected === !0;
                },
                empty: function(a) {
                    for (a = a.firstChild; a; a = a.nextSibling) if (a.nodeName > "@" || 3 === a.nodeType || 4 === a.nodeType) return !1;
                    return !0;
                },
                parent: function(a) {
                    return !z.pseudos.empty(a);
                },
                header: function(a) {
                    return vb.test(a.nodeName);
                },
                input: function(a) {
                    return ub.test(a.nodeName);
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b;
                },
                text: function(a) {
                    var b;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || b.toLowerCase() === a.type);
                },
                first: k(function() {
                    return [ 0 ];
                }),
                last: k(function(a, b) {
                    return [ b - 1 ];
                }),
                eq: k(function(a, b, c) {
                    return [ 0 > c ? c + b : c ];
                }),
                even: k(function(a, b) {
                    for (var c = 0; b > c; c += 2) a.push(c);
                    return a;
                }),
                odd: k(function(a, b) {
                    for (var c = 1; b > c; c += 2) a.push(c);
                    return a;
                }),
                lt: k(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; --d >= 0; ) a.push(d);
                    return a;
                }),
                gt: k(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; b > ++d; ) a.push(d);
                    return a;
                })
            }
        }, z.pseudos.nth = z.pseudos.eq;
        for (w in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) z.pseudos[w] = i(w);
        for (w in {
            submit: !0,
            reset: !0
        }) z.pseudos[w] = j(w);
        l.prototype = z.filters = z.pseudos, z.setFilters = new l(), C = c.compile = function(a, b) {
            var c, d = [], e = [], f = T[a + " "];
            if (!f) {
                for (b || (b = m(a)), c = b.length; c--; ) f = s(b[c]), f[N] ? d.push(f) : e.push(f);
                f = T(a, t(e, d));
            }
            return f;
        }, x.sortStable = N.split("").sort(V).join("") === N, x.detectDuplicates = U, F(), 
        x.sortDetached = f(function(a) {
            return 1 & a.compareDocumentPosition(G.createElement("div"));
        }), f(function(a) {
            return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href");
        }) || g("type|href|height|width", function(a, c, d) {
            return d ? b : a.getAttribute(c, "type" === c.toLowerCase() ? 1 : 2);
        }), x.attributes && f(function(a) {
            return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value");
        }) || g("value", function(a, c, d) {
            return d || "input" !== a.nodeName.toLowerCase() ? b : a.defaultValue;
        }), f(function(a) {
            return null == a.getAttribute("disabled");
        }) || g(db, function(a, c, d) {
            var e;
            return d ? b : (e = a.getAttributeNode(c)) && e.specified ? e.value : a[c] === !0 ? c.toLowerCase() : null;
        }), fb.find = c, fb.expr = c.selectors, fb.expr[":"] = fb.expr.pseudos, fb.unique = c.uniqueSort, 
        fb.text = c.getText, fb.isXMLDoc = c.isXML, fb.contains = c.contains;
    }(a);
    var ob = {};
    fb.Callbacks = function(a) {
        a = "string" == typeof a ? ob[a] || d(a) : fb.extend({}, a);
        var c, e, f, g, h, i, j = [], k = !a.once && [], l = function(b) {
            for (c = a.memory && b, e = !0, i = g || 0, g = 0, h = j.length, f = !0; j && h > i; i++) if (j[i].apply(b[0], b[1]) === !1 && a.stopOnFalse) {
                c = !1;
                break;
            }
            f = !1, j && (k ? k.length && l(k.shift()) : c ? j = [] : m.disable());
        }, m = {
            add: function() {
                if (j) {
                    var b = j.length;
                    !function d(b) {
                        fb.each(b, function(b, c) {
                            var e = fb.type(c);
                            "function" === e ? a.unique && m.has(c) || j.push(c) : c && c.length && "string" !== e && d(c);
                        });
                    }(arguments), f ? h = j.length : c && (g = b, l(c));
                }
                return this;
            },
            remove: function() {
                return j && fb.each(arguments, function(a, b) {
                    for (var c; (c = fb.inArray(b, j, c)) > -1; ) j.splice(c, 1), f && (h >= c && h--, 
                    i >= c && i--);
                }), this;
            },
            has: function(a) {
                return a ? fb.inArray(a, j) > -1 : !(!j || !j.length);
            },
            empty: function() {
                return j = [], h = 0, this;
            },
            disable: function() {
                return j = k = c = b, this;
            },
            disabled: function() {
                return !j;
            },
            lock: function() {
                return k = b, c || m.disable(), this;
            },
            locked: function() {
                return !k;
            },
            fireWith: function(a, b) {
                return !j || e && !k || (b = b || [], b = [ a, b.slice ? b.slice() : b ], f ? k.push(b) : l(b)), 
                this;
            },
            fire: function() {
                return m.fireWith(this, arguments), this;
            },
            fired: function() {
                return !!e;
            }
        };
        return m;
    }, fb.extend({
        Deferred: function(a) {
            var b = [ [ "resolve", "done", fb.Callbacks("once memory"), "resolved" ], [ "reject", "fail", fb.Callbacks("once memory"), "rejected" ], [ "notify", "progress", fb.Callbacks("memory") ] ], c = "pending", d = {
                state: function() {
                    return c;
                },
                always: function() {
                    return e.done(arguments).fail(arguments), this;
                },
                then: function() {
                    var a = arguments;
                    return fb.Deferred(function(c) {
                        fb.each(b, function(b, f) {
                            var g = f[0], h = fb.isFunction(a[b]) && a[b];
                            e[f[1]](function() {
                                var a = h && h.apply(this, arguments);
                                a && fb.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[g + "With"](this === d ? c.promise() : this, h ? [ a ] : arguments);
                            });
                        }), a = null;
                    }).promise();
                },
                promise: function(a) {
                    return null != a ? fb.extend(a, d) : d;
                }
            }, e = {};
            return d.pipe = d.then, fb.each(b, function(a, f) {
                var g = f[2], h = f[3];
                d[f[1]] = g.add, h && g.add(function() {
                    c = h;
                }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                    return e[f[0] + "With"](this === e ? d : this, arguments), this;
                }, e[f[0] + "With"] = g.fireWith;
            }), d.promise(e), a && a.call(e, e), e;
        },
        when: function(a) {
            var b, c, d, e = 0, f = ab.call(arguments), g = f.length, h = 1 !== g || a && fb.isFunction(a.promise) ? g : 0, i = 1 === h ? a : fb.Deferred(), j = function(a, c, d) {
                return function(e) {
                    c[a] = this, d[a] = arguments.length > 1 ? ab.call(arguments) : e, d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d);
                };
            };
            if (g > 1) for (b = Array(g), c = Array(g), d = Array(g); g > e; e++) f[e] && fb.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
            return h || i.resolveWith(d, f), i.promise();
        }
    }), fb.support = function(b) {
        var c = T.createElement("input"), d = T.createDocumentFragment(), e = T.createElement("div"), f = T.createElement("select"), g = f.appendChild(T.createElement("option"));
        return c.type ? (c.type = "checkbox", b.checkOn = "" !== c.value, b.optSelected = g.selected, 
        b.reliableMarginRight = !0, b.boxSizingReliable = !0, b.pixelPosition = !1, c.checked = !0, 
        b.noCloneChecked = c.cloneNode(!0).checked, f.disabled = !0, b.optDisabled = !g.disabled, 
        c = T.createElement("input"), c.value = "t", c.type = "radio", b.radioValue = "t" === c.value, 
        c.setAttribute("checked", "t"), c.setAttribute("name", "t"), d.appendChild(c), b.checkClone = d.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        b.focusinBubbles = "onfocusin" in a, e.style.backgroundClip = "content-box", e.cloneNode(!0).style.backgroundClip = "", 
        b.clearCloneStyle = "content-box" === e.style.backgroundClip, fb(function() {
            var c, d, f = "padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box", g = T.getElementsByTagName("body")[0];
            g && (c = T.createElement("div"), c.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", 
            g.appendChild(c).appendChild(e), e.innerHTML = "", e.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%", 
            fb.swap(g, null != g.style.zoom ? {
                zoom: 1
            } : {}, function() {
                b.boxSizing = 4 === e.offsetWidth;
            }), a.getComputedStyle && (b.pixelPosition = "1%" !== (a.getComputedStyle(e, null) || {}).top, 
            b.boxSizingReliable = "4px" === (a.getComputedStyle(e, null) || {
                width: "4px"
            }).width, d = e.appendChild(T.createElement("div")), d.style.cssText = e.style.cssText = f, 
            d.style.marginRight = d.style.width = "0", e.style.width = "1px", b.reliableMarginRight = !parseFloat((a.getComputedStyle(d, null) || {}).marginRight)), 
            g.removeChild(c));
        }), b) : b;
    }({});
    var pb, qb, rb = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, sb = /([A-Z])/g;
    e.uid = 1, e.accepts = function(a) {
        return a.nodeType ? 1 === a.nodeType || 9 === a.nodeType : !0;
    }, e.prototype = {
        key: function(a) {
            if (!e.accepts(a)) return 0;
            var b = {}, c = a[this.expando];
            if (!c) {
                c = e.uid++;
                try {
                    b[this.expando] = {
                        value: c
                    }, Object.defineProperties(a, b);
                } catch (d) {
                    b[this.expando] = c, fb.extend(a, b);
                }
            }
            return this.cache[c] || (this.cache[c] = {}), c;
        },
        set: function(a, b, c) {
            var d, e = this.key(a), f = this.cache[e];
            if ("string" == typeof b) f[b] = c; else if (fb.isEmptyObject(f)) fb.extend(this.cache[e], b); else for (d in b) f[d] = b[d];
            return f;
        },
        get: function(a, c) {
            var d = this.cache[this.key(a)];
            return c === b ? d : d[c];
        },
        access: function(a, c, d) {
            var e;
            return c === b || c && "string" == typeof c && d === b ? (e = this.get(a, c), e !== b ? e : this.get(a, fb.camelCase(c))) : (this.set(a, c, d), 
            d !== b ? d : c);
        },
        remove: function(a, c) {
            var d, e, f, g = this.key(a), h = this.cache[g];
            if (c === b) this.cache[g] = {}; else {
                fb.isArray(c) ? e = c.concat(c.map(fb.camelCase)) : (f = fb.camelCase(c), c in h ? e = [ c, f ] : (e = f, 
                e = e in h ? [ e ] : e.match(hb) || [])), d = e.length;
                for (;d--; ) delete h[e[d]];
            }
        },
        hasData: function(a) {
            return !fb.isEmptyObject(this.cache[a[this.expando]] || {});
        },
        discard: function(a) {
            a[this.expando] && delete this.cache[a[this.expando]];
        }
    }, pb = new e(), qb = new e(), fb.extend({
        acceptData: e.accepts,
        hasData: function(a) {
            return pb.hasData(a) || qb.hasData(a);
        },
        data: function(a, b, c) {
            return pb.access(a, b, c);
        },
        removeData: function(a, b) {
            pb.remove(a, b);
        },
        _data: function(a, b, c) {
            return qb.access(a, b, c);
        },
        _removeData: function(a, b) {
            qb.remove(a, b);
        }
    }), fb.fn.extend({
        data: function(a, c) {
            var d, e, g = this[0], h = 0, i = null;
            if (a === b) {
                if (this.length && (i = pb.get(g), 1 === g.nodeType && !qb.get(g, "hasDataAttrs"))) {
                    for (d = g.attributes; d.length > h; h++) e = d[h].name, 0 === e.indexOf("data-") && (e = fb.camelCase(e.slice(5)), 
                    f(g, e, i[e]));
                    qb.set(g, "hasDataAttrs", !0);
                }
                return i;
            }
            return "object" == typeof a ? this.each(function() {
                pb.set(this, a);
            }) : fb.access(this, function(c) {
                var d, e = fb.camelCase(a);
                if (g && c === b) {
                    if (d = pb.get(g, a), d !== b) return d;
                    if (d = pb.get(g, e), d !== b) return d;
                    if (d = f(g, e, b), d !== b) return d;
                } else this.each(function() {
                    var d = pb.get(this, e);
                    pb.set(this, e, c), -1 !== a.indexOf("-") && d !== b && pb.set(this, a, c);
                });
            }, null, c, arguments.length > 1, null, !0);
        },
        removeData: function(a) {
            return this.each(function() {
                pb.remove(this, a);
            });
        }
    }), fb.extend({
        queue: function(a, c, d) {
            var e;
            return a ? (c = (c || "fx") + "queue", e = qb.get(a, c), d && (!e || fb.isArray(d) ? e = qb.access(a, c, fb.makeArray(d)) : e.push(d)), 
            e || []) : b;
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = fb.queue(a, b), d = c.length, e = c.shift(), f = fb._queueHooks(a, b), g = function() {
                fb.dequeue(a, b);
            };
            "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), 
            delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire();
        },
        _queueHooks: function(a, b) {
            var c = b + "queueHooks";
            return qb.get(a, c) || qb.access(a, c, {
                empty: fb.Callbacks("once memory").add(function() {
                    qb.remove(a, [ b + "queue", c ]);
                })
            });
        }
    }), fb.fn.extend({
        queue: function(a, c) {
            var d = 2;
            return "string" != typeof a && (c = a, a = "fx", d--), d > arguments.length ? fb.queue(this[0], a) : c === b ? this : this.each(function() {
                var b = fb.queue(this, a, c);
                fb._queueHooks(this, a), "fx" === a && "inprogress" !== b[0] && fb.dequeue(this, a);
            });
        },
        dequeue: function(a) {
            return this.each(function() {
                fb.dequeue(this, a);
            });
        },
        delay: function(a, b) {
            return a = fb.fx ? fb.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
                var d = setTimeout(b, a);
                c.stop = function() {
                    clearTimeout(d);
                };
            });
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", []);
        },
        promise: function(a, c) {
            var d, e = 1, f = fb.Deferred(), g = this, h = this.length, i = function() {
                --e || f.resolveWith(g, [ g ]);
            };
            for ("string" != typeof a && (c = a, a = b), a = a || "fx"; h--; ) d = qb.get(g[h], a + "queueHooks"), 
            d && d.empty && (e++, d.empty.add(i));
            return i(), f.promise(c);
        }
    });
    var tb, ub, vb = /[\t\r\n\f]/g, wb = /\r/g, xb = /^(?:input|select|textarea|button)$/i;
    fb.fn.extend({
        attr: function(a, b) {
            return fb.access(this, fb.attr, a, b, arguments.length > 1);
        },
        removeAttr: function(a) {
            return this.each(function() {
                fb.removeAttr(this, a);
            });
        },
        prop: function(a, b) {
            return fb.access(this, fb.prop, a, b, arguments.length > 1);
        },
        removeProp: function(a) {
            return this.each(function() {
                delete this[fb.propFix[a] || a];
            });
        },
        addClass: function(a) {
            var b, c, d, e, f, g = 0, h = this.length, i = "string" == typeof a && a;
            if (fb.isFunction(a)) return this.each(function(b) {
                fb(this).addClass(a.call(this, b, this.className));
            });
            if (i) for (b = (a || "").match(hb) || []; h > g; g++) if (c = this[g], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(vb, " ") : " ")) {
                for (f = 0; e = b[f++]; ) 0 > d.indexOf(" " + e + " ") && (d += e + " ");
                c.className = fb.trim(d);
            }
            return this;
        },
        removeClass: function(a) {
            var b, c, d, e, f, g = 0, h = this.length, i = 0 === arguments.length || "string" == typeof a && a;
            if (fb.isFunction(a)) return this.each(function(b) {
                fb(this).removeClass(a.call(this, b, this.className));
            });
            if (i) for (b = (a || "").match(hb) || []; h > g; g++) if (c = this[g], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(vb, " ") : "")) {
                for (f = 0; e = b[f++]; ) for (;d.indexOf(" " + e + " ") >= 0; ) d = d.replace(" " + e + " ", " ");
                c.className = a ? fb.trim(d) : "";
            }
            return this;
        },
        toggleClass: function(a, b) {
            var c = typeof a;
            return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : fb.isFunction(a) ? this.each(function(c) {
                fb(this).toggleClass(a.call(this, c, this.className, b), b);
            }) : this.each(function() {
                if ("string" === c) for (var b, d = 0, e = fb(this), f = a.match(hb) || []; b = f[d++]; ) e.hasClass(b) ? e.removeClass(b) : e.addClass(b); else (c === R || "boolean" === c) && (this.className && qb.set(this, "__className__", this.className), 
                this.className = this.className || a === !1 ? "" : qb.get(this, "__className__") || "");
            });
        },
        hasClass: function(a) {
            for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++) if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(vb, " ").indexOf(b) >= 0) return !0;
            return !1;
        },
        val: function(a) {
            var c, d, e, f = this[0];
            return arguments.length ? (e = fb.isFunction(a), this.each(function(d) {
                var f;
                1 === this.nodeType && (f = e ? a.call(this, d, fb(this).val()) : a, null == f ? f = "" : "number" == typeof f ? f += "" : fb.isArray(f) && (f = fb.map(f, function(a) {
                    return null == a ? "" : a + "";
                })), c = fb.valHooks[this.type] || fb.valHooks[this.nodeName.toLowerCase()], c && "set" in c && c.set(this, f, "value") !== b || (this.value = f));
            })) : f ? (c = fb.valHooks[f.type] || fb.valHooks[f.nodeName.toLowerCase()], c && "get" in c && (d = c.get(f, "value")) !== b ? d : (d = f.value, 
            "string" == typeof d ? d.replace(wb, "") : null == d ? "" : d)) : void 0;
        }
    }), fb.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = a.attributes.value;
                    return !b || b.specified ? a.value : a.text;
                }
            },
            select: {
                get: function(a) {
                    for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++) if (c = d[i], 
                    !(!c.selected && i !== e || (fb.support.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && fb.nodeName(c.parentNode, "optgroup"))) {
                        if (b = fb(c).val(), f) return b;
                        g.push(b);
                    }
                    return g;
                },
                set: function(a, b) {
                    for (var c, d, e = a.options, f = fb.makeArray(b), g = e.length; g--; ) d = e[g], 
                    (d.selected = fb.inArray(fb(d).val(), f) >= 0) && (c = !0);
                    return c || (a.selectedIndex = -1), f;
                }
            }
        },
        attr: function(a, c, d) {
            var e, f, g = a.nodeType;
            return a && 3 !== g && 8 !== g && 2 !== g ? typeof a.getAttribute === R ? fb.prop(a, c, d) : (1 === g && fb.isXMLDoc(a) || (c = c.toLowerCase(), 
            e = fb.attrHooks[c] || (fb.expr.match.bool.test(c) ? ub : tb)), d === b ? e && "get" in e && null !== (f = e.get(a, c)) ? f : (f = fb.find.attr(a, c), 
            null == f ? b : f) : null !== d ? e && "set" in e && (f = e.set(a, d, c)) !== b ? f : (a.setAttribute(c, d + ""), 
            d) : (fb.removeAttr(a, c), b)) : void 0;
        },
        removeAttr: function(a, b) {
            var c, d, e = 0, f = b && b.match(hb);
            if (f && 1 === a.nodeType) for (;c = f[e++]; ) d = fb.propFix[c] || c, fb.expr.match.bool.test(c) && (a[d] = !1), 
            a.removeAttribute(c);
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (!fb.support.radioValue && "radio" === b && fb.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b), c && (a.value = c), b;
                    }
                }
            }
        },
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(a, c, d) {
            var e, f, g, h = a.nodeType;
            return a && 3 !== h && 8 !== h && 2 !== h ? (g = 1 !== h || !fb.isXMLDoc(a), g && (c = fb.propFix[c] || c, 
            f = fb.propHooks[c]), d !== b ? f && "set" in f && (e = f.set(a, d, c)) !== b ? e : a[c] = d : f && "get" in f && null !== (e = f.get(a, c)) ? e : a[c]) : void 0;
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    return a.hasAttribute("tabindex") || xb.test(a.nodeName) || a.href ? a.tabIndex : -1;
                }
            }
        }
    }), ub = {
        set: function(a, b, c) {
            return b === !1 ? fb.removeAttr(a, c) : a.setAttribute(c, c), c;
        }
    }, fb.each(fb.expr.match.bool.source.match(/\w+/g), function(a, c) {
        var d = fb.expr.attrHandle[c] || fb.find.attr;
        fb.expr.attrHandle[c] = function(a, c, e) {
            var f = fb.expr.attrHandle[c], g = e ? b : (fb.expr.attrHandle[c] = b) != d(a, c, e) ? c.toLowerCase() : null;
            return fb.expr.attrHandle[c] = f, g;
        };
    }), fb.support.optSelected || (fb.propHooks.selected = {
        get: function(a) {
            var b = a.parentNode;
            return b && b.parentNode && b.parentNode.selectedIndex, null;
        }
    }), fb.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        fb.propFix[this.toLowerCase()] = this;
    }), fb.each([ "radio", "checkbox" ], function() {
        fb.valHooks[this] = {
            set: function(a, c) {
                return fb.isArray(c) ? a.checked = fb.inArray(fb(a).val(), c) >= 0 : b;
            }
        }, fb.support.checkOn || (fb.valHooks[this].get = function(a) {
            return null === a.getAttribute("value") ? "on" : a.value;
        });
    });
    var yb = /^key/, zb = /^(?:mouse|contextmenu)|click/, Ab = /^(?:focusinfocus|focusoutblur)$/, Bb = /^([^.]*)(?:\.(.+)|)$/;
    fb.event = {
        global: {},
        add: function(a, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o, p, q, r = qb.get(a);
            if (r) {
                for (d.handler && (g = d, d = g.handler, f = g.selector), d.guid || (d.guid = fb.guid++), 
                (j = r.events) || (j = r.events = {}), (h = r.handle) || (h = r.handle = function(a) {
                    return typeof fb === R || a && fb.event.triggered === a.type ? b : fb.event.dispatch.apply(h.elem, arguments);
                }, h.elem = a), c = (c || "").match(hb) || [ "" ], k = c.length; k--; ) i = Bb.exec(c[k]) || [], 
                o = q = i[1], p = (i[2] || "").split(".").sort(), o && (m = fb.event.special[o] || {}, 
                o = (f ? m.delegateType : m.bindType) || o, m = fb.event.special[o] || {}, l = fb.extend({
                    type: o,
                    origType: q,
                    data: e,
                    handler: d,
                    guid: d.guid,
                    selector: f,
                    needsContext: f && fb.expr.match.needsContext.test(f),
                    namespace: p.join(".")
                }, g), (n = j[o]) || (n = j[o] = [], n.delegateCount = 0, m.setup && m.setup.call(a, e, p, h) !== !1 || a.addEventListener && a.addEventListener(o, h, !1)), 
                m.add && (m.add.call(a, l), l.handler.guid || (l.handler.guid = d.guid)), f ? n.splice(n.delegateCount++, 0, l) : n.push(l), 
                fb.event.global[o] = !0);
                a = null;
            }
        },
        remove: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = qb.hasData(a) && qb.get(a);
            if (q && (i = q.events)) {
                for (b = (b || "").match(hb) || [ "" ], j = b.length; j--; ) if (h = Bb.exec(b[j]) || [], 
                n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
                    for (l = fb.event.special[n] || {}, n = (d ? l.delegateType : l.bindType) || n, 
                    m = i[n] || [], h = h[2] && RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), 
                    g = f = m.length; f--; ) k = m[f], !e && p !== k.origType || c && c.guid !== k.guid || h && !h.test(k.namespace) || d && d !== k.selector && ("**" !== d || !k.selector) || (m.splice(f, 1), 
                    k.selector && m.delegateCount--, l.remove && l.remove.call(a, k));
                    g && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || fb.removeEvent(a, n, q.handle), 
                    delete i[n]);
                } else for (n in i) fb.event.remove(a, n + b[j], c, d, !0);
                fb.isEmptyObject(i) && (delete q.handle, qb.remove(a, "events"));
            }
        },
        trigger: function(c, d, e, f) {
            var g, h, i, j, k, l, m, n = [ e || T ], o = db.call(c, "type") ? c.type : c, p = db.call(c, "namespace") ? c.namespace.split(".") : [];
            if (h = i = e = e || T, 3 !== e.nodeType && 8 !== e.nodeType && !Ab.test(o + fb.event.triggered) && (o.indexOf(".") >= 0 && (p = o.split("."), 
            o = p.shift(), p.sort()), k = 0 > o.indexOf(":") && "on" + o, c = c[fb.expando] ? c : new fb.Event(o, "object" == typeof c && c), 
            c.isTrigger = f ? 2 : 3, c.namespace = p.join("."), c.namespace_re = c.namespace ? RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            c.result = b, c.target || (c.target = e), d = null == d ? [ c ] : fb.makeArray(d, [ c ]), 
            m = fb.event.special[o] || {}, f || !m.trigger || m.trigger.apply(e, d) !== !1)) {
                if (!f && !m.noBubble && !fb.isWindow(e)) {
                    for (j = m.delegateType || o, Ab.test(j + o) || (h = h.parentNode); h; h = h.parentNode) n.push(h), 
                    i = h;
                    i === (e.ownerDocument || T) && n.push(i.defaultView || i.parentWindow || a);
                }
                for (g = 0; (h = n[g++]) && !c.isPropagationStopped(); ) c.type = g > 1 ? j : m.bindType || o, 
                l = (qb.get(h, "events") || {})[c.type] && qb.get(h, "handle"), l && l.apply(h, d), 
                l = k && h[k], l && fb.acceptData(h) && l.apply && l.apply(h, d) === !1 && c.preventDefault();
                return c.type = o, f || c.isDefaultPrevented() || m._default && m._default.apply(n.pop(), d) !== !1 || !fb.acceptData(e) || k && fb.isFunction(e[o]) && !fb.isWindow(e) && (i = e[k], 
                i && (e[k] = null), fb.event.triggered = o, e[o](), fb.event.triggered = b, i && (e[k] = i)), 
                c.result;
            }
        },
        dispatch: function(a) {
            a = fb.event.fix(a);
            var c, d, e, f, g, h = [], i = ab.call(arguments), j = (qb.get(this, "events") || {})[a.type] || [], k = fb.event.special[a.type] || {};
            if (i[0] = a, a.delegateTarget = this, !k.preDispatch || k.preDispatch.call(this, a) !== !1) {
                for (h = fb.event.handlers.call(this, a, j), c = 0; (f = h[c++]) && !a.isPropagationStopped(); ) for (a.currentTarget = f.elem, 
                d = 0; (g = f.handlers[d++]) && !a.isImmediatePropagationStopped(); ) (!a.namespace_re || a.namespace_re.test(g.namespace)) && (a.handleObj = g, 
                a.data = g.data, e = ((fb.event.special[g.origType] || {}).handle || g.handler).apply(f.elem, i), 
                e !== b && (a.result = e) === !1 && (a.preventDefault(), a.stopPropagation()));
                return k.postDispatch && k.postDispatch.call(this, a), a.result;
            }
        },
        handlers: function(a, c) {
            var d, e, f, g, h = [], i = c.delegateCount, j = a.target;
            if (i && j.nodeType && (!a.button || "click" !== a.type)) for (;j !== this; j = j.parentNode || this) if (j.disabled !== !0 || "click" !== a.type) {
                for (e = [], d = 0; i > d; d++) g = c[d], f = g.selector + " ", e[f] === b && (e[f] = g.needsContext ? fb(f, this).index(j) >= 0 : fb.find(f, this, null, [ j ]).length), 
                e[f] && e.push(g);
                e.length && h.push({
                    elem: j,
                    handlers: e
                });
            }
            return c.length > i && h.push({
                elem: this,
                handlers: c.slice(i)
            }), h;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), 
                a;
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, c) {
                var d, e, f, g = c.button;
                return null == a.pageX && null != c.clientX && (d = a.target.ownerDocument || T, 
                e = d.documentElement, f = d.body, a.pageX = c.clientX + (e && e.scrollLeft || f && f.scrollLeft || 0) - (e && e.clientLeft || f && f.clientLeft || 0), 
                a.pageY = c.clientY + (e && e.scrollTop || f && f.scrollTop || 0) - (e && e.clientTop || f && f.clientTop || 0)), 
                a.which || g === b || (a.which = 1 & g ? 1 : 2 & g ? 3 : 4 & g ? 2 : 0), a;
            }
        },
        fix: function(a) {
            if (a[fb.expando]) return a;
            var b, c, d, e = a.type, f = a, g = this.fixHooks[e];
            for (g || (this.fixHooks[e] = g = zb.test(e) ? this.mouseHooks : yb.test(e) ? this.keyHooks : {}), 
            d = g.props ? this.props.concat(g.props) : this.props, a = new fb.Event(f), b = d.length; b--; ) c = d[b], 
            a[c] = f[c];
            return a.target || (a.target = T), 3 === a.target.nodeType && (a.target = a.target.parentNode), 
            g.filter ? g.filter(a, f) : a;
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    return this !== i() && this.focus ? (this.focus(), !1) : b;
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === i() && this.blur ? (this.blur(), !1) : b;
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return "checkbox" === this.type && this.click && fb.nodeName(this, "input") ? (this.click(), 
                    !1) : b;
                },
                _default: function(a) {
                    return fb.nodeName(a.target, "a");
                }
            },
            beforeunload: {
                postDispatch: function(a) {
                    a.result !== b && (a.originalEvent.returnValue = a.result);
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = fb.extend(new fb.Event(), c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? fb.event.trigger(e, null, b) : fb.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault();
        }
    }, fb.removeEvent = function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1);
    }, fb.Event = function(a, c) {
        return this instanceof fb.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, 
        this.isDefaultPrevented = a.defaultPrevented || a.getPreventDefault && a.getPreventDefault() ? g : h) : this.type = a, 
        c && fb.extend(this, c), this.timeStamp = a && a.timeStamp || fb.now(), this[fb.expando] = !0, 
        b) : new fb.Event(a, c);
    }, fb.Event.prototype = {
        isDefaultPrevented: h,
        isPropagationStopped: h,
        isImmediatePropagationStopped: h,
        preventDefault: function() {
            var a = this.originalEvent;
            this.isDefaultPrevented = g, a && a.preventDefault && a.preventDefault();
        },
        stopPropagation: function() {
            var a = this.originalEvent;
            this.isPropagationStopped = g, a && a.stopPropagation && a.stopPropagation();
        },
        stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = g, this.stopPropagation();
        }
    }, fb.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }, function(a, b) {
        fb.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c, d = this, e = a.relatedTarget, f = a.handleObj;
                return (!e || e !== d && !fb.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), 
                a.type = b), c;
            }
        };
    }), fb.support.focusinBubbles || fb.each({
        focus: "focusin",
        blur: "focusout"
    }, function(a, b) {
        var c = 0, d = function(a) {
            fb.event.simulate(b, a.target, fb.event.fix(a), !0);
        };
        fb.event.special[b] = {
            setup: function() {
                0 === c++ && T.addEventListener(a, d, !0);
            },
            teardown: function() {
                0 === --c && T.removeEventListener(a, d, !0);
            }
        };
    }), fb.fn.extend({
        on: function(a, c, d, e, f) {
            var g, i;
            if ("object" == typeof a) {
                "string" != typeof c && (d = d || c, c = b);
                for (i in a) this.on(i, c, d, a[i], f);
                return this;
            }
            if (null == d && null == e ? (e = c, d = c = b) : null == e && ("string" == typeof c ? (e = d, 
            d = b) : (e = d, d = c, c = b)), e === !1) e = h; else if (!e) return this;
            return 1 === f && (g = e, e = function(a) {
                return fb().off(a), g.apply(this, arguments);
            }, e.guid = g.guid || (g.guid = fb.guid++)), this.each(function() {
                fb.event.add(this, a, e, d, c);
            });
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1);
        },
        off: function(a, c, d) {
            var e, f;
            if (a && a.preventDefault && a.handleObj) return e = a.handleObj, fb(a.delegateTarget).off(e.namespace ? e.origType + "." + e.namespace : e.origType, e.selector, e.handler), 
            this;
            if ("object" == typeof a) {
                for (f in a) this.off(f, c, a[f]);
                return this;
            }
            return (c === !1 || "function" == typeof c) && (d = c, c = b), d === !1 && (d = h), 
            this.each(function() {
                fb.event.remove(this, a, d, c);
            });
        },
        trigger: function(a, b) {
            return this.each(function() {
                fb.event.trigger(a, b, this);
            });
        },
        triggerHandler: function(a, c) {
            var d = this[0];
            return d ? fb.event.trigger(a, c, d, !0) : b;
        }
    });
    var Cb = /^.[^:#\[\.,]*$/, Db = /^(?:parents|prev(?:Until|All))/, Eb = fb.expr.match.needsContext, Fb = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    fb.fn.extend({
        find: function(a) {
            var b, c = [], d = this, e = d.length;
            if ("string" != typeof a) return this.pushStack(fb(a).filter(function() {
                for (b = 0; e > b; b++) if (fb.contains(d[b], this)) return !0;
            }));
            for (b = 0; e > b; b++) fb.find(a, d[b], c);
            return c = this.pushStack(e > 1 ? fb.unique(c) : c), c.selector = this.selector ? this.selector + " " + a : a, 
            c;
        },
        has: function(a) {
            var b = fb(a, this), c = b.length;
            return this.filter(function() {
                for (var a = 0; c > a; a++) if (fb.contains(this, b[a])) return !0;
            });
        },
        not: function(a) {
            return this.pushStack(k(this, a || [], !0));
        },
        filter: function(a) {
            return this.pushStack(k(this, a || [], !1));
        },
        is: function(a) {
            return !!k(this, "string" == typeof a && Eb.test(a) ? fb(a) : a || [], !1).length;
        },
        closest: function(a, b) {
            for (var c, d = 0, e = this.length, f = [], g = Eb.test(a) || "string" != typeof a ? fb(a, b || this.context) : 0; e > d; d++) for (c = this[d]; c && c !== b; c = c.parentNode) if (11 > c.nodeType && (g ? g.index(c) > -1 : 1 === c.nodeType && fb.find.matchesSelector(c, a))) {
                c = f.push(c);
                break;
            }
            return this.pushStack(f.length > 1 ? fb.unique(f) : f);
        },
        index: function(a) {
            return a ? "string" == typeof a ? bb.call(fb(a), this[0]) : bb.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function(a, b) {
            var c = "string" == typeof a ? fb(a, b) : fb.makeArray(a && a.nodeType ? [ a ] : a), d = fb.merge(this.get(), c);
            return this.pushStack(fb.unique(d));
        },
        addBack: function(a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a));
        }
    }), fb.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b : null;
        },
        parents: function(a) {
            return fb.dir(a, "parentNode");
        },
        parentsUntil: function(a, b, c) {
            return fb.dir(a, "parentNode", c);
        },
        next: function(a) {
            return j(a, "nextSibling");
        },
        prev: function(a) {
            return j(a, "previousSibling");
        },
        nextAll: function(a) {
            return fb.dir(a, "nextSibling");
        },
        prevAll: function(a) {
            return fb.dir(a, "previousSibling");
        },
        nextUntil: function(a, b, c) {
            return fb.dir(a, "nextSibling", c);
        },
        prevUntil: function(a, b, c) {
            return fb.dir(a, "previousSibling", c);
        },
        siblings: function(a) {
            return fb.sibling((a.parentNode || {}).firstChild, a);
        },
        children: function(a) {
            return fb.sibling(a.firstChild);
        },
        contents: function(a) {
            return a.contentDocument || fb.merge([], a.childNodes);
        }
    }, function(a, b) {
        fb.fn[a] = function(c, d) {
            var e = fb.map(this, b, c);
            return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = fb.filter(d, e)), 
            this.length > 1 && (Fb[a] || fb.unique(e), Db.test(a) && e.reverse()), this.pushStack(e);
        };
    }), fb.extend({
        filter: function(a, b, c) {
            var d = b[0];
            return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? fb.find.matchesSelector(d, a) ? [ d ] : [] : fb.find.matches(a, fb.grep(b, function(a) {
                return 1 === a.nodeType;
            }));
        },
        dir: function(a, c, d) {
            for (var e = [], f = d !== b; (a = a[c]) && 9 !== a.nodeType; ) if (1 === a.nodeType) {
                if (f && fb(a).is(d)) break;
                e.push(a);
            }
            return e;
        },
        sibling: function(a, b) {
            for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
            return c;
        }
    });
    var Gb = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, Hb = /<([\w:]+)/, Ib = /<|&#?\w+;/, Jb = /<(?:script|style|link)/i, Kb = /^(?:checkbox|radio)$/i, Lb = /checked\s*(?:[^=]|=\s*.checked.)/i, Mb = /^$|\/(?:java|ecma)script/i, Nb = /^true\/(.*)/, Ob = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, Pb = {
        option: [ 1, "<select multiple='multiple'>", "</select>" ],
        thead: [ 1, "<table>", "</table>" ],
        col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: [ 0, "", "" ]
    };
    Pb.optgroup = Pb.option, Pb.tbody = Pb.tfoot = Pb.colgroup = Pb.caption = Pb.thead, 
    Pb.th = Pb.td, fb.fn.extend({
        text: function(a) {
            return fb.access(this, function(a) {
                return a === b ? fb.text(this) : this.empty().append((this[0] && this[0].ownerDocument || T).createTextNode(a));
            }, null, a, arguments.length);
        },
        append: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = l(this, a);
                    b.appendChild(a);
                }
            });
        },
        prepend: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = l(this, a);
                    b.insertBefore(a, b.firstChild);
                }
            });
        },
        before: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this);
            });
        },
        after: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling);
            });
        },
        remove: function(a, b) {
            for (var c, d = a ? fb.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || fb.cleanData(q(c)), 
            c.parentNode && (b && fb.contains(c.ownerDocument, c) && o(q(c, "script")), c.parentNode.removeChild(c));
            return this;
        },
        empty: function() {
            for (var a, b = 0; null != (a = this[b]); b++) 1 === a.nodeType && (fb.cleanData(q(a, !1)), 
            a.textContent = "");
            return this;
        },
        clone: function(a, b) {
            return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                return fb.clone(this, a, b);
            });
        },
        html: function(a) {
            return fb.access(this, function(a) {
                var c = this[0] || {}, d = 0, e = this.length;
                if (a === b && 1 === c.nodeType) return c.innerHTML;
                if ("string" == typeof a && !Jb.test(a) && !Pb[(Hb.exec(a) || [ "", "" ])[1].toLowerCase()]) {
                    a = a.replace(Gb, "<$1></$2>");
                    try {
                        for (;e > d; d++) c = this[d] || {}, 1 === c.nodeType && (fb.cleanData(q(c, !1)), 
                        c.innerHTML = a);
                        c = 0;
                    } catch (f) {}
                }
                c && this.empty().append(a);
            }, null, a, arguments.length);
        },
        replaceWith: function() {
            var a = fb.map(this, function(a) {
                return [ a.nextSibling, a.parentNode ];
            }), b = 0;
            return this.domManip(arguments, function(c) {
                var d = a[b++], e = a[b++];
                e && (d && d.parentNode !== e && (d = this.nextSibling), fb(this).remove(), e.insertBefore(c, d));
            }, !0), b ? this : this.remove();
        },
        detach: function(a) {
            return this.remove(a, !0);
        },
        domManip: function(a, b, c) {
            a = $.apply([], a);
            var d, e, f, g, h, i, j = 0, k = this.length, l = this, o = k - 1, p = a[0], r = fb.isFunction(p);
            if (r || !(1 >= k || "string" != typeof p || fb.support.checkClone) && Lb.test(p)) return this.each(function(d) {
                var e = l.eq(d);
                r && (a[0] = p.call(this, d, e.html())), e.domManip(a, b, c);
            });
            if (k && (d = fb.buildFragment(a, this[0].ownerDocument, !1, !c && this), e = d.firstChild, 
            1 === d.childNodes.length && (d = e), e)) {
                for (f = fb.map(q(d, "script"), m), g = f.length; k > j; j++) h = d, j !== o && (h = fb.clone(h, !0, !0), 
                g && fb.merge(f, q(h, "script"))), b.call(this[j], h, j);
                if (g) for (i = f[f.length - 1].ownerDocument, fb.map(f, n), j = 0; g > j; j++) h = f[j], 
                Mb.test(h.type || "") && !qb.access(h, "globalEval") && fb.contains(i, h) && (h.src ? fb._evalUrl(h.src) : fb.globalEval(h.textContent.replace(Ob, "")));
            }
            return this;
        }
    }), fb.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(a, b) {
        fb.fn[a] = function(a) {
            for (var c, d = [], e = fb(a), f = e.length - 1, g = 0; f >= g; g++) c = g === f ? this : this.clone(!0), 
            fb(e[g])[b](c), _.apply(d, c.get());
            return this.pushStack(d);
        };
    }), fb.extend({
        clone: function(a, b, c) {
            var d, e, f, g, h = a.cloneNode(!0), i = fb.contains(a.ownerDocument, a);
            if (!(fb.support.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || fb.isXMLDoc(a))) for (g = q(h), 
            f = q(a), d = 0, e = f.length; e > d; d++) r(f[d], g[d]);
            if (b) if (c) for (f = f || q(a), g = g || q(h), d = 0, e = f.length; e > d; d++) p(f[d], g[d]); else p(a, h);
            return g = q(h, "script"), g.length > 0 && o(g, !i && q(a, "script")), h;
        },
        buildFragment: function(a, b, c, d) {
            for (var e, f, g, h, i, j, k = 0, l = a.length, m = b.createDocumentFragment(), n = []; l > k; k++) if (e = a[k], 
            e || 0 === e) if ("object" === fb.type(e)) fb.merge(n, e.nodeType ? [ e ] : e); else if (Ib.test(e)) {
                for (f = f || m.appendChild(b.createElement("div")), g = (Hb.exec(e) || [ "", "" ])[1].toLowerCase(), 
                h = Pb[g] || Pb._default, f.innerHTML = h[1] + e.replace(Gb, "<$1></$2>") + h[2], 
                j = h[0]; j--; ) f = f.lastChild;
                fb.merge(n, f.childNodes), f = m.firstChild, f.textContent = "";
            } else n.push(b.createTextNode(e));
            for (m.textContent = "", k = 0; e = n[k++]; ) if ((!d || -1 === fb.inArray(e, d)) && (i = fb.contains(e.ownerDocument, e), 
            f = q(m.appendChild(e), "script"), i && o(f), c)) for (j = 0; e = f[j++]; ) Mb.test(e.type || "") && c.push(e);
            return m;
        },
        cleanData: function(a) {
            for (var c, d, f, g, h, i, j = fb.event.special, k = 0; (d = a[k]) !== b; k++) {
                if (e.accepts(d) && (h = d[qb.expando], h && (c = qb.cache[h]))) {
                    if (f = Object.keys(c.events || {}), f.length) for (i = 0; (g = f[i]) !== b; i++) j[g] ? fb.event.remove(d, g) : fb.removeEvent(d, g, c.handle);
                    qb.cache[h] && delete qb.cache[h];
                }
                delete pb.cache[d[pb.expando]];
            }
        },
        _evalUrl: function(a) {
            return fb.ajax({
                url: a,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                "throws": !0
            });
        }
    }), fb.fn.extend({
        wrapAll: function(a) {
            var b;
            return fb.isFunction(a) ? this.each(function(b) {
                fb(this).wrapAll(a.call(this, b));
            }) : (this[0] && (b = fb(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), 
            b.map(function() {
                for (var a = this; a.firstElementChild; ) a = a.firstElementChild;
                return a;
            }).append(this)), this);
        },
        wrapInner: function(a) {
            return fb.isFunction(a) ? this.each(function(b) {
                fb(this).wrapInner(a.call(this, b));
            }) : this.each(function() {
                var b = fb(this), c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a);
            });
        },
        wrap: function(a) {
            var b = fb.isFunction(a);
            return this.each(function(c) {
                fb(this).wrapAll(b ? a.call(this, c) : a);
            });
        },
        unwrap: function() {
            return this.parent().each(function() {
                fb.nodeName(this, "body") || fb(this).replaceWith(this.childNodes);
            }).end();
        }
    });
    var Qb, Rb, Sb = /^(none|table(?!-c[ea]).+)/, Tb = /^margin/, Ub = RegExp("^(" + gb + ")(.*)$", "i"), Vb = RegExp("^(" + gb + ")(?!px)[a-z%]+$", "i"), Wb = RegExp("^([+-])=(" + gb + ")", "i"), Xb = {
        BODY: "block"
    }, Yb = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, Zb = {
        letterSpacing: 0,
        fontWeight: 400
    }, $b = [ "Top", "Right", "Bottom", "Left" ], _b = [ "Webkit", "O", "Moz", "ms" ];
    fb.fn.extend({
        css: function(a, c) {
            return fb.access(this, function(a, c, d) {
                var e, f, g = {}, h = 0;
                if (fb.isArray(c)) {
                    for (e = u(a), f = c.length; f > h; h++) g[c[h]] = fb.css(a, c[h], !1, e);
                    return g;
                }
                return d !== b ? fb.style(a, c, d) : fb.css(a, c);
            }, a, c, arguments.length > 1);
        },
        show: function() {
            return v(this, !0);
        },
        hide: function() {
            return v(this);
        },
        toggle: function(a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                t(this) ? fb(this).show() : fb(this).hide();
            });
        }
    }), fb.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = Qb(a, "opacity");
                        return "" === c ? "1" : c;
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function(a, c, d, e) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var f, g, h, i = fb.camelCase(c), j = a.style;
                return c = fb.cssProps[i] || (fb.cssProps[i] = s(j, i)), h = fb.cssHooks[c] || fb.cssHooks[i], 
                d === b ? h && "get" in h && (f = h.get(a, !1, e)) !== b ? f : j[c] : (g = typeof d, 
                "string" === g && (f = Wb.exec(d)) && (d = (f[1] + 1) * f[2] + parseFloat(fb.css(a, c)), 
                g = "number"), null == d || "number" === g && isNaN(d) || ("number" !== g || fb.cssNumber[i] || (d += "px"), 
                fb.support.clearCloneStyle || "" !== d || 0 !== c.indexOf("background") || (j[c] = "inherit"), 
                h && "set" in h && (d = h.set(a, d, e)) === b || (j[c] = d)), b);
            }
        },
        css: function(a, c, d, e) {
            var f, g, h, i = fb.camelCase(c);
            return c = fb.cssProps[i] || (fb.cssProps[i] = s(a.style, i)), h = fb.cssHooks[c] || fb.cssHooks[i], 
            h && "get" in h && (f = h.get(a, !0, d)), f === b && (f = Qb(a, c, e)), "normal" === f && c in Zb && (f = Zb[c]), 
            "" === d || d ? (g = parseFloat(f), d === !0 || fb.isNumeric(g) ? g || 0 : f) : f;
        }
    }), Qb = function(a, c, d) {
        var e, f, g, h = d || u(a), i = h ? h.getPropertyValue(c) || h[c] : b, j = a.style;
        return h && ("" !== i || fb.contains(a.ownerDocument, a) || (i = fb.style(a, c)), 
        Vb.test(i) && Tb.test(c) && (e = j.width, f = j.minWidth, g = j.maxWidth, j.minWidth = j.maxWidth = j.width = i, 
        i = h.width, j.width = e, j.minWidth = f, j.maxWidth = g)), i;
    }, fb.each([ "height", "width" ], function(a, c) {
        fb.cssHooks[c] = {
            get: function(a, d, e) {
                return d ? 0 === a.offsetWidth && Sb.test(fb.css(a, "display")) ? fb.swap(a, Yb, function() {
                    return y(a, c, e);
                }) : y(a, c, e) : b;
            },
            set: function(a, b, d) {
                var e = d && u(a);
                return w(a, b, d ? x(a, c, d, fb.support.boxSizing && "border-box" === fb.css(a, "boxSizing", !1, e), e) : 0);
            }
        };
    }), fb(function() {
        fb.support.reliableMarginRight || (fb.cssHooks.marginRight = {
            get: function(a, c) {
                return c ? fb.swap(a, {
                    display: "inline-block"
                }, Qb, [ a, "marginRight" ]) : b;
            }
        }), !fb.support.pixelPosition && fb.fn.position && fb.each([ "top", "left" ], function(a, c) {
            fb.cssHooks[c] = {
                get: function(a, d) {
                    return d ? (d = Qb(a, c), Vb.test(d) ? fb(a).position()[c] + "px" : d) : b;
                }
            };
        });
    }), fb.expr && fb.expr.filters && (fb.expr.filters.hidden = function(a) {
        return 0 >= a.offsetWidth && 0 >= a.offsetHeight;
    }, fb.expr.filters.visible = function(a) {
        return !fb.expr.filters.hidden(a);
    }), fb.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(a, b) {
        fb.cssHooks[a + b] = {
            expand: function(c) {
                for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [ c ]; 4 > d; d++) e[a + $b[d] + b] = f[d] || f[d - 2] || f[0];
                return e;
            }
        }, Tb.test(a) || (fb.cssHooks[a + b].set = w);
    });
    var ac = /%20/g, bc = /\[\]$/, cc = /\r?\n/g, dc = /^(?:submit|button|image|reset|file)$/i, ec = /^(?:input|select|textarea|keygen)/i;
    fb.fn.extend({
        serialize: function() {
            return fb.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                var a = fb.prop(this, "elements");
                return a ? fb.makeArray(a) : this;
            }).filter(function() {
                var a = this.type;
                return this.name && !fb(this).is(":disabled") && ec.test(this.nodeName) && !dc.test(a) && (this.checked || !Kb.test(a));
            }).map(function(a, b) {
                var c = fb(this).val();
                return null == c ? null : fb.isArray(c) ? fb.map(c, function(a) {
                    return {
                        name: b.name,
                        value: a.replace(cc, "\r\n")
                    };
                }) : {
                    name: b.name,
                    value: c.replace(cc, "\r\n")
                };
            }).get();
        }
    }), fb.param = function(a, c) {
        var d, e = [], f = function(a, b) {
            b = fb.isFunction(b) ? b() : null == b ? "" : b, e[e.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b);
        };
        if (c === b && (c = fb.ajaxSettings && fb.ajaxSettings.traditional), fb.isArray(a) || a.jquery && !fb.isPlainObject(a)) fb.each(a, function() {
            f(this.name, this.value);
        }); else for (d in a) B(d, a[d], c, f);
        return e.join("&").replace(ac, "+");
    }, fb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
        fb.fn[b] = function(a, c) {
            return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b);
        };
    }), fb.fn.extend({
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a);
        },
        bind: function(a, b, c) {
            return this.on(a, null, b, c);
        },
        unbind: function(a, b) {
            return this.off(a, null, b);
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d);
        },
        undelegate: function(a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c);
        }
    });
    var fc, gc, hc = fb.now(), ic = /\?/, jc = /#.*$/, kc = /([?&])_=[^&]*/, lc = /^(.*?):[ \t]*([^\r\n]*)$/gm, mc = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, nc = /^(?:GET|HEAD)$/, oc = /^\/\//, pc = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, qc = fb.fn.load, rc = {}, sc = {}, tc = "*/".concat("*");
    try {
        gc = S.href;
    } catch (uc) {
        gc = T.createElement("a"), gc.href = "", gc = gc.href;
    }
    fc = pc.exec(gc.toLowerCase()) || [], fb.fn.load = function(a, c, d) {
        if ("string" != typeof a && qc) return qc.apply(this, arguments);
        var e, f, g, h = this, i = a.indexOf(" ");
        return i >= 0 && (e = a.slice(i), a = a.slice(0, i)), fb.isFunction(c) ? (d = c, 
        c = b) : c && "object" == typeof c && (f = "POST"), h.length > 0 && fb.ajax({
            url: a,
            type: f,
            dataType: "html",
            data: c
        }).done(function(a) {
            g = arguments, h.html(e ? fb("<div>").append(fb.parseHTML(a)).find(e) : a);
        }).complete(d && function(a, b) {
            h.each(d, g || [ a.responseText, b, a ]);
        }), this;
    }, fb.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(a, b) {
        fb.fn[b] = function(a) {
            return this.on(b, a);
        };
    }), fb.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: gc,
            type: "GET",
            isLocal: mc.test(fc[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": tc,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": fb.parseJSON,
                "text xml": fb.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(a, b) {
            return b ? E(E(a, fb.ajaxSettings), b) : E(fb.ajaxSettings, a);
        },
        ajaxPrefilter: C(rc),
        ajaxTransport: C(sc),
        ajax: function(a, c) {
            function d(a, c, d, h) {
                var j, l, s, t, v, x = c;
                2 !== u && (u = 2, i && clearTimeout(i), e = b, g = h || "", w.readyState = a > 0 ? 4 : 0, 
                j = a >= 200 && 300 > a || 304 === a, d && (t = F(m, w, d)), t = G(m, t, w, j), 
                j ? (m.ifModified && (v = w.getResponseHeader("Last-Modified"), v && (fb.lastModified[f] = v), 
                v = w.getResponseHeader("etag"), v && (fb.etag[f] = v)), 204 === a || "HEAD" === m.type ? x = "nocontent" : 304 === a ? x = "notmodified" : (x = t.state, 
                l = t.data, s = t.error, j = !s)) : (s = x, (a || !x) && (x = "error", 0 > a && (a = 0))), 
                w.status = a, w.statusText = (c || x) + "", j ? p.resolveWith(n, [ l, x, w ]) : p.rejectWith(n, [ w, x, s ]), 
                w.statusCode(r), r = b, k && o.trigger(j ? "ajaxSuccess" : "ajaxError", [ w, m, j ? l : s ]), 
                q.fireWith(n, [ w, x ]), k && (o.trigger("ajaxComplete", [ w, m ]), --fb.active || fb.event.trigger("ajaxStop")));
            }
            "object" == typeof a && (c = a, a = b), c = c || {};
            var e, f, g, h, i, j, k, l, m = fb.ajaxSetup({}, c), n = m.context || m, o = m.context && (n.nodeType || n.jquery) ? fb(n) : fb.event, p = fb.Deferred(), q = fb.Callbacks("once memory"), r = m.statusCode || {}, s = {}, t = {}, u = 0, v = "canceled", w = {
                readyState: 0,
                getResponseHeader: function(a) {
                    var b;
                    if (2 === u) {
                        if (!h) for (h = {}; b = lc.exec(g); ) h[b[1].toLowerCase()] = b[2];
                        b = h[a.toLowerCase()];
                    }
                    return null == b ? null : b;
                },
                getAllResponseHeaders: function() {
                    return 2 === u ? g : null;
                },
                setRequestHeader: function(a, b) {
                    var c = a.toLowerCase();
                    return u || (a = t[c] = t[c] || a, s[a] = b), this;
                },
                overrideMimeType: function(a) {
                    return u || (m.mimeType = a), this;
                },
                statusCode: function(a) {
                    var b;
                    if (a) if (2 > u) for (b in a) r[b] = [ r[b], a[b] ]; else w.always(a[w.status]);
                    return this;
                },
                abort: function(a) {
                    var b = a || v;
                    return e && e.abort(b), d(0, b), this;
                }
            };
            if (p.promise(w).complete = q.add, w.success = w.done, w.error = w.fail, m.url = ((a || m.url || gc) + "").replace(jc, "").replace(oc, fc[1] + "//"), 
            m.type = c.method || c.type || m.method || m.type, m.dataTypes = fb.trim(m.dataType || "*").toLowerCase().match(hb) || [ "" ], 
            null == m.crossDomain && (j = pc.exec(m.url.toLowerCase()), m.crossDomain = !(!j || j[1] === fc[1] && j[2] === fc[2] && (j[3] || ("http:" === j[1] ? "80" : "443")) === (fc[3] || ("http:" === fc[1] ? "80" : "443")))), 
            m.data && m.processData && "string" != typeof m.data && (m.data = fb.param(m.data, m.traditional)), 
            D(rc, m, c, w), 2 === u) return w;
            k = m.global, k && 0 === fb.active++ && fb.event.trigger("ajaxStart"), m.type = m.type.toUpperCase(), 
            m.hasContent = !nc.test(m.type), f = m.url, m.hasContent || (m.data && (f = m.url += (ic.test(f) ? "&" : "?") + m.data, 
            delete m.data), m.cache === !1 && (m.url = kc.test(f) ? f.replace(kc, "$1_=" + hc++) : f + (ic.test(f) ? "&" : "?") + "_=" + hc++)), 
            m.ifModified && (fb.lastModified[f] && w.setRequestHeader("If-Modified-Since", fb.lastModified[f]), 
            fb.etag[f] && w.setRequestHeader("If-None-Match", fb.etag[f])), (m.data && m.hasContent && m.contentType !== !1 || c.contentType) && w.setRequestHeader("Content-Type", m.contentType), 
            w.setRequestHeader("Accept", m.dataTypes[0] && m.accepts[m.dataTypes[0]] ? m.accepts[m.dataTypes[0]] + ("*" !== m.dataTypes[0] ? ", " + tc + "; q=0.01" : "") : m.accepts["*"]);
            for (l in m.headers) w.setRequestHeader(l, m.headers[l]);
            if (m.beforeSend && (m.beforeSend.call(n, w, m) === !1 || 2 === u)) return w.abort();
            v = "abort";
            for (l in {
                success: 1,
                error: 1,
                complete: 1
            }) w[l](m[l]);
            if (e = D(sc, m, c, w)) {
                w.readyState = 1, k && o.trigger("ajaxSend", [ w, m ]), m.async && m.timeout > 0 && (i = setTimeout(function() {
                    w.abort("timeout");
                }, m.timeout));
                try {
                    u = 1, e.send(s, d);
                } catch (x) {
                    if (!(2 > u)) throw x;
                    d(-1, x);
                }
            } else d(-1, "No Transport");
            return w;
        },
        getJSON: function(a, b, c) {
            return fb.get(a, b, c, "json");
        },
        getScript: function(a, c) {
            return fb.get(a, b, c, "script");
        }
    }), fb.each([ "get", "post" ], function(a, c) {
        fb[c] = function(a, d, e, f) {
            return fb.isFunction(d) && (f = f || e, e = d, d = b), fb.ajax({
                url: a,
                type: c,
                dataType: f,
                data: d,
                success: e
            });
        };
    }), fb.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(a) {
                return fb.globalEval(a), a;
            }
        }
    }), fb.ajaxPrefilter("script", function(a) {
        a.cache === b && (a.cache = !1), a.crossDomain && (a.type = "GET");
    }), fb.ajaxTransport("script", function(a) {
        if (a.crossDomain) {
            var b, c;
            return {
                send: function(d, e) {
                    b = fb("<script>").prop({
                        async: !0,
                        charset: a.scriptCharset,
                        src: a.url
                    }).on("load error", c = function(a) {
                        b.remove(), c = null, a && e("error" === a.type ? 404 : 200, a.type);
                    }), T.head.appendChild(b[0]);
                },
                abort: function() {
                    c && c();
                }
            };
        }
    });
    var vc = [], wc = /(=)\?(?=&|$)|\?\?/;
    fb.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var a = vc.pop() || fb.expando + "_" + hc++;
            return this[a] = !0, a;
        }
    }), fb.ajaxPrefilter("json jsonp", function(c, d, e) {
        var f, g, h, i = c.jsonp !== !1 && (wc.test(c.url) ? "url" : "string" == typeof c.data && !(c.contentType || "").indexOf("application/x-www-form-urlencoded") && wc.test(c.data) && "data");
        return i || "jsonp" === c.dataTypes[0] ? (f = c.jsonpCallback = fb.isFunction(c.jsonpCallback) ? c.jsonpCallback() : c.jsonpCallback, 
        i ? c[i] = c[i].replace(wc, "$1" + f) : c.jsonp !== !1 && (c.url += (ic.test(c.url) ? "&" : "?") + c.jsonp + "=" + f), 
        c.converters["script json"] = function() {
            return h || fb.error(f + " was not called"), h[0];
        }, c.dataTypes[0] = "json", g = a[f], a[f] = function() {
            h = arguments;
        }, e.always(function() {
            a[f] = g, c[f] && (c.jsonpCallback = d.jsonpCallback, vc.push(f)), h && fb.isFunction(g) && g(h[0]), 
            h = g = b;
        }), "script") : b;
    }), fb.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest();
        } catch (a) {}
    };
    var xc = fb.ajaxSettings.xhr(), yc = {
        0: 200,
        1223: 204
    }, zc = 0, Ac = {};
    a.ActiveXObject && fb(a).on("unload", function() {
        for (var a in Ac) Ac[a]();
        Ac = b;
    }), fb.support.cors = !!xc && "withCredentials" in xc, fb.support.ajax = xc = !!xc, 
    fb.ajaxTransport(function(a) {
        var c;
        return fb.support.cors || xc && !a.crossDomain ? {
            send: function(d, e) {
                var f, g, h = a.xhr();
                if (h.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields) for (f in a.xhrFields) h[f] = a.xhrFields[f];
                a.mimeType && h.overrideMimeType && h.overrideMimeType(a.mimeType), a.crossDomain || d["X-Requested-With"] || (d["X-Requested-With"] = "XMLHttpRequest");
                for (f in d) h.setRequestHeader(f, d[f]);
                c = function(a) {
                    return function() {
                        c && (delete Ac[g], c = h.onload = h.onerror = null, "abort" === a ? h.abort() : "error" === a ? e(h.status || 404, h.statusText) : e(yc[h.status] || h.status, h.statusText, "string" == typeof h.responseText ? {
                            text: h.responseText
                        } : b, h.getAllResponseHeaders()));
                    };
                }, h.onload = c(), h.onerror = c("error"), c = Ac[g = zc++] = c("abort"), h.send(a.hasContent && a.data || null);
            },
            abort: function() {
                c && c();
            }
        } : b;
    });
    var Bc, Cc, Dc = /^(?:toggle|show|hide)$/, Ec = RegExp("^(?:([+-])=|)(" + gb + ")([a-z%]*)$", "i"), Fc = /queueHooks$/, Gc = [ L ], Hc = {
        "*": [ function(a, b) {
            var c = this.createTween(a, b), d = c.cur(), e = Ec.exec(b), f = e && e[3] || (fb.cssNumber[a] ? "" : "px"), g = (fb.cssNumber[a] || "px" !== f && +d) && Ec.exec(fb.css(c.elem, a)), h = 1, i = 20;
            if (g && g[3] !== f) {
                f = f || g[3], e = e || [], g = +d || 1;
                do h = h || ".5", g /= h, fb.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i);
            }
            return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), 
            c;
        } ]
    };
    fb.Animation = fb.extend(J, {
        tweener: function(a, b) {
            fb.isFunction(a) ? (b = a, a = [ "*" ]) : a = a.split(" ");
            for (var c, d = 0, e = a.length; e > d; d++) c = a[d], Hc[c] = Hc[c] || [], Hc[c].unshift(b);
        },
        prefilter: function(a, b) {
            b ? Gc.unshift(a) : Gc.push(a);
        }
    }), fb.Tween = M, M.prototype = {
        constructor: M,
        init: function(a, b, c, d, e, f) {
            this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), 
            this.end = d, this.unit = f || (fb.cssNumber[c] ? "" : "px");
        },
        cur: function() {
            var a = M.propHooks[this.prop];
            return a && a.get ? a.get(this) : M.propHooks._default.get(this);
        },
        run: function(a) {
            var b, c = M.propHooks[this.prop];
            return this.pos = b = this.options.duration ? fb.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a, 
            this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            c && c.set ? c.set(this) : M.propHooks._default.set(this), this;
        }
    }, M.prototype.init.prototype = M.prototype, M.propHooks = {
        _default: {
            get: function(a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = fb.css(a.elem, a.prop, ""), 
                b && "auto" !== b ? b : 0) : a.elem[a.prop];
            },
            set: function(a) {
                fb.fx.step[a.prop] ? fb.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[fb.cssProps[a.prop]] || fb.cssHooks[a.prop]) ? fb.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now;
            }
        }
    }, M.propHooks.scrollTop = M.propHooks.scrollLeft = {
        set: function(a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now);
        }
    }, fb.each([ "toggle", "show", "hide" ], function(a, b) {
        var c = fb.fn[b];
        fb.fn[b] = function(a, d, e) {
            return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(N(b, !0), a, d, e);
        };
    }), fb.fn.extend({
        fadeTo: function(a, b, c, d) {
            return this.filter(t).css("opacity", 0).show().end().animate({
                opacity: b
            }, a, c, d);
        },
        animate: function(a, b, c, d) {
            var e = fb.isEmptyObject(a), f = fb.speed(b, c, d), g = function() {
                var b = J(this, fb.extend({}, a), f);
                (e || qb.get(this, "finish")) && b.stop(!0);
            };
            return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g);
        },
        stop: function(a, c, d) {
            var e = function(a) {
                var b = a.stop;
                delete a.stop, b(d);
            };
            return "string" != typeof a && (d = c, c = a, a = b), c && a !== !1 && this.queue(a || "fx", []), 
            this.each(function() {
                var b = !0, c = null != a && a + "queueHooks", f = fb.timers, g = qb.get(this);
                if (c) g[c] && g[c].stop && e(g[c]); else for (c in g) g[c] && g[c].stop && Fc.test(c) && e(g[c]);
                for (c = f.length; c--; ) f[c].elem !== this || null != a && f[c].queue !== a || (f[c].anim.stop(d), 
                b = !1, f.splice(c, 1));
                (b || !d) && fb.dequeue(this, a);
            });
        },
        finish: function(a) {
            return a !== !1 && (a = a || "fx"), this.each(function() {
                var b, c = qb.get(this), d = c[a + "queue"], e = c[a + "queueHooks"], f = fb.timers, g = d ? d.length : 0;
                for (c.finish = !0, fb.queue(this, a, []), e && e.stop && e.stop.call(this, !0), 
                b = f.length; b--; ) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), 
                f.splice(b, 1));
                for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                delete c.finish;
            });
        }
    }), fb.each({
        slideDown: N("show"),
        slideUp: N("hide"),
        slideToggle: N("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(a, b) {
        fb.fn[a] = function(a, c, d) {
            return this.animate(b, a, c, d);
        };
    }), fb.speed = function(a, b, c) {
        var d = a && "object" == typeof a ? fb.extend({}, a) : {
            complete: c || !c && b || fb.isFunction(a) && a,
            duration: a,
            easing: c && b || b && !fb.isFunction(b) && b
        };
        return d.duration = fb.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in fb.fx.speeds ? fb.fx.speeds[d.duration] : fb.fx.speeds._default, 
        (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
            fb.isFunction(d.old) && d.old.call(this), d.queue && fb.dequeue(this, d.queue);
        }, d;
    }, fb.easing = {
        linear: function(a) {
            return a;
        },
        swing: function(a) {
            return .5 - Math.cos(a * Math.PI) / 2;
        }
    }, fb.timers = [], fb.fx = M.prototype.init, fb.fx.tick = function() {
        var a, c = fb.timers, d = 0;
        for (Bc = fb.now(); c.length > d; d++) a = c[d], a() || c[d] !== a || c.splice(d--, 1);
        c.length || fb.fx.stop(), Bc = b;
    }, fb.fx.timer = function(a) {
        a() && fb.timers.push(a) && fb.fx.start();
    }, fb.fx.interval = 13, fb.fx.start = function() {
        Cc || (Cc = setInterval(fb.fx.tick, fb.fx.interval));
    }, fb.fx.stop = function() {
        clearInterval(Cc), Cc = null;
    }, fb.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, fb.fx.step = {}, fb.expr && fb.expr.filters && (fb.expr.filters.animated = function(a) {
        return fb.grep(fb.timers, function(b) {
            return a === b.elem;
        }).length;
    }), fb.fn.offset = function(a) {
        if (arguments.length) return a === b ? this : this.each(function(b) {
            fb.offset.setOffset(this, a, b);
        });
        var c, d, e = this[0], f = {
            top: 0,
            left: 0
        }, g = e && e.ownerDocument;
        return g ? (c = g.documentElement, fb.contains(c, e) ? (typeof e.getBoundingClientRect !== R && (f = e.getBoundingClientRect()), 
        d = O(g), {
            top: f.top + d.pageYOffset - c.clientTop,
            left: f.left + d.pageXOffset - c.clientLeft
        }) : f) : void 0;
    }, fb.offset = {
        setOffset: function(a, b, c) {
            var d, e, f, g, h, i, j, k = fb.css(a, "position"), l = fb(a), m = {};
            "static" === k && (a.style.position = "relative"), h = l.offset(), f = fb.css(a, "top"), 
            i = fb.css(a, "left"), j = ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1, 
            j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), 
            fb.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), 
            null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m);
        }
    }, fb.fn.extend({
        position: function() {
            if (this[0]) {
                var a, b, c = this[0], d = {
                    top: 0,
                    left: 0
                };
                return "fixed" === fb.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), 
                b = this.offset(), fb.nodeName(a[0], "html") || (d = a.offset()), d.top += fb.css(a[0], "borderTopWidth", !0), 
                d.left += fb.css(a[0], "borderLeftWidth", !0)), {
                    top: b.top - d.top - fb.css(c, "marginTop", !0),
                    left: b.left - d.left - fb.css(c, "marginLeft", !0)
                };
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var a = this.offsetParent || U; a && !fb.nodeName(a, "html") && "static" === fb.css(a, "position"); ) a = a.offsetParent;
                return a || U;
            });
        }
    }), fb.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(c, d) {
        var e = "pageYOffset" === d;
        fb.fn[c] = function(f) {
            return fb.access(this, function(c, f, g) {
                var h = O(c);
                return g === b ? h ? h[d] : c[f] : (h ? h.scrollTo(e ? a.pageXOffset : g, e ? g : a.pageYOffset) : c[f] = g, 
                b);
            }, c, f, arguments.length, null);
        };
    }), fb.each({
        Height: "height",
        Width: "width"
    }, function(a, c) {
        fb.each({
            padding: "inner" + a,
            content: c,
            "": "outer" + a
        }, function(d, e) {
            fb.fn[e] = function(e, f) {
                var g = arguments.length && (d || "boolean" != typeof e), h = d || (e === !0 || f === !0 ? "margin" : "border");
                return fb.access(this, function(c, d, e) {
                    var f;
                    return fb.isWindow(c) ? c.document.documentElement["client" + a] : 9 === c.nodeType ? (f = c.documentElement, 
                    Math.max(c.body["scroll" + a], f["scroll" + a], c.body["offset" + a], f["offset" + a], f["client" + a])) : e === b ? fb.css(c, d, h) : fb.style(c, d, e, h);
                }, c, g ? e : b, g, null);
            };
        });
    }), fb.fn.size = function() {
        return this.length;
    }, fb.fn.andSelf = fb.fn.addBack, "object" == typeof module && module && "object" == typeof module.exports ? module.exports = fb : "function" == typeof define && define.amd && define("jquery", [], function() {
        return fb;
    }), "object" == typeof a && "object" == typeof a.document && (a.jQuery = a.$ = fb);
}(window), function() {
    function a(a, b, c) {
        c = (c || 0) - 1;
        for (var d = a ? a.length : 0; ++c < d; ) if (a[c] === b) return c;
        return -1;
    }
    function b(b, c) {
        var d = typeof c;
        if (b = b.l, "boolean" == d || null == c) return b[c] ? 0 : -1;
        "number" != d && "string" != d && (d = "object");
        var e = "number" == d ? c : r + c;
        return b = (b = b[d]) && b[e], "object" == d ? b && -1 < a(b, c) ? 0 : -1 : b ? 0 : -1;
    }
    function c(a) {
        var b = this.l, c = typeof a;
        if ("boolean" == c || null == a) b[a] = !0; else {
            "number" != c && "string" != c && (c = "object");
            var d = "number" == c ? a : r + a, b = b[c] || (b[c] = {});
            "object" == c ? (b[d] || (b[d] = [])).push(a) : b[d] = !0;
        }
    }
    function d(a) {
        return a.charCodeAt(0);
    }
    function e(a, b) {
        for (var c = a.m, d = b.m, e = -1, f = c.length; ++e < f; ) {
            var g = c[e], h = d[e];
            if (g !== h) {
                if (g > h || "undefined" == typeof g) return 1;
                if (h > g || "undefined" == typeof h) return -1;
            }
        }
        return a.n - b.n;
    }
    function f(a) {
        var b = -1, d = a.length, e = a[0], f = a[d / 2 | 0], g = a[d - 1];
        if (e && "object" == typeof e && f && "object" == typeof f && g && "object" == typeof g) return !1;
        for (e = i(), e["false"] = e["null"] = e["true"] = e.undefined = !1, f = i(), f.k = a, 
        f.l = e, f.push = c; ++b < d; ) f.push(a[b]);
        return f;
    }
    function g(a) {
        return "\\" + U[a];
    }
    function h() {
        return o.pop() || [];
    }
    function i() {
        return p.pop() || {
            k: null,
            l: null,
            m: null,
            "false": !1,
            n: 0,
            "null": !1,
            number: null,
            object: null,
            push: null,
            string: null,
            "true": !1,
            undefined: !1,
            o: null
        };
    }
    function j(a) {
        a.length = 0, o.length < t && o.push(a);
    }
    function k(a) {
        var b = a.l;
        b && k(b), a.k = a.l = a.m = a.object = a.number = a.string = a.o = null, p.length < t && p.push(a);
    }
    function l(a, b, c) {
        b || (b = 0), "undefined" == typeof c && (c = a ? a.length : 0);
        var d = -1;
        c = c - b || 0;
        for (var e = Array(0 > c ? 0 : c); ++d < c; ) e[d] = a[b + d];
        return e;
    }
    function m(c) {
        function o(a, b, c) {
            if (!a || !T[typeof a]) return a;
            b = b && "undefined" == typeof c ? b : bb(b, c, 3);
            for (var d = -1, e = T[typeof a] && Kc(a), f = e ? e.length : 0; ++d < f && (c = e[d], 
            !1 !== b(a[c], c, a)); ) ;
            return a;
        }
        function p(a, b, c) {
            var d;
            if (!a || !T[typeof a]) return a;
            b = b && "undefined" == typeof c ? b : bb(b, c, 3);
            for (d in a) if (!1 === b(a[d], d, a)) break;
            return a;
        }
        function t(a, b, c) {
            var d, e = a, f = e;
            if (!e) return f;
            for (var g = arguments, h = 0, i = "number" == typeof c ? 2 : g.length; ++h < i; ) if ((e = g[h]) && T[typeof e]) for (var j = -1, k = T[typeof e] && Kc(e), l = k ? k.length : 0; ++j < l; ) d = k[j], 
            "undefined" == typeof f[d] && (f[d] = e[d]);
            return f;
        }
        function U(a, b, c) {
            var d, e = a, f = e;
            if (!e) return f;
            var g = arguments, h = 0, i = "number" == typeof c ? 2 : g.length;
            if (i > 3 && "function" == typeof g[i - 2]) var j = bb(g[--i - 1], g[i--], 2); else i > 2 && "function" == typeof g[i - 1] && (j = g[--i]);
            for (;++h < i; ) if ((e = g[h]) && T[typeof e]) for (var k = -1, l = T[typeof e] && Kc(e), m = l ? l.length : 0; ++k < m; ) d = l[k], 
            f[d] = j ? j(f[d], e[d]) : e[d];
            return f;
        }
        function W(a) {
            var b, c = [];
            if (!a || !T[typeof a]) return c;
            for (b in a) rc.call(a, b) && c.push(b);
            return c;
        }
        function X(a) {
            return a && "object" == typeof a && !Jc(a) && rc.call(a, "__wrapped__") ? a : new Y(a);
        }
        function Y(a, b) {
            this.__chain__ = !!b, this.__wrapped__ = a;
        }
        function Z(a) {
            function b() {
                if (d) {
                    var a = l(d);
                    sc.apply(a, arguments);
                }
                if (this instanceof b) {
                    var f = ab(c.prototype), a = c.apply(f, a || arguments);
                    return vb(a) ? a : f;
                }
                return c.apply(e, a || arguments);
            }
            var c = a[0], d = a[2], e = a[4];
            return Ic(b, a), b;
        }
        function _(a, b, c, d, e) {
            if (c) {
                var f = c(a);
                if ("undefined" != typeof f) return f;
            }
            if (!vb(a)) return a;
            var g = kc.call(a);
            if (!Q[g]) return a;
            var i = Gc[g];
            switch (g) {
              case J:
              case K:
                return new i(+a);

              case M:
              case P:
                return new i(a);

              case O:
                return f = i(a.source, z.exec(a)), f.lastIndex = a.lastIndex, f;
            }
            if (g = Jc(a), b) {
                var k = !d;
                d || (d = h()), e || (e = h());
                for (var m = d.length; m--; ) if (d[m] == a) return e[m];
                f = g ? i(a.length) : {};
            } else f = g ? l(a) : U({}, a);
            return g && (rc.call(a, "index") && (f.index = a.index), rc.call(a, "input") && (f.input = a.input)), 
            b ? (d.push(a), e.push(f), (g ? Db : o)(a, function(a, g) {
                f[g] = _(a, b, c, d, e);
            }), k && (j(d), j(e)), f) : f;
        }
        function ab(a) {
            return vb(a) ? xc(a) : {};
        }
        function bb(a, b, c) {
            if ("function" != typeof a) return Ub;
            if ("undefined" == typeof b || !("prototype" in a)) return a;
            var d = a.__bindData__;
            if ("undefined" == typeof d && (Hc.funcNames && (d = !a.name), d = d || !Hc.funcDecomp, 
            !d)) {
                var e = pc.call(a);
                Hc.funcNames || (d = !A.test(e)), d || (d = E.test(e), Ic(a, d));
            }
            if (!1 === d || !0 !== d && 1 & d[1]) return a;
            switch (c) {
              case 1:
                return function(c) {
                    return a.call(b, c);
                };

              case 2:
                return function(c, d) {
                    return a.call(b, c, d);
                };

              case 3:
                return function(c, d, e) {
                    return a.call(b, c, d, e);
                };

              case 4:
                return function(c, d, e, f) {
                    return a.call(b, c, d, e, f);
                };
            }
            return Sb(a, b);
        }
        function cb(a) {
            function b() {
                var a = i ? g : this;
                if (e) {
                    var o = l(e);
                    sc.apply(o, arguments);
                }
                return (f || k) && (o || (o = l(arguments)), f && sc.apply(o, f), k && o.length < h) ? (d |= 16, 
                cb([ c, m ? d : -4 & d, o, null, g, h ])) : (o || (o = arguments), j && (c = a[n]), 
                this instanceof b ? (a = ab(c.prototype), o = c.apply(a, o), vb(o) ? o : a) : c.apply(a, o));
            }
            var c = a[0], d = a[1], e = a[2], f = a[3], g = a[4], h = a[5], i = 1 & d, j = 2 & d, k = 4 & d, m = 8 & d, n = c;
            return Ic(b, a), b;
        }
        function db(c, d) {
            var e = -1, g = mb(), h = c ? c.length : 0, i = h >= s && g === a, j = [];
            if (i) {
                var l = f(d);
                l ? (g = b, d = l) : i = !1;
            }
            for (;++e < h; ) l = c[e], 0 > g(d, l) && j.push(l);
            return i && k(d), j;
        }
        function eb(a, b, c, d) {
            d = (d || 0) - 1;
            for (var e = a ? a.length : 0, f = []; ++d < e; ) {
                var g = a[d];
                if (g && "object" == typeof g && "number" == typeof g.length && (Jc(g) || qb(g))) {
                    b || (g = eb(g, b, c));
                    var h = -1, i = g.length, j = f.length;
                    for (f.length += i; ++h < i; ) f[j++] = g[h];
                } else c || f.push(g);
            }
            return f;
        }
        function fb(a, b, c, d, e, f) {
            if (c) {
                var g = c(a, b);
                if ("undefined" != typeof g) return !!g;
            }
            if (a === b) return 0 !== a || 1 / a == 1 / b;
            if (a === a && !(a && T[typeof a] || b && T[typeof b])) return !1;
            if (null == a || null == b) return a === b;
            var i = kc.call(a), k = kc.call(b);
            if (i == H && (i = N), k == H && (k = N), i != k) return !1;
            switch (i) {
              case J:
              case K:
                return +a == +b;

              case M:
                return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;

              case O:
              case P:
                return a == fc(b);
            }
            if (k = i == I, !k) {
                var l = rc.call(a, "__wrapped__"), m = rc.call(b, "__wrapped__");
                if (l || m) return fb(l ? a.__wrapped__ : a, m ? b.__wrapped__ : b, c, d, e, f);
                if (i != N) return !1;
                if (i = a.constructor, l = b.constructor, i != l && !(ub(i) && i instanceof i && ub(l) && l instanceof l) && "constructor" in a && "constructor" in b) return !1;
            }
            for (i = !e, e || (e = h()), f || (f = h()), l = e.length; l--; ) if (e[l] == a) return f[l] == b;
            var n = 0, g = !0;
            if (e.push(a), f.push(b), k) {
                if (l = a.length, n = b.length, (g = n == l) || d) for (;n--; ) if (k = l, m = b[n], 
                d) for (;k-- && !(g = fb(a[k], m, c, d, e, f)); ) ; else if (!(g = fb(a[n], m, c, d, e, f))) break;
            } else p(b, function(b, h, i) {
                return rc.call(i, h) ? (n++, g = rc.call(a, h) && fb(a[h], b, c, d, e, f)) : void 0;
            }), g && !d && p(a, function(a, b, c) {
                return rc.call(c, b) ? g = -1 < --n : void 0;
            });
            return e.pop(), f.pop(), i && (j(e), j(f)), g;
        }
        function gb(a, b, c, d, e) {
            (Jc(b) ? Db : o)(b, function(b, f) {
                var g, h, i = b, j = a[f];
                if (b && ((h = Jc(b)) || Pc(b))) {
                    for (i = d.length; i--; ) if (g = d[i] == b) {
                        j = e[i];
                        break;
                    }
                    if (!g) {
                        var k;
                        c && (i = c(j, b), k = "undefined" != typeof i) && (j = i), k || (j = h ? Jc(j) ? j : [] : Pc(j) ? j : {}), 
                        d.push(b), e.push(j), k || gb(j, b, c, d, e);
                    }
                } else c && (i = c(j, b), "undefined" == typeof i && (i = b)), "undefined" != typeof i && (j = i);
                a[f] = j;
            });
        }
        function hb(a, b) {
            return a + oc(Fc() * (b - a + 1));
        }
        function ib(c, d, e) {
            var g = -1, i = mb(), l = c ? c.length : 0, m = [], n = !d && l >= s && i === a, o = e || n ? h() : m;
            for (n && (o = f(o), i = b); ++g < l; ) {
                var p = c[g], q = e ? e(p, g, c) : p;
                (d ? !g || o[o.length - 1] !== q : 0 > i(o, q)) && ((e || n) && o.push(q), m.push(p));
            }
            return n ? (j(o.k), k(o)) : e && j(o), m;
        }
        function jb(a) {
            return function(b, c, d) {
                var e = {};
                c = X.createCallback(c, d, 3), d = -1;
                var f = b ? b.length : 0;
                if ("number" == typeof f) for (;++d < f; ) {
                    var g = b[d];
                    a(e, g, c(g, d, b), b);
                } else o(b, function(b, d, f) {
                    a(e, b, c(b, d, f), f);
                });
                return e;
            };
        }
        function kb(a, b, c, d, e, f) {
            var g = 1 & b, h = 4 & b, i = 16 & b, j = 32 & b;
            if (!(2 & b || ub(a))) throw new gc();
            i && !c.length && (b &= -17, i = c = !1), j && !d.length && (b &= -33, j = d = !1);
            var k = a && a.__bindData__;
            return k && !0 !== k ? (k = l(k), k[2] && (k[2] = l(k[2])), k[3] && (k[3] = l(k[3])), 
            !g || 1 & k[1] || (k[4] = e), !g && 1 & k[1] && (b |= 8), !h || 4 & k[1] || (k[5] = f), 
            i && sc.apply(k[2] || (k[2] = []), c), j && vc.apply(k[3] || (k[3] = []), d), k[1] |= b, 
            kb.apply(null, k)) : (1 == b || 17 === b ? Z : cb)([ a, b, c, d, e, f ]);
        }
        function lb(a) {
            return Lc[a];
        }
        function mb() {
            var b = (b = X.indexOf) === Mb ? a : b;
            return b;
        }
        function nb(a) {
            return "function" == typeof a && lc.test(a);
        }
        function ob(a) {
            var b, c;
            return a && kc.call(a) == N && (b = a.constructor, !ub(b) || b instanceof b) ? (p(a, function(a, b) {
                c = b;
            }), "undefined" == typeof c || rc.call(a, c)) : !1;
        }
        function pb(a) {
            return Mc[a];
        }
        function qb(a) {
            return a && "object" == typeof a && "number" == typeof a.length && kc.call(a) == H || !1;
        }
        function rb(a, b, c) {
            var d = Kc(a), e = d.length;
            for (b = bb(b, c, 3); e-- && (c = d[e], !1 !== b(a[c], c, a)); ) ;
            return a;
        }
        function sb(a) {
            var b = [];
            return p(a, function(a, c) {
                ub(a) && b.push(c);
            }), b.sort();
        }
        function tb(a) {
            for (var b = -1, c = Kc(a), d = c.length, e = {}; ++b < d; ) {
                var f = c[b];
                e[a[f]] = f;
            }
            return e;
        }
        function ub(a) {
            return "function" == typeof a;
        }
        function vb(a) {
            return !(!a || !T[typeof a]);
        }
        function wb(a) {
            return "number" == typeof a || a && "object" == typeof a && kc.call(a) == M || !1;
        }
        function xb(a) {
            return "string" == typeof a || a && "object" == typeof a && kc.call(a) == P || !1;
        }
        function yb(a) {
            for (var b = -1, c = Kc(a), d = c.length, e = Zb(d); ++b < d; ) e[b] = a[c[b]];
            return e;
        }
        function zb(a, b, c) {
            var d = -1, e = mb(), f = a ? a.length : 0, g = !1;
            return c = (0 > c ? Cc(0, f + c) : c) || 0, Jc(a) ? g = -1 < e(a, b, c) : "number" == typeof f ? g = -1 < (xb(a) ? a.indexOf(b, c) : e(a, b, c)) : o(a, function(a) {
                return ++d < c ? void 0 : !(g = a === b);
            }), g;
        }
        function Ab(a, b, c) {
            var d = !0;
            b = X.createCallback(b, c, 3), c = -1;
            var e = a ? a.length : 0;
            if ("number" == typeof e) for (;++c < e && (d = !!b(a[c], c, a)); ) ; else o(a, function(a, c, e) {
                return d = !!b(a, c, e);
            });
            return d;
        }
        function Bb(a, b, c) {
            var d = [];
            b = X.createCallback(b, c, 3), c = -1;
            var e = a ? a.length : 0;
            if ("number" == typeof e) for (;++c < e; ) {
                var f = a[c];
                b(f, c, a) && d.push(f);
            } else o(a, function(a, c, e) {
                b(a, c, e) && d.push(a);
            });
            return d;
        }
        function Cb(a, b, c) {
            b = X.createCallback(b, c, 3), c = -1;
            var d = a ? a.length : 0;
            if ("number" != typeof d) {
                var e;
                return o(a, function(a, c, d) {
                    return b(a, c, d) ? (e = a, !1) : void 0;
                }), e;
            }
            for (;++c < d; ) {
                var f = a[c];
                if (b(f, c, a)) return f;
            }
        }
        function Db(a, b, c) {
            var d = -1, e = a ? a.length : 0;
            if (b = b && "undefined" == typeof c ? b : bb(b, c, 3), "number" == typeof e) for (;++d < e && !1 !== b(a[d], d, a); ) ; else o(a, b);
            return a;
        }
        function Eb(a, b, c) {
            var d = a ? a.length : 0;
            if (b = b && "undefined" == typeof c ? b : bb(b, c, 3), "number" == typeof d) for (;d-- && !1 !== b(a[d], d, a); ) ; else {
                var e = Kc(a), d = e.length;
                o(a, function(a, c, f) {
                    return c = e ? e[--d] : --d, b(f[c], c, f);
                });
            }
            return a;
        }
        function Fb(a, b, c) {
            var d = -1, e = a ? a.length : 0;
            if (b = X.createCallback(b, c, 3), "number" == typeof e) for (var f = Zb(e); ++d < e; ) f[d] = b(a[d], d, a); else f = [], 
            o(a, function(a, c, e) {
                f[++d] = b(a, c, e);
            });
            return f;
        }
        function Gb(a, b, c) {
            var e = -1 / 0, f = e;
            if ("function" != typeof b && c && c[b] === a && (b = null), null == b && Jc(a)) {
                c = -1;
                for (var g = a.length; ++c < g; ) {
                    var h = a[c];
                    h > f && (f = h);
                }
            } else b = null == b && xb(a) ? d : X.createCallback(b, c, 3), Db(a, function(a, c, d) {
                c = b(a, c, d), c > e && (e = c, f = a);
            });
            return f;
        }
        function Hb(a, b, c, d) {
            if (!a) return c;
            var e = 3 > arguments.length;
            b = X.createCallback(b, d, 4);
            var f = -1, g = a.length;
            if ("number" == typeof g) for (e && (c = a[++f]); ++f < g; ) c = b(c, a[f], f, a); else o(a, function(a, d, f) {
                c = e ? (e = !1, a) : b(c, a, d, f);
            });
            return c;
        }
        function Ib(a, b, c, d) {
            var e = 3 > arguments.length;
            return b = X.createCallback(b, d, 4), Eb(a, function(a, d, f) {
                c = e ? (e = !1, a) : b(c, a, d, f);
            }), c;
        }
        function Jb(a) {
            var b = -1, c = a ? a.length : 0, d = Zb("number" == typeof c ? c : 0);
            return Db(a, function(a) {
                var c = hb(0, ++b);
                d[b] = d[c], d[c] = a;
            }), d;
        }
        function Kb(a, b, c) {
            var d;
            b = X.createCallback(b, c, 3), c = -1;
            var e = a ? a.length : 0;
            if ("number" == typeof e) for (;++c < e && !(d = b(a[c], c, a)); ) ; else o(a, function(a, c, e) {
                return !(d = b(a, c, e));
            });
            return !!d;
        }
        function Lb(a, b, c) {
            var d = 0, e = a ? a.length : 0;
            if ("number" != typeof b && null != b) {
                var f = -1;
                for (b = X.createCallback(b, c, 3); ++f < e && b(a[f], f, a); ) d++;
            } else if (d = b, null == d || c) return a ? a[0] : n;
            return l(a, 0, Dc(Cc(0, d), e));
        }
        function Mb(b, c, d) {
            if ("number" == typeof d) {
                var e = b ? b.length : 0;
                d = 0 > d ? Cc(0, e + d) : d || 0;
            } else if (d) return d = Ob(b, c), b[d] === c ? d : -1;
            return a(b, c, d);
        }
        function Nb(a, b, c) {
            if ("number" != typeof b && null != b) {
                var d = 0, e = -1, f = a ? a.length : 0;
                for (b = X.createCallback(b, c, 3); ++e < f && b(a[e], e, a); ) d++;
            } else d = null == b || c ? 1 : Cc(0, b);
            return l(a, d);
        }
        function Ob(a, b, c, d) {
            var e = 0, f = a ? a.length : e;
            for (c = c ? X.createCallback(c, d, 1) : Ub, b = c(b); f > e; ) d = e + f >>> 1, 
            c(a[d]) < b ? e = d + 1 : f = d;
            return e;
        }
        function Pb(a, b, c, d) {
            return "boolean" != typeof b && null != b && (d = c, c = "function" != typeof b && d && d[b] === a ? null : b, 
            b = !1), null != c && (c = X.createCallback(c, d, 3)), ib(a, b, c);
        }
        function Qb() {
            for (var a = 1 < arguments.length ? arguments : arguments[0], b = -1, c = a ? Gb(Tc(a, "length")) : 0, d = Zb(0 > c ? 0 : c); ++b < c; ) d[b] = Tc(a, b);
            return d;
        }
        function Rb(a, b) {
            var c = -1, d = a ? a.length : 0, e = {};
            for (b || !d || Jc(a[0]) || (b = []); ++c < d; ) {
                var f = a[c];
                b ? e[f] = b[c] : f && (e[f[0]] = f[1]);
            }
            return e;
        }
        function Sb(a, b) {
            return 2 < arguments.length ? kb(a, 17, l(arguments, 2), null, b) : kb(a, 1, null, null, b);
        }
        function Tb(a, b, c) {
            function d() {
                k && nc(k), g = k = l = n, (p || o !== b) && (m = Uc(), h = a.apply(j, f), k || g || (f = j = null));
            }
            function e() {
                var c = b - (Uc() - i);
                c > 0 ? k = tc(e, c) : (g && nc(g), c = l, g = k = l = n, c && (m = Uc(), h = a.apply(j, f), 
                k || g || (f = j = null)));
            }
            var f, g, h, i, j, k, l, m = 0, o = !1, p = !0;
            if (!ub(a)) throw new gc();
            if (b = Cc(0, b) || 0, !0 === c) var q = !0, p = !1; else vb(c) && (q = c.leading, 
            o = "maxWait" in c && (Cc(b, c.maxWait) || 0), p = "trailing" in c ? c.trailing : p);
            return function() {
                if (f = arguments, i = Uc(), j = this, l = p && (k || !q), !1 === o) var c = q && !k; else {
                    g || q || (m = i);
                    var n = o - (i - m), r = 0 >= n;
                    r ? (g && (g = nc(g)), m = i, h = a.apply(j, f)) : g || (g = tc(d, n));
                }
                return r && k ? k = nc(k) : k || b === o || (k = tc(e, b)), c && (r = !0, h = a.apply(j, f)), 
                !r || k || g || (f = j = null), h;
            };
        }
        function Ub(a) {
            return a;
        }
        function Vb(a, b, c) {
            var d = !0, e = b && sb(b);
            b && (c || e.length) || (null == c && (c = b), f = Y, b = a, a = X, e = sb(b)), 
            !1 === c ? d = !1 : vb(c) && "chain" in c && (d = c.chain);
            var f = a, g = ub(f);
            Db(e, function(c) {
                var e = a[c] = b[c];
                g && (f.prototype[c] = function() {
                    var b = this.__chain__, c = this.__wrapped__, g = [ c ];
                    if (sc.apply(g, arguments), g = e.apply(a, g), d || b) {
                        if (c === g && vb(g)) return this;
                        g = new f(g), g.__chain__ = b;
                    }
                    return g;
                });
            });
        }
        function Wb() {}
        function Xb(a) {
            return function(b) {
                return b[a];
            };
        }
        function Yb() {
            return this.__wrapped__;
        }
        c = c ? $.defaults(V.Object(), c, $.pick(V, G)) : V;
        var Zb = c.Array, $b = c.Boolean, _b = c.Date, ac = c.Function, bc = c.Math, cc = c.Number, dc = c.Object, ec = c.RegExp, fc = c.String, gc = c.TypeError, hc = [], ic = dc.prototype, jc = c._, kc = ic.toString, lc = ec("^" + fc(kc).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$"), mc = bc.ceil, nc = c.clearTimeout, oc = bc.floor, pc = ac.prototype.toString, qc = nb(qc = dc.getPrototypeOf) && qc, rc = ic.hasOwnProperty, sc = hc.push, tc = c.setTimeout, uc = hc.splice, vc = hc.unshift, wc = function() {
            try {
                var a = {}, b = nb(b = dc.defineProperty) && b, c = b(a, a, a) && b;
            } catch (d) {}
            return c;
        }(), xc = nb(xc = dc.create) && xc, yc = nb(yc = Zb.isArray) && yc, zc = c.isFinite, Ac = c.isNaN, Bc = nb(Bc = dc.keys) && Bc, Cc = bc.max, Dc = bc.min, Ec = c.parseInt, Fc = bc.random, Gc = {};
        Gc[I] = Zb, Gc[J] = $b, Gc[K] = _b, Gc[L] = ac, Gc[N] = dc, Gc[M] = cc, Gc[O] = ec, 
        Gc[P] = fc, Y.prototype = X.prototype;
        var Hc = X.support = {};
        Hc.funcDecomp = !nb(c.a) && E.test(m), Hc.funcNames = "string" == typeof ac.name, 
        X.templateSettings = {
            escape: /<%-([\s\S]+?)%>/g,
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: B,
            variable: "",
            imports: {
                _: X
            }
        }, xc || (ab = function() {
            function a() {}
            return function(b) {
                if (vb(b)) {
                    a.prototype = b;
                    var d = new a();
                    a.prototype = null;
                }
                return d || c.Object();
            };
        }());
        var Ic = wc ? function(a, b) {
            S.value = b, wc(a, "__bindData__", S);
        } : Wb, Jc = yc || function(a) {
            return a && "object" == typeof a && "number" == typeof a.length && kc.call(a) == I || !1;
        }, Kc = Bc ? function(a) {
            return vb(a) ? Bc(a) : [];
        } : W, Lc = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }, Mc = tb(Lc), Nc = ec("(" + Kc(Mc).join("|") + ")", "g"), Oc = ec("[" + Kc(Lc).join("") + "]", "g"), Pc = qc ? function(a) {
            if (!a || kc.call(a) != N) return !1;
            var b = a.valueOf, c = nb(b) && (c = qc(b)) && qc(c);
            return c ? a == c || qc(a) == c : ob(a);
        } : ob, Qc = jb(function(a, b, c) {
            rc.call(a, c) ? a[c]++ : a[c] = 1;
        }), Rc = jb(function(a, b, c) {
            (rc.call(a, c) ? a[c] : a[c] = []).push(b);
        }), Sc = jb(function(a, b, c) {
            a[c] = b;
        }), Tc = Fb, Uc = nb(Uc = _b.now) && Uc || function() {
            return new _b().getTime();
        }, Vc = 8 == Ec(u + "08") ? Ec : function(a, b) {
            return Ec(xb(a) ? a.replace(C, "") : a, b || 0);
        };
        return X.after = function(a, b) {
            if (!ub(b)) throw new gc();
            return function() {
                return 1 > --a ? b.apply(this, arguments) : void 0;
            };
        }, X.assign = U, X.at = function(a) {
            for (var b = arguments, c = -1, d = eb(b, !0, !1, 1), b = b[2] && b[2][b[1]] === a ? 1 : d.length, e = Zb(b); ++c < b; ) e[c] = a[d[c]];
            return e;
        }, X.bind = Sb, X.bindAll = function(a) {
            for (var b = 1 < arguments.length ? eb(arguments, !0, !1, 1) : sb(a), c = -1, d = b.length; ++c < d; ) {
                var e = b[c];
                a[e] = kb(a[e], 1, null, null, a);
            }
            return a;
        }, X.bindKey = function(a, b) {
            return 2 < arguments.length ? kb(b, 19, l(arguments, 2), null, a) : kb(b, 3, null, null, a);
        }, X.chain = function(a) {
            return a = new Y(a), a.__chain__ = !0, a;
        }, X.compact = function(a) {
            for (var b = -1, c = a ? a.length : 0, d = []; ++b < c; ) {
                var e = a[b];
                e && d.push(e);
            }
            return d;
        }, X.compose = function() {
            for (var a = arguments, b = a.length; b--; ) if (!ub(a[b])) throw new gc();
            return function() {
                for (var b = arguments, c = a.length; c--; ) b = [ a[c].apply(this, b) ];
                return b[0];
            };
        }, X.constant = function(a) {
            return function() {
                return a;
            };
        }, X.countBy = Qc, X.create = function(a, b) {
            var c = ab(a);
            return b ? U(c, b) : c;
        }, X.createCallback = function(a, b, c) {
            var d = typeof a;
            if (null == a || "function" == d) return bb(a, b, c);
            if ("object" != d) return Xb(a);
            var e = Kc(a), f = e[0], g = a[f];
            return 1 != e.length || g !== g || vb(g) ? function(b) {
                for (var c = e.length, d = !1; c-- && (d = fb(b[e[c]], a[e[c]], null, !0)); ) ;
                return d;
            } : function(a) {
                return a = a[f], g === a && (0 !== g || 1 / g == 1 / a);
            };
        }, X.curry = function(a, b) {
            return b = "number" == typeof b ? b : +b || a.length, kb(a, 4, null, null, null, b);
        }, X.debounce = Tb, X.defaults = t, X.defer = function(a) {
            if (!ub(a)) throw new gc();
            var b = l(arguments, 1);
            return tc(function() {
                a.apply(n, b);
            }, 1);
        }, X.delay = function(a, b) {
            if (!ub(a)) throw new gc();
            var c = l(arguments, 2);
            return tc(function() {
                a.apply(n, c);
            }, b);
        }, X.difference = function(a) {
            return db(a, eb(arguments, !0, !0, 1));
        }, X.filter = Bb, X.flatten = function(a, b, c, d) {
            return "boolean" != typeof b && null != b && (d = c, c = "function" != typeof b && d && d[b] === a ? null : b, 
            b = !1), null != c && (a = Fb(a, c, d)), eb(a, b);
        }, X.forEach = Db, X.forEachRight = Eb, X.forIn = p, X.forInRight = function(a, b, c) {
            var d = [];
            p(a, function(a, b) {
                d.push(b, a);
            });
            var e = d.length;
            for (b = bb(b, c, 3); e-- && !1 !== b(d[e--], d[e], a); ) ;
            return a;
        }, X.forOwn = o, X.forOwnRight = rb, X.functions = sb, X.groupBy = Rc, X.indexBy = Sc, 
        X.initial = function(a, b, c) {
            var d = 0, e = a ? a.length : 0;
            if ("number" != typeof b && null != b) {
                var f = e;
                for (b = X.createCallback(b, c, 3); f-- && b(a[f], f, a); ) d++;
            } else d = null == b || c ? 1 : b || d;
            return l(a, 0, Dc(Cc(0, e - d), e));
        }, X.intersection = function() {
            for (var c = [], d = -1, e = arguments.length, g = h(), i = mb(), l = i === a, m = h(); ++d < e; ) {
                var n = arguments[d];
                (Jc(n) || qb(n)) && (c.push(n), g.push(l && n.length >= s && f(d ? c[d] : m)));
            }
            var l = c[0], o = -1, p = l ? l.length : 0, q = [];
            a: for (;++o < p; ) {
                var r = g[0], n = l[o];
                if (0 > (r ? b(r, n) : i(m, n))) {
                    for (d = e, (r || m).push(n); --d; ) if (r = g[d], 0 > (r ? b(r, n) : i(c[d], n))) continue a;
                    q.push(n);
                }
            }
            for (;e--; ) (r = g[e]) && k(r);
            return j(g), j(m), q;
        }, X.invert = tb, X.invoke = function(a, b) {
            var c = l(arguments, 2), d = -1, e = "function" == typeof b, f = a ? a.length : 0, g = Zb("number" == typeof f ? f : 0);
            return Db(a, function(a) {
                g[++d] = (e ? b : a[b]).apply(a, c);
            }), g;
        }, X.keys = Kc, X.map = Fb, X.mapValues = function(a, b, c) {
            var d = {};
            return b = X.createCallback(b, c, 3), o(a, function(a, c, e) {
                d[c] = b(a, c, e);
            }), d;
        }, X.max = Gb, X.memoize = function(a, b) {
            function c() {
                var d = c.cache, e = b ? b.apply(this, arguments) : r + arguments[0];
                return rc.call(d, e) ? d[e] : d[e] = a.apply(this, arguments);
            }
            if (!ub(a)) throw new gc();
            return c.cache = {}, c;
        }, X.merge = function(a) {
            var b = arguments, c = 2;
            if (!vb(a)) return a;
            if ("number" != typeof b[2] && (c = b.length), c > 3 && "function" == typeof b[c - 2]) var d = bb(b[--c - 1], b[c--], 2); else c > 2 && "function" == typeof b[c - 1] && (d = b[--c]);
            for (var b = l(arguments, 1, c), e = -1, f = h(), g = h(); ++e < c; ) gb(a, b[e], d, f, g);
            return j(f), j(g), a;
        }, X.min = function(a, b, c) {
            var e = 1 / 0, f = e;
            if ("function" != typeof b && c && c[b] === a && (b = null), null == b && Jc(a)) {
                c = -1;
                for (var g = a.length; ++c < g; ) {
                    var h = a[c];
                    f > h && (f = h);
                }
            } else b = null == b && xb(a) ? d : X.createCallback(b, c, 3), Db(a, function(a, c, d) {
                c = b(a, c, d), e > c && (e = c, f = a);
            });
            return f;
        }, X.omit = function(a, b, c) {
            var d = {};
            if ("function" != typeof b) {
                var e = [];
                p(a, function(a, b) {
                    e.push(b);
                });
                for (var e = db(e, eb(arguments, !0, !1, 1)), f = -1, g = e.length; ++f < g; ) {
                    var h = e[f];
                    d[h] = a[h];
                }
            } else b = X.createCallback(b, c, 3), p(a, function(a, c, e) {
                b(a, c, e) || (d[c] = a);
            });
            return d;
        }, X.once = function(a) {
            var b, c;
            if (!ub(a)) throw new gc();
            return function() {
                return b ? c : (b = !0, c = a.apply(this, arguments), a = null, c);
            };
        }, X.pairs = function(a) {
            for (var b = -1, c = Kc(a), d = c.length, e = Zb(d); ++b < d; ) {
                var f = c[b];
                e[b] = [ f, a[f] ];
            }
            return e;
        }, X.partial = function(a) {
            return kb(a, 16, l(arguments, 1));
        }, X.partialRight = function(a) {
            return kb(a, 32, null, l(arguments, 1));
        }, X.pick = function(a, b, c) {
            var d = {};
            if ("function" != typeof b) for (var e = -1, f = eb(arguments, !0, !1, 1), g = vb(a) ? f.length : 0; ++e < g; ) {
                var h = f[e];
                h in a && (d[h] = a[h]);
            } else b = X.createCallback(b, c, 3), p(a, function(a, c, e) {
                b(a, c, e) && (d[c] = a);
            });
            return d;
        }, X.pluck = Tc, X.property = Xb, X.pull = function(a) {
            for (var b = arguments, c = 0, d = b.length, e = a ? a.length : 0; ++c < d; ) for (var f = -1, g = b[c]; ++f < e; ) a[f] === g && (uc.call(a, f--, 1), 
            e--);
            return a;
        }, X.range = function(a, b, c) {
            a = +a || 0, c = "number" == typeof c ? c : +c || 1, null == b && (b = a, a = 0);
            var d = -1;
            b = Cc(0, mc((b - a) / (c || 1)));
            for (var e = Zb(b); ++d < b; ) e[d] = a, a += c;
            return e;
        }, X.reject = function(a, b, c) {
            return b = X.createCallback(b, c, 3), Bb(a, function(a, c, d) {
                return !b(a, c, d);
            });
        }, X.remove = function(a, b, c) {
            var d = -1, e = a ? a.length : 0, f = [];
            for (b = X.createCallback(b, c, 3); ++d < e; ) c = a[d], b(c, d, a) && (f.push(c), 
            uc.call(a, d--, 1), e--);
            return f;
        }, X.rest = Nb, X.shuffle = Jb, X.sortBy = function(a, b, c) {
            var d = -1, f = Jc(b), g = a ? a.length : 0, l = Zb("number" == typeof g ? g : 0);
            for (f || (b = X.createCallback(b, c, 3)), Db(a, function(a, c, e) {
                var g = l[++d] = i();
                f ? g.m = Fb(b, function(b) {
                    return a[b];
                }) : (g.m = h())[0] = b(a, c, e), g.n = d, g.o = a;
            }), g = l.length, l.sort(e); g--; ) a = l[g], l[g] = a.o, f || j(a.m), k(a);
            return l;
        }, X.tap = function(a, b) {
            return b(a), a;
        }, X.throttle = function(a, b, c) {
            var d = !0, e = !0;
            if (!ub(a)) throw new gc();
            return !1 === c ? d = !1 : vb(c) && (d = "leading" in c ? c.leading : d, e = "trailing" in c ? c.trailing : e), 
            R.leading = d, R.maxWait = b, R.trailing = e, Tb(a, b, R);
        }, X.times = function(a, b, c) {
            a = -1 < (a = +a) ? a : 0;
            var d = -1, e = Zb(a);
            for (b = bb(b, c, 1); ++d < a; ) e[d] = b(d);
            return e;
        }, X.toArray = function(a) {
            return a && "number" == typeof a.length ? l(a) : yb(a);
        }, X.transform = function(a, b, c, d) {
            var e = Jc(a);
            if (null == c) if (e) c = []; else {
                var f = a && a.constructor;
                c = ab(f && f.prototype);
            }
            return b && (b = X.createCallback(b, d, 4), (e ? Db : o)(a, function(a, d, e) {
                return b(c, a, d, e);
            })), c;
        }, X.union = function() {
            return ib(eb(arguments, !0, !0));
        }, X.uniq = Pb, X.values = yb, X.where = Bb, X.without = function(a) {
            return db(a, l(arguments, 1));
        }, X.wrap = function(a, b) {
            return kb(b, 16, [ a ]);
        }, X.xor = function() {
            for (var a = -1, b = arguments.length; ++a < b; ) {
                var c = arguments[a];
                if (Jc(c) || qb(c)) var d = d ? ib(db(d, c).concat(db(c, d))) : c;
            }
            return d || [];
        }, X.zip = Qb, X.zipObject = Rb, X.collect = Fb, X.drop = Nb, X.each = Db, X.eachRight = Eb, 
        X.extend = U, X.methods = sb, X.object = Rb, X.select = Bb, X.tail = Nb, X.unique = Pb, 
        X.unzip = Qb, Vb(X), X.clone = function(a, b, c, d) {
            return "boolean" != typeof b && null != b && (d = c, c = b, b = !1), _(a, b, "function" == typeof c && bb(c, d, 1));
        }, X.cloneDeep = function(a, b, c) {
            return _(a, !0, "function" == typeof b && bb(b, c, 1));
        }, X.contains = zb, X.escape = function(a) {
            return null == a ? "" : fc(a).replace(Oc, lb);
        }, X.every = Ab, X.find = Cb, X.findIndex = function(a, b, c) {
            var d = -1, e = a ? a.length : 0;
            for (b = X.createCallback(b, c, 3); ++d < e; ) if (b(a[d], d, a)) return d;
            return -1;
        }, X.findKey = function(a, b, c) {
            var d;
            return b = X.createCallback(b, c, 3), o(a, function(a, c, e) {
                return b(a, c, e) ? (d = c, !1) : void 0;
            }), d;
        }, X.findLast = function(a, b, c) {
            var d;
            return b = X.createCallback(b, c, 3), Eb(a, function(a, c, e) {
                return b(a, c, e) ? (d = a, !1) : void 0;
            }), d;
        }, X.findLastIndex = function(a, b, c) {
            var d = a ? a.length : 0;
            for (b = X.createCallback(b, c, 3); d--; ) if (b(a[d], d, a)) return d;
            return -1;
        }, X.findLastKey = function(a, b, c) {
            var d;
            return b = X.createCallback(b, c, 3), rb(a, function(a, c, e) {
                return b(a, c, e) ? (d = c, !1) : void 0;
            }), d;
        }, X.has = function(a, b) {
            return a ? rc.call(a, b) : !1;
        }, X.identity = Ub, X.indexOf = Mb, X.isArguments = qb, X.isArray = Jc, X.isBoolean = function(a) {
            return !0 === a || !1 === a || a && "object" == typeof a && kc.call(a) == J || !1;
        }, X.isDate = function(a) {
            return a && "object" == typeof a && kc.call(a) == K || !1;
        }, X.isElement = function(a) {
            return a && 1 === a.nodeType || !1;
        }, X.isEmpty = function(a) {
            var b = !0;
            if (!a) return b;
            var c = kc.call(a), d = a.length;
            return c == I || c == P || c == H || c == N && "number" == typeof d && ub(a.splice) ? !d : (o(a, function() {
                return b = !1;
            }), b);
        }, X.isEqual = function(a, b, c, d) {
            return fb(a, b, "function" == typeof c && bb(c, d, 2));
        }, X.isFinite = function(a) {
            return zc(a) && !Ac(parseFloat(a));
        }, X.isFunction = ub, X.isNaN = function(a) {
            return wb(a) && a != +a;
        }, X.isNull = function(a) {
            return null === a;
        }, X.isNumber = wb, X.isObject = vb, X.isPlainObject = Pc, X.isRegExp = function(a) {
            return a && "object" == typeof a && kc.call(a) == O || !1;
        }, X.isString = xb, X.isUndefined = function(a) {
            return "undefined" == typeof a;
        }, X.lastIndexOf = function(a, b, c) {
            var d = a ? a.length : 0;
            for ("number" == typeof c && (d = (0 > c ? Cc(0, d + c) : Dc(c, d - 1)) + 1); d--; ) if (a[d] === b) return d;
            return -1;
        }, X.mixin = Vb, X.noConflict = function() {
            return c._ = jc, this;
        }, X.noop = Wb, X.now = Uc, X.parseInt = Vc, X.random = function(a, b, c) {
            var d = null == a, e = null == b;
            return null == c && ("boolean" == typeof a && e ? (c = a, a = 1) : e || "boolean" != typeof b || (c = b, 
            e = !0)), d && e && (b = 1), a = +a || 0, e ? (b = a, a = 0) : b = +b || 0, c || a % 1 || b % 1 ? (c = Fc(), 
            Dc(a + c * (b - a + parseFloat("1e-" + ((c + "").length - 1))), b)) : hb(a, b);
        }, X.reduce = Hb, X.reduceRight = Ib, X.result = function(a, b) {
            if (a) {
                var c = a[b];
                return ub(c) ? a[b]() : c;
            }
        }, X.runInContext = m, X.size = function(a) {
            var b = a ? a.length : 0;
            return "number" == typeof b ? b : Kc(a).length;
        }, X.some = Kb, X.sortedIndex = Ob, X.template = function(a, b, c) {
            var d = X.templateSettings;
            a = fc(a || ""), c = t({}, c, d);
            var e, f = t({}, c.imports, d.imports), d = Kc(f), f = yb(f), h = 0, i = c.interpolate || D, j = "__p+='", i = ec((c.escape || D).source + "|" + i.source + "|" + (i === B ? y : D).source + "|" + (c.evaluate || D).source + "|$", "g");
            a.replace(i, function(b, c, d, f, i, k) {
                return d || (d = f), j += a.slice(h, k).replace(F, g), c && (j += "'+__e(" + c + ")+'"), 
                i && (e = !0, j += "';" + i + ";\n__p+='"), d && (j += "'+((__t=(" + d + "))==null?'':__t)+'"), 
                h = k + b.length, b;
            }), j += "';", i = c = c.variable, i || (c = "obj", j = "with(" + c + "){" + j + "}"), 
            j = (e ? j.replace(v, "") : j).replace(w, "$1").replace(x, "$1;"), j = "function(" + c + "){" + (i ? "" : c + "||(" + c + "={});") + "var __t,__p='',__e=_.escape" + (e ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : ";") + j + "return __p}";
            try {
                var k = ac(d, "return " + j).apply(n, f);
            } catch (l) {
                throw l.source = j, l;
            }
            return b ? k(b) : (k.source = j, k);
        }, X.unescape = function(a) {
            return null == a ? "" : fc(a).replace(Nc, pb);
        }, X.uniqueId = function(a) {
            var b = ++q;
            return fc(null == a ? "" : a) + b;
        }, X.all = Ab, X.any = Kb, X.detect = Cb, X.findWhere = Cb, X.foldl = Hb, X.foldr = Ib, 
        X.include = zb, X.inject = Hb, Vb(function() {
            var a = {};
            return o(X, function(b, c) {
                X.prototype[c] || (a[c] = b);
            }), a;
        }(), !1), X.first = Lb, X.last = function(a, b, c) {
            var d = 0, e = a ? a.length : 0;
            if ("number" != typeof b && null != b) {
                var f = e;
                for (b = X.createCallback(b, c, 3); f-- && b(a[f], f, a); ) d++;
            } else if (d = b, null == d || c) return a ? a[e - 1] : n;
            return l(a, Cc(0, e - d));
        }, X.sample = function(a, b, c) {
            return a && "number" != typeof a.length && (a = yb(a)), null == b || c ? a ? a[hb(0, a.length - 1)] : n : (a = Jb(a), 
            a.length = Dc(Cc(0, b), a.length), a);
        }, X.take = Lb, X.head = Lb, o(X, function(a, b) {
            var c = "sample" !== b;
            X.prototype[b] || (X.prototype[b] = function(b, d) {
                var e = this.__chain__, f = a(this.__wrapped__, b, d);
                return e || null != b && (!d || c && "function" == typeof b) ? new Y(f, e) : f;
            });
        }), X.VERSION = "2.4.1", X.prototype.chain = function() {
            return this.__chain__ = !0, this;
        }, X.prototype.toString = function() {
            return fc(this.__wrapped__);
        }, X.prototype.value = Yb, X.prototype.valueOf = Yb, Db([ "join", "pop", "shift" ], function(a) {
            var b = hc[a];
            X.prototype[a] = function() {
                var a = this.__chain__, c = b.apply(this.__wrapped__, arguments);
                return a ? new Y(c, a) : c;
            };
        }), Db([ "push", "reverse", "sort", "unshift" ], function(a) {
            var b = hc[a];
            X.prototype[a] = function() {
                return b.apply(this.__wrapped__, arguments), this;
            };
        }), Db([ "concat", "slice", "splice" ], function(a) {
            var b = hc[a];
            X.prototype[a] = function() {
                return new Y(b.apply(this.__wrapped__, arguments), this.__chain__);
            };
        }), X;
    }
    var n, o = [], p = [], q = 0, r = +new Date() + "", s = 75, t = 40, u = " 	\f ﻿\n\r\u2028\u2029 ᠎             　", v = /\b__p\+='';/g, w = /\b(__p\+=)''\+/g, x = /(__e\(.*?\)|\b__t\))\+'';/g, y = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, z = /\w*$/, A = /^\s*function[ \n\r\t]+\w/, B = /<%=([\s\S]+?)%>/g, C = RegExp("^[" + u + "]*0+(?=.$)"), D = /($^)/, E = /\bthis\b/, F = /['\n\r\t\u2028\u2029\\]/g, G = "Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "), H = "[object Arguments]", I = "[object Array]", J = "[object Boolean]", K = "[object Date]", L = "[object Function]", M = "[object Number]", N = "[object Object]", O = "[object RegExp]", P = "[object String]", Q = {};
    Q[L] = !1, Q[H] = Q[I] = Q[J] = Q[K] = Q[M] = Q[N] = Q[O] = Q[P] = !0;
    var R = {
        leading: !1,
        maxWait: 0,
        trailing: !1
    }, S = {
        configurable: !1,
        enumerable: !1,
        value: null,
        writable: !1
    }, T = {
        "boolean": !1,
        "function": !0,
        object: !0,
        number: !1,
        string: !1,
        undefined: !1
    }, U = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, V = T[typeof window] && window || this, W = T[typeof exports] && exports && !exports.nodeType && exports, X = T[typeof module] && module && !module.nodeType && module, Y = X && X.exports === W && W, Z = T[typeof global] && global;
    !Z || Z.global !== Z && Z.window !== Z || (V = Z);
    var $ = m();
    "function" == typeof define && "object" == typeof define.amd && define.amd ? (V._ = $, 
    define(function() {
        return $;
    })) : W && X ? Y ? (X.exports = $)._ = $ : W._ = $ : V._ = $;
}.call(this);

var THREE = {
    REVISION: "64"
};

self.console = self.console || {
    info: function() {},
    log: function() {},
    debug: function() {},
    warn: function() {},
    error: function() {}
}, String.prototype.trim = String.prototype.trim || function() {
    return this.replace(/^\s+|\s+$/g, "");
}, THREE.extend = function(a, b) {
    if (Object.keys) for (var c = Object.keys(b), d = 0, e = c.length; e > d; d++) {
        var f = c[d];
        Object.defineProperty(a, f, Object.getOwnPropertyDescriptor(b, f));
    } else for (f in c = {}.hasOwnProperty, b) c.call(b, f) && (a[f] = b[f]);
    return a;
}, function() {
    for (var a = 0, b = [ "ms", "moz", "webkit", "o" ], c = 0; c < b.length && !self.requestAnimationFrame; ++c) self.requestAnimationFrame = self[b[c] + "RequestAnimationFrame"], 
    self.cancelAnimationFrame = self[b[c] + "CancelAnimationFrame"] || self[b[c] + "CancelRequestAnimationFrame"];
    void 0 === self.requestAnimationFrame && void 0 !== self.setTimeout && (self.requestAnimationFrame = function(b) {
        var c = Date.now(), d = Math.max(0, 16 - (c - a)), e = self.setTimeout(function() {
            b(c + d);
        }, d);
        return a = c + d, e;
    }), void 0 === self.cancelAnimationFrame && void 0 !== self.clearTimeout && (self.cancelAnimationFrame = function(a) {
        self.clearTimeout(a);
    });
}(), THREE.CullFaceNone = 0, THREE.CullFaceBack = 1, THREE.CullFaceFront = 2, THREE.CullFaceFrontBack = 3, 
THREE.FrontFaceDirectionCW = 0, THREE.FrontFaceDirectionCCW = 1, THREE.BasicShadowMap = 0, 
THREE.PCFShadowMap = 1, THREE.PCFSoftShadowMap = 2, THREE.FrontSide = 0, THREE.BackSide = 1, 
THREE.DoubleSide = 2, THREE.NoShading = 0, THREE.FlatShading = 1, THREE.SmoothShading = 2, 
THREE.NoColors = 0, THREE.FaceColors = 1, THREE.VertexColors = 2, THREE.NoBlending = 0, 
THREE.NormalBlending = 1, THREE.AdditiveBlending = 2, THREE.SubtractiveBlending = 3, 
THREE.MultiplyBlending = 4, THREE.CustomBlending = 5, THREE.AddEquation = 100, THREE.SubtractEquation = 101, 
THREE.ReverseSubtractEquation = 102, THREE.ZeroFactor = 200, THREE.OneFactor = 201, 
THREE.SrcColorFactor = 202, THREE.OneMinusSrcColorFactor = 203, THREE.SrcAlphaFactor = 204, 
THREE.OneMinusSrcAlphaFactor = 205, THREE.DstAlphaFactor = 206, THREE.OneMinusDstAlphaFactor = 207, 
THREE.DstColorFactor = 208, THREE.OneMinusDstColorFactor = 209, THREE.SrcAlphaSaturateFactor = 210, 
THREE.MultiplyOperation = 0, THREE.MixOperation = 1, THREE.AddOperation = 2, THREE.UVMapping = function() {}, 
THREE.CubeReflectionMapping = function() {}, THREE.CubeRefractionMapping = function() {}, 
THREE.SphericalReflectionMapping = function() {}, THREE.SphericalRefractionMapping = function() {}, 
THREE.RepeatWrapping = 1e3, THREE.ClampToEdgeWrapping = 1001, THREE.MirroredRepeatWrapping = 1002, 
THREE.NearestFilter = 1003, THREE.NearestMipMapNearestFilter = 1004, THREE.NearestMipMapLinearFilter = 1005, 
THREE.LinearFilter = 1006, THREE.LinearMipMapNearestFilter = 1007, THREE.LinearMipMapLinearFilter = 1008, 
THREE.UnsignedByteType = 1009, THREE.ByteType = 1010, THREE.ShortType = 1011, THREE.UnsignedShortType = 1012, 
THREE.IntType = 1013, THREE.UnsignedIntType = 1014, THREE.FloatType = 1015, THREE.UnsignedShort4444Type = 1016, 
THREE.UnsignedShort5551Type = 1017, THREE.UnsignedShort565Type = 1018, THREE.AlphaFormat = 1019, 
THREE.RGBFormat = 1020, THREE.RGBAFormat = 1021, THREE.LuminanceFormat = 1022, THREE.LuminanceAlphaFormat = 1023, 
THREE.RGB_S3TC_DXT1_Format = 2001, THREE.RGBA_S3TC_DXT1_Format = 2002, THREE.RGBA_S3TC_DXT3_Format = 2003, 
THREE.RGBA_S3TC_DXT5_Format = 2004, THREE.Color = function(a) {
    return void 0 !== a && this.set(a), this;
}, THREE.Color.prototype = {
    constructor: THREE.Color,
    r: 1,
    g: 1,
    b: 1,
    set: function(a) {
        return a instanceof THREE.Color ? this.copy(a) : "number" == typeof a ? this.setHex(a) : "string" == typeof a && this.setStyle(a), 
        this;
    },
    setHex: function(a) {
        return a = Math.floor(a), this.r = (a >> 16 & 255) / 255, this.g = (a >> 8 & 255) / 255, 
        this.b = (255 & a) / 255, this;
    },
    setRGB: function(a, b, c) {
        return this.r = a, this.g = b, this.b = c, this;
    },
    setHSL: function(a, b, c) {
        if (0 === b) this.r = this.g = this.b = c; else {
            var d = function(a, b, c) {
                return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + 6 * (b - a) * (2 / 3 - c) : a;
            }, b = .5 >= c ? c * (1 + b) : c + b - c * b, c = 2 * c - b;
            this.r = d(c, b, a + 1 / 3), this.g = d(c, b, a), this.b = d(c, b, a - 1 / 3);
        }
        return this;
    },
    setStyle: function(a) {
        return /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a) ? (a = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a), 
        this.r = Math.min(255, parseInt(a[1], 10)) / 255, this.g = Math.min(255, parseInt(a[2], 10)) / 255, 
        this.b = Math.min(255, parseInt(a[3], 10)) / 255, this) : /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a) ? (a = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a), 
        this.r = Math.min(100, parseInt(a[1], 10)) / 100, this.g = Math.min(100, parseInt(a[2], 10)) / 100, 
        this.b = Math.min(100, parseInt(a[3], 10)) / 100, this) : /^\#([0-9a-f]{6})$/i.test(a) ? (a = /^\#([0-9a-f]{6})$/i.exec(a), 
        this.setHex(parseInt(a[1], 16)), this) : /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a) ? (a = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a), 
        this.setHex(parseInt(a[1] + a[1] + a[2] + a[2] + a[3] + a[3], 16)), this) : /^(\w+)$/i.test(a) ? (this.setHex(THREE.ColorKeywords[a]), 
        this) : void 0;
    },
    copy: function(a) {
        return this.r = a.r, this.g = a.g, this.b = a.b, this;
    },
    copyGammaToLinear: function(a) {
        return this.r = a.r * a.r, this.g = a.g * a.g, this.b = a.b * a.b, this;
    },
    copyLinearToGamma: function(a) {
        return this.r = Math.sqrt(a.r), this.g = Math.sqrt(a.g), this.b = Math.sqrt(a.b), 
        this;
    },
    convertGammaToLinear: function() {
        var a = this.r, b = this.g, c = this.b;
        return this.r = a * a, this.g = b * b, this.b = c * c, this;
    },
    convertLinearToGamma: function() {
        return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), 
        this;
    },
    getHex: function() {
        return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0;
    },
    getHexString: function() {
        return ("000000" + this.getHex().toString(16)).slice(-6);
    },
    getHSL: function(a) {
        var b, a = a || {
            h: 0,
            s: 0,
            l: 0
        }, c = this.r, d = this.g, e = this.b, f = Math.max(c, d, e), g = Math.min(c, d, e), h = (g + f) / 2;
        if (g === f) g = b = 0; else {
            var i = f - g, g = .5 >= h ? i / (f + g) : i / (2 - f - g);
            switch (f) {
              case c:
                b = (d - e) / i + (e > d ? 6 : 0);
                break;

              case d:
                b = (e - c) / i + 2;
                break;

              case e:
                b = (c - d) / i + 4;
            }
            b /= 6;
        }
        return a.h = b, a.s = g, a.l = h, a;
    },
    getStyle: function() {
        return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")";
    },
    offsetHSL: function(a, b, c) {
        var d = this.getHSL();
        return d.h += a, d.s += b, d.l += c, this.setHSL(d.h, d.s, d.l), this;
    },
    add: function(a) {
        return this.r += a.r, this.g += a.g, this.b += a.b, this;
    },
    addColors: function(a, b) {
        return this.r = a.r + b.r, this.g = a.g + b.g, this.b = a.b + b.b, this;
    },
    addScalar: function(a) {
        return this.r += a, this.g += a, this.b += a, this;
    },
    multiply: function(a) {
        return this.r *= a.r, this.g *= a.g, this.b *= a.b, this;
    },
    multiplyScalar: function(a) {
        return this.r *= a, this.g *= a, this.b *= a, this;
    },
    lerp: function(a, b) {
        return this.r += (a.r - this.r) * b, this.g += (a.g - this.g) * b, this.b += (a.b - this.b) * b, 
        this;
    },
    equals: function(a) {
        return a.r === this.r && a.g === this.g && a.b === this.b;
    },
    fromArray: function(a) {
        return this.r = a[0], this.g = a[1], this.b = a[2], this;
    },
    toArray: function() {
        return [ this.r, this.g, this.b ];
    },
    clone: function() {
        return new THREE.Color().setRGB(this.r, this.g, this.b);
    }
}, THREE.ColorKeywords = {
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074
}, THREE.Quaternion = function(a, b, c, d) {
    this._x = a || 0, this._y = b || 0, this._z = c || 0, this._w = void 0 !== d ? d : 1;
}, THREE.Quaternion.prototype = {
    constructor: THREE.Quaternion,
    _x: 0,
    _y: 0,
    _z: 0,
    _w: 0,
    _euler: void 0,
    _updateEuler: function() {
        void 0 !== this._euler && this._euler.setFromQuaternion(this, void 0, !1);
    },
    get x() {
        return this._x;
    },
    set x(a) {
        this._x = a, this._updateEuler();
    },
    get y() {
        return this._y;
    },
    set y(a) {
        this._y = a, this._updateEuler();
    },
    get z() {
        return this._z;
    },
    set z(a) {
        this._z = a, this._updateEuler();
    },
    get w() {
        return this._w;
    },
    set w(a) {
        this._w = a, this._updateEuler();
    },
    set: function(a, b, c, d) {
        return this._x = a, this._y = b, this._z = c, this._w = d, this._updateEuler(), 
        this;
    },
    copy: function(a) {
        return this._x = a._x, this._y = a._y, this._z = a._z, this._w = a._w, this._updateEuler(), 
        this;
    },
    setFromEuler: function(a, b) {
        if (!1 == a instanceof THREE.Euler) throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");
        var c = Math.cos(a._x / 2), d = Math.cos(a._y / 2), e = Math.cos(a._z / 2), f = Math.sin(a._x / 2), g = Math.sin(a._y / 2), h = Math.sin(a._z / 2);
        return "XYZ" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e - f * d * h, 
        this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "YXZ" === a.order ? (this._x = f * d * e + c * g * h, 
        this._y = c * g * e - f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "ZXY" === a.order ? (this._x = f * d * e - c * g * h, 
        this._y = c * g * e + f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "ZYX" === a.order ? (this._x = f * d * e - c * g * h, 
        this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "YZX" === a.order ? (this._x = f * d * e + c * g * h, 
        this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e - f * g * h) : "XZY" === a.order && (this._x = f * d * e - c * g * h, 
        this._y = c * g * e - f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e + f * g * h), 
        !1 !== b && this._updateEuler(), this;
    },
    setFromAxisAngle: function(a, b) {
        var c = b / 2, d = Math.sin(c);
        return this._x = a.x * d, this._y = a.y * d, this._z = a.z * d, this._w = Math.cos(c), 
        this._updateEuler(), this;
    },
    setFromRotationMatrix: function(a) {
        var b = a.elements, c = b[0], a = b[4], d = b[8], e = b[1], f = b[5], g = b[9], h = b[2], i = b[6], b = b[10], j = c + f + b;
        return j > 0 ? (c = .5 / Math.sqrt(j + 1), this._w = .25 / c, this._x = (i - g) * c, 
        this._y = (d - h) * c, this._z = (e - a) * c) : c > f && c > b ? (c = 2 * Math.sqrt(1 + c - f - b), 
        this._w = (i - g) / c, this._x = .25 * c, this._y = (a + e) / c, this._z = (d + h) / c) : f > b ? (c = 2 * Math.sqrt(1 + f - c - b), 
        this._w = (d - h) / c, this._x = (a + e) / c, this._y = .25 * c, this._z = (g + i) / c) : (c = 2 * Math.sqrt(1 + b - c - f), 
        this._w = (e - a) / c, this._x = (d + h) / c, this._y = (g + i) / c, this._z = .25 * c), 
        this._updateEuler(), this;
    },
    inverse: function() {
        return this.conjugate().normalize(), this;
    },
    conjugate: function() {
        return this._x *= -1, this._y *= -1, this._z *= -1, this._updateEuler(), this;
    },
    lengthSq: function() {
        return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
    },
    length: function() {
        return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
    },
    normalize: function() {
        var a = this.length();
        return 0 === a ? (this._z = this._y = this._x = 0, this._w = 1) : (a = 1 / a, this._x *= a, 
        this._y *= a, this._z *= a, this._w *= a), this;
    },
    multiply: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), 
        this.multiplyQuaternions(a, b)) : this.multiplyQuaternions(this, a);
    },
    multiplyQuaternions: function(a, b) {
        var c = a._x, d = a._y, e = a._z, f = a._w, g = b._x, h = b._y, i = b._z, j = b._w;
        return this._x = c * j + f * g + d * i - e * h, this._y = d * j + f * h + e * g - c * i, 
        this._z = e * j + f * i + c * h - d * g, this._w = f * j - c * g - d * h - e * i, 
        this._updateEuler(), this;
    },
    multiplyVector3: function(a) {
        return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), 
        a.applyQuaternion(this);
    },
    slerp: function(a, b) {
        var c = this._x, d = this._y, e = this._z, f = this._w, g = f * a._w + c * a._x + d * a._y + e * a._z;
        if (0 > g ? (this._w = -a._w, this._x = -a._x, this._y = -a._y, this._z = -a._z, 
        g = -g) : this.copy(a), g >= 1) return this._w = f, this._x = c, this._y = d, this._z = e, 
        this;
        var h = Math.acos(g), i = Math.sqrt(1 - g * g);
        return .001 > Math.abs(i) ? (this._w = .5 * (f + this._w), this._x = .5 * (c + this._x), 
        this._y = .5 * (d + this._y), this._z = .5 * (e + this._z), this) : (g = Math.sin((1 - b) * h) / i, 
        h = Math.sin(b * h) / i, this._w = f * g + this._w * h, this._x = c * g + this._x * h, 
        this._y = d * g + this._y * h, this._z = e * g + this._z * h, this._updateEuler(), 
        this);
    },
    equals: function(a) {
        return a._x === this._x && a._y === this._y && a._z === this._z && a._w === this._w;
    },
    fromArray: function(a) {
        return this._x = a[0], this._y = a[1], this._z = a[2], this._w = a[3], this._updateEuler(), 
        this;
    },
    toArray: function() {
        return [ this._x, this._y, this._z, this._w ];
    },
    clone: function() {
        return new THREE.Quaternion(this._x, this._y, this._z, this._w);
    }
}, THREE.Quaternion.slerp = function(a, b, c, d) {
    return c.copy(a).slerp(b, d);
}, THREE.Vector2 = function(a, b) {
    this.x = a || 0, this.y = b || 0;
}, THREE.Vector2.prototype = {
    constructor: THREE.Vector2,
    set: function(a, b) {
        return this.x = a, this.y = b, this;
    },
    setX: function(a) {
        return this.x = a, this;
    },
    setY: function(a) {
        return this.y = a, this;
    },
    setComponent: function(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;

          case 1:
            this.y = b;
            break;

          default:
            throw Error("index is out of range: " + a);
        }
    },
    getComponent: function(a) {
        switch (a) {
          case 0:
            return this.x;

          case 1:
            return this.y;

          default:
            throw Error("index is out of range: " + a);
        }
    },
    copy: function(a) {
        return this.x = a.x, this.y = a.y, this;
    },
    add: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
        this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this);
    },
    addVectors: function(a, b) {
        return this.x = a.x + b.x, this.y = a.y + b.y, this;
    },
    addScalar: function(a) {
        return this.x += a, this.y += a, this;
    },
    sub: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
        this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this);
    },
    subVectors: function(a, b) {
        return this.x = a.x - b.x, this.y = a.y - b.y, this;
    },
    multiplyScalar: function(a) {
        return this.x *= a, this.y *= a, this;
    },
    divideScalar: function(a) {
        return 0 !== a ? (a = 1 / a, this.x *= a, this.y *= a) : this.y = this.x = 0, this;
    },
    min: function(a) {
        return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this;
    },
    max: function(a) {
        return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this;
    },
    clamp: function(a, b) {
        return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), 
        this;
    },
    negate: function() {
        return this.multiplyScalar(-1);
    },
    dot: function(a) {
        return this.x * a.x + this.y * a.y;
    },
    lengthSq: function() {
        return this.x * this.x + this.y * this.y;
    },
    length: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y);
    },
    normalize: function() {
        return this.divideScalar(this.length());
    },
    distanceTo: function(a) {
        return Math.sqrt(this.distanceToSquared(a));
    },
    distanceToSquared: function(a) {
        var b = this.x - a.x, a = this.y - a.y;
        return b * b + a * a;
    },
    setLength: function(a) {
        var b = this.length();
        return 0 !== b && a !== b && this.multiplyScalar(a / b), this;
    },
    lerp: function(a, b) {
        return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this;
    },
    equals: function(a) {
        return a.x === this.x && a.y === this.y;
    },
    fromArray: function(a) {
        return this.x = a[0], this.y = a[1], this;
    },
    toArray: function() {
        return [ this.x, this.y ];
    },
    clone: function() {
        return new THREE.Vector2(this.x, this.y);
    }
}, THREE.Vector3 = function(a, b, c) {
    this.x = a || 0, this.y = b || 0, this.z = c || 0;
}, THREE.Vector3.prototype = {
    constructor: THREE.Vector3,
    set: function(a, b, c) {
        return this.x = a, this.y = b, this.z = c, this;
    },
    setX: function(a) {
        return this.x = a, this;
    },
    setY: function(a) {
        return this.y = a, this;
    },
    setZ: function(a) {
        return this.z = a, this;
    },
    setComponent: function(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;

          case 1:
            this.y = b;
            break;

          case 2:
            this.z = b;
            break;

          default:
            throw Error("index is out of range: " + a);
        }
    },
    getComponent: function(a) {
        switch (a) {
          case 0:
            return this.x;

          case 1:
            return this.y;

          case 2:
            return this.z;

          default:
            throw Error("index is out of range: " + a);
        }
    },
    copy: function(a) {
        return this.x = a.x, this.y = a.y, this.z = a.z, this;
    },
    add: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
        this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this);
    },
    addScalar: function(a) {
        return this.x += a, this.y += a, this.z += a, this;
    },
    addVectors: function(a, b) {
        return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this;
    },
    sub: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
        this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this);
    },
    subVectors: function(a, b) {
        return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this;
    },
    multiply: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), 
        this.multiplyVectors(a, b)) : (this.x *= a.x, this.y *= a.y, this.z *= a.z, this);
    },
    multiplyScalar: function(a) {
        return this.x *= a, this.y *= a, this.z *= a, this;
    },
    multiplyVectors: function(a, b) {
        return this.x = a.x * b.x, this.y = a.y * b.y, this.z = a.z * b.z, this;
    },
    applyMatrix3: function(a) {
        var b = this.x, c = this.y, d = this.z, a = a.elements;
        return this.x = a[0] * b + a[3] * c + a[6] * d, this.y = a[1] * b + a[4] * c + a[7] * d, 
        this.z = a[2] * b + a[5] * c + a[8] * d, this;
    },
    applyMatrix4: function(a) {
        var b = this.x, c = this.y, d = this.z, a = a.elements;
        return this.x = a[0] * b + a[4] * c + a[8] * d + a[12], this.y = a[1] * b + a[5] * c + a[9] * d + a[13], 
        this.z = a[2] * b + a[6] * c + a[10] * d + a[14], this;
    },
    applyProjection: function(a) {
        var b = this.x, c = this.y, d = this.z, a = a.elements, e = 1 / (a[3] * b + a[7] * c + a[11] * d + a[15]);
        return this.x = (a[0] * b + a[4] * c + a[8] * d + a[12]) * e, this.y = (a[1] * b + a[5] * c + a[9] * d + a[13]) * e, 
        this.z = (a[2] * b + a[6] * c + a[10] * d + a[14]) * e, this;
    },
    applyQuaternion: function(a) {
        var b = this.x, c = this.y, d = this.z, e = a.x, f = a.y, g = a.z, a = a.w, h = a * b + f * d - g * c, i = a * c + g * b - e * d, j = a * d + e * c - f * b, b = -e * b - f * c - g * d;
        return this.x = h * a + b * -e + i * -g - j * -f, this.y = i * a + b * -f + j * -e - h * -g, 
        this.z = j * a + b * -g + h * -f - i * -e, this;
    },
    transformDirection: function(a) {
        var b = this.x, c = this.y, d = this.z, a = a.elements;
        return this.x = a[0] * b + a[4] * c + a[8] * d, this.y = a[1] * b + a[5] * c + a[9] * d, 
        this.z = a[2] * b + a[6] * c + a[10] * d, this.normalize(), this;
    },
    divide: function(a) {
        return this.x /= a.x, this.y /= a.y, this.z /= a.z, this;
    },
    divideScalar: function(a) {
        return 0 !== a ? (a = 1 / a, this.x *= a, this.y *= a, this.z *= a) : this.z = this.y = this.x = 0, 
        this;
    },
    min: function(a) {
        return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this.z > a.z && (this.z = a.z), 
        this;
    },
    max: function(a) {
        return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this.z < a.z && (this.z = a.z), 
        this;
    },
    clamp: function(a, b) {
        return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), 
        this.z < a.z ? this.z = a.z : this.z > b.z && (this.z = b.z), this;
    },
    negate: function() {
        return this.multiplyScalar(-1);
    },
    dot: function(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z;
    },
    lengthSq: function() {
        return this.x * this.x + this.y * this.y + this.z * this.z;
    },
    length: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
    },
    lengthManhattan: function() {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
    },
    normalize: function() {
        return this.divideScalar(this.length());
    },
    setLength: function(a) {
        var b = this.length();
        return 0 !== b && a !== b && this.multiplyScalar(a / b), this;
    },
    lerp: function(a, b) {
        return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, 
        this;
    },
    cross: function(a, b) {
        if (void 0 !== b) return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), 
        this.crossVectors(a, b);
        var c = this.x, d = this.y, e = this.z;
        return this.x = d * a.z - e * a.y, this.y = e * a.x - c * a.z, this.z = c * a.y - d * a.x, 
        this;
    },
    crossVectors: function(a, b) {
        var c = a.x, d = a.y, e = a.z, f = b.x, g = b.y, h = b.z;
        return this.x = d * h - e * g, this.y = e * f - c * h, this.z = c * g - d * f, this;
    },
    angleTo: function(a) {
        return a = this.dot(a) / (this.length() * a.length()), Math.acos(THREE.Math.clamp(a, -1, 1));
    },
    distanceTo: function(a) {
        return Math.sqrt(this.distanceToSquared(a));
    },
    distanceToSquared: function(a) {
        var b = this.x - a.x, c = this.y - a.y, a = this.z - a.z;
        return b * b + c * c + a * a;
    },
    setEulerFromRotationMatrix: function() {
        console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.");
    },
    setEulerFromQuaternion: function() {
        console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.");
    },
    getPositionFromMatrix: function(a) {
        return console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code."), 
        this.setFromMatrixPosition(a);
    },
    getScaleFromMatrix: function(a) {
        return console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code."), 
        this.setFromMatrixScale(a);
    },
    getColumnFromMatrix: function(a, b) {
        return console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code."), 
        this.setFromMatrixColumn(a, b);
    },
    setFromMatrixPosition: function(a) {
        return this.x = a.elements[12], this.y = a.elements[13], this.z = a.elements[14], 
        this;
    },
    setFromMatrixScale: function(a) {
        var b = this.set(a.elements[0], a.elements[1], a.elements[2]).length(), c = this.set(a.elements[4], a.elements[5], a.elements[6]).length(), a = this.set(a.elements[8], a.elements[9], a.elements[10]).length();
        return this.x = b, this.y = c, this.z = a, this;
    },
    setFromMatrixColumn: function(a, b) {
        var c = 4 * a, d = b.elements;
        return this.x = d[c], this.y = d[c + 1], this.z = d[c + 2], this;
    },
    equals: function(a) {
        return a.x === this.x && a.y === this.y && a.z === this.z;
    },
    fromArray: function(a) {
        return this.x = a[0], this.y = a[1], this.z = a[2], this;
    },
    toArray: function() {
        return [ this.x, this.y, this.z ];
    },
    clone: function() {
        return new THREE.Vector3(this.x, this.y, this.z);
    }
}, THREE.extend(THREE.Vector3.prototype, {
    applyEuler: function() {
        var a = new THREE.Quaternion();
        return function(b) {
            return !1 == b instanceof THREE.Euler && console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."), 
            this.applyQuaternion(a.setFromEuler(b)), this;
        };
    }(),
    applyAxisAngle: function() {
        var a = new THREE.Quaternion();
        return function(b, c) {
            return this.applyQuaternion(a.setFromAxisAngle(b, c)), this;
        };
    }(),
    projectOnVector: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return a.copy(b).normalize(), b = this.dot(a), this.copy(a).multiplyScalar(b);
        };
    }(),
    projectOnPlane: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return a.copy(this).projectOnVector(b), this.sub(a);
        };
    }(),
    reflect: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return a.copy(this).projectOnVector(b).multiplyScalar(2), this.subVectors(a, this);
        };
    }()
}), THREE.Vector4 = function(a, b, c, d) {
    this.x = a || 0, this.y = b || 0, this.z = c || 0, this.w = void 0 !== d ? d : 1;
}, THREE.Vector4.prototype = {
    constructor: THREE.Vector4,
    set: function(a, b, c, d) {
        return this.x = a, this.y = b, this.z = c, this.w = d, this;
    },
    setX: function(a) {
        return this.x = a, this;
    },
    setY: function(a) {
        return this.y = a, this;
    },
    setZ: function(a) {
        return this.z = a, this;
    },
    setW: function(a) {
        return this.w = a, this;
    },
    setComponent: function(a, b) {
        switch (a) {
          case 0:
            this.x = b;
            break;

          case 1:
            this.y = b;
            break;

          case 2:
            this.z = b;
            break;

          case 3:
            this.w = b;
            break;

          default:
            throw Error("index is out of range: " + a);
        }
    },
    getComponent: function(a) {
        switch (a) {
          case 0:
            return this.x;

          case 1:
            return this.y;

          case 2:
            return this.z;

          case 3:
            return this.w;

          default:
            throw Error("index is out of range: " + a);
        }
    },
    copy: function(a) {
        return this.x = a.x, this.y = a.y, this.z = a.z, this.w = void 0 !== a.w ? a.w : 1, 
        this;
    },
    add: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
        this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this.w += a.w, 
        this);
    },
    addScalar: function(a) {
        return this.x += a, this.y += a, this.z += a, this.w += a, this;
    },
    addVectors: function(a, b) {
        return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this.w = a.w + b.w, 
        this;
    },
    sub: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
        this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this.w -= a.w, 
        this);
    },
    subVectors: function(a, b) {
        return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this.w = a.w - b.w, 
        this;
    },
    multiplyScalar: function(a) {
        return this.x *= a, this.y *= a, this.z *= a, this.w *= a, this;
    },
    applyMatrix4: function(a) {
        var b = this.x, c = this.y, d = this.z, e = this.w, a = a.elements;
        return this.x = a[0] * b + a[4] * c + a[8] * d + a[12] * e, this.y = a[1] * b + a[5] * c + a[9] * d + a[13] * e, 
        this.z = a[2] * b + a[6] * c + a[10] * d + a[14] * e, this.w = a[3] * b + a[7] * c + a[11] * d + a[15] * e, 
        this;
    },
    divideScalar: function(a) {
        return 0 !== a ? (a = 1 / a, this.x *= a, this.y *= a, this.z *= a, this.w *= a) : (this.z = this.y = this.x = 0, 
        this.w = 1), this;
    },
    setAxisAngleFromQuaternion: function(a) {
        this.w = 2 * Math.acos(a.w);
        var b = Math.sqrt(1 - a.w * a.w);
        return 1e-4 > b ? (this.x = 1, this.z = this.y = 0) : (this.x = a.x / b, this.y = a.y / b, 
        this.z = a.z / b), this;
    },
    setAxisAngleFromRotationMatrix: function(a) {
        var b, c, d, a = a.elements, e = a[0];
        d = a[4];
        var f = a[8], g = a[1], h = a[5], i = a[9];
        c = a[2], b = a[6];
        var j = a[10];
        return .01 > Math.abs(d - g) && .01 > Math.abs(f - c) && .01 > Math.abs(i - b) ? .1 > Math.abs(d + g) && .1 > Math.abs(f + c) && .1 > Math.abs(i + b) && .1 > Math.abs(e + h + j - 3) ? (this.set(1, 0, 0, 0), 
        this) : (a = Math.PI, e = (e + 1) / 2, h = (h + 1) / 2, j = (j + 1) / 2, d = (d + g) / 4, 
        f = (f + c) / 4, i = (i + b) / 4, e > h && e > j ? .01 > e ? (b = 0, d = c = .707106781) : (b = Math.sqrt(e), 
        c = d / b, d = f / b) : h > j ? .01 > h ? (b = .707106781, c = 0, d = .707106781) : (c = Math.sqrt(h), 
        b = d / c, d = i / c) : .01 > j ? (c = b = .707106781, d = 0) : (d = Math.sqrt(j), 
        b = f / d, c = i / d), this.set(b, c, d, a), this) : (a = Math.sqrt((b - i) * (b - i) + (f - c) * (f - c) + (g - d) * (g - d)), 
        .001 > Math.abs(a) && (a = 1), this.x = (b - i) / a, this.y = (f - c) / a, this.z = (g - d) / a, 
        this.w = Math.acos((e + h + j - 1) / 2), this);
    },
    min: function(a) {
        return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this.z > a.z && (this.z = a.z), 
        this.w > a.w && (this.w = a.w), this;
    },
    max: function(a) {
        return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this.z < a.z && (this.z = a.z), 
        this.w < a.w && (this.w = a.w), this;
    },
    clamp: function(a, b) {
        return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), 
        this.z < a.z ? this.z = a.z : this.z > b.z && (this.z = b.z), this.w < a.w ? this.w = a.w : this.w > b.w && (this.w = b.w), 
        this;
    },
    negate: function() {
        return this.multiplyScalar(-1);
    },
    dot: function(a) {
        return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w;
    },
    lengthSq: function() {
        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
    },
    length: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
    },
    lengthManhattan: function() {
        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
    },
    normalize: function() {
        return this.divideScalar(this.length());
    },
    setLength: function(a) {
        var b = this.length();
        return 0 !== b && a !== b && this.multiplyScalar(a / b), this;
    },
    lerp: function(a, b) {
        return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, 
        this.w += (a.w - this.w) * b, this;
    },
    equals: function(a) {
        return a.x === this.x && a.y === this.y && a.z === this.z && a.w === this.w;
    },
    fromArray: function(a) {
        return this.x = a[0], this.y = a[1], this.z = a[2], this.w = a[3], this;
    },
    toArray: function() {
        return [ this.x, this.y, this.z, this.w ];
    },
    clone: function() {
        return new THREE.Vector4(this.x, this.y, this.z, this.w);
    }
}, THREE.Euler = function(a, b, c, d) {
    this._x = a || 0, this._y = b || 0, this._z = c || 0, this._order = d || THREE.Euler.DefaultOrder;
}, THREE.Euler.RotationOrders = "XYZ YZX ZXY XZY YXZ ZYX".split(" "), THREE.Euler.DefaultOrder = "XYZ", 
THREE.Euler.prototype = {
    constructor: THREE.Euler,
    _x: 0,
    _y: 0,
    _z: 0,
    _order: THREE.Euler.DefaultOrder,
    _quaternion: void 0,
    _updateQuaternion: function() {
        void 0 !== this._quaternion && this._quaternion.setFromEuler(this, !1);
    },
    get x() {
        return this._x;
    },
    set x(a) {
        this._x = a, this._updateQuaternion();
    },
    get y() {
        return this._y;
    },
    set y(a) {
        this._y = a, this._updateQuaternion();
    },
    get z() {
        return this._z;
    },
    set z(a) {
        this._z = a, this._updateQuaternion();
    },
    get order() {
        return this._order;
    },
    set order(a) {
        this._order = a, this._updateQuaternion();
    },
    set: function(a, b, c, d) {
        return this._x = a, this._y = b, this._z = c, this._order = d || this._order, this._updateQuaternion(), 
        this;
    },
    copy: function(a) {
        return this._x = a._x, this._y = a._y, this._z = a._z, this._order = a._order, this._updateQuaternion(), 
        this;
    },
    setFromRotationMatrix: function(a, b) {
        function c(a) {
            return Math.min(Math.max(a, -1), 1);
        }
        var d = a.elements, e = d[0], f = d[4], g = d[8], h = d[1], i = d[5], j = d[9], k = d[2], l = d[6], d = d[10], b = b || this._order;
        return "XYZ" === b ? (this._y = Math.asin(c(g)), .99999 > Math.abs(g) ? (this._x = Math.atan2(-j, d), 
        this._z = Math.atan2(-f, e)) : (this._x = Math.atan2(l, i), this._z = 0)) : "YXZ" === b ? (this._x = Math.asin(-c(j)), 
        .99999 > Math.abs(j) ? (this._y = Math.atan2(g, d), this._z = Math.atan2(h, i)) : (this._y = Math.atan2(-k, e), 
        this._z = 0)) : "ZXY" === b ? (this._x = Math.asin(c(l)), .99999 > Math.abs(l) ? (this._y = Math.atan2(-k, d), 
        this._z = Math.atan2(-f, i)) : (this._y = 0, this._z = Math.atan2(h, e))) : "ZYX" === b ? (this._y = Math.asin(-c(k)), 
        .99999 > Math.abs(k) ? (this._x = Math.atan2(l, d), this._z = Math.atan2(h, e)) : (this._x = 0, 
        this._z = Math.atan2(-f, i))) : "YZX" === b ? (this._z = Math.asin(c(h)), .99999 > Math.abs(h) ? (this._x = Math.atan2(-j, i), 
        this._y = Math.atan2(-k, e)) : (this._x = 0, this._y = Math.atan2(g, d))) : "XZY" === b ? (this._z = Math.asin(-c(f)), 
        .99999 > Math.abs(f) ? (this._x = Math.atan2(l, i), this._y = Math.atan2(g, e)) : (this._x = Math.atan2(-j, d), 
        this._y = 0)) : console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: " + b), 
        this._order = b, this._updateQuaternion(), this;
    },
    setFromQuaternion: function(a, b, c) {
        function d(a) {
            return Math.min(Math.max(a, -1), 1);
        }
        var e = a.x * a.x, f = a.y * a.y, g = a.z * a.z, h = a.w * a.w, b = b || this._order;
        return "XYZ" === b ? (this._x = Math.atan2(2 * (a.x * a.w - a.y * a.z), h - e - f + g), 
        this._y = Math.asin(d(2 * (a.x * a.z + a.y * a.w))), this._z = Math.atan2(2 * (a.z * a.w - a.x * a.y), h + e - f - g)) : "YXZ" === b ? (this._x = Math.asin(d(2 * (a.x * a.w - a.y * a.z))), 
        this._y = Math.atan2(2 * (a.x * a.z + a.y * a.w), h - e - f + g), this._z = Math.atan2(2 * (a.x * a.y + a.z * a.w), h - e + f - g)) : "ZXY" === b ? (this._x = Math.asin(d(2 * (a.x * a.w + a.y * a.z))), 
        this._y = Math.atan2(2 * (a.y * a.w - a.z * a.x), h - e - f + g), this._z = Math.atan2(2 * (a.z * a.w - a.x * a.y), h - e + f - g)) : "ZYX" === b ? (this._x = Math.atan2(2 * (a.x * a.w + a.z * a.y), h - e - f + g), 
        this._y = Math.asin(d(2 * (a.y * a.w - a.x * a.z))), this._z = Math.atan2(2 * (a.x * a.y + a.z * a.w), h + e - f - g)) : "YZX" === b ? (this._x = Math.atan2(2 * (a.x * a.w - a.z * a.y), h - e + f - g), 
        this._y = Math.atan2(2 * (a.y * a.w - a.x * a.z), h + e - f - g), this._z = Math.asin(d(2 * (a.x * a.y + a.z * a.w)))) : "XZY" === b ? (this._x = Math.atan2(2 * (a.x * a.w + a.y * a.z), h - e + f - g), 
        this._y = Math.atan2(2 * (a.x * a.z + a.y * a.w), h + e - f - g), this._z = Math.asin(d(2 * (a.z * a.w - a.x * a.y)))) : console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: " + b), 
        this._order = b, !1 !== c && this._updateQuaternion(), this;
    },
    reorder: function() {
        var a = new THREE.Quaternion();
        return function(b) {
            a.setFromEuler(this), this.setFromQuaternion(a, b);
        };
    }(),
    fromArray: function(a) {
        return this._x = a[0], this._y = a[1], this._z = a[2], void 0 !== a[3] && (this._order = a[3]), 
        this._updateQuaternion(), this;
    },
    toArray: function() {
        return [ this._x, this._y, this._z, this._order ];
    },
    equals: function(a) {
        return a._x === this._x && a._y === this._y && a._z === this._z && a._order === this._order;
    },
    clone: function() {
        return new THREE.Euler(this._x, this._y, this._z, this._order);
    }
}, THREE.Line3 = function(a, b) {
    this.start = void 0 !== a ? a : new THREE.Vector3(), this.end = void 0 !== b ? b : new THREE.Vector3();
}, THREE.Line3.prototype = {
    constructor: THREE.Line3,
    set: function(a, b) {
        return this.start.copy(a), this.end.copy(b), this;
    },
    copy: function(a) {
        return this.start.copy(a.start), this.end.copy(a.end), this;
    },
    center: function(a) {
        return (a || new THREE.Vector3()).addVectors(this.start, this.end).multiplyScalar(.5);
    },
    delta: function(a) {
        return (a || new THREE.Vector3()).subVectors(this.end, this.start);
    },
    distanceSq: function() {
        return this.start.distanceToSquared(this.end);
    },
    distance: function() {
        return this.start.distanceTo(this.end);
    },
    at: function(a, b) {
        var c = b || new THREE.Vector3();
        return this.delta(c).multiplyScalar(a).add(this.start);
    },
    closestPointToPointParameter: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c, d) {
            a.subVectors(c, this.start), b.subVectors(this.end, this.start);
            var e = b.dot(b), e = b.dot(a) / e;
            return d && (e = THREE.Math.clamp(e, 0, 1)), e;
        };
    }(),
    closestPointToPoint: function(a, b, c) {
        return a = this.closestPointToPointParameter(a, b), c = c || new THREE.Vector3(), 
        this.delta(c).multiplyScalar(a).add(this.start);
    },
    applyMatrix4: function(a) {
        return this.start.applyMatrix4(a), this.end.applyMatrix4(a), this;
    },
    equals: function(a) {
        return a.start.equals(this.start) && a.end.equals(this.end);
    },
    clone: function() {
        return new THREE.Line3().copy(this);
    }
}, THREE.Box2 = function(a, b) {
    this.min = void 0 !== a ? a : new THREE.Vector2(1/0, 1/0), this.max = void 0 !== b ? b : new THREE.Vector2(-1/0, -1/0);
}, THREE.Box2.prototype = {
    constructor: THREE.Box2,
    set: function(a, b) {
        return this.min.copy(a), this.max.copy(b), this;
    },
    setFromPoints: function(a) {
        if (0 < a.length) {
            var b = a[0];
            this.min.copy(b), this.max.copy(b);
            for (var c = 1, d = a.length; d > c; c++) b = a[c], b.x < this.min.x ? this.min.x = b.x : b.x > this.max.x && (this.max.x = b.x), 
            b.y < this.min.y ? this.min.y = b.y : b.y > this.max.y && (this.max.y = b.y);
        } else this.makeEmpty();
        return this;
    },
    setFromCenterAndSize: function() {
        var a = new THREE.Vector2();
        return function(b, c) {
            var d = a.copy(c).multiplyScalar(.5);
            return this.min.copy(b).sub(d), this.max.copy(b).add(d), this;
        };
    }(),
    copy: function(a) {
        return this.min.copy(a.min), this.max.copy(a.max), this;
    },
    makeEmpty: function() {
        return this.min.x = this.min.y = 1/0, this.max.x = this.max.y = -1/0, this;
    },
    empty: function() {
        return this.max.x < this.min.x || this.max.y < this.min.y;
    },
    center: function(a) {
        return (a || new THREE.Vector2()).addVectors(this.min, this.max).multiplyScalar(.5);
    },
    size: function(a) {
        return (a || new THREE.Vector2()).subVectors(this.max, this.min);
    },
    expandByPoint: function(a) {
        return this.min.min(a), this.max.max(a), this;
    },
    expandByVector: function(a) {
        return this.min.sub(a), this.max.add(a), this;
    },
    expandByScalar: function(a) {
        return this.min.addScalar(-a), this.max.addScalar(a), this;
    },
    containsPoint: function(a) {
        return a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y ? !1 : !0;
    },
    containsBox: function(a) {
        return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y ? !0 : !1;
    },
    getParameter: function(a, b) {
        return (b || new THREE.Vector2()).set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y));
    },
    isIntersectionBox: function(a) {
        return a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y ? !1 : !0;
    },
    clampPoint: function(a, b) {
        return (b || new THREE.Vector2()).copy(a).clamp(this.min, this.max);
    },
    distanceToPoint: function() {
        var a = new THREE.Vector2();
        return function(b) {
            return a.copy(b).clamp(this.min, this.max).sub(b).length();
        };
    }(),
    intersect: function(a) {
        return this.min.max(a.min), this.max.min(a.max), this;
    },
    union: function(a) {
        return this.min.min(a.min), this.max.max(a.max), this;
    },
    translate: function(a) {
        return this.min.add(a), this.max.add(a), this;
    },
    equals: function(a) {
        return a.min.equals(this.min) && a.max.equals(this.max);
    },
    clone: function() {
        return new THREE.Box2().copy(this);
    }
}, THREE.Box3 = function(a, b) {
    this.min = void 0 !== a ? a : new THREE.Vector3(1/0, 1/0, 1/0), this.max = void 0 !== b ? b : new THREE.Vector3(-1/0, -1/0, -1/0);
}, THREE.Box3.prototype = {
    constructor: THREE.Box3,
    set: function(a, b) {
        return this.min.copy(a), this.max.copy(b), this;
    },
    addPoint: function(a) {
        a.x < this.min.x ? this.min.x = a.x : a.x > this.max.x && (this.max.x = a.x), a.y < this.min.y ? this.min.y = a.y : a.y > this.max.y && (this.max.y = a.y), 
        a.z < this.min.z ? this.min.z = a.z : a.z > this.max.z && (this.max.z = a.z);
    },
    setFromPoints: function(a) {
        if (0 < a.length) {
            var b = a[0];
            this.min.copy(b), this.max.copy(b);
            for (var b = 1, c = a.length; c > b; b++) this.addPoint(a[b]);
        } else this.makeEmpty();
        return this;
    },
    setFromCenterAndSize: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            var d = a.copy(c).multiplyScalar(.5);
            return this.min.copy(b).sub(d), this.max.copy(b).add(d), this;
        };
    }(),
    setFromObject: function() {
        var a = new THREE.Vector3();
        return function(b) {
            var c = this;
            return b.updateMatrixWorld(!0), this.makeEmpty(), b.traverse(function(b) {
                if (void 0 !== b.geometry && void 0 !== b.geometry.vertices) for (var d = b.geometry.vertices, e = 0, f = d.length; f > e; e++) a.copy(d[e]), 
                a.applyMatrix4(b.matrixWorld), c.expandByPoint(a);
            }), this;
        };
    }(),
    copy: function(a) {
        return this.min.copy(a.min), this.max.copy(a.max), this;
    },
    makeEmpty: function() {
        return this.min.x = this.min.y = this.min.z = 1/0, this.max.x = this.max.y = this.max.z = -1/0, 
        this;
    },
    empty: function() {
        return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
    },
    center: function(a) {
        return (a || new THREE.Vector3()).addVectors(this.min, this.max).multiplyScalar(.5);
    },
    size: function(a) {
        return (a || new THREE.Vector3()).subVectors(this.max, this.min);
    },
    expandByPoint: function(a) {
        return this.min.min(a), this.max.max(a), this;
    },
    expandByVector: function(a) {
        return this.min.sub(a), this.max.add(a), this;
    },
    expandByScalar: function(a) {
        return this.min.addScalar(-a), this.max.addScalar(a), this;
    },
    containsPoint: function(a) {
        return a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y || a.z < this.min.z || a.z > this.max.z ? !1 : !0;
    },
    containsBox: function(a) {
        return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y && this.min.z <= a.min.z && a.max.z <= this.max.z ? !0 : !1;
    },
    getParameter: function(a, b) {
        return (b || new THREE.Vector3()).set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y), (a.z - this.min.z) / (this.max.z - this.min.z));
    },
    isIntersectionBox: function(a) {
        return a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y || a.max.z < this.min.z || a.min.z > this.max.z ? !1 : !0;
    },
    clampPoint: function(a, b) {
        return (b || new THREE.Vector3()).copy(a).clamp(this.min, this.max);
    },
    distanceToPoint: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return a.copy(b).clamp(this.min, this.max).sub(b).length();
        };
    }(),
    getBoundingSphere: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return b = b || new THREE.Sphere(), b.center = this.center(), b.radius = .5 * this.size(a).length(), 
            b;
        };
    }(),
    intersect: function(a) {
        return this.min.max(a.min), this.max.min(a.max), this;
    },
    union: function(a) {
        return this.min.min(a.min), this.max.max(a.max), this;
    },
    applyMatrix4: function() {
        var a = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];
        return function(b) {
            return a[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(b), a[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(b), 
            a[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(b), a[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(b), 
            a[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(b), a[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(b), 
            a[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(b), a[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(b), 
            this.makeEmpty(), this.setFromPoints(a), this;
        };
    }(),
    translate: function(a) {
        return this.min.add(a), this.max.add(a), this;
    },
    equals: function(a) {
        return a.min.equals(this.min) && a.max.equals(this.max);
    },
    clone: function() {
        return new THREE.Box3().copy(this);
    }
}, THREE.Matrix3 = function(a, b, c, d, e, f, g, h, i) {
    this.elements = new Float32Array(9), this.set(void 0 !== a ? a : 1, b || 0, c || 0, d || 0, void 0 !== e ? e : 1, f || 0, g || 0, h || 0, void 0 !== i ? i : 1);
}, THREE.Matrix3.prototype = {
    constructor: THREE.Matrix3,
    set: function(a, b, c, d, e, f, g, h, i) {
        var j = this.elements;
        return j[0] = a, j[3] = b, j[6] = c, j[1] = d, j[4] = e, j[7] = f, j[2] = g, j[5] = h, 
        j[8] = i, this;
    },
    identity: function() {
        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
    },
    copy: function(a) {
        return a = a.elements, this.set(a[0], a[3], a[6], a[1], a[4], a[7], a[2], a[5], a[8]), 
        this;
    },
    multiplyVector3: function(a) {
        return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), 
        a.applyMatrix3(this);
    },
    multiplyVector3Array: function() {
        var a = new THREE.Vector3();
        return function(b) {
            for (var c = 0, d = b.length; d > c; c += 3) a.x = b[c], a.y = b[c + 1], a.z = b[c + 2], 
            a.applyMatrix3(this), b[c] = a.x, b[c + 1] = a.y, b[c + 2] = a.z;
            return b;
        };
    }(),
    multiplyScalar: function(a) {
        var b = this.elements;
        return b[0] *= a, b[3] *= a, b[6] *= a, b[1] *= a, b[4] *= a, b[7] *= a, b[2] *= a, 
        b[5] *= a, b[8] *= a, this;
    },
    determinant: function() {
        var a = this.elements, b = a[0], c = a[1], d = a[2], e = a[3], f = a[4], g = a[5], h = a[6], i = a[7], a = a[8];
        return b * f * a - b * g * i - c * e * a + c * g * h + d * e * i - d * f * h;
    },
    getInverse: function(a, b) {
        var c = a.elements, d = this.elements;
        if (d[0] = c[10] * c[5] - c[6] * c[9], d[1] = -c[10] * c[1] + c[2] * c[9], d[2] = c[6] * c[1] - c[2] * c[5], 
        d[3] = -c[10] * c[4] + c[6] * c[8], d[4] = c[10] * c[0] - c[2] * c[8], d[5] = -c[6] * c[0] + c[2] * c[4], 
        d[6] = c[9] * c[4] - c[5] * c[8], d[7] = -c[9] * c[0] + c[1] * c[8], d[8] = c[5] * c[0] - c[1] * c[4], 
        c = c[0] * d[0] + c[1] * d[3] + c[2] * d[6], 0 === c) {
            if (b) throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");
            return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"), 
            this.identity(), this;
        }
        return this.multiplyScalar(1 / c), this;
    },
    transpose: function() {
        var a, b = this.elements;
        return a = b[1], b[1] = b[3], b[3] = a, a = b[2], b[2] = b[6], b[6] = a, a = b[5], 
        b[5] = b[7], b[7] = a, this;
    },
    getNormalMatrix: function(a) {
        return this.getInverse(a).transpose(), this;
    },
    transposeIntoArray: function(a) {
        var b = this.elements;
        return a[0] = b[0], a[1] = b[3], a[2] = b[6], a[3] = b[1], a[4] = b[4], a[5] = b[7], 
        a[6] = b[2], a[7] = b[5], a[8] = b[8], this;
    },
    clone: function() {
        var a = this.elements;
        return new THREE.Matrix3(a[0], a[3], a[6], a[1], a[4], a[7], a[2], a[5], a[8]);
    }
}, THREE.Matrix4 = function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
    var q = this.elements = new Float32Array(16);
    q[0] = void 0 !== a ? a : 1, q[4] = b || 0, q[8] = c || 0, q[12] = d || 0, q[1] = e || 0, 
    q[5] = void 0 !== f ? f : 1, q[9] = g || 0, q[13] = h || 0, q[2] = i || 0, q[6] = j || 0, 
    q[10] = void 0 !== k ? k : 1, q[14] = l || 0, q[3] = m || 0, q[7] = n || 0, q[11] = o || 0, 
    q[15] = void 0 !== p ? p : 1;
}, THREE.Matrix4.prototype = {
    constructor: THREE.Matrix4,
    set: function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this.elements;
        return q[0] = a, q[4] = b, q[8] = c, q[12] = d, q[1] = e, q[5] = f, q[9] = g, q[13] = h, 
        q[2] = i, q[6] = j, q[10] = k, q[14] = l, q[3] = m, q[7] = n, q[11] = o, q[15] = p, 
        this;
    },
    identity: function() {
        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
    },
    copy: function(a) {
        return this.elements.set(a.elements), this;
    },
    extractPosition: function(a) {
        return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."), 
        this.copyPosition(a);
    },
    copyPosition: function(a) {
        var b = this.elements, a = a.elements;
        return b[12] = a[12], b[13] = a[13], b[14] = a[14], this;
    },
    extractRotation: function() {
        var a = new THREE.Vector3();
        return function(b) {
            var c = this.elements, b = b.elements, d = 1 / a.set(b[0], b[1], b[2]).length(), e = 1 / a.set(b[4], b[5], b[6]).length(), f = 1 / a.set(b[8], b[9], b[10]).length();
            return c[0] = b[0] * d, c[1] = b[1] * d, c[2] = b[2] * d, c[4] = b[4] * e, c[5] = b[5] * e, 
            c[6] = b[6] * e, c[8] = b[8] * f, c[9] = b[9] * f, c[10] = b[10] * f, this;
        };
    }(),
    makeRotationFromEuler: function(a) {
        !1 == a instanceof THREE.Euler && console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");
        var b = this.elements, c = a.x, d = a.y, e = a.z, f = Math.cos(c), c = Math.sin(c), g = Math.cos(d), d = Math.sin(d), h = Math.cos(e), e = Math.sin(e);
        if ("XYZ" === a.order) {
            var a = f * h, i = f * e, j = c * h, k = c * e;
            b[0] = g * h, b[4] = -g * e, b[8] = d, b[1] = i + j * d, b[5] = a - k * d, b[9] = -c * g, 
            b[2] = k - a * d, b[6] = j + i * d, b[10] = f * g;
        } else "YXZ" === a.order ? (a = g * h, i = g * e, j = d * h, k = d * e, b[0] = a + k * c, 
        b[4] = j * c - i, b[8] = f * d, b[1] = f * e, b[5] = f * h, b[9] = -c, b[2] = i * c - j, 
        b[6] = k + a * c, b[10] = f * g) : "ZXY" === a.order ? (a = g * h, i = g * e, j = d * h, 
        k = d * e, b[0] = a - k * c, b[4] = -f * e, b[8] = j + i * c, b[1] = i + j * c, 
        b[5] = f * h, b[9] = k - a * c, b[2] = -f * d, b[6] = c, b[10] = f * g) : "ZYX" === a.order ? (a = f * h, 
        i = f * e, j = c * h, k = c * e, b[0] = g * h, b[4] = j * d - i, b[8] = a * d + k, 
        b[1] = g * e, b[5] = k * d + a, b[9] = i * d - j, b[2] = -d, b[6] = c * g, b[10] = f * g) : "YZX" === a.order ? (a = f * g, 
        i = f * d, j = c * g, k = c * d, b[0] = g * h, b[4] = k - a * e, b[8] = j * e + i, 
        b[1] = e, b[5] = f * h, b[9] = -c * h, b[2] = -d * h, b[6] = i * e + j, b[10] = a - k * e) : "XZY" === a.order && (a = f * g, 
        i = f * d, j = c * g, k = c * d, b[0] = g * h, b[4] = -e, b[8] = d * h, b[1] = a * e + k, 
        b[5] = f * h, b[9] = i * e - j, b[2] = j * e - i, b[6] = c * h, b[10] = k * e + a);
        return b[3] = 0, b[7] = 0, b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, 
        this;
    },
    setRotationFromQuaternion: function(a) {
        return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."), 
        this.makeRotationFromQuaternion(a);
    },
    makeRotationFromQuaternion: function(a) {
        var b = this.elements, c = a.x, d = a.y, e = a.z, f = a.w, g = c + c, h = d + d, i = e + e, a = c * g, j = c * h, c = c * i, k = d * h, d = d * i, e = e * i, g = f * g, h = f * h, f = f * i;
        return b[0] = 1 - (k + e), b[4] = j - f, b[8] = c + h, b[1] = j + f, b[5] = 1 - (a + e), 
        b[9] = d - g, b[2] = c - h, b[6] = d + g, b[10] = 1 - (a + k), b[3] = 0, b[7] = 0, 
        b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, this;
    },
    lookAt: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3();
        return function(d, e, f) {
            var g = this.elements;
            return c.subVectors(d, e).normalize(), 0 === c.length() && (c.z = 1), a.crossVectors(f, c).normalize(), 
            0 === a.length() && (c.x += 1e-4, a.crossVectors(f, c).normalize()), b.crossVectors(c, a), 
            g[0] = a.x, g[4] = b.x, g[8] = c.x, g[1] = a.y, g[5] = b.y, g[9] = c.y, g[2] = a.z, 
            g[6] = b.z, g[10] = c.z, this;
        };
    }(),
    multiply: function(a, b) {
        return void 0 !== b ? (console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), 
        this.multiplyMatrices(a, b)) : this.multiplyMatrices(this, a);
    },
    multiplyMatrices: function(a, b) {
        var c = a.elements, d = b.elements, e = this.elements, f = c[0], g = c[4], h = c[8], i = c[12], j = c[1], k = c[5], l = c[9], m = c[13], n = c[2], o = c[6], p = c[10], q = c[14], r = c[3], s = c[7], t = c[11], c = c[15], u = d[0], v = d[4], w = d[8], x = d[12], y = d[1], z = d[5], A = d[9], B = d[13], C = d[2], D = d[6], E = d[10], F = d[14], G = d[3], H = d[7], I = d[11], d = d[15];
        return e[0] = f * u + g * y + h * C + i * G, e[4] = f * v + g * z + h * D + i * H, 
        e[8] = f * w + g * A + h * E + i * I, e[12] = f * x + g * B + h * F + i * d, e[1] = j * u + k * y + l * C + m * G, 
        e[5] = j * v + k * z + l * D + m * H, e[9] = j * w + k * A + l * E + m * I, e[13] = j * x + k * B + l * F + m * d, 
        e[2] = n * u + o * y + p * C + q * G, e[6] = n * v + o * z + p * D + q * H, e[10] = n * w + o * A + p * E + q * I, 
        e[14] = n * x + o * B + p * F + q * d, e[3] = r * u + s * y + t * C + c * G, e[7] = r * v + s * z + t * D + c * H, 
        e[11] = r * w + s * A + t * E + c * I, e[15] = r * x + s * B + t * F + c * d, this;
    },
    multiplyToArray: function(a, b, c) {
        var d = this.elements;
        return this.multiplyMatrices(a, b), c[0] = d[0], c[1] = d[1], c[2] = d[2], c[3] = d[3], 
        c[4] = d[4], c[5] = d[5], c[6] = d[6], c[7] = d[7], c[8] = d[8], c[9] = d[9], c[10] = d[10], 
        c[11] = d[11], c[12] = d[12], c[13] = d[13], c[14] = d[14], c[15] = d[15], this;
    },
    multiplyScalar: function(a) {
        var b = this.elements;
        return b[0] *= a, b[4] *= a, b[8] *= a, b[12] *= a, b[1] *= a, b[5] *= a, b[9] *= a, 
        b[13] *= a, b[2] *= a, b[6] *= a, b[10] *= a, b[14] *= a, b[3] *= a, b[7] *= a, 
        b[11] *= a, b[15] *= a, this;
    },
    multiplyVector3: function(a) {
        return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), 
        a.applyProjection(this);
    },
    multiplyVector4: function(a) {
        return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), 
        a.applyMatrix4(this);
    },
    multiplyVector3Array: function() {
        var a = new THREE.Vector3();
        return function(b) {
            for (var c = 0, d = b.length; d > c; c += 3) a.x = b[c], a.y = b[c + 1], a.z = b[c + 2], 
            a.applyProjection(this), b[c] = a.x, b[c + 1] = a.y, b[c + 2] = a.z;
            return b;
        };
    }(),
    rotateAxis: function(a) {
        console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), 
        a.transformDirection(this);
    },
    crossVector: function(a) {
        return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), 
        a.applyMatrix4(this);
    },
    determinant: function() {
        var a = this.elements, b = a[0], c = a[4], d = a[8], e = a[12], f = a[1], g = a[5], h = a[9], i = a[13], j = a[2], k = a[6], l = a[10], m = a[14];
        return a[3] * (+e * h * k - d * i * k - e * g * l + c * i * l + d * g * m - c * h * m) + a[7] * (+b * h * m - b * i * l + e * f * l - d * f * m + d * i * j - e * h * j) + a[11] * (+b * i * k - b * g * m - e * f * k + c * f * m + e * g * j - c * i * j) + a[15] * (-d * g * j - b * h * k + b * g * l + d * f * k - c * f * l + c * h * j);
    },
    transpose: function() {
        var a, b = this.elements;
        return a = b[1], b[1] = b[4], b[4] = a, a = b[2], b[2] = b[8], b[8] = a, a = b[6], 
        b[6] = b[9], b[9] = a, a = b[3], b[3] = b[12], b[12] = a, a = b[7], b[7] = b[13], 
        b[13] = a, a = b[11], b[11] = b[14], b[14] = a, this;
    },
    flattenToArray: function(a) {
        var b = this.elements;
        return a[0] = b[0], a[1] = b[1], a[2] = b[2], a[3] = b[3], a[4] = b[4], a[5] = b[5], 
        a[6] = b[6], a[7] = b[7], a[8] = b[8], a[9] = b[9], a[10] = b[10], a[11] = b[11], 
        a[12] = b[12], a[13] = b[13], a[14] = b[14], a[15] = b[15], a;
    },
    flattenToArrayOffset: function(a, b) {
        var c = this.elements;
        return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], 
        a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a[b + 9] = c[9], 
        a[b + 10] = c[10], a[b + 11] = c[11], a[b + 12] = c[12], a[b + 13] = c[13], a[b + 14] = c[14], 
        a[b + 15] = c[15], a;
    },
    getPosition: function() {
        var a = new THREE.Vector3();
        return function() {
            console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
            var b = this.elements;
            return a.set(b[12], b[13], b[14]);
        };
    }(),
    setPosition: function(a) {
        var b = this.elements;
        return b[12] = a.x, b[13] = a.y, b[14] = a.z, this;
    },
    getInverse: function(a, b) {
        var c = this.elements, d = a.elements, e = d[0], f = d[4], g = d[8], h = d[12], i = d[1], j = d[5], k = d[9], l = d[13], m = d[2], n = d[6], o = d[10], p = d[14], q = d[3], r = d[7], s = d[11], d = d[15];
        if (c[0] = k * p * r - l * o * r + l * n * s - j * p * s - k * n * d + j * o * d, 
        c[4] = h * o * r - g * p * r - h * n * s + f * p * s + g * n * d - f * o * d, c[8] = g * l * r - h * k * r + h * j * s - f * l * s - g * j * d + f * k * d, 
        c[12] = h * k * n - g * l * n - h * j * o + f * l * o + g * j * p - f * k * p, c[1] = l * o * q - k * p * q - l * m * s + i * p * s + k * m * d - i * o * d, 
        c[5] = g * p * q - h * o * q + h * m * s - e * p * s - g * m * d + e * o * d, c[9] = h * k * q - g * l * q - h * i * s + e * l * s + g * i * d - e * k * d, 
        c[13] = g * l * m - h * k * m + h * i * o - e * l * o - g * i * p + e * k * p, c[2] = j * p * q - l * n * q + l * m * r - i * p * r - j * m * d + i * n * d, 
        c[6] = h * n * q - f * p * q - h * m * r + e * p * r + f * m * d - e * n * d, c[10] = f * l * q - h * j * q + h * i * r - e * l * r - f * i * d + e * j * d, 
        c[14] = h * j * m - f * l * m - h * i * n + e * l * n + f * i * p - e * j * p, c[3] = k * n * q - j * o * q - k * m * r + i * o * r + j * m * s - i * n * s, 
        c[7] = f * o * q - g * n * q + g * m * r - e * o * r - f * m * s + e * n * s, c[11] = g * j * q - f * k * q - g * i * r + e * k * r + f * i * s - e * j * s, 
        c[15] = f * k * m - g * j * m + g * i * n - e * k * n - f * i * o + e * j * o, c = e * c[0] + i * c[4] + m * c[8] + q * c[12], 
        0 == c) {
            if (b) throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
            return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"), 
            this.identity(), this;
        }
        return this.multiplyScalar(1 / c), this;
    },
    translate: function() {
        console.warn("DEPRECATED: Matrix4's .translate() has been removed.");
    },
    rotateX: function() {
        console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.");
    },
    rotateY: function() {
        console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.");
    },
    rotateZ: function() {
        console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.");
    },
    rotateByAxis: function() {
        console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.");
    },
    scale: function(a) {
        var b = this.elements, c = a.x, d = a.y, a = a.z;
        return b[0] *= c, b[4] *= d, b[8] *= a, b[1] *= c, b[5] *= d, b[9] *= a, b[2] *= c, 
        b[6] *= d, b[10] *= a, b[3] *= c, b[7] *= d, b[11] *= a, this;
    },
    getMaxScaleOnAxis: function() {
        var a = this.elements;
        return Math.sqrt(Math.max(a[0] * a[0] + a[1] * a[1] + a[2] * a[2], Math.max(a[4] * a[4] + a[5] * a[5] + a[6] * a[6], a[8] * a[8] + a[9] * a[9] + a[10] * a[10])));
    },
    makeTranslation: function(a, b, c) {
        return this.set(1, 0, 0, a, 0, 1, 0, b, 0, 0, 1, c, 0, 0, 0, 1), this;
    },
    makeRotationX: function(a) {
        var b = Math.cos(a), a = Math.sin(a);
        return this.set(1, 0, 0, 0, 0, b, -a, 0, 0, a, b, 0, 0, 0, 0, 1), this;
    },
    makeRotationY: function(a) {
        var b = Math.cos(a), a = Math.sin(a);
        return this.set(b, 0, a, 0, 0, 1, 0, 0, -a, 0, b, 0, 0, 0, 0, 1), this;
    },
    makeRotationZ: function(a) {
        var b = Math.cos(a), a = Math.sin(a);
        return this.set(b, -a, 0, 0, a, b, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
    },
    makeRotationAxis: function(a, b) {
        var c = Math.cos(b), d = Math.sin(b), e = 1 - c, f = a.x, g = a.y, h = a.z, i = e * f, j = e * g;
        return this.set(i * f + c, i * g - d * h, i * h + d * g, 0, i * g + d * h, j * g + c, j * h - d * f, 0, i * h - d * g, j * h + d * f, e * h * h + c, 0, 0, 0, 0, 1), 
        this;
    },
    makeScale: function(a, b, c) {
        return this.set(a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1), this;
    },
    compose: function(a, b, c) {
        return this.makeRotationFromQuaternion(b), this.scale(c), this.setPosition(a), this;
    },
    decompose: function() {
        var a = new THREE.Vector3(), b = new THREE.Matrix4();
        return function(c, d, e) {
            var f = this.elements, g = a.set(f[0], f[1], f[2]).length(), h = a.set(f[4], f[5], f[6]).length(), i = a.set(f[8], f[9], f[10]).length();
            c.x = f[12], c.y = f[13], c.z = f[14], b.elements.set(this.elements);
            var c = 1 / g, f = 1 / h, j = 1 / i;
            return b.elements[0] *= c, b.elements[1] *= c, b.elements[2] *= c, b.elements[4] *= f, 
            b.elements[5] *= f, b.elements[6] *= f, b.elements[8] *= j, b.elements[9] *= j, 
            b.elements[10] *= j, d.setFromRotationMatrix(b), e.x = g, e.y = h, e.z = i, this;
        };
    }(),
    makeFrustum: function(a, b, c, d, e, f) {
        var g = this.elements;
        return g[0] = 2 * e / (b - a), g[4] = 0, g[8] = (b + a) / (b - a), g[12] = 0, g[1] = 0, 
        g[5] = 2 * e / (d - c), g[9] = (d + c) / (d - c), g[13] = 0, g[2] = 0, g[6] = 0, 
        g[10] = -(f + e) / (f - e), g[14] = -2 * f * e / (f - e), g[3] = 0, g[7] = 0, g[11] = -1, 
        g[15] = 0, this;
    },
    makePerspective: function(a, b, c, d) {
        var a = c * Math.tan(THREE.Math.degToRad(.5 * a)), e = -a;
        return this.makeFrustum(e * b, a * b, e, a, c, d);
    },
    makeOrthographic: function(a, b, c, d, e, f) {
        var g = this.elements, h = b - a, i = c - d, j = f - e;
        return g[0] = 2 / h, g[4] = 0, g[8] = 0, g[12] = -((b + a) / h), g[1] = 0, g[5] = 2 / i, 
        g[9] = 0, g[13] = -((c + d) / i), g[2] = 0, g[6] = 0, g[10] = -2 / j, g[14] = -((f + e) / j), 
        g[3] = 0, g[7] = 0, g[11] = 0, g[15] = 1, this;
    },
    fromArray: function(a) {
        return this.elements.set(a), this;
    },
    toArray: function() {
        var a = this.elements;
        return [ a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15] ];
    },
    clone: function() {
        var a = this.elements;
        return new THREE.Matrix4(a[0], a[4], a[8], a[12], a[1], a[5], a[9], a[13], a[2], a[6], a[10], a[14], a[3], a[7], a[11], a[15]);
    }
}, THREE.Ray = function(a, b) {
    this.origin = void 0 !== a ? a : new THREE.Vector3(), this.direction = void 0 !== b ? b : new THREE.Vector3();
}, THREE.Ray.prototype = {
    constructor: THREE.Ray,
    set: function(a, b) {
        return this.origin.copy(a), this.direction.copy(b), this;
    },
    copy: function(a) {
        return this.origin.copy(a.origin), this.direction.copy(a.direction), this;
    },
    at: function(a, b) {
        return (b || new THREE.Vector3()).copy(this.direction).multiplyScalar(a).add(this.origin);
    },
    recast: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return this.origin.copy(this.at(b, a)), this;
        };
    }(),
    closestPointToPoint: function(a, b) {
        var c = b || new THREE.Vector3();
        c.subVectors(a, this.origin);
        var d = c.dot(this.direction);
        return 0 > d ? c.copy(this.origin) : c.copy(this.direction).multiplyScalar(d).add(this.origin);
    },
    distanceToPoint: function() {
        var a = new THREE.Vector3();
        return function(b) {
            var c = a.subVectors(b, this.origin).dot(this.direction);
            return 0 > c ? this.origin.distanceTo(b) : (a.copy(this.direction).multiplyScalar(c).add(this.origin), 
            a.distanceTo(b));
        };
    }(),
    distanceSqToSegment: function(a, b, c, d) {
        var e, f, g = a.clone().add(b).multiplyScalar(.5), h = b.clone().sub(a).normalize(), i = .5 * a.distanceTo(b), j = this.origin.clone().sub(g), a = -this.direction.dot(h), b = j.dot(this.direction), k = -j.dot(h), l = j.lengthSq(), m = Math.abs(1 - a * a);
        return m >= 0 ? (j = a * k - b, e = a * b - k, f = i * m, j >= 0 ? e >= -f ? f >= e ? (i = 1 / m, 
        j *= i, e *= i, a = j * (j + a * e + 2 * b) + e * (a * j + e + 2 * k) + l) : (e = i, 
        j = Math.max(0, -(a * e + b)), a = -j * j + e * (e + 2 * k) + l) : (e = -i, j = Math.max(0, -(a * e + b)), 
        a = -j * j + e * (e + 2 * k) + l) : -f >= e ? (j = Math.max(0, -(-a * i + b)), e = j > 0 ? -i : Math.min(Math.max(-i, -k), i), 
        a = -j * j + e * (e + 2 * k) + l) : f >= e ? (j = 0, e = Math.min(Math.max(-i, -k), i), 
        a = e * (e + 2 * k) + l) : (j = Math.max(0, -(a * i + b)), e = j > 0 ? i : Math.min(Math.max(-i, -k), i), 
        a = -j * j + e * (e + 2 * k) + l)) : (e = a > 0 ? -i : i, j = Math.max(0, -(a * e + b)), 
        a = -j * j + e * (e + 2 * k) + l), c && c.copy(this.direction.clone().multiplyScalar(j).add(this.origin)), 
        d && d.copy(h.clone().multiplyScalar(e).add(g)), a;
    },
    isIntersectionSphere: function(a) {
        return this.distanceToPoint(a.center) <= a.radius;
    },
    isIntersectionPlane: function(a) {
        var b = a.distanceToPoint(this.origin);
        return 0 === b || 0 > a.normal.dot(this.direction) * b ? !0 : !1;
    },
    distanceToPlane: function(a) {
        var b = a.normal.dot(this.direction);
        return 0 == b ? 0 == a.distanceToPoint(this.origin) ? 0 : null : (a = -(this.origin.dot(a.normal) + a.constant) / b, 
        a >= 0 ? a : null);
    },
    intersectPlane: function(a, b) {
        var c = this.distanceToPlane(a);
        return null === c ? null : this.at(c, b);
    },
    isIntersectionBox: function() {
        var a = new THREE.Vector3();
        return function(b) {
            return null !== this.intersectBox(b, a);
        };
    }(),
    intersectBox: function(a, b) {
        var c, d, e, f, g;
        d = 1 / this.direction.x, f = 1 / this.direction.y, g = 1 / this.direction.z;
        var h = this.origin;
        return d >= 0 ? (c = (a.min.x - h.x) * d, d *= a.max.x - h.x) : (c = (a.max.x - h.x) * d, 
        d *= a.min.x - h.x), f >= 0 ? (e = (a.min.y - h.y) * f, f *= a.max.y - h.y) : (e = (a.max.y - h.y) * f, 
        f *= a.min.y - h.y), c > f || e > d ? null : ((e > c || c !== c) && (c = e), (d > f || d !== d) && (d = f), 
        g >= 0 ? (e = (a.min.z - h.z) * g, g *= a.max.z - h.z) : (e = (a.max.z - h.z) * g, 
        g *= a.min.z - h.z), c > g || e > d ? null : ((e > c || c !== c) && (c = e), (d > g || d !== d) && (d = g), 
        0 > d ? null : this.at(c >= 0 ? c : d, b)));
    },
    intersectTriangle: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3(), d = new THREE.Vector3();
        return function(e, f, g, h, i) {
            if (b.subVectors(f, e), c.subVectors(g, e), d.crossVectors(b, c), f = this.direction.dot(d), 
            f > 0) {
                if (h) return null;
                h = 1;
            } else {
                if (!(0 > f)) return null;
                h = -1, f = -f;
            }
            return a.subVectors(this.origin, e), e = h * this.direction.dot(c.crossVectors(a, c)), 
            0 > e ? null : (g = h * this.direction.dot(b.cross(a)), 0 > g || e + g > f ? null : (e = -h * a.dot(d), 
            0 > e ? null : this.at(e / f, i)));
        };
    }(),
    applyMatrix4: function(a) {
        return this.direction.add(this.origin).applyMatrix4(a), this.origin.applyMatrix4(a), 
        this.direction.sub(this.origin), this.direction.normalize(), this;
    },
    equals: function(a) {
        return a.origin.equals(this.origin) && a.direction.equals(this.direction);
    },
    clone: function() {
        return new THREE.Ray().copy(this);
    }
}, THREE.Sphere = function(a, b) {
    this.center = void 0 !== a ? a : new THREE.Vector3(), this.radius = void 0 !== b ? b : 0;
}, THREE.Sphere.prototype = {
    constructor: THREE.Sphere,
    set: function(a, b) {
        return this.center.copy(a), this.radius = b, this;
    },
    setFromPoints: function() {
        var a = new THREE.Box3();
        return function(b, c) {
            var d = this.center;
            void 0 !== c ? d.copy(c) : a.setFromPoints(b).center(d);
            for (var e = 0, f = 0, g = b.length; g > f; f++) e = Math.max(e, d.distanceToSquared(b[f]));
            return this.radius = Math.sqrt(e), this;
        };
    }(),
    copy: function(a) {
        return this.center.copy(a.center), this.radius = a.radius, this;
    },
    empty: function() {
        return 0 >= this.radius;
    },
    containsPoint: function(a) {
        return a.distanceToSquared(this.center) <= this.radius * this.radius;
    },
    distanceToPoint: function(a) {
        return a.distanceTo(this.center) - this.radius;
    },
    intersectsSphere: function(a) {
        var b = this.radius + a.radius;
        return a.center.distanceToSquared(this.center) <= b * b;
    },
    clampPoint: function(a, b) {
        var c = this.center.distanceToSquared(a), d = b || new THREE.Vector3();
        return d.copy(a), c > this.radius * this.radius && (d.sub(this.center).normalize(), 
        d.multiplyScalar(this.radius).add(this.center)), d;
    },
    getBoundingBox: function(a) {
        return a = a || new THREE.Box3(), a.set(this.center, this.center), a.expandByScalar(this.radius), 
        a;
    },
    applyMatrix4: function(a) {
        return this.center.applyMatrix4(a), this.radius *= a.getMaxScaleOnAxis(), this;
    },
    translate: function(a) {
        return this.center.add(a), this;
    },
    equals: function(a) {
        return a.center.equals(this.center) && a.radius === this.radius;
    },
    clone: function() {
        return new THREE.Sphere().copy(this);
    }
}, THREE.Frustum = function(a, b, c, d, e, f) {
    this.planes = [ void 0 !== a ? a : new THREE.Plane(), void 0 !== b ? b : new THREE.Plane(), void 0 !== c ? c : new THREE.Plane(), void 0 !== d ? d : new THREE.Plane(), void 0 !== e ? e : new THREE.Plane(), void 0 !== f ? f : new THREE.Plane() ];
}, THREE.Frustum.prototype = {
    constructor: THREE.Frustum,
    set: function(a, b, c, d, e, f) {
        var g = this.planes;
        return g[0].copy(a), g[1].copy(b), g[2].copy(c), g[3].copy(d), g[4].copy(e), g[5].copy(f), 
        this;
    },
    copy: function(a) {
        for (var b = this.planes, c = 0; 6 > c; c++) b[c].copy(a.planes[c]);
        return this;
    },
    setFromMatrix: function(a) {
        var b = this.planes, c = a.elements, a = c[0], d = c[1], e = c[2], f = c[3], g = c[4], h = c[5], i = c[6], j = c[7], k = c[8], l = c[9], m = c[10], n = c[11], o = c[12], p = c[13], q = c[14], c = c[15];
        return b[0].setComponents(f - a, j - g, n - k, c - o).normalize(), b[1].setComponents(f + a, j + g, n + k, c + o).normalize(), 
        b[2].setComponents(f + d, j + h, n + l, c + p).normalize(), b[3].setComponents(f - d, j - h, n - l, c - p).normalize(), 
        b[4].setComponents(f - e, j - i, n - m, c - q).normalize(), b[5].setComponents(f + e, j + i, n + m, c + q).normalize(), 
        this;
    },
    intersectsObject: function() {
        var a = new THREE.Sphere();
        return function(b) {
            var c = b.geometry;
            return null === c.boundingSphere && c.computeBoundingSphere(), a.copy(c.boundingSphere), 
            a.applyMatrix4(b.matrixWorld), this.intersectsSphere(a);
        };
    }(),
    intersectsSphere: function(a) {
        for (var b = this.planes, c = a.center, a = -a.radius, d = 0; 6 > d; d++) if (b[d].distanceToPoint(c) < a) return !1;
        return !0;
    },
    intersectsBox: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c) {
            for (var d = this.planes, e = 0; 6 > e; e++) {
                var f = d[e];
                a.x = 0 < f.normal.x ? c.min.x : c.max.x, b.x = 0 < f.normal.x ? c.max.x : c.min.x, 
                a.y = 0 < f.normal.y ? c.min.y : c.max.y, b.y = 0 < f.normal.y ? c.max.y : c.min.y, 
                a.z = 0 < f.normal.z ? c.min.z : c.max.z, b.z = 0 < f.normal.z ? c.max.z : c.min.z;
                var g = f.distanceToPoint(a), f = f.distanceToPoint(b);
                if (0 > g && 0 > f) return !1;
            }
            return !0;
        };
    }(),
    containsPoint: function(a) {
        for (var b = this.planes, c = 0; 6 > c; c++) if (0 > b[c].distanceToPoint(a)) return !1;
        return !0;
    },
    clone: function() {
        return new THREE.Frustum().copy(this);
    }
}, THREE.Plane = function(a, b) {
    this.normal = void 0 !== a ? a : new THREE.Vector3(1, 0, 0), this.constant = void 0 !== b ? b : 0;
}, THREE.Plane.prototype = {
    constructor: THREE.Plane,
    set: function(a, b) {
        return this.normal.copy(a), this.constant = b, this;
    },
    setComponents: function(a, b, c, d) {
        return this.normal.set(a, b, c), this.constant = d, this;
    },
    setFromNormalAndCoplanarPoint: function(a, b) {
        return this.normal.copy(a), this.constant = -b.dot(this.normal), this;
    },
    setFromCoplanarPoints: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c, d, e) {
            return d = a.subVectors(e, d).cross(b.subVectors(c, d)).normalize(), this.setFromNormalAndCoplanarPoint(d, c), 
            this;
        };
    }(),
    copy: function(a) {
        return this.normal.copy(a.normal), this.constant = a.constant, this;
    },
    normalize: function() {
        var a = 1 / this.normal.length();
        return this.normal.multiplyScalar(a), this.constant *= a, this;
    },
    negate: function() {
        return this.constant *= -1, this.normal.negate(), this;
    },
    distanceToPoint: function(a) {
        return this.normal.dot(a) + this.constant;
    },
    distanceToSphere: function(a) {
        return this.distanceToPoint(a.center) - a.radius;
    },
    projectPoint: function(a, b) {
        return this.orthoPoint(a, b).sub(a).negate();
    },
    orthoPoint: function(a, b) {
        var c = this.distanceToPoint(a);
        return (b || new THREE.Vector3()).copy(this.normal).multiplyScalar(c);
    },
    isIntersectionLine: function(a) {
        var b = this.distanceToPoint(a.start), a = this.distanceToPoint(a.end);
        return 0 > b && a > 0 || 0 > a && b > 0;
    },
    intersectLine: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            var d = c || new THREE.Vector3(), e = b.delta(a), f = this.normal.dot(e);
            return 0 != f ? (f = -(b.start.dot(this.normal) + this.constant) / f, 0 > f || f > 1 ? void 0 : d.copy(e).multiplyScalar(f).add(b.start)) : 0 == this.distanceToPoint(b.start) ? d.copy(b.start) : void 0;
        };
    }(),
    coplanarPoint: function(a) {
        return (a || new THREE.Vector3()).copy(this.normal).multiplyScalar(-this.constant);
    },
    applyMatrix4: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Matrix3();
        return function(d, e) {
            var f = e || c.getNormalMatrix(d), f = a.copy(this.normal).applyMatrix3(f), g = this.coplanarPoint(b);
            return g.applyMatrix4(d), this.setFromNormalAndCoplanarPoint(f, g), this;
        };
    }(),
    translate: function(a) {
        return this.constant -= a.dot(this.normal), this;
    },
    equals: function(a) {
        return a.normal.equals(this.normal) && a.constant == this.constant;
    },
    clone: function() {
        return new THREE.Plane().copy(this);
    }
}, THREE.Math = {
    PI2: 2 * Math.PI,
    generateUUID: function() {
        var a, b = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), c = Array(36), d = 0;
        return function() {
            for (var e = 0; 36 > e; e++) 8 == e || 13 == e || 18 == e || 23 == e ? c[e] = "-" : 14 == e ? c[e] = "4" : (2 >= d && (d = 33554432 + 16777216 * Math.random() | 0), 
            a = 15 & d, d >>= 4, c[e] = b[19 == e ? 3 & a | 8 : a]);
            return c.join("");
        };
    }(),
    clamp: function(a, b, c) {
        return b > a ? b : a > c ? c : a;
    },
    clampBottom: function(a, b) {
        return b > a ? b : a;
    },
    mapLinear: function(a, b, c, d, e) {
        return d + (a - b) * (e - d) / (c - b);
    },
    smoothstep: function(a, b, c) {
        return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * (3 - 2 * a));
    },
    smootherstep: function(a, b, c) {
        return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * a * (a * (6 * a - 15) + 10));
    },
    random16: function() {
        return (65280 * Math.random() + 255 * Math.random()) / 65535;
    },
    randInt: function(a, b) {
        return a + Math.floor(Math.random() * (b - a + 1));
    },
    randFloat: function(a, b) {
        return a + Math.random() * (b - a);
    },
    randFloatSpread: function(a) {
        return a * (.5 - Math.random());
    },
    sign: function(a) {
        return 0 > a ? -1 : a > 0 ? 1 : 0;
    },
    degToRad: function() {
        var a = Math.PI / 180;
        return function(b) {
            return b * a;
        };
    }(),
    radToDeg: function() {
        var a = 180 / Math.PI;
        return function(b) {
            return b * a;
        };
    }()
}, THREE.Spline = function(a) {
    function b(a, b, c, d, e, f, g) {
        return a = .5 * (c - a), d = .5 * (d - b), (2 * (b - c) + a + d) * g + (-3 * (b - c) - 2 * a - d) * f + a * e + b;
    }
    this.points = a;
    var c, d, e, f, g, h, i, j, k, l = [], m = {
        x: 0,
        y: 0,
        z: 0
    };
    this.initFromArray = function(a) {
        this.points = [];
        for (var b = 0; b < a.length; b++) this.points[b] = {
            x: a[b][0],
            y: a[b][1],
            z: a[b][2]
        };
    }, this.getPoint = function(a) {
        return c = (this.points.length - 1) * a, d = Math.floor(c), e = c - d, l[0] = 0 === d ? d : d - 1, 
        l[1] = d, l[2] = d > this.points.length - 2 ? this.points.length - 1 : d + 1, l[3] = d > this.points.length - 3 ? this.points.length - 1 : d + 2, 
        h = this.points[l[0]], i = this.points[l[1]], j = this.points[l[2]], k = this.points[l[3]], 
        f = e * e, g = e * f, m.x = b(h.x, i.x, j.x, k.x, e, f, g), m.y = b(h.y, i.y, j.y, k.y, e, f, g), 
        m.z = b(h.z, i.z, j.z, k.z, e, f, g), m;
    }, this.getControlPointsArray = function() {
        var a, b, c = this.points.length, d = [];
        for (a = 0; c > a; a++) b = this.points[a], d[a] = [ b.x, b.y, b.z ];
        return d;
    }, this.getLength = function(a) {
        var b, c, d, e = b = b = 0, f = new THREE.Vector3(), g = new THREE.Vector3(), h = [], i = 0;
        for (h[0] = 0, a || (a = 100), c = this.points.length * a, f.copy(this.points[0]), 
        a = 1; c > a; a++) b = a / c, d = this.getPoint(b), g.copy(d), i += g.distanceTo(f), 
        f.copy(d), b *= this.points.length - 1, b = Math.floor(b), b != e && (h[b] = i, 
        e = b);
        return h[h.length] = i, {
            chunks: h,
            total: i
        };
    }, this.reparametrizeByArcLength = function(a) {
        var b, c, d, e, f, g, h = [], i = new THREE.Vector3(), j = this.getLength();
        for (h.push(i.copy(this.points[0]).clone()), b = 1; b < this.points.length; b++) {
            for (c = j.chunks[b] - j.chunks[b - 1], g = Math.ceil(a * c / j.total), e = (b - 1) / (this.points.length - 1), 
            f = b / (this.points.length - 1), c = 1; g - 1 > c; c++) d = e + c * (1 / g) * (f - e), 
            d = this.getPoint(d), h.push(i.copy(d).clone());
            h.push(i.copy(this.points[b]).clone());
        }
        this.points = h;
    };
}, THREE.Triangle = function(a, b, c) {
    this.a = void 0 !== a ? a : new THREE.Vector3(), this.b = void 0 !== b ? b : new THREE.Vector3(), 
    this.c = void 0 !== c ? c : new THREE.Vector3();
}, THREE.Triangle.normal = function() {
    var a = new THREE.Vector3();
    return function(b, c, d, e) {
        return e = e || new THREE.Vector3(), e.subVectors(d, c), a.subVectors(b, c), e.cross(a), 
        b = e.lengthSq(), b > 0 ? e.multiplyScalar(1 / Math.sqrt(b)) : e.set(0, 0, 0);
    };
}(), THREE.Triangle.barycoordFromPoint = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3();
    return function(d, e, f, g, h) {
        a.subVectors(g, e), b.subVectors(f, e), c.subVectors(d, e);
        var d = a.dot(a), e = a.dot(b), f = a.dot(c), i = b.dot(b), g = b.dot(c), j = d * i - e * e, h = h || new THREE.Vector3();
        return 0 == j ? h.set(-2, -1, -1) : (j = 1 / j, i = (i * f - e * g) * j, d = (d * g - e * f) * j, 
        h.set(1 - i - d, d, i));
    };
}(), THREE.Triangle.containsPoint = function() {
    var a = new THREE.Vector3();
    return function(b, c, d, e) {
        return b = THREE.Triangle.barycoordFromPoint(b, c, d, e, a), 0 <= b.x && 0 <= b.y && 1 >= b.x + b.y;
    };
}(), THREE.Triangle.prototype = {
    constructor: THREE.Triangle,
    set: function(a, b, c) {
        return this.a.copy(a), this.b.copy(b), this.c.copy(c), this;
    },
    setFromPointsAndIndices: function(a, b, c, d) {
        return this.a.copy(a[b]), this.b.copy(a[c]), this.c.copy(a[d]), this;
    },
    copy: function(a) {
        return this.a.copy(a.a), this.b.copy(a.b), this.c.copy(a.c), this;
    },
    area: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function() {
            return a.subVectors(this.c, this.b), b.subVectors(this.a, this.b), .5 * a.cross(b).length();
        };
    }(),
    midpoint: function(a) {
        return (a || new THREE.Vector3()).addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
    },
    normal: function(a) {
        return THREE.Triangle.normal(this.a, this.b, this.c, a);
    },
    plane: function(a) {
        return (a || new THREE.Plane()).setFromCoplanarPoints(this.a, this.b, this.c);
    },
    barycoordFromPoint: function(a, b) {
        return THREE.Triangle.barycoordFromPoint(a, this.a, this.b, this.c, b);
    },
    containsPoint: function(a) {
        return THREE.Triangle.containsPoint(a, this.a, this.b, this.c);
    },
    equals: function(a) {
        return a.a.equals(this.a) && a.b.equals(this.b) && a.c.equals(this.c);
    },
    clone: function() {
        return new THREE.Triangle().copy(this);
    }
}, THREE.Vertex = function(a) {
    return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."), 
    a;
}, THREE.UV = function(a, b) {
    return console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead."), 
    new THREE.Vector2(a, b);
}, THREE.Clock = function(a) {
    this.autoStart = void 0 !== a ? a : !0, this.elapsedTime = this.oldTime = this.startTime = 0, 
    this.running = !1;
}, THREE.Clock.prototype = {
    constructor: THREE.Clock,
    start: function() {
        this.oldTime = this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(), 
        this.running = !0;
    },
    stop: function() {
        this.getElapsedTime(), this.running = !1;
    },
    getElapsedTime: function() {
        return this.getDelta(), this.elapsedTime;
    },
    getDelta: function() {
        var a = 0;
        if (this.autoStart && !this.running && this.start(), this.running) {
            var b = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(), a = .001 * (b - this.oldTime);
            this.oldTime = b, this.elapsedTime += a;
        }
        return a;
    }
}, THREE.EventDispatcher = function() {}, THREE.EventDispatcher.prototype = {
    constructor: THREE.EventDispatcher,
    apply: function(a) {
        a.addEventListener = THREE.EventDispatcher.prototype.addEventListener, a.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener, 
        a.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener, a.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;
    },
    addEventListener: function(a, b) {
        void 0 === this._listeners && (this._listeners = {});
        var c = this._listeners;
        void 0 === c[a] && (c[a] = []), -1 === c[a].indexOf(b) && c[a].push(b);
    },
    hasEventListener: function(a, b) {
        if (void 0 === this._listeners) return !1;
        var c = this._listeners;
        return void 0 !== c[a] && -1 !== c[a].indexOf(b) ? !0 : !1;
    },
    removeEventListener: function(a, b) {
        if (void 0 !== this._listeners) {
            var c = this._listeners[a];
            if (void 0 !== c) {
                var d = c.indexOf(b);
                -1 !== d && c.splice(d, 1);
            }
        }
    },
    dispatchEvent: function() {
        var a = [];
        return function(b) {
            if (void 0 !== this._listeners) {
                var c = this._listeners[b.type];
                if (void 0 !== c) {
                    b.target = this;
                    for (var d = c.length, e = 0; d > e; e++) a[e] = c[e];
                    for (e = 0; d > e; e++) a[e].call(this, b);
                }
            }
        };
    }()
}, function(a) {
    a.Raycaster = function(b, c, d, e) {
        this.ray = new a.Ray(b, c), this.near = d || 0, this.far = e || 1/0;
    };
    var b = new a.Sphere(), c = new a.Ray();
    new a.Plane(), new a.Vector3();
    var d = new a.Vector3(), e = new a.Matrix4(), f = function(a, b) {
        return a.distance - b.distance;
    }, g = new a.Vector3(), h = new a.Vector3(), i = new a.Vector3(), j = function(f, k, l) {
        if (f instanceof a.Sprite) {
            d.setFromMatrixPosition(f.matrixWorld);
            var m = k.ray.distanceToPoint(d);
            if (m > f.scale.x) return l;
            l.push({
                distance: m,
                point: f.position,
                face: null,
                object: f
            });
        } else if (f instanceof a.LOD) d.setFromMatrixPosition(f.matrixWorld), m = k.ray.origin.distanceTo(d), 
        j(f.getObjectForDistance(m), k, l); else if (f instanceof a.Mesh) {
            var n = f.geometry;
            if (null === n.boundingSphere && n.computeBoundingSphere(), b.copy(n.boundingSphere), 
            b.applyMatrix4(f.matrixWorld), !1 === k.ray.isIntersectionSphere(b)) return l;
            if (e.getInverse(f.matrixWorld), c.copy(k.ray).applyMatrix4(e), null !== n.boundingBox && !1 === c.isIntersectionBox(n.boundingBox)) return l;
            if (n instanceof a.BufferGeometry) {
                var o = f.material;
                if (void 0 === o || !1 === n.dynamic) return l;
                var p, q, r = k.precision;
                if (void 0 !== n.attributes.index) for (var s = n.offsets, t = n.attributes.index.array, u = n.attributes.position.array, v = n.offsets.length, w = n.attributes.index.array.length / 3, w = 0; v > w; ++w) for (var m = s[w].start, x = s[w].index, n = m, y = m + s[w].count; y > n; n += 3) m = x + t[n], 
                p = x + t[n + 1], q = x + t[n + 2], g.set(u[3 * m], u[3 * m + 1], u[3 * m + 2]), 
                h.set(u[3 * p], u[3 * p + 1], u[3 * p + 2]), i.set(u[3 * q], u[3 * q + 1], u[3 * q + 2]), 
                p = o.side === a.BackSide ? c.intersectTriangle(i, h, g, !0) : c.intersectTriangle(g, h, i, o.side !== a.DoubleSide), 
                null !== p && (p.applyMatrix4(f.matrixWorld), m = k.ray.origin.distanceTo(p), r > m || m < k.near || m > k.far || l.push({
                    distance: m,
                    point: p,
                    face: null,
                    faceIndex: null,
                    object: f
                })); else for (u = n.attributes.position.array, w = n.attributes.position.array.length, 
                n = 0; w > n; n += 3) m = n, p = n + 1, q = n + 2, g.set(u[3 * m], u[3 * m + 1], u[3 * m + 2]), 
                h.set(u[3 * p], u[3 * p + 1], u[3 * p + 2]), i.set(u[3 * q], u[3 * q + 1], u[3 * q + 2]), 
                p = o.side === a.BackSide ? c.intersectTriangle(i, h, g, !0) : c.intersectTriangle(g, h, i, o.side !== a.DoubleSide), 
                null !== p && (p.applyMatrix4(f.matrixWorld), m = k.ray.origin.distanceTo(p), r > m || m < k.near || m > k.far || l.push({
                    distance: m,
                    point: p,
                    face: null,
                    faceIndex: null,
                    object: f
                }));
            } else if (n instanceof a.Geometry) for (t = f.material instanceof a.MeshFaceMaterial, 
            u = !0 === t ? f.material.materials : null, r = k.precision, s = n.vertices, v = 0, 
            w = n.faces.length; w > v; v++) x = n.faces[v], o = !0 === t ? u[x.materialIndex] : f.material, 
            void 0 !== o && (m = s[x.a], p = s[x.b], q = s[x.c], p = o.side === a.BackSide ? c.intersectTriangle(q, p, m, !0) : c.intersectTriangle(m, p, q, o.side !== a.DoubleSide), 
            null !== p && (p.applyMatrix4(f.matrixWorld), m = k.ray.origin.distanceTo(p), r > m || m < k.near || m > k.far || l.push({
                distance: m,
                point: p,
                face: x,
                faceIndex: v,
                object: f
            })));
        } else if (f instanceof a.Line) {
            if (r = k.linePrecision, o = r * r, n = f.geometry, null === n.boundingSphere && n.computeBoundingSphere(), 
            b.copy(n.boundingSphere), b.applyMatrix4(f.matrixWorld), !1 === k.ray.isIntersectionSphere(b)) return l;
            if (e.getInverse(f.matrixWorld), c.copy(k.ray).applyMatrix4(e), n instanceof a.Geometry) for (s = n.vertices, 
            r = s.length, p = new a.Vector3(), q = new a.Vector3(), w = f.type === a.LineStrip ? 1 : 2, 
            n = 0; r - 1 > n; n += w) c.distanceSqToSegment(s[n], s[n + 1], q, p) > o || (m = c.origin.distanceTo(q), 
            m < k.near || m > k.far || l.push({
                distance: m,
                point: p.clone().applyMatrix4(f.matrixWorld),
                face: null,
                faceIndex: null,
                object: f
            }));
        }
    }, k = function(a, b, c) {
        for (var a = a.getDescendants(), d = 0, e = a.length; e > d; d++) j(a[d], b, c);
    };
    a.Raycaster.prototype.precision = 1e-4, a.Raycaster.prototype.linePrecision = 1, 
    a.Raycaster.prototype.set = function(a, b) {
        this.ray.set(a, b);
    }, a.Raycaster.prototype.intersectObject = function(a, b) {
        var c = [];
        return !0 === b && k(a, this, c), j(a, this, c), c.sort(f), c;
    }, a.Raycaster.prototype.intersectObjects = function(a, b) {
        for (var c = [], d = 0, e = a.length; e > d; d++) j(a[d], this, c), !0 === b && k(a[d], this, c);
        return c.sort(f), c;
    };
}(THREE), THREE.Object3D = function() {
    this.id = THREE.Object3DIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", 
    this.parent = void 0, this.children = [], this.up = new THREE.Vector3(0, 1, 0), 
    this.position = new THREE.Vector3(), this._rotation = new THREE.Euler(), this._quaternion = new THREE.Quaternion(), 
    this.scale = new THREE.Vector3(1, 1, 1), this._rotation._quaternion = this.quaternion, 
    this._quaternion._euler = this.rotation, this.renderDepth = null, this.rotationAutoUpdate = !0, 
    this.matrix = new THREE.Matrix4(), this.matrixWorld = new THREE.Matrix4(), this.visible = this.matrixWorldNeedsUpdate = this.matrixAutoUpdate = !0, 
    this.receiveShadow = this.castShadow = !1, this.frustumCulled = !0, this.userData = {};
}, THREE.Object3D.prototype = {
    constructor: THREE.Object3D,
    get rotation() {
        return this._rotation;
    },
    set rotation(a) {
        this._rotation = a, this._rotation._quaternion = this._quaternion, this._quaternion._euler = this._rotation, 
        this._rotation._updateQuaternion();
    },
    get quaternion() {
        return this._quaternion;
    },
    set quaternion(a) {
        this._quaternion = a, this._quaternion._euler = this._rotation, this._rotation._quaternion = this._quaternion, 
        this._quaternion._updateEuler();
    },
    get eulerOrder() {
        return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."), 
        this.rotation.order;
    },
    set eulerOrder(a) {
        console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."), 
        this.rotation.order = a;
    },
    get useQuaternion() {
        console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.");
    },
    set useQuaternion(a) {
        console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.");
    },
    applyMatrix: function() {
        var a = new THREE.Matrix4();
        return function(b) {
            this.matrix.multiplyMatrices(b, this.matrix), this.position.setFromMatrixPosition(this.matrix), 
            this.scale.setFromMatrixScale(this.matrix), a.extractRotation(this.matrix), this.quaternion.setFromRotationMatrix(a);
        };
    }(),
    setRotationFromAxisAngle: function(a, b) {
        this.quaternion.setFromAxisAngle(a, b);
    },
    setRotationFromEuler: function(a) {
        this.quaternion.setFromEuler(a, !0);
    },
    setRotationFromMatrix: function(a) {
        this.quaternion.setFromRotationMatrix(a);
    },
    setRotationFromQuaternion: function(a) {
        this.quaternion.copy(a);
    },
    rotateOnAxis: function() {
        var a = new THREE.Quaternion();
        return function(b, c) {
            return a.setFromAxisAngle(b, c), this.quaternion.multiply(a), this;
        };
    }(),
    rotateX: function() {
        var a = new THREE.Vector3(1, 0, 0);
        return function(b) {
            return this.rotateOnAxis(a, b);
        };
    }(),
    rotateY: function() {
        var a = new THREE.Vector3(0, 1, 0);
        return function(b) {
            return this.rotateOnAxis(a, b);
        };
    }(),
    rotateZ: function() {
        var a = new THREE.Vector3(0, 0, 1);
        return function(b) {
            return this.rotateOnAxis(a, b);
        };
    }(),
    translateOnAxis: function() {
        var a = new THREE.Vector3();
        return function(b, c) {
            return a.copy(b), a.applyQuaternion(this.quaternion), this.position.add(a.multiplyScalar(c)), 
            this;
        };
    }(),
    translate: function(a, b) {
        return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."), 
        this.translateOnAxis(b, a);
    },
    translateX: function() {
        var a = new THREE.Vector3(1, 0, 0);
        return function(b) {
            return this.translateOnAxis(a, b);
        };
    }(),
    translateY: function() {
        var a = new THREE.Vector3(0, 1, 0);
        return function(b) {
            return this.translateOnAxis(a, b);
        };
    }(),
    translateZ: function() {
        var a = new THREE.Vector3(0, 0, 1);
        return function(b) {
            return this.translateOnAxis(a, b);
        };
    }(),
    localToWorld: function(a) {
        return a.applyMatrix4(this.matrixWorld);
    },
    worldToLocal: function() {
        var a = new THREE.Matrix4();
        return function(b) {
            return b.applyMatrix4(a.getInverse(this.matrixWorld));
        };
    }(),
    lookAt: function() {
        var a = new THREE.Matrix4();
        return function(b) {
            a.lookAt(b, this.position, this.up), this.quaternion.setFromRotationMatrix(a);
        };
    }(),
    add: function(a) {
        if (a === this) console.warn("THREE.Object3D.add: An object can't be added as a child of itself."); else if (a instanceof THREE.Object3D) {
            void 0 !== a.parent && a.parent.remove(a), a.parent = this, a.dispatchEvent({
                type: "added"
            }), this.children.push(a);
            for (var b = this; void 0 !== b.parent; ) b = b.parent;
            void 0 !== b && b instanceof THREE.Scene && b.__addObject(a);
        }
    },
    remove: function(a) {
        var b = this.children.indexOf(a);
        if (-1 !== b) {
            for (a.parent = void 0, a.dispatchEvent({
                type: "removed"
            }), this.children.splice(b, 1), b = this; void 0 !== b.parent; ) b = b.parent;
            void 0 !== b && b instanceof THREE.Scene && b.__removeObject(a);
        }
    },
    traverse: function(a) {
        a(this);
        for (var b = 0, c = this.children.length; c > b; b++) this.children[b].traverse(a);
    },
    getObjectById: function(a, b) {
        for (var c = 0, d = this.children.length; d > c; c++) {
            var e = this.children[c];
            if (e.id === a || !0 === b && (e = e.getObjectById(a, b), void 0 !== e)) return e;
        }
    },
    getObjectByName: function(a, b) {
        for (var c = 0, d = this.children.length; d > c; c++) {
            var e = this.children[c];
            if (e.name === a || !0 === b && (e = e.getObjectByName(a, b), void 0 !== e)) return e;
        }
    },
    getChildByName: function(a, b) {
        return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."), 
        this.getObjectByName(a, b);
    },
    getDescendants: function(a) {
        void 0 === a && (a = []), Array.prototype.push.apply(a, this.children);
        for (var b = 0, c = this.children.length; c > b; b++) this.children[b].getDescendants(a);
        return a;
    },
    updateMatrix: function() {
        this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0;
    },
    updateMatrixWorld: function(a) {
        !0 === this.matrixAutoUpdate && this.updateMatrix(), (!0 === this.matrixWorldNeedsUpdate || !0 === a) && (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), 
        this.matrixWorldNeedsUpdate = !1, a = !0);
        for (var b = 0, c = this.children.length; c > b; b++) this.children[b].updateMatrixWorld(a);
    },
    clone: function(a, b) {
        if (void 0 === a && (a = new THREE.Object3D()), void 0 === b && (b = !0), a.name = this.name, 
        a.up.copy(this.up), a.position.copy(this.position), a.quaternion.copy(this.quaternion), 
        a.scale.copy(this.scale), a.renderDepth = this.renderDepth, a.rotationAutoUpdate = this.rotationAutoUpdate, 
        a.matrix.copy(this.matrix), a.matrixWorld.copy(this.matrixWorld), a.matrixAutoUpdate = this.matrixAutoUpdate, 
        a.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate, a.visible = this.visible, 
        a.castShadow = this.castShadow, a.receiveShadow = this.receiveShadow, a.frustumCulled = this.frustumCulled, 
        a.userData = JSON.parse(JSON.stringify(this.userData)), !0 === b) for (var c = 0; c < this.children.length; c++) a.add(this.children[c].clone());
        return a;
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype), THREE.Object3DIdCount = 0, 
THREE.Projector = function() {
    function a() {
        if (g === r) {
            var a = new THREE.RenderableVertex();
            return q.push(a), r++, g++, a;
        }
        return q[g++];
    }
    function b(a, b) {
        return a.z !== b.z ? b.z - a.z : a.id !== b.id ? a.id - b.id : 0;
    }
    function c(a, b) {
        var c = 0, d = 1, e = a.z + a.w, f = b.z + b.w, g = -a.z + a.w, h = -b.z + b.w;
        return e >= 0 && f >= 0 && g >= 0 && h >= 0 ? !0 : 0 > e && 0 > f || 0 > g && 0 > h ? !1 : (0 > e ? c = Math.max(c, e / (e - f)) : 0 > f && (d = Math.min(d, e / (e - f))), 
        0 > g ? c = Math.max(c, g / (g - h)) : 0 > h && (d = Math.min(d, g / (g - h))), 
        c > d ? !1 : (a.lerp(b, c), b.lerp(a, 1 - d), !0));
    }
    var d, e, f, g, h, i, j, k, l, m, n, o = [], p = 0, q = [], r = 0, s = [], t = 0, u = [], v = 0, w = [], x = 0, y = {
        objects: [],
        sprites: [],
        lights: [],
        elements: []
    }, z = new THREE.Vector3(), A = new THREE.Vector4(), B = new THREE.Box3(new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, 1, 1)), C = new THREE.Box3(), D = Array(3), E = new THREE.Matrix4(), F = new THREE.Matrix4(), G = new THREE.Matrix4(), H = new THREE.Matrix3(), I = new THREE.Matrix3(), J = new THREE.Vector3(), K = new THREE.Frustum(), L = new THREE.Vector4(), M = new THREE.Vector4();
    this.projectVector = function(a, b) {
        return b.matrixWorldInverse.getInverse(b.matrixWorld), F.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse), 
        a.applyProjection(F);
    }, this.unprojectVector = function(a, b) {
        return b.projectionMatrixInverse.getInverse(b.projectionMatrix), F.multiplyMatrices(b.matrixWorld, b.projectionMatrixInverse), 
        a.applyProjection(F);
    }, this.pickingRay = function(a, b) {
        a.z = -1;
        var c = new THREE.Vector3(a.x, a.y, 1);
        return this.unprojectVector(a, b), this.unprojectVector(c, b), c.sub(a).normalize(), 
        new THREE.Raycaster(a, c);
    };
    var N = function(a) {
        if (e === p) {
            var b = new THREE.RenderableObject();
            o.push(b), p++, e++, d = b;
        } else d = o[e++];
        return d.id = a.id, d.object = a, null !== a.renderDepth ? d.z = a.renderDepth : (z.setFromMatrixPosition(a.matrixWorld), 
        z.applyProjection(F), d.z = z.z), d;
    }, O = function(a) {
        if (!1 !== a.visible) {
            a instanceof THREE.Light ? y.lights.push(a) : a instanceof THREE.Mesh || a instanceof THREE.Line ? (!1 === a.frustumCulled || !0 === K.intersectsObject(a)) && y.objects.push(N(a)) : a instanceof THREE.Sprite && y.sprites.push(N(a));
            for (var b = 0, c = a.children.length; c > b; b++) O(a.children[b]);
        }
    };
    this.projectScene = function(d, o, p, r) {
        var z, N, P, Q, R, S, T, U, V, W, X, Y, Z = !1;
        for (m = k = i = 0, y.elements.length = 0, !0 === d.autoUpdate && d.updateMatrixWorld(), 
        void 0 === o.parent && o.updateMatrixWorld(), E.copy(o.matrixWorldInverse.getInverse(o.matrixWorld)), 
        F.multiplyMatrices(o.projectionMatrix, E), I.getNormalMatrix(E), K.setFromMatrix(F), 
        e = 0, y.objects.length = 0, y.sprites.length = 0, y.lights.length = 0, O(d), !0 === p && y.objects.sort(b), 
        d = 0, p = y.objects.length; p > d; d++) if (T = y.objects[d].object, n = T.matrixWorld, 
        g = 0, T instanceof THREE.Mesh) {
            for (U = T.geometry, P = U.vertices, V = U.faces, U = U.faceVertexUvs, H.getNormalMatrix(n), 
            X = T.material instanceof THREE.MeshFaceMaterial, Y = !0 === X ? T.material : null, 
            z = 0, N = P.length; N > z; z++) {
                f = a(), f.positionWorld.copy(P[z]).applyMatrix4(n), f.positionScreen.copy(f.positionWorld).applyMatrix4(F);
                var $ = 1 / f.positionScreen.w;
                f.positionScreen.x *= $, f.positionScreen.y *= $, f.positionScreen.z *= $, f.visible = !(-1 > f.positionScreen.x || 1 < f.positionScreen.x || -1 > f.positionScreen.y || 1 < f.positionScreen.y || -1 > f.positionScreen.z || 1 < f.positionScreen.z);
            }
            for (P = 0, z = V.length; z > P; P++) if (N = V[P], $ = !0 === X ? Y.materials[N.materialIndex] : T.material, 
            void 0 !== $ && (S = $.side, Q = q[N.a], R = q[N.b], W = q[N.c], D[0] = Q.positionScreen, 
            D[1] = R.positionScreen, D[2] = W.positionScreen, !0 === Q.visible || !0 === R.visible || !0 === W.visible || B.isIntersectionBox(C.setFromPoints(D))) && (Z = 0 > (W.positionScreen.x - Q.positionScreen.x) * (R.positionScreen.y - Q.positionScreen.y) - (W.positionScreen.y - Q.positionScreen.y) * (R.positionScreen.x - Q.positionScreen.x), 
            S === THREE.DoubleSide || Z === (S === THREE.FrontSide))) {
                if (i === t) {
                    var _ = new THREE.RenderableFace3();
                    s.push(_), t++, i++, h = _;
                } else h = s[i++];
                for (h.id = T.id, h.v1.copy(Q), h.v2.copy(R), h.v3.copy(W), h.normalModel.copy(N.normal), 
                !1 === Z && (S === THREE.BackSide || S === THREE.DoubleSide) && h.normalModel.negate(), 
                h.normalModel.applyMatrix3(H).normalize(), h.normalModelView.copy(h.normalModel).applyMatrix3(I), 
                h.centroidModel.copy(N.centroid).applyMatrix4(n), W = N.vertexNormals, Q = 0, R = Math.min(W.length, 3); R > Q; Q++) _ = h.vertexNormalsModel[Q], 
                _.copy(W[Q]), !1 === Z && (S === THREE.BackSide || S === THREE.DoubleSide) && _.negate(), 
                _.applyMatrix3(H).normalize(), h.vertexNormalsModelView[Q].copy(_).applyMatrix3(I);
                for (h.vertexNormalsLength = W.length, Z = 0, Q = Math.min(U.length, 3); Q > Z; Z++) if (W = U[Z][P], 
                void 0 !== W) for (R = 0, S = W.length; S > R; R++) h.uvs[Z][R] = W[R];
                h.color = N.color, h.material = $, J.copy(h.centroidModel).applyProjection(F), h.z = J.z, 
                y.elements.push(h);
            }
        } else if (T instanceof THREE.Line) for (G.multiplyMatrices(F, n), P = T.geometry.vertices, 
        Q = a(), Q.positionScreen.copy(P[0]).applyMatrix4(G), V = T.type === THREE.LinePieces ? 2 : 1, 
        z = 1, N = P.length; N > z; z++) Q = a(), Q.positionScreen.copy(P[z]).applyMatrix4(G), 
        (z + 1) % V > 0 || (R = q[g - 2], L.copy(Q.positionScreen), M.copy(R.positionScreen), 
        !0 === c(L, M) && (L.multiplyScalar(1 / L.w), M.multiplyScalar(1 / M.w), k === v ? (U = new THREE.RenderableLine(), 
        u.push(U), v++, k++, j = U) : j = u[k++], j.id = T.id, j.v1.positionScreen.copy(L), 
        j.v2.positionScreen.copy(M), j.z = Math.max(L.z, M.z), j.material = T.material, 
        T.material.vertexColors === THREE.VertexColors && (j.vertexColors[0].copy(T.geometry.colors[z]), 
        j.vertexColors[1].copy(T.geometry.colors[z - 1])), y.elements.push(j)));
        for (d = 0, p = y.sprites.length; p > d; d++) T = y.sprites[d].object, n = T.matrixWorld, 
        A.set(n.elements[12], n.elements[13], n.elements[14], 1), A.applyMatrix4(F), $ = 1 / A.w, 
        A.z *= $, -1 <= A.z && 1 >= A.z && (m === x ? (V = new THREE.RenderableSprite(), 
        w.push(V), x++, m++, l = V) : l = w[m++], l.id = T.id, l.x = A.x * $, l.y = A.y * $, 
        l.z = A.z, l.object = T, l.rotation = T.rotation, l.scale.x = T.scale.x * Math.abs(l.x - (A.x + o.projectionMatrix.elements[0]) / (A.w + o.projectionMatrix.elements[12])), 
        l.scale.y = T.scale.y * Math.abs(l.y - (A.y + o.projectionMatrix.elements[5]) / (A.w + o.projectionMatrix.elements[13])), 
        l.material = T.material, y.elements.push(l));
        return !0 === r && y.elements.sort(b), y;
    };
}, THREE.Face3 = function(a, b, c, d, e, f) {
    this.a = a, this.b = b, this.c = c, this.normal = d instanceof THREE.Vector3 ? d : new THREE.Vector3(), 
    this.vertexNormals = d instanceof Array ? d : [], this.color = e instanceof THREE.Color ? e : new THREE.Color(), 
    this.vertexColors = e instanceof Array ? e : [], this.vertexTangents = [], this.materialIndex = void 0 !== f ? f : 0, 
    this.centroid = new THREE.Vector3();
}, THREE.Face3.prototype = {
    constructor: THREE.Face3,
    clone: function() {
        var a = new THREE.Face3(this.a, this.b, this.c);
        a.normal.copy(this.normal), a.color.copy(this.color), a.centroid.copy(this.centroid), 
        a.materialIndex = this.materialIndex;
        var b, c;
        for (b = 0, c = this.vertexNormals.length; c > b; b++) a.vertexNormals[b] = this.vertexNormals[b].clone();
        for (b = 0, c = this.vertexColors.length; c > b; b++) a.vertexColors[b] = this.vertexColors[b].clone();
        for (b = 0, c = this.vertexTangents.length; c > b; b++) a.vertexTangents[b] = this.vertexTangents[b].clone();
        return a;
    }
}, THREE.Face4 = function(a, b, c, d, e, f, g) {
    return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), 
    new THREE.Face3(a, b, c, e, f, g);
}, THREE.Geometry = function() {
    this.id = THREE.GeometryIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", 
    this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [ [] ], 
    this.morphTargets = [], this.morphColors = [], this.morphNormals = [], this.skinWeights = [], 
    this.skinIndices = [], this.lineDistances = [], this.boundingSphere = this.boundingBox = null, 
    this.hasTangents = !1, this.dynamic = !0, this.buffersNeedUpdate = this.lineDistancesNeedUpdate = this.colorsNeedUpdate = this.tangentsNeedUpdate = this.normalsNeedUpdate = this.uvsNeedUpdate = this.elementsNeedUpdate = this.verticesNeedUpdate = !1;
}, THREE.Geometry.prototype = {
    constructor: THREE.Geometry,
    applyMatrix: function(a) {
        for (var b = new THREE.Matrix3().getNormalMatrix(a), c = 0, d = this.vertices.length; d > c; c++) this.vertices[c].applyMatrix4(a);
        for (c = 0, d = this.faces.length; d > c; c++) {
            var e = this.faces[c];
            e.normal.applyMatrix3(b).normalize();
            for (var f = 0, g = e.vertexNormals.length; g > f; f++) e.vertexNormals[f].applyMatrix3(b).normalize();
            e.centroid.applyMatrix4(a);
        }
        this.boundingBox instanceof THREE.Box3 && this.computeBoundingBox(), this.boundingSphere instanceof THREE.Sphere && this.computeBoundingSphere();
    },
    computeCentroids: function() {
        var a, b, c;
        for (a = 0, b = this.faces.length; b > a; a++) c = this.faces[a], c.centroid.set(0, 0, 0), 
        c.centroid.add(this.vertices[c.a]), c.centroid.add(this.vertices[c.b]), c.centroid.add(this.vertices[c.c]), 
        c.centroid.divideScalar(3);
    },
    computeFaceNormals: function() {
        for (var a = new THREE.Vector3(), b = new THREE.Vector3(), c = 0, d = this.faces.length; d > c; c++) {
            var e = this.faces[c], f = this.vertices[e.a], g = this.vertices[e.b];
            a.subVectors(this.vertices[e.c], g), b.subVectors(f, g), a.cross(b), a.normalize(), 
            e.normal.copy(a);
        }
    },
    computeVertexNormals: function(a) {
        var b, c, d, e;
        if (void 0 === this.__tmpVertices) {
            for (e = this.__tmpVertices = Array(this.vertices.length), b = 0, c = this.vertices.length; c > b; b++) e[b] = new THREE.Vector3();
            for (b = 0, c = this.faces.length; c > b; b++) d = this.faces[b], d.vertexNormals = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];
        } else for (e = this.__tmpVertices, b = 0, c = this.vertices.length; c > b; b++) e[b].set(0, 0, 0);
        if (a) {
            var f, g, h = new THREE.Vector3(), i = new THREE.Vector3();
            for (new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), b = 0, c = this.faces.length; c > b; b++) d = this.faces[b], 
            a = this.vertices[d.a], f = this.vertices[d.b], g = this.vertices[d.c], h.subVectors(g, f), 
            i.subVectors(a, f), h.cross(i), e[d.a].add(h), e[d.b].add(h), e[d.c].add(h);
        } else for (b = 0, c = this.faces.length; c > b; b++) d = this.faces[b], e[d.a].add(d.normal), 
        e[d.b].add(d.normal), e[d.c].add(d.normal);
        for (b = 0, c = this.vertices.length; c > b; b++) e[b].normalize();
        for (b = 0, c = this.faces.length; c > b; b++) d = this.faces[b], d.vertexNormals[0].copy(e[d.a]), 
        d.vertexNormals[1].copy(e[d.b]), d.vertexNormals[2].copy(e[d.c]);
    },
    computeMorphNormals: function() {
        var a, b, c, d, e;
        for (c = 0, d = this.faces.length; d > c; c++) for (e = this.faces[c], e.__originalFaceNormal ? e.__originalFaceNormal.copy(e.normal) : e.__originalFaceNormal = e.normal.clone(), 
        e.__originalVertexNormals || (e.__originalVertexNormals = []), a = 0, b = e.vertexNormals.length; b > a; a++) e.__originalVertexNormals[a] ? e.__originalVertexNormals[a].copy(e.vertexNormals[a]) : e.__originalVertexNormals[a] = e.vertexNormals[a].clone();
        var f = new THREE.Geometry();
        for (f.faces = this.faces, a = 0, b = this.morphTargets.length; b > a; a++) {
            if (!this.morphNormals[a]) {
                this.morphNormals[a] = {}, this.morphNormals[a].faceNormals = [], this.morphNormals[a].vertexNormals = [], 
                e = this.morphNormals[a].faceNormals;
                var g, h, i = this.morphNormals[a].vertexNormals;
                for (c = 0, d = this.faces.length; d > c; c++) g = new THREE.Vector3(), h = {
                    a: new THREE.Vector3(),
                    b: new THREE.Vector3(),
                    c: new THREE.Vector3()
                }, e.push(g), i.push(h);
            }
            for (i = this.morphNormals[a], f.vertices = this.morphTargets[a].vertices, f.computeFaceNormals(), 
            f.computeVertexNormals(), c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], 
            g = i.faceNormals[c], h = i.vertexNormals[c], g.copy(e.normal), h.a.copy(e.vertexNormals[0]), 
            h.b.copy(e.vertexNormals[1]), h.c.copy(e.vertexNormals[2]);
        }
        for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], e.normal = e.__originalFaceNormal, 
        e.vertexNormals = e.__originalVertexNormals;
    },
    computeTangents: function() {
        var a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r = [], s = [];
        c = new THREE.Vector3();
        var t = new THREE.Vector3(), u = new THREE.Vector3(), v = new THREE.Vector3(), w = new THREE.Vector3();
        for (a = 0, b = this.vertices.length; b > a; a++) r[a] = new THREE.Vector3(), s[a] = new THREE.Vector3();
        for (a = 0, b = this.faces.length; b > a; a++) e = this.faces[a], f = this.faceVertexUvs[0][a], 
        d = e.a, q = e.b, e = e.c, g = this.vertices[d], h = this.vertices[q], i = this.vertices[e], 
        j = f[0], k = f[1], l = f[2], f = h.x - g.x, m = i.x - g.x, n = h.y - g.y, o = i.y - g.y, 
        h = h.z - g.z, g = i.z - g.z, i = k.x - j.x, p = l.x - j.x, k = k.y - j.y, j = l.y - j.y, 
        l = 1 / (i * j - p * k), c.set((j * f - k * m) * l, (j * n - k * o) * l, (j * h - k * g) * l), 
        t.set((i * m - p * f) * l, (i * o - p * n) * l, (i * g - p * h) * l), r[d].add(c), 
        r[q].add(c), r[e].add(c), s[d].add(t), s[q].add(t), s[e].add(t);
        for (t = [ "a", "b", "c", "d" ], a = 0, b = this.faces.length; b > a; a++) for (e = this.faces[a], 
        c = 0; c < Math.min(e.vertexNormals.length, 3); c++) w.copy(e.vertexNormals[c]), 
        d = e[t[c]], q = r[d], u.copy(q), u.sub(w.multiplyScalar(w.dot(q))).normalize(), 
        v.crossVectors(e.vertexNormals[c], q), d = v.dot(s[d]), d = 0 > d ? -1 : 1, e.vertexTangents[c] = new THREE.Vector4(u.x, u.y, u.z, d);
        this.hasTangents = !0;
    },
    computeLineDistances: function() {
        for (var a = 0, b = this.vertices, c = 0, d = b.length; d > c; c++) c > 0 && (a += b[c].distanceTo(b[c - 1])), 
        this.lineDistances[c] = a;
    },
    computeBoundingBox: function() {
        null === this.boundingBox && (this.boundingBox = new THREE.Box3()), this.boundingBox.setFromPoints(this.vertices);
    },
    computeBoundingSphere: function() {
        null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere()), this.boundingSphere.setFromPoints(this.vertices);
    },
    mergeVertices: function() {
        var a, b, c, d = {}, e = [], f = [], g = Math.pow(10, 4);
        for (this.__tmpVertices = void 0, b = 0, c = this.vertices.length; c > b; b++) a = this.vertices[b], 
        a = Math.round(a.x * g) + "_" + Math.round(a.y * g) + "_" + Math.round(a.z * g), 
        void 0 === d[a] ? (d[a] = b, e.push(this.vertices[b]), f[b] = e.length - 1) : f[b] = f[d[a]];
        for (d = [], b = 0, c = this.faces.length; c > b; b++) for (g = this.faces[b], g.a = f[g.a], 
        g.b = f[g.b], g.c = f[g.c], g = [ g.a, g.b, g.c ], a = 0; 3 > a; a++) if (g[a] == g[(a + 1) % 3]) {
            d.push(b);
            break;
        }
        for (b = d.length - 1; b >= 0; b--) for (g = d[b], this.faces.splice(g, 1), f = 0, 
        c = this.faceVertexUvs.length; c > f; f++) this.faceVertexUvs[f].splice(g, 1);
        return b = this.vertices.length - e.length, this.vertices = e, b;
    },
    clone: function() {
        for (var a = new THREE.Geometry(), b = this.vertices, c = 0, d = b.length; d > c; c++) a.vertices.push(b[c].clone());
        for (b = this.faces, c = 0, d = b.length; d > c; c++) a.faces.push(b[c].clone());
        for (b = this.faceVertexUvs[0], c = 0, d = b.length; d > c; c++) {
            for (var e = b[c], f = [], g = 0, h = e.length; h > g; g++) f.push(new THREE.Vector2(e[g].x, e[g].y));
            a.faceVertexUvs[0].push(f);
        }
        return a;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype), THREE.GeometryIdCount = 0, 
THREE.BufferGeometry = function() {
    this.id = THREE.GeometryIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", 
    this.attributes = {}, this.dynamic = !0, this.offsets = [], this.boundingSphere = this.boundingBox = null, 
    this.hasTangents = !1, this.morphTargets = [];
}, THREE.BufferGeometry.prototype = {
    constructor: THREE.BufferGeometry,
    addAttribute: function(a, b, c, d) {
        this.attributes[a] = {
            itemSize: d,
            array: new b(c * d)
        };
    },
    applyMatrix: function(a) {
        var b, c;
        this.attributes.position && (b = this.attributes.position.array), this.attributes.normal && (c = this.attributes.normal.array), 
        void 0 !== b && (a.multiplyVector3Array(b), this.verticesNeedUpdate = !0), void 0 !== c && (new THREE.Matrix3().getNormalMatrix(a).multiplyVector3Array(c), 
        this.normalizeNormals(), this.normalsNeedUpdate = !0);
    },
    computeBoundingBox: function() {
        null === this.boundingBox && (this.boundingBox = new THREE.Box3());
        var a = this.attributes.position.array;
        if (a) {
            var b, c, d, e = this.boundingBox;
            3 <= a.length && (e.min.x = e.max.x = a[0], e.min.y = e.max.y = a[1], e.min.z = e.max.z = a[2]);
            for (var f = 3, g = a.length; g > f; f += 3) b = a[f], c = a[f + 1], d = a[f + 2], 
            b < e.min.x ? e.min.x = b : b > e.max.x && (e.max.x = b), c < e.min.y ? e.min.y = c : c > e.max.y && (e.max.y = c), 
            d < e.min.z ? e.min.z = d : d > e.max.z && (e.max.z = d);
        }
        (void 0 === a || 0 === a.length) && (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0));
    },
    computeBoundingSphere: function() {
        var a = new THREE.Box3(), b = new THREE.Vector3();
        return function() {
            null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere());
            var c = this.attributes.position.array;
            if (c) {
                for (var d = this.boundingSphere.center, e = 0, f = c.length; f > e; e += 3) b.set(c[e], c[e + 1], c[e + 2]), 
                a.addPoint(b);
                a.center(d);
                for (var g = 0, e = 0, f = c.length; f > e; e += 3) b.set(c[e], c[e + 1], c[e + 2]), 
                g = Math.max(g, d.distanceToSquared(b));
                this.boundingSphere.radius = Math.sqrt(g);
            }
        };
    }(),
    computeVertexNormals: function() {
        if (this.attributes.position) {
            var a, b, c, d;
            if (a = this.attributes.position.array.length, void 0 === this.attributes.normal) this.attributes.normal = {
                itemSize: 3,
                array: new Float32Array(a)
            }; else for (a = 0, b = this.attributes.normal.array.length; b > a; a++) this.attributes.normal.array[a] = 0;
            var e, f, g, h, i, j, k = this.attributes.position.array, l = this.attributes.normal.array, m = new THREE.Vector3(), n = new THREE.Vector3(), o = new THREE.Vector3(), p = new THREE.Vector3(), q = new THREE.Vector3();
            if (this.attributes.index) {
                var r = this.attributes.index.array, s = this.offsets;
                for (c = 0, d = s.length; d > c; ++c) {
                    b = s[c].start, e = s[c].count;
                    var t = s[c].index;
                    for (a = b, b += e; b > a; a += 3) e = t + r[a], f = t + r[a + 1], g = t + r[a + 2], 
                    h = k[3 * e], i = k[3 * e + 1], j = k[3 * e + 2], m.set(h, i, j), h = k[3 * f], 
                    i = k[3 * f + 1], j = k[3 * f + 2], n.set(h, i, j), h = k[3 * g], i = k[3 * g + 1], 
                    j = k[3 * g + 2], o.set(h, i, j), p.subVectors(o, n), q.subVectors(m, n), p.cross(q), 
                    l[3 * e] += p.x, l[3 * e + 1] += p.y, l[3 * e + 2] += p.z, l[3 * f] += p.x, l[3 * f + 1] += p.y, 
                    l[3 * f + 2] += p.z, l[3 * g] += p.x, l[3 * g + 1] += p.y, l[3 * g + 2] += p.z;
                }
            } else for (a = 0, b = k.length; b > a; a += 9) h = k[a], i = k[a + 1], j = k[a + 2], 
            m.set(h, i, j), h = k[a + 3], i = k[a + 4], j = k[a + 5], n.set(h, i, j), h = k[a + 6], 
            i = k[a + 7], j = k[a + 8], o.set(h, i, j), p.subVectors(o, n), q.subVectors(m, n), 
            p.cross(q), l[a] = p.x, l[a + 1] = p.y, l[a + 2] = p.z, l[a + 3] = p.x, l[a + 4] = p.y, 
            l[a + 5] = p.z, l[a + 6] = p.x, l[a + 7] = p.y, l[a + 8] = p.z;
            this.normalizeNormals(), this.normalsNeedUpdate = !0;
        }
    },
    normalizeNormals: function() {
        for (var a, b, c, d = this.attributes.normal.array, e = 0, f = d.length; f > e; e += 3) a = d[e], 
        b = d[e + 1], c = d[e + 2], a = 1 / Math.sqrt(a * a + b * b + c * c), d[e] *= a, 
        d[e + 1] *= a, d[e + 2] *= a;
    },
    computeTangents: function() {
        function a(a) {
            N.x = d[3 * a], N.y = d[3 * a + 1], N.z = d[3 * a + 2], O.copy(N), J = h[a], L.copy(J), 
            L.sub(N.multiplyScalar(N.dot(J))).normalize(), M.crossVectors(O, J), K = M.dot(i[a]), 
            I = 0 > K ? -1 : 1, g[4 * a] = L.x, g[4 * a + 1] = L.y, g[4 * a + 2] = L.z, g[4 * a + 3] = I;
        }
        if (void 0 === this.attributes.index || void 0 === this.attributes.position || void 0 === this.attributes.normal || void 0 === this.attributes.uv) console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()"); else {
            var b = this.attributes.index.array, c = this.attributes.position.array, d = this.attributes.normal.array, e = this.attributes.uv.array, f = c.length / 3;
            void 0 === this.attributes.tangent && (this.attributes.tangent = {
                itemSize: 4,
                array: new Float32Array(4 * f)
            });
            for (var g = this.attributes.tangent.array, h = [], i = [], j = 0; f > j; j++) h[j] = new THREE.Vector3(), 
            i[j] = new THREE.Vector3();
            var k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, f = new THREE.Vector3(), j = new THREE.Vector3(), G = this.offsets;
            for (B = 0, C = G.length; C > B; ++B) {
                A = G[B].start, D = G[B].count;
                var H = G[B].index;
                for (z = A, A += D; A > z; z += 3) D = H + b[z], E = H + b[z + 1], F = H + b[z + 2], 
                k = c[3 * D], l = c[3 * D + 1], m = c[3 * D + 2], n = c[3 * E], o = c[3 * E + 1], 
                p = c[3 * E + 2], q = c[3 * F], r = c[3 * F + 1], s = c[3 * F + 2], t = e[2 * D], 
                u = e[2 * D + 1], v = e[2 * E], w = e[2 * E + 1], x = e[2 * F], y = e[2 * F + 1], 
                n -= k, k = q - k, o -= l, l = r - l, p -= m, m = s - m, v -= t, t = x - t, w -= u, 
                u = y - u, y = 1 / (v * u - t * w), f.set((u * n - w * k) * y, (u * o - w * l) * y, (u * p - w * m) * y), 
                j.set((v * k - t * n) * y, (v * l - t * o) * y, (v * m - t * p) * y), h[D].add(f), 
                h[E].add(f), h[F].add(f), i[D].add(j), i[E].add(j), i[F].add(j);
            }
            var I, J, K, L = new THREE.Vector3(), M = new THREE.Vector3(), N = new THREE.Vector3(), O = new THREE.Vector3();
            for (B = 0, C = G.length; C > B; ++B) for (A = G[B].start, D = G[B].count, H = G[B].index, 
            z = A, A += D; A > z; z += 3) D = H + b[z], E = H + b[z + 1], F = H + b[z + 2], 
            a(D), a(E), a(F);
            this.tangentsNeedUpdate = this.hasTangents = !0;
        }
    },
    clone: function() {
        var a, b = new THREE.BufferGeometry(), c = [ Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array ];
        for (a in this.attributes) {
            for (var d = this.attributes[a], e = d.array, f = {
                itemSize: d.itemSize,
                numItems: d.numItems,
                array: null
            }, d = 0, g = c.length; g > d; d++) {
                var h = c[d];
                if (e instanceof h) {
                    f.array = new h(e);
                    break;
                }
            }
            b.attributes[a] = f;
        }
        for (d = 0, g = this.offsets.length; g > d; d++) c = this.offsets[d], b.offsets.push({
            start: c.start,
            index: c.index,
            count: c.count
        });
        return b;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype), THREE.Camera = function() {
    THREE.Object3D.call(this), this.matrixWorldInverse = new THREE.Matrix4(), this.projectionMatrix = new THREE.Matrix4(), 
    this.projectionMatrixInverse = new THREE.Matrix4();
}, THREE.Camera.prototype = Object.create(THREE.Object3D.prototype), THREE.Camera.prototype.lookAt = function() {
    var a = new THREE.Matrix4();
    return function(b) {
        a.lookAt(this.position, b, this.up), this.quaternion.setFromRotationMatrix(a);
    };
}(), THREE.Camera.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.Camera()), THREE.Object3D.prototype.clone.call(this, a), 
    a.matrixWorldInverse.copy(this.matrixWorldInverse), a.projectionMatrix.copy(this.projectionMatrix), 
    a.projectionMatrixInverse.copy(this.projectionMatrixInverse), a;
}, THREE.OrthographicCamera = function(a, b, c, d, e, f) {
    THREE.Camera.call(this), this.left = a, this.right = b, this.top = c, this.bottom = d, 
    this.near = void 0 !== e ? e : .1, this.far = void 0 !== f ? f : 2e3, this.updateProjectionMatrix();
}, THREE.OrthographicCamera.prototype = Object.create(THREE.Camera.prototype), THREE.OrthographicCamera.prototype.updateProjectionMatrix = function() {
    this.projectionMatrix.makeOrthographic(this.left, this.right, this.top, this.bottom, this.near, this.far);
}, THREE.OrthographicCamera.prototype.clone = function() {
    var a = new THREE.OrthographicCamera();
    return THREE.Camera.prototype.clone.call(this, a), a.left = this.left, a.right = this.right, 
    a.top = this.top, a.bottom = this.bottom, a.near = this.near, a.far = this.far, 
    a;
}, THREE.PerspectiveCamera = function(a, b, c, d) {
    THREE.Camera.call(this), this.fov = void 0 !== a ? a : 50, this.aspect = void 0 !== b ? b : 1, 
    this.near = void 0 !== c ? c : .1, this.far = void 0 !== d ? d : 2e3, this.updateProjectionMatrix();
}, THREE.PerspectiveCamera.prototype = Object.create(THREE.Camera.prototype), THREE.PerspectiveCamera.prototype.setLens = function(a, b) {
    void 0 === b && (b = 24), this.fov = 2 * THREE.Math.radToDeg(Math.atan(b / (2 * a))), 
    this.updateProjectionMatrix();
}, THREE.PerspectiveCamera.prototype.setViewOffset = function(a, b, c, d, e, f) {
    this.fullWidth = a, this.fullHeight = b, this.x = c, this.y = d, this.width = e, 
    this.height = f, this.updateProjectionMatrix();
}, THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
    if (this.fullWidth) {
        var a = this.fullWidth / this.fullHeight, b = Math.tan(THREE.Math.degToRad(.5 * this.fov)) * this.near, c = -b, d = a * c, a = Math.abs(a * b - d), c = Math.abs(b - c);
        this.projectionMatrix.makeFrustum(d + this.x * a / this.fullWidth, d + (this.x + this.width) * a / this.fullWidth, b - (this.y + this.height) * c / this.fullHeight, b - this.y * c / this.fullHeight, this.near, this.far);
    } else this.projectionMatrix.makePerspective(this.fov, this.aspect, this.near, this.far);
}, THREE.PerspectiveCamera.prototype.clone = function() {
    var a = new THREE.PerspectiveCamera();
    return THREE.Camera.prototype.clone.call(this, a), a.fov = this.fov, a.aspect = this.aspect, 
    a.near = this.near, a.far = this.far, a;
}, THREE.Light = function(a) {
    THREE.Object3D.call(this), this.color = new THREE.Color(a);
}, THREE.Light.prototype = Object.create(THREE.Object3D.prototype), THREE.Light.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.Light()), THREE.Object3D.prototype.clone.call(this, a), 
    a.color.copy(this.color), a;
}, THREE.AmbientLight = function(a) {
    THREE.Light.call(this, a);
}, THREE.AmbientLight.prototype = Object.create(THREE.Light.prototype), THREE.AmbientLight.prototype.clone = function() {
    var a = new THREE.AmbientLight();
    return THREE.Light.prototype.clone.call(this, a), a;
}, THREE.AreaLight = function(a, b) {
    THREE.Light.call(this, a), this.normal = new THREE.Vector3(0, -1, 0), this.right = new THREE.Vector3(1, 0, 0), 
    this.intensity = void 0 !== b ? b : 1, this.height = this.width = 1, this.constantAttenuation = 1.5, 
    this.linearAttenuation = .5, this.quadraticAttenuation = .1;
}, THREE.AreaLight.prototype = Object.create(THREE.Light.prototype), THREE.DirectionalLight = function(a, b) {
    THREE.Light.call(this, a), this.position.set(0, 1, 0), this.target = new THREE.Object3D(), 
    this.intensity = void 0 !== b ? b : 1, this.onlyShadow = this.castShadow = !1, this.shadowCameraNear = 50, 
    this.shadowCameraFar = 5e3, this.shadowCameraLeft = -500, this.shadowCameraTop = this.shadowCameraRight = 500, 
    this.shadowCameraBottom = -500, this.shadowCameraVisible = !1, this.shadowBias = 0, 
    this.shadowDarkness = .5, this.shadowMapHeight = this.shadowMapWidth = 512, this.shadowCascade = !1, 
    this.shadowCascadeOffset = new THREE.Vector3(0, 0, -1e3), this.shadowCascadeCount = 2, 
    this.shadowCascadeBias = [ 0, 0, 0 ], this.shadowCascadeWidth = [ 512, 512, 512 ], 
    this.shadowCascadeHeight = [ 512, 512, 512 ], this.shadowCascadeNearZ = [ -1, .99, .998 ], 
    this.shadowCascadeFarZ = [ .99, .998, 1 ], this.shadowCascadeArray = [], this.shadowMatrix = this.shadowCamera = this.shadowMapSize = this.shadowMap = null;
}, THREE.DirectionalLight.prototype = Object.create(THREE.Light.prototype), THREE.DirectionalLight.prototype.clone = function() {
    var a = new THREE.DirectionalLight();
    return THREE.Light.prototype.clone.call(this, a), a.target = this.target.clone(), 
    a.intensity = this.intensity, a.castShadow = this.castShadow, a.onlyShadow = this.onlyShadow, 
    a;
}, THREE.HemisphereLight = function(a, b, c) {
    THREE.Light.call(this, a), this.position.set(0, 100, 0), this.groundColor = new THREE.Color(b), 
    this.intensity = void 0 !== c ? c : 1;
}, THREE.HemisphereLight.prototype = Object.create(THREE.Light.prototype), THREE.HemisphereLight.prototype.clone = function() {
    var a = new THREE.HemisphereLight();
    return THREE.Light.prototype.clone.call(this, a), a.groundColor.copy(this.groundColor), 
    a.intensity = this.intensity, a;
}, THREE.PointLight = function(a, b, c) {
    THREE.Light.call(this, a), this.intensity = void 0 !== b ? b : 1, this.distance = void 0 !== c ? c : 0;
}, THREE.PointLight.prototype = Object.create(THREE.Light.prototype), THREE.PointLight.prototype.clone = function() {
    var a = new THREE.PointLight();
    return THREE.Light.prototype.clone.call(this, a), a.intensity = this.intensity, 
    a.distance = this.distance, a;
}, THREE.SpotLight = function(a, b, c, d, e) {
    THREE.Light.call(this, a), this.position.set(0, 1, 0), this.target = new THREE.Object3D(), 
    this.intensity = void 0 !== b ? b : 1, this.distance = void 0 !== c ? c : 0, this.angle = void 0 !== d ? d : Math.PI / 3, 
    this.exponent = void 0 !== e ? e : 10, this.onlyShadow = this.castShadow = !1, this.shadowCameraNear = 50, 
    this.shadowCameraFar = 5e3, this.shadowCameraFov = 50, this.shadowCameraVisible = !1, 
    this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapHeight = this.shadowMapWidth = 512, 
    this.shadowMatrix = this.shadowCamera = this.shadowMapSize = this.shadowMap = null;
}, THREE.SpotLight.prototype = Object.create(THREE.Light.prototype), THREE.SpotLight.prototype.clone = function() {
    var a = new THREE.SpotLight();
    return THREE.Light.prototype.clone.call(this, a), a.target = this.target.clone(), 
    a.intensity = this.intensity, a.distance = this.distance, a.angle = this.angle, 
    a.exponent = this.exponent, a.castShadow = this.castShadow, a.onlyShadow = this.onlyShadow, 
    a;
}, THREE.Loader = function(a) {
    this.statusDomElement = (this.showStatus = a) ? THREE.Loader.prototype.addStatusElement() : null, 
    this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {};
}, THREE.Loader.prototype = {
    constructor: THREE.Loader,
    crossOrigin: "anonymous",
    addStatusElement: function() {
        var a = document.createElement("div");
        return a.style.position = "absolute", a.style.right = "0px", a.style.top = "0px", 
        a.style.fontSize = "0.8em", a.style.textAlign = "left", a.style.background = "rgba(0,0,0,0.25)", 
        a.style.color = "#fff", a.style.width = "120px", a.style.padding = "0.5em 0.5em 0.5em 0.5em", 
        a.style.zIndex = 1e3, a.innerHTML = "Loading ...", a;
    },
    updateProgress: function(a) {
        var b = "Loaded ", b = a.total ? b + ((100 * a.loaded / a.total).toFixed(0) + "%") : b + ((a.loaded / 1e3).toFixed(2) + " KB");
        this.statusDomElement.innerHTML = b;
    },
    extractUrlBase: function(a) {
        return a = a.split("/"), a.pop(), (1 > a.length ? "." : a.join("/")) + "/";
    },
    initMaterials: function(a, b) {
        for (var c = [], d = 0; d < a.length; ++d) c[d] = THREE.Loader.prototype.createMaterial(a[d], b);
        return c;
    },
    needsTangents: function(a) {
        for (var b = 0, c = a.length; c > b; b++) if (a[b] instanceof THREE.ShaderMaterial) return !0;
        return !1;
    },
    createMaterial: function(a, b) {
        function c(a) {
            return a = Math.log(a) / Math.LN2, Math.floor(a) == a;
        }
        function d(a) {
            return a = Math.log(a) / Math.LN2, Math.pow(2, Math.round(a));
        }
        function e(a, e, f, h, i, j, k) {
            var l = /\.dds$/i.test(f), m = b + "/" + f;
            if (l) {
                var n = THREE.ImageUtils.loadCompressedTexture(m);
                a[e] = n;
            } else n = document.createElement("canvas"), a[e] = new THREE.Texture(n);
            if (a[e].sourceFile = f, h && (a[e].repeat.set(h[0], h[1]), 1 !== h[0] && (a[e].wrapS = THREE.RepeatWrapping), 
            1 !== h[1] && (a[e].wrapT = THREE.RepeatWrapping)), i && a[e].offset.set(i[0], i[1]), 
            j && (f = {
                repeat: THREE.RepeatWrapping,
                mirror: THREE.MirroredRepeatWrapping
            }, void 0 !== f[j[0]] && (a[e].wrapS = f[j[0]]), void 0 !== f[j[1]] && (a[e].wrapT = f[j[1]])), 
            k && (a[e].anisotropy = k), !l) {
                var o = a[e], a = new Image();
                a.onload = function() {
                    if (c(this.width) && c(this.height)) o.image = this; else {
                        var a = d(this.width), b = d(this.height);
                        o.image.width = a, o.image.height = b, o.image.getContext("2d").drawImage(this, 0, 0, a, b);
                    }
                    o.needsUpdate = !0;
                }, a.crossOrigin = g.crossOrigin, a.src = m;
            }
        }
        function f(a) {
            return (255 * a[0] << 16) + (255 * a[1] << 8) + 255 * a[2];
        }
        var g = this, h = "MeshLambertMaterial", i = {
            color: 15658734,
            opacity: 1,
            map: null,
            lightMap: null,
            normalMap: null,
            bumpMap: null,
            wireframe: !1
        };
        if (a.shading) {
            var j = a.shading.toLowerCase();
            "phong" === j ? h = "MeshPhongMaterial" : "basic" === j && (h = "MeshBasicMaterial");
        }
        return void 0 !== a.blending && void 0 !== THREE[a.blending] && (i.blending = THREE[a.blending]), 
        (void 0 !== a.transparent || 1 > a.opacity) && (i.transparent = a.transparent), 
        void 0 !== a.depthTest && (i.depthTest = a.depthTest), void 0 !== a.depthWrite && (i.depthWrite = a.depthWrite), 
        void 0 !== a.visible && (i.visible = a.visible), void 0 !== a.flipSided && (i.side = THREE.BackSide), 
        void 0 !== a.doubleSided && (i.side = THREE.DoubleSide), void 0 !== a.wireframe && (i.wireframe = a.wireframe), 
        void 0 !== a.vertexColors && ("face" === a.vertexColors ? i.vertexColors = THREE.FaceColors : a.vertexColors && (i.vertexColors = THREE.VertexColors)), 
        a.colorDiffuse ? i.color = f(a.colorDiffuse) : a.DbgColor && (i.color = a.DbgColor), 
        a.colorSpecular && (i.specular = f(a.colorSpecular)), a.colorAmbient && (i.ambient = f(a.colorAmbient)), 
        a.transparency && (i.opacity = a.transparency), a.specularCoef && (i.shininess = a.specularCoef), 
        a.mapDiffuse && b && e(i, "map", a.mapDiffuse, a.mapDiffuseRepeat, a.mapDiffuseOffset, a.mapDiffuseWrap, a.mapDiffuseAnisotropy), 
        a.mapLight && b && e(i, "lightMap", a.mapLight, a.mapLightRepeat, a.mapLightOffset, a.mapLightWrap, a.mapLightAnisotropy), 
        a.mapBump && b && e(i, "bumpMap", a.mapBump, a.mapBumpRepeat, a.mapBumpOffset, a.mapBumpWrap, a.mapBumpAnisotropy), 
        a.mapNormal && b && e(i, "normalMap", a.mapNormal, a.mapNormalRepeat, a.mapNormalOffset, a.mapNormalWrap, a.mapNormalAnisotropy), 
        a.mapSpecular && b && e(i, "specularMap", a.mapSpecular, a.mapSpecularRepeat, a.mapSpecularOffset, a.mapSpecularWrap, a.mapSpecularAnisotropy), 
        a.mapBumpScale && (i.bumpScale = a.mapBumpScale), a.mapNormal ? (h = THREE.ShaderLib.normalmap, 
        j = THREE.UniformsUtils.clone(h.uniforms), j.tNormal.value = i.normalMap, a.mapNormalFactor && j.uNormalScale.value.set(a.mapNormalFactor, a.mapNormalFactor), 
        i.map && (j.tDiffuse.value = i.map, j.enableDiffuse.value = !0), i.specularMap && (j.tSpecular.value = i.specularMap, 
        j.enableSpecular.value = !0), i.lightMap && (j.tAO.value = i.lightMap, j.enableAO.value = !0), 
        j.uDiffuseColor.value.setHex(i.color), j.uSpecularColor.value.setHex(i.specular), 
        j.uAmbientColor.value.setHex(i.ambient), j.uShininess.value = i.shininess, void 0 !== i.opacity && (j.uOpacity.value = i.opacity), 
        h = new THREE.ShaderMaterial({
            fragmentShader: h.fragmentShader,
            vertexShader: h.vertexShader,
            uniforms: j,
            lights: !0,
            fog: !0
        }), i.transparent && (h.transparent = !0)) : h = new THREE[h](i), void 0 !== a.DbgName && (h.name = a.DbgName), 
        h;
    }
}, THREE.XHRLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.XHRLoader.prototype = {
    constructor: THREE.XHRLoader,
    load: function(a, b, c, d) {
        var e = this, f = new XMLHttpRequest();
        void 0 !== b && f.addEventListener("load", function(c) {
            b(c.target.responseText), e.manager.itemEnd(a);
        }, !1), void 0 !== c && f.addEventListener("progress", function(a) {
            c(a);
        }, !1), void 0 !== d && f.addEventListener("error", function(a) {
            d(a);
        }, !1), void 0 !== this.crossOrigin && (f.crossOrigin = this.crossOrigin), f.open("GET", a, !0), 
        f.send(null), e.manager.itemStart(a);
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    }
}, THREE.ImageLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.ImageLoader.prototype = {
    constructor: THREE.ImageLoader,
    load: function(a, b, c, d) {
        var e = this, f = document.createElement("img");
        return void 0 !== b && f.addEventListener("load", function() {
            e.manager.itemEnd(a), b(this);
        }, !1), void 0 !== c && f.addEventListener("progress", function(a) {
            c(a);
        }, !1), void 0 !== d && f.addEventListener("error", function(a) {
            d(a);
        }, !1), void 0 !== this.crossOrigin && (f.crossOrigin = this.crossOrigin), f.src = a, 
        e.manager.itemStart(a), f;
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    }
}, THREE.JSONLoader = function(a) {
    THREE.Loader.call(this, a), this.withCredentials = !1;
}, THREE.JSONLoader.prototype = Object.create(THREE.Loader.prototype), THREE.JSONLoader.prototype.load = function(a, b, c) {
    c = c && "string" == typeof c ? c : this.extractUrlBase(a), this.onLoadStart(), 
    this.loadAjaxJSON(this, a, b, c);
}, THREE.JSONLoader.prototype.loadAjaxJSON = function(a, b, c, d, e) {
    var f = new XMLHttpRequest(), g = 0;
    f.onreadystatechange = function() {
        if (f.readyState === f.DONE) if (200 === f.status || 0 === f.status) {
            if (f.responseText) {
                var h = JSON.parse(f.responseText), h = a.parse(h, d);
                c(h.geometry, h.materials);
            } else console.warn("THREE.JSONLoader: [" + b + "] seems to be unreachable or file there is empty");
            a.onLoadComplete();
        } else console.error("THREE.JSONLoader: Couldn't load [" + b + "] [" + f.status + "]"); else f.readyState === f.LOADING ? e && (0 === g && (g = f.getResponseHeader("Content-Length")), 
        e({
            total: g,
            loaded: f.responseText.length
        })) : f.readyState === f.HEADERS_RECEIVED && void 0 !== e && (g = f.getResponseHeader("Content-Length"));
    }, f.open("GET", b, !0), f.withCredentials = this.withCredentials, f.send(null);
}, THREE.JSONLoader.prototype.parse = function(a, b) {
    var c, d, e, f, g, h, i, j, k, l, m, n, o, p, q = new THREE.Geometry(), r = void 0 !== a.scale ? 1 / a.scale : 1, s = a.faces;
    k = a.vertices;
    var t = a.normals, u = a.colors, v = 0;
    if (void 0 !== a.uvs) {
        for (c = 0; c < a.uvs.length; c++) a.uvs[c].length && v++;
        for (c = 0; v > c; c++) q.faceVertexUvs[c] = [];
    }
    for (f = 0, g = k.length; g > f; ) h = new THREE.Vector3(), h.x = k[f++] * r, h.y = k[f++] * r, 
    h.z = k[f++] * r, q.vertices.push(h);
    for (f = 0, g = s.length; g > f; ) if (k = s[f++], l = 1 & k, e = 2 & k, c = 8 & k, 
    i = 16 & k, m = 32 & k, h = 64 & k, k &= 128, l) {
        if (l = new THREE.Face3(), l.a = s[f], l.b = s[f + 1], l.c = s[f + 3], n = new THREE.Face3(), 
        n.a = s[f + 1], n.b = s[f + 2], n.c = s[f + 3], f += 4, e && (e = s[f++], l.materialIndex = e, 
        n.materialIndex = e), e = q.faces.length, c) for (c = 0; v > c; c++) for (o = a.uvs[c], 
        q.faceVertexUvs[c][e] = [], q.faceVertexUvs[c][e + 1] = [], d = 0; 4 > d; d++) j = s[f++], 
        p = o[2 * j], j = o[2 * j + 1], p = new THREE.Vector2(p, j), 2 !== d && q.faceVertexUvs[c][e].push(p), 
        0 !== d && q.faceVertexUvs[c][e + 1].push(p);
        if (i && (i = 3 * s[f++], l.normal.set(t[i++], t[i++], t[i]), n.normal.copy(l.normal)), 
        m) for (c = 0; 4 > c; c++) i = 3 * s[f++], m = new THREE.Vector3(t[i++], t[i++], t[i]), 
        2 !== c && l.vertexNormals.push(m), 0 !== c && n.vertexNormals.push(m);
        if (h && (h = s[f++], h = u[h], l.color.setHex(h), n.color.setHex(h)), k) for (c = 0; 4 > c; c++) h = s[f++], 
        h = u[h], 2 !== c && l.vertexColors.push(new THREE.Color(h)), 0 !== c && n.vertexColors.push(new THREE.Color(h));
        q.faces.push(l), q.faces.push(n);
    } else {
        if (l = new THREE.Face3(), l.a = s[f++], l.b = s[f++], l.c = s[f++], e && (e = s[f++], 
        l.materialIndex = e), e = q.faces.length, c) for (c = 0; v > c; c++) for (o = a.uvs[c], 
        q.faceVertexUvs[c][e] = [], d = 0; 3 > d; d++) j = s[f++], p = o[2 * j], j = o[2 * j + 1], 
        p = new THREE.Vector2(p, j), q.faceVertexUvs[c][e].push(p);
        if (i && (i = 3 * s[f++], l.normal.set(t[i++], t[i++], t[i])), m) for (c = 0; 3 > c; c++) i = 3 * s[f++], 
        m = new THREE.Vector3(t[i++], t[i++], t[i]), l.vertexNormals.push(m);
        if (h && (h = s[f++], l.color.setHex(u[h])), k) for (c = 0; 3 > c; c++) h = s[f++], 
        l.vertexColors.push(new THREE.Color(u[h]));
        q.faces.push(l);
    }
    if (a.skinWeights) for (f = 0, g = a.skinWeights.length; g > f; f += 2) s = a.skinWeights[f], 
    t = a.skinWeights[f + 1], q.skinWeights.push(new THREE.Vector4(s, t, 0, 0));
    if (a.skinIndices) for (f = 0, g = a.skinIndices.length; g > f; f += 2) s = a.skinIndices[f], 
    t = a.skinIndices[f + 1], q.skinIndices.push(new THREE.Vector4(s, t, 0, 0));
    if (q.bones = a.bones, q.animation = a.animation, q.animations = a.animations, void 0 !== a.morphTargets) for (f = 0, 
    g = a.morphTargets.length; g > f; f++) for (q.morphTargets[f] = {}, q.morphTargets[f].name = a.morphTargets[f].name, 
    q.morphTargets[f].vertices = [], u = q.morphTargets[f].vertices, v = a.morphTargets[f].vertices, 
    s = 0, t = v.length; t > s; s += 3) k = new THREE.Vector3(), k.x = v[s] * r, k.y = v[s + 1] * r, 
    k.z = v[s + 2] * r, u.push(k);
    if (void 0 !== a.morphColors) for (f = 0, g = a.morphColors.length; g > f; f++) for (q.morphColors[f] = {}, 
    q.morphColors[f].name = a.morphColors[f].name, q.morphColors[f].colors = [], t = q.morphColors[f].colors, 
    u = a.morphColors[f].colors, r = 0, s = u.length; s > r; r += 3) v = new THREE.Color(16755200), 
    v.setRGB(u[r], u[r + 1], u[r + 2]), t.push(v);
    return q.computeCentroids(), q.computeFaceNormals(), q.computeBoundingSphere(), 
    void 0 === a.materials ? {
        geometry: q
    } : (r = this.initMaterials(a.materials, b), this.needsTangents(r) && q.computeTangents(), 
    {
        geometry: q,
        materials: r
    });
}, THREE.LoadingManager = function(a, b, c) {
    var d = this, e = 0, f = 0;
    this.onLoad = a, this.onProgress = b, this.onError = c, this.itemStart = function() {
        f++;
    }, this.itemEnd = function(a) {
        e++, void 0 !== d.onProgress && d.onProgress(a, e, f), e === f && void 0 !== d.onLoad && d.onLoad();
    };
}, THREE.DefaultLoadingManager = new THREE.LoadingManager(), THREE.BufferGeometryLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.BufferGeometryLoader.prototype = {
    constructor: THREE.BufferGeometryLoader,
    load: function(a, b) {
        var c = this, d = new THREE.XHRLoader();
        d.setCrossOrigin(this.crossOrigin), d.load(a, function(a) {
            b(c.parse(JSON.parse(a)));
        });
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    parse: function(a) {
        var b, c = new THREE.BufferGeometry(), d = a.attributes, e = a.offsets, a = a.boundingSphere;
        for (b in d) {
            var f = d[b];
            c.attributes[b] = {
                itemSize: f.itemSize,
                array: new self[f.type](f.array)
            };
        }
        return void 0 !== e && (c.offsets = JSON.parse(JSON.stringify(e))), void 0 !== a && (c.boundingSphere = new THREE.Sphere(new THREE.Vector3().fromArray(void 0 !== a.center ? a.center : [ 0, 0, 0 ]), a.radius)), 
        c;
    }
}, THREE.GeometryLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.GeometryLoader.prototype = {
    constructor: THREE.GeometryLoader,
    load: function(a, b) {
        var c = this, d = new THREE.XHRLoader();
        d.setCrossOrigin(this.crossOrigin), d.load(a, function(a) {
            b(c.parse(JSON.parse(a)));
        });
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    parse: function() {}
}, THREE.MaterialLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.MaterialLoader.prototype = {
    constructor: THREE.MaterialLoader,
    load: function(a, b) {
        var c = this, d = new THREE.XHRLoader();
        d.setCrossOrigin(this.crossOrigin), d.load(a, function(a) {
            b(c.parse(JSON.parse(a)));
        });
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    parse: function(a) {
        var b = new THREE[a.type]();
        if (void 0 !== a.color && b.color.setHex(a.color), void 0 !== a.ambient && b.ambient.setHex(a.ambient), 
        void 0 !== a.emissive && b.emissive.setHex(a.emissive), void 0 !== a.specular && b.specular.setHex(a.specular), 
        void 0 !== a.shininess && (b.shininess = a.shininess), void 0 !== a.vertexColors && (b.vertexColors = a.vertexColors), 
        void 0 !== a.blending && (b.blending = a.blending), void 0 !== a.side && (b.side = a.side), 
        void 0 !== a.opacity && (b.opacity = a.opacity), void 0 !== a.transparent && (b.transparent = a.transparent), 
        void 0 !== a.wireframe && (b.wireframe = a.wireframe), void 0 !== a.materials) for (var c = 0, d = a.materials.length; d > c; c++) b.materials.push(this.parse(a.materials[c]));
        return b;
    }
}, THREE.ObjectLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.ObjectLoader.prototype = {
    constructor: THREE.ObjectLoader,
    load: function(a, b) {
        var c = this, d = new THREE.XHRLoader(c.manager);
        d.setCrossOrigin(this.crossOrigin), d.load(a, function(a) {
            b(c.parse(JSON.parse(a)));
        });
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    parse: function(a) {
        var b = this.parseGeometries(a.geometries), c = this.parseMaterials(a.materials);
        return this.parseObject(a.object, b, c);
    },
    parseGeometries: function(a) {
        var b = {};
        if (void 0 !== a) for (var c = new THREE.JSONLoader(), d = new THREE.BufferGeometryLoader(), e = 0, f = a.length; f > e; e++) {
            var g, h = a[e];
            switch (h.type) {
              case "PlaneGeometry":
                g = new THREE.PlaneGeometry(h.width, h.height, h.widthSegments, h.heightSegments);
                break;

              case "CircleGeometry":
                g = new THREE.CircleGeometry(h.radius, h.segments);
                break;

              case "CubeGeometry":
                g = new THREE.CubeGeometry(h.width, h.height, h.depth, h.widthSegments, h.heightSegments, h.depthSegments);
                break;

              case "CylinderGeometry":
                g = new THREE.CylinderGeometry(h.radiusTop, h.radiusBottom, h.height, h.radialSegments, h.heightSegments, h.openEnded);
                break;

              case "SphereGeometry":
                g = new THREE.SphereGeometry(h.radius, h.widthSegments, h.heightSegments, h.phiStart, h.phiLength, h.thetaStart, h.thetaLength);
                break;

              case "IcosahedronGeometry":
                g = new THREE.IcosahedronGeometry(h.radius, h.detail);
                break;

              case "TorusGeometry":
                g = new THREE.TorusGeometry(h.radius, h.tube, h.radialSegments, h.tubularSegments, h.arc);
                break;

              case "TorusKnotGeometry":
                g = new THREE.TorusKnotGeometry(h.radius, h.tube, h.radialSegments, h.tubularSegments, h.p, h.q, h.heightScale);
                break;

              case "BufferGeometry":
                g = d.parse(h.data);
                break;

              case "Geometry":
                g = c.parse(h.data).geometry;
            }
            g.uuid = h.uuid, void 0 !== h.name && (g.name = h.name), b[h.uuid] = g;
        }
        return b;
    },
    parseMaterials: function(a) {
        var b = {};
        if (void 0 !== a) for (var c = new THREE.MaterialLoader(), d = 0, e = a.length; e > d; d++) {
            var f = a[d], g = c.parse(f);
            g.uuid = f.uuid, void 0 !== f.name && (g.name = f.name), b[f.uuid] = g;
        }
        return b;
    },
    parseObject: function() {
        var a = new THREE.Matrix4();
        return function(b, c, d) {
            var e;
            switch (b.type) {
              case "Scene":
                e = new THREE.Scene();
                break;

              case "PerspectiveCamera":
                e = new THREE.PerspectiveCamera(b.fov, b.aspect, b.near, b.far);
                break;

              case "OrthographicCamera":
                e = new THREE.OrthographicCamera(b.left, b.right, b.top, b.bottom, b.near, b.far);
                break;

              case "AmbientLight":
                e = new THREE.AmbientLight(b.color);
                break;

              case "DirectionalLight":
                e = new THREE.DirectionalLight(b.color, b.intensity);
                break;

              case "PointLight":
                e = new THREE.PointLight(b.color, b.intensity, b.distance);
                break;

              case "SpotLight":
                e = new THREE.SpotLight(b.color, b.intensity, b.distance, b.angle, b.exponent);
                break;

              case "HemisphereLight":
                e = new THREE.HemisphereLight(b.color, b.groundColor, b.intensity);
                break;

              case "Mesh":
                e = c[b.geometry];
                var f = d[b.material];
                void 0 === e && console.error("THREE.ObjectLoader: Undefined geometry " + b.geometry), 
                void 0 === f && console.error("THREE.ObjectLoader: Undefined material " + b.material), 
                e = new THREE.Mesh(e, f);
                break;

              case "Sprite":
                f = d[b.material], void 0 === f && console.error("THREE.ObjectLoader: Undefined material " + b.material), 
                e = new THREE.Sprite(f);
                break;

              default:
                e = new THREE.Object3D();
            }
            if (e.uuid = b.uuid, void 0 !== b.name && (e.name = b.name), void 0 !== b.matrix ? (a.fromArray(b.matrix), 
            a.decompose(e.position, e.quaternion, e.scale)) : (void 0 !== b.position && e.position.fromArray(b.position), 
            void 0 !== b.rotation && e.rotation.fromArray(b.rotation), void 0 !== b.scale && e.scale.fromArray(b.scale)), 
            void 0 !== b.visible && (e.visible = b.visible), void 0 !== b.userData && (e.userData = b.userData), 
            void 0 !== b.children) for (var g in b.children) e.add(this.parseObject(b.children[g], c, d));
            return e;
        };
    }()
}, THREE.SceneLoader = function() {
    this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {}, 
    this.callbackSync = function() {}, this.callbackProgress = function() {}, this.geometryHandlers = {}, 
    this.hierarchyHandlers = {}, this.addGeometryHandler("ascii", THREE.JSONLoader);
}, THREE.SceneLoader.prototype = {
    constructor: THREE.SceneLoader,
    load: function(a, b) {
        var c = this, d = new THREE.XHRLoader(c.manager);
        d.setCrossOrigin(this.crossOrigin), d.load(a, function(d) {
            c.parse(JSON.parse(d), b, a);
        });
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    },
    addGeometryHandler: function(a, b) {
        this.geometryHandlers[a] = {
            loaderClass: b
        };
    },
    addHierarchyHandler: function(a, b) {
        this.hierarchyHandlers[a] = {
            loaderClass: b
        };
    },
    parse: function(a, b, c) {
        function d(a, b) {
            return "relativeToHTML" == b ? a : y + "/" + a;
        }
        function e() {
            f(v.scene, A.objects);
        }
        function f(a, b) {
            var c, e, g, i, j, k;
            for (k in b) {
                var o = v.objects[k], p = b[k];
                if (void 0 === o) {
                    if (p.type && p.type in x.hierarchyHandlers) {
                        if (void 0 === p.loading) {
                            c = {
                                type: 1,
                                url: 1,
                                material: 1,
                                position: 1,
                                rotation: 1,
                                scale: 1,
                                visible: 1,
                                children: 1,
                                userData: 1,
                                skin: 1,
                                morph: 1,
                                mirroredLoop: 1,
                                duration: 1
                            };
                            var r, s = {};
                            for (r in p) r in c || (s[r] = p[r]);
                            m = v.materials[p.material], p.loading = !0, c = x.hierarchyHandlers[p.type].loaderObject, 
                            c.options ? c.load(d(p.url, A.urlBaseType), h(k, a, m, p)) : c.load(d(p.url, A.urlBaseType), h(k, a, m, p), s);
                        }
                    } else if (void 0 !== p.geometry) {
                        if (l = v.geometries[p.geometry]) {
                            if (o = !1, m = v.materials[p.material], o = m instanceof THREE.ShaderMaterial, 
                            e = p.position, g = p.rotation, i = p.scale, c = p.matrix, j = p.quaternion, p.material || (m = new THREE.MeshFaceMaterial(v.face_materials[p.geometry])), 
                            m instanceof THREE.MeshFaceMaterial && 0 === m.materials.length && (m = new THREE.MeshFaceMaterial(v.face_materials[p.geometry])), 
                            m instanceof THREE.MeshFaceMaterial) for (s = 0; s < m.materials.length; s++) o = o || m.materials[s] instanceof THREE.ShaderMaterial;
                            o && l.computeTangents(), p.skin ? o = new THREE.SkinnedMesh(l, m) : p.morph ? (o = new THREE.MorphAnimMesh(l, m), 
                            void 0 !== p.duration && (o.duration = p.duration), void 0 !== p.time && (o.time = p.time), 
                            void 0 !== p.mirroredLoop && (o.mirroredLoop = p.mirroredLoop), m.morphNormals && l.computeMorphNormals()) : o = new THREE.Mesh(l, m), 
                            o.name = k, c ? (o.matrixAutoUpdate = !1, o.matrix.set(c[0], c[1], c[2], c[3], c[4], c[5], c[6], c[7], c[8], c[9], c[10], c[11], c[12], c[13], c[14], c[15])) : (o.position.fromArray(e), 
                            j ? o.quaternion.fromArray(j) : o.rotation.fromArray(g), o.scale.fromArray(i)), 
                            o.visible = p.visible, o.castShadow = p.castShadow, o.receiveShadow = p.receiveShadow, 
                            a.add(o), v.objects[k] = o;
                        }
                    } else if ("AmbientLight" === p.type || "PointLight" === p.type || "DirectionalLight" === p.type || "SpotLight" === p.type || "HemisphereLight" === p.type || "AreaLight" === p.type) {
                        switch (s = p.color, c = p.intensity, e = p.distance, g = p.position, i = p.rotation, 
                        p.type) {
                          case "AmbientLight":
                            q = new THREE.AmbientLight(s);
                            break;

                          case "PointLight":
                            q = new THREE.PointLight(s, c, e), q.position.fromArray(g);
                            break;

                          case "DirectionalLight":
                            q = new THREE.DirectionalLight(s, c), q.position.fromArray(p.direction);
                            break;

                          case "SpotLight":
                            q = new THREE.SpotLight(s, c, e, 1), q.angle = p.angle, q.position.fromArray(g), 
                            q.target.set(g[0], g[1] - e, g[2]), q.target.applyEuler(new THREE.Euler(i[0], i[1], i[2], "XYZ"));
                            break;

                          case "HemisphereLight":
                            q = new THREE.DirectionalLight(s, c, e), q.target.set(g[0], g[1] - e, g[2]), q.target.applyEuler(new THREE.Euler(i[0], i[1], i[2], "XYZ"));
                            break;

                          case "AreaLight":
                            q = new THREE.AreaLight(s, c), q.position.fromArray(g), q.width = p.size, q.height = p.size_y;
                        }
                        a.add(q), q.name = k, v.lights[k] = q, v.objects[k] = q;
                    } else "PerspectiveCamera" === p.type || "OrthographicCamera" === p.type ? (e = p.position, 
                    g = p.rotation, j = p.quaternion, "PerspectiveCamera" === p.type ? n = new THREE.PerspectiveCamera(p.fov, p.aspect, p.near, p.far) : "OrthographicCamera" === p.type && (n = new THREE.OrthographicCamera(p.left, p.right, p.top, p.bottom, p.near, p.far)), 
                    n.name = k, n.position.fromArray(e), void 0 !== j ? n.quaternion.fromArray(j) : void 0 !== g && n.rotation.fromArray(g), 
                    a.add(n), v.cameras[k] = n, v.objects[k] = n) : (e = p.position, g = p.rotation, 
                    i = p.scale, j = p.quaternion, o = new THREE.Object3D(), o.name = k, o.position.fromArray(e), 
                    j ? o.quaternion.fromArray(j) : o.rotation.fromArray(g), o.scale.fromArray(i), o.visible = void 0 !== p.visible ? p.visible : !1, 
                    a.add(o), v.objects[k] = o, v.empties[k] = o);
                    if (o) {
                        if (void 0 !== p.userData) for (var t in p.userData) o.userData[t] = p.userData[t];
                        if (void 0 !== p.groups) for (s = 0; s < p.groups.length; s++) c = p.groups[s], 
                        void 0 === v.groups[c] && (v.groups[c] = []), v.groups[c].push(k);
                    }
                }
                void 0 !== o && void 0 !== p.children && f(o, p.children);
            }
        }
        function g(a) {
            return function(b, c) {
                b.name = a, v.geometries[a] = b, v.face_materials[a] = c, e(), r -= 1, x.onLoadComplete(), 
                j();
            };
        }
        function h(a, b, c, d) {
            return function(f) {
                var f = f.content ? f.content : f.dae ? f.scene : f, g = d.rotation, h = d.quaternion, i = d.scale;
                f.position.fromArray(d.position), h ? f.quaternion.fromArray(h) : f.rotation.fromArray(g), 
                f.scale.fromArray(i), c && f.traverse(function(a) {
                    a.material = c;
                });
                var k = void 0 !== d.visible ? d.visible : !0;
                f.traverse(function(a) {
                    a.visible = k;
                }), b.add(f), f.name = a, v.objects[a] = f, e(), r -= 1, x.onLoadComplete(), j();
            };
        }
        function i(a) {
            return function(b, c) {
                b.name = a, v.geometries[a] = b, v.face_materials[a] = c;
            };
        }
        function j() {
            if (x.callbackProgress({
                totalModels: t,
                totalTextures: u,
                loadedModels: t - r,
                loadedTextures: u - s
            }, v), x.onLoadProgress(), 0 === r && 0 === s) {
                for (var a = 0; a < z.length; a++) {
                    var c = z[a], d = v.objects[c.targetName];
                    d ? c.object.target = d : (c.object.target = new THREE.Object3D(), v.scene.add(c.object.target)), 
                    c.object.target.userData.targetInverse = c.object;
                }
                b(v);
            }
        }
        function k(a, b) {
            if (b(a), void 0 !== a.children) for (var c in a.children) k(a.children[c], b);
        }
        var l, m, n, o, p, q, r, s, t, u, v, w, x = this, y = THREE.Loader.prototype.extractUrlBase(c), z = [], A = a;
        for (w in this.geometryHandlers) a = this.geometryHandlers[w].loaderClass, this.geometryHandlers[w].loaderObject = new a();
        for (w in this.hierarchyHandlers) a = this.hierarchyHandlers[w].loaderClass, this.hierarchyHandlers[w].loaderObject = new a();
        s = r = 0, v = {
            scene: new THREE.Scene(),
            geometries: {},
            face_materials: {},
            materials: {},
            textures: {},
            objects: {},
            cameras: {},
            lights: {},
            fogs: {},
            empties: {},
            groups: {}
        }, A.transform && (w = A.transform.position, a = A.transform.rotation, c = A.transform.scale, 
        w && v.scene.position.fromArray(w), a && v.scene.rotation.fromArray(a), c && v.scene.scale.fromArray(c), 
        w || a || c) && (v.scene.updateMatrix(), v.scene.updateMatrixWorld()), w = function(a) {
            return function() {
                s -= a, j(), x.onLoadComplete();
            };
        };
        for (var B in A.fogs) a = A.fogs[B], "linear" === a.type ? o = new THREE.Fog(0, a.near, a.far) : "exp2" === a.type && (o = new THREE.FogExp2(0, a.density)), 
        a = a.color, o.color.setRGB(a[0], a[1], a[2]), v.fogs[B] = o;
        for (var C in A.geometries) o = A.geometries[C], o.type in this.geometryHandlers && (r += 1, 
        x.onLoadStart());
        for (var D in A.objects) k(A.objects[D], function(a) {
            a.type && a.type in x.hierarchyHandlers && (r += 1, x.onLoadStart());
        });
        t = r;
        for (C in A.geometries) if (o = A.geometries[C], "cube" === o.type) l = new THREE.CubeGeometry(o.width, o.height, o.depth, o.widthSegments, o.heightSegments, o.depthSegments), 
        l.name = C, v.geometries[C] = l; else if ("plane" === o.type) l = new THREE.PlaneGeometry(o.width, o.height, o.widthSegments, o.heightSegments), 
        l.name = C, v.geometries[C] = l; else if ("sphere" === o.type) l = new THREE.SphereGeometry(o.radius, o.widthSegments, o.heightSegments), 
        l.name = C, v.geometries[C] = l; else if ("cylinder" === o.type) l = new THREE.CylinderGeometry(o.topRad, o.botRad, o.height, o.radSegs, o.heightSegs), 
        l.name = C, v.geometries[C] = l; else if ("torus" === o.type) l = new THREE.TorusGeometry(o.radius, o.tube, o.segmentsR, o.segmentsT), 
        l.name = C, v.geometries[C] = l; else if ("icosahedron" === o.type) l = new THREE.IcosahedronGeometry(o.radius, o.subdivisions), 
        l.name = C, v.geometries[C] = l; else if (o.type in this.geometryHandlers) {
            D = {};
            for (p in o) "type" !== p && "url" !== p && (D[p] = o[p]);
            this.geometryHandlers[o.type].loaderObject.load(d(o.url, A.urlBaseType), g(C), D);
        } else "embedded" === o.type && (D = A.embeds[o.id], D.metadata = A.metadata, D && (D = this.geometryHandlers.ascii.loaderObject.parse(D, ""), 
        i(C)(D.geometry, D.materials)));
        for (var E in A.textures) if (C = A.textures[E], C.url instanceof Array) for (s += C.url.length, 
        p = 0; p < C.url.length; p++) x.onLoadStart(); else s += 1, x.onLoadStart();
        u = s;
        for (E in A.textures) {
            if (C = A.textures[E], void 0 !== C.mapping && void 0 !== THREE[C.mapping] && (C.mapping = new THREE[C.mapping]()), 
            C.url instanceof Array) {
                for (D = C.url.length, o = [], p = 0; D > p; p++) o[p] = d(C.url[p], A.urlBaseType);
                p = (p = /\.dds$/i.test(o[0])) ? THREE.ImageUtils.loadCompressedTextureCube(o, C.mapping, w(D)) : THREE.ImageUtils.loadTextureCube(o, C.mapping, w(D));
            } else p = /\.dds$/i.test(C.url), D = d(C.url, A.urlBaseType), o = w(1), p = p ? THREE.ImageUtils.loadCompressedTexture(D, C.mapping, o) : THREE.ImageUtils.loadTexture(D, C.mapping, o), 
            void 0 !== THREE[C.minFilter] && (p.minFilter = THREE[C.minFilter]), void 0 !== THREE[C.magFilter] && (p.magFilter = THREE[C.magFilter]), 
            C.anisotropy && (p.anisotropy = C.anisotropy), C.repeat && (p.repeat.set(C.repeat[0], C.repeat[1]), 
            1 !== C.repeat[0] && (p.wrapS = THREE.RepeatWrapping), 1 !== C.repeat[1] && (p.wrapT = THREE.RepeatWrapping)), 
            C.offset && p.offset.set(C.offset[0], C.offset[1]), C.wrap && (D = {
                repeat: THREE.RepeatWrapping,
                mirror: THREE.MirroredRepeatWrapping
            }, void 0 !== D[C.wrap[0]] && (p.wrapS = D[C.wrap[0]]), void 0 !== D[C.wrap[1]] && (p.wrapT = D[C.wrap[1]]));
            v.textures[E] = p;
        }
        var F, G;
        for (F in A.materials) {
            E = A.materials[F];
            for (G in E.parameters) "envMap" === G || "map" === G || "lightMap" === G || "bumpMap" === G ? E.parameters[G] = v.textures[E.parameters[G]] : "shading" === G ? E.parameters[G] = "flat" === E.parameters[G] ? THREE.FlatShading : THREE.SmoothShading : "side" === G ? E.parameters[G] = "double" == E.parameters[G] ? THREE.DoubleSide : "back" == E.parameters[G] ? THREE.BackSide : THREE.FrontSide : "blending" === G ? E.parameters[G] = E.parameters[G] in THREE ? THREE[E.parameters[G]] : THREE.NormalBlending : "combine" === G ? E.parameters[G] = E.parameters[G] in THREE ? THREE[E.parameters[G]] : THREE.MultiplyOperation : "vertexColors" === G ? "face" == E.parameters[G] ? E.parameters[G] = THREE.FaceColors : E.parameters[G] && (E.parameters[G] = THREE.VertexColors) : "wrapRGB" === G && (w = E.parameters[G], 
            E.parameters[G] = new THREE.Vector3(w[0], w[1], w[2]));
            void 0 !== E.parameters.opacity && 1 > E.parameters.opacity && (E.parameters.transparent = !0), 
            E.parameters.normalMap ? (w = THREE.ShaderLib.normalmap, C = THREE.UniformsUtils.clone(w.uniforms), 
            p = E.parameters.color, D = E.parameters.specular, o = E.parameters.ambient, B = E.parameters.shininess, 
            C.tNormal.value = v.textures[E.parameters.normalMap], E.parameters.normalScale && C.uNormalScale.value.set(E.parameters.normalScale[0], E.parameters.normalScale[1]), 
            E.parameters.map && (C.tDiffuse.value = E.parameters.map, C.enableDiffuse.value = !0), 
            E.parameters.envMap && (C.tCube.value = E.parameters.envMap, C.enableReflection.value = !0, 
            C.uReflectivity.value = E.parameters.reflectivity), E.parameters.lightMap && (C.tAO.value = E.parameters.lightMap, 
            C.enableAO.value = !0), E.parameters.specularMap && (C.tSpecular.value = v.textures[E.parameters.specularMap], 
            C.enableSpecular.value = !0), E.parameters.displacementMap && (C.tDisplacement.value = v.textures[E.parameters.displacementMap], 
            C.enableDisplacement.value = !0, C.uDisplacementBias.value = E.parameters.displacementBias, 
            C.uDisplacementScale.value = E.parameters.displacementScale), C.uDiffuseColor.value.setHex(p), 
            C.uSpecularColor.value.setHex(D), C.uAmbientColor.value.setHex(o), C.uShininess.value = B, 
            E.parameters.opacity && (C.uOpacity.value = E.parameters.opacity), m = new THREE.ShaderMaterial({
                fragmentShader: w.fragmentShader,
                vertexShader: w.vertexShader,
                uniforms: C,
                lights: !0,
                fog: !0
            })) : m = new THREE[E.type](E.parameters), m.name = F, v.materials[F] = m;
        }
        for (F in A.materials) if (E = A.materials[F], E.parameters.materials) {
            for (G = [], p = 0; p < E.parameters.materials.length; p++) G.push(v.materials[E.parameters.materials[p]]);
            v.materials[F].materials = G;
        }
        e(), v.cameras && A.defaults.camera && (v.currentCamera = v.cameras[A.defaults.camera]), 
        v.fogs && A.defaults.fog && (v.scene.fog = v.fogs[A.defaults.fog]), x.callbackSync(v), 
        j();
    }
}, THREE.TextureLoader = function(a) {
    this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager;
}, THREE.TextureLoader.prototype = {
    constructor: THREE.TextureLoader,
    load: function(a, b) {
        var c = new THREE.ImageLoader(this.manager);
        c.setCrossOrigin(this.crossOrigin), c.load(a, function(a) {
            a = new THREE.Texture(a), a.needsUpdate = !0, void 0 !== b && b(a);
        });
    },
    setCrossOrigin: function(a) {
        this.crossOrigin = a;
    }
}, THREE.Material = function() {
    this.id = THREE.MaterialIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", 
    this.side = THREE.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = THREE.NormalBlending, 
    this.blendSrc = THREE.SrcAlphaFactor, this.blendDst = THREE.OneMinusSrcAlphaFactor, 
    this.blendEquation = THREE.AddEquation, this.depthWrite = this.depthTest = !0, this.polygonOffset = !1, 
    this.overdraw = this.alphaTest = this.polygonOffsetUnits = this.polygonOffsetFactor = 0, 
    this.needsUpdate = this.visible = !0;
}, THREE.Material.prototype = {
    constructor: THREE.Material,
    setValues: function(a) {
        if (void 0 !== a) for (var b in a) {
            var c = a[b];
            if (void 0 === c) console.warn("THREE.Material: '" + b + "' parameter is undefined."); else if (b in this) {
                var d = this[b];
                d instanceof THREE.Color ? d.set(c) : d instanceof THREE.Vector3 && c instanceof THREE.Vector3 ? d.copy(c) : this[b] = "overdraw" == b ? Number(c) : c;
            }
        }
    },
    clone: function(a) {
        return void 0 === a && (a = new THREE.Material()), a.name = this.name, a.side = this.side, 
        a.opacity = this.opacity, a.transparent = this.transparent, a.blending = this.blending, 
        a.blendSrc = this.blendSrc, a.blendDst = this.blendDst, a.blendEquation = this.blendEquation, 
        a.depthTest = this.depthTest, a.depthWrite = this.depthWrite, a.polygonOffset = this.polygonOffset, 
        a.polygonOffsetFactor = this.polygonOffsetFactor, a.polygonOffsetUnits = this.polygonOffsetUnits, 
        a.alphaTest = this.alphaTest, a.overdraw = this.overdraw, a.visible = this.visible, 
        a;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Material.prototype), THREE.MaterialIdCount = 0, 
THREE.LineBasicMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.linewidth = 1, 
    this.linejoin = this.linecap = "round", this.vertexColors = !1, this.fog = !0, this.setValues(a);
}, THREE.LineBasicMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.LineBasicMaterial.prototype.clone = function() {
    var a = new THREE.LineBasicMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.linewidth = this.linewidth, 
    a.linecap = this.linecap, a.linejoin = this.linejoin, a.vertexColors = this.vertexColors, 
    a.fog = this.fog, a;
}, THREE.LineDashedMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.scale = this.linewidth = 1, 
    this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(a);
}, THREE.LineDashedMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.LineDashedMaterial.prototype.clone = function() {
    var a = new THREE.LineDashedMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.linewidth = this.linewidth, 
    a.scale = this.scale, a.dashSize = this.dashSize, a.gapSize = this.gapSize, a.vertexColors = this.vertexColors, 
    a.fog = this.fog, a;
}, THREE.MeshBasicMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.envMap = this.specularMap = this.lightMap = this.map = null, 
    this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, 
    this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, 
    this.wireframeLinejoin = this.wireframeLinecap = "round", this.vertexColors = THREE.NoColors, 
    this.morphTargets = this.skinning = !1, this.setValues(a);
}, THREE.MeshBasicMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshBasicMaterial.prototype.clone = function() {
    var a = new THREE.MeshBasicMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, 
    a.lightMap = this.lightMap, a.specularMap = this.specularMap, a.envMap = this.envMap, 
    a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, 
    a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, 
    a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, 
    a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, 
    a;
}, THREE.MeshLambertMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.ambient = new THREE.Color(16777215), 
    this.emissive = new THREE.Color(0), this.wrapAround = !1, this.wrapRGB = new THREE.Vector3(1, 1, 1), 
    this.envMap = this.specularMap = this.lightMap = this.map = null, this.combine = THREE.MultiplyOperation, 
    this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, 
    this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinejoin = this.wireframeLinecap = "round", 
    this.vertexColors = THREE.NoColors, this.morphNormals = this.morphTargets = this.skinning = !1, 
    this.setValues(a);
}, THREE.MeshLambertMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshLambertMaterial.prototype.clone = function() {
    var a = new THREE.MeshLambertMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.ambient.copy(this.ambient), 
    a.emissive.copy(this.emissive), a.wrapAround = this.wrapAround, a.wrapRGB.copy(this.wrapRGB), 
    a.map = this.map, a.lightMap = this.lightMap, a.specularMap = this.specularMap, 
    a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, 
    a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, 
    a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, 
    a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, 
    a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, 
    a;
}, THREE.MeshPhongMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.ambient = new THREE.Color(16777215), 
    this.emissive = new THREE.Color(0), this.specular = new THREE.Color(1118481), this.shininess = 30, 
    this.metal = !1, this.perPixel = !0, this.wrapAround = !1, this.wrapRGB = new THREE.Vector3(1, 1, 1), 
    this.bumpMap = this.lightMap = this.map = null, this.bumpScale = 1, this.normalMap = null, 
    this.normalScale = new THREE.Vector2(1, 1), this.envMap = this.specularMap = null, 
    this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, 
    this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, 
    this.wireframeLinejoin = this.wireframeLinecap = "round", this.vertexColors = THREE.NoColors, 
    this.morphNormals = this.morphTargets = this.skinning = !1, this.setValues(a);
}, THREE.MeshPhongMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshPhongMaterial.prototype.clone = function() {
    var a = new THREE.MeshPhongMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.ambient.copy(this.ambient), 
    a.emissive.copy(this.emissive), a.specular.copy(this.specular), a.shininess = this.shininess, 
    a.metal = this.metal, a.perPixel = this.perPixel, a.wrapAround = this.wrapAround, 
    a.wrapRGB.copy(this.wrapRGB), a.map = this.map, a.lightMap = this.lightMap, a.bumpMap = this.bumpMap, 
    a.bumpScale = this.bumpScale, a.normalMap = this.normalMap, a.normalScale.copy(this.normalScale), 
    a.specularMap = this.specularMap, a.envMap = this.envMap, a.combine = this.combine, 
    a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, 
    a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, 
    a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, 
    a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, 
    a.morphNormals = this.morphNormals, a;
}, THREE.MeshDepthMaterial = function(a) {
    THREE.Material.call(this), this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(a);
}, THREE.MeshDepthMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshDepthMaterial.prototype.clone = function() {
    var a = new THREE.MeshDepthMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.wireframe = this.wireframe, 
    a.wireframeLinewidth = this.wireframeLinewidth, a;
}, THREE.MeshNormalMaterial = function(a) {
    THREE.Material.call(this, a), this.shading = THREE.FlatShading, this.wireframe = !1, 
    this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(a);
}, THREE.MeshNormalMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.MeshNormalMaterial.prototype.clone = function() {
    var a = new THREE.MeshNormalMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.shading = this.shading, a.wireframe = this.wireframe, 
    a.wireframeLinewidth = this.wireframeLinewidth, a;
}, THREE.MeshFaceMaterial = function(a) {
    this.materials = a instanceof Array ? a : [];
}, THREE.MeshFaceMaterial.prototype.clone = function() {
    for (var a = new THREE.MeshFaceMaterial(), b = 0; b < this.materials.length; b++) a.materials.push(this.materials[b].clone());
    return a;
}, THREE.ParticleSystemMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.map = null, 
    this.size = 1, this.sizeAttenuation = !0, this.vertexColors = !1, this.fog = !0, 
    this.setValues(a);
}, THREE.ParticleSystemMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.ParticleSystemMaterial.prototype.clone = function() {
    var a = new THREE.ParticleSystemMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, 
    a.size = this.size, a.sizeAttenuation = this.sizeAttenuation, a.vertexColors = this.vertexColors, 
    a.fog = this.fog, a;
}, THREE.ParticleBasicMaterial = THREE.ParticleSystemMaterial, THREE.ShaderMaterial = function(a) {
    THREE.Material.call(this), this.vertexShader = this.fragmentShader = "void main() {}", 
    this.uniforms = {}, this.defines = {}, this.attributes = null, this.shading = THREE.SmoothShading, 
    this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.lights = this.fog = !1, 
    this.vertexColors = THREE.NoColors, this.morphNormals = this.morphTargets = this.skinning = !1, 
    this.defaultAttributeValues = {
        color: [ 1, 1, 1 ],
        uv: [ 0, 0 ],
        uv2: [ 0, 0 ]
    }, this.index0AttributeName = "position", this.setValues(a);
}, THREE.ShaderMaterial.prototype = Object.create(THREE.Material.prototype), THREE.ShaderMaterial.prototype.clone = function() {
    var a = new THREE.ShaderMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.fragmentShader = this.fragmentShader, 
    a.vertexShader = this.vertexShader, a.uniforms = THREE.UniformsUtils.clone(this.uniforms), 
    a.attributes = this.attributes, a.defines = this.defines, a.shading = this.shading, 
    a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.fog = this.fog, 
    a.lights = this.lights, a.vertexColors = this.vertexColors, a.skinning = this.skinning, 
    a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a;
}, THREE.SpriteMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.map = null, 
    this.rotation = 0, this.fog = !1, this.uvOffset = new THREE.Vector2(0, 0), this.uvScale = new THREE.Vector2(1, 1), 
    this.setValues(a);
}, THREE.SpriteMaterial.prototype = Object.create(THREE.Material.prototype), THREE.SpriteMaterial.prototype.clone = function() {
    var a = new THREE.SpriteMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, 
    a.rotation = this.rotation, a.uvOffset.copy(this.uvOffset), a.uvScale.copy(this.uvScale), 
    a.fog = this.fog, a;
}, THREE.SpriteCanvasMaterial = function(a) {
    THREE.Material.call(this), this.color = new THREE.Color(16777215), this.program = function() {}, 
    this.setValues(a);
}, THREE.SpriteCanvasMaterial.prototype = Object.create(THREE.Material.prototype), 
THREE.SpriteCanvasMaterial.prototype.clone = function() {
    var a = new THREE.SpriteCanvasMaterial();
    return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.program = this.program, 
    a;
}, THREE.ParticleCanvasMaterial = THREE.SpriteCanvasMaterial, THREE.Texture = function(a, b, c, d, e, f, g, h, i) {
    this.id = THREE.TextureIdCount++, this.uuid = THREE.Math.generateUUID(), this.name = "", 
    this.image = a, this.mipmaps = [], this.mapping = void 0 !== b ? b : new THREE.UVMapping(), 
    this.wrapS = void 0 !== c ? c : THREE.ClampToEdgeWrapping, this.wrapT = void 0 !== d ? d : THREE.ClampToEdgeWrapping, 
    this.magFilter = void 0 !== e ? e : THREE.LinearFilter, this.minFilter = void 0 !== f ? f : THREE.LinearMipMapLinearFilter, 
    this.anisotropy = void 0 !== i ? i : 1, this.format = void 0 !== g ? g : THREE.RGBAFormat, 
    this.type = void 0 !== h ? h : THREE.UnsignedByteType, this.offset = new THREE.Vector2(0, 0), 
    this.repeat = new THREE.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, 
    this.flipY = !0, this.unpackAlignment = 4, this.needsUpdate = !1, this.onUpdate = null;
}, THREE.Texture.prototype = {
    constructor: THREE.Texture,
    clone: function(a) {
        return void 0 === a && (a = new THREE.Texture()), a.image = this.image, a.mipmaps = this.mipmaps.slice(0), 
        a.mapping = this.mapping, a.wrapS = this.wrapS, a.wrapT = this.wrapT, a.magFilter = this.magFilter, 
        a.minFilter = this.minFilter, a.anisotropy = this.anisotropy, a.format = this.format, 
        a.type = this.type, a.offset.copy(this.offset), a.repeat.copy(this.repeat), a.generateMipmaps = this.generateMipmaps, 
        a.premultiplyAlpha = this.premultiplyAlpha, a.flipY = this.flipY, a.unpackAlignment = this.unpackAlignment, 
        a;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype), THREE.TextureIdCount = 0, 
THREE.CompressedTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
    THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
        width: b,
        height: c
    }, this.mipmaps = a, this.generateMipmaps = !1;
}, THREE.CompressedTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CompressedTexture.prototype.clone = function() {
    var a = new THREE.CompressedTexture();
    return THREE.Texture.prototype.clone.call(this, a), a;
}, THREE.DataTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
    THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
        data: a,
        width: b,
        height: c
    };
}, THREE.DataTexture.prototype = Object.create(THREE.Texture.prototype), THREE.DataTexture.prototype.clone = function() {
    var a = new THREE.DataTexture();
    return THREE.Texture.prototype.clone.call(this, a), a;
}, THREE.ParticleSystem = function(a, b) {
    THREE.Object3D.call(this), this.geometry = void 0 !== a ? a : new THREE.Geometry(), 
    this.material = void 0 !== b ? b : new THREE.ParticleSystemMaterial({
        color: 16777215 * Math.random()
    }), this.frustumCulled = this.sortParticles = !1;
}, THREE.ParticleSystem.prototype = Object.create(THREE.Object3D.prototype), THREE.ParticleSystem.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.ParticleSystem(this.geometry, this.material)), 
    a.sortParticles = this.sortParticles, THREE.Object3D.prototype.clone.call(this, a), 
    a;
}, THREE.Line = function(a, b, c) {
    THREE.Object3D.call(this), this.geometry = void 0 !== a ? a : new THREE.Geometry(), 
    this.material = void 0 !== b ? b : new THREE.LineBasicMaterial({
        color: 16777215 * Math.random()
    }), this.type = void 0 !== c ? c : THREE.LineStrip;
}, THREE.LineStrip = 0, THREE.LinePieces = 1, THREE.Line.prototype = Object.create(THREE.Object3D.prototype), 
THREE.Line.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.Line(this.geometry, this.material, this.type)), 
    THREE.Object3D.prototype.clone.call(this, a), a;
}, THREE.Mesh = function(a, b) {
    THREE.Object3D.call(this), this.geometry = void 0 !== a ? a : new THREE.Geometry(), 
    this.material = void 0 !== b ? b : new THREE.MeshBasicMaterial({
        color: 16777215 * Math.random()
    }), this.updateMorphTargets();
}, THREE.Mesh.prototype = Object.create(THREE.Object3D.prototype), THREE.Mesh.prototype.updateMorphTargets = function() {
    if (0 < this.geometry.morphTargets.length) {
        this.morphTargetBase = -1, this.morphTargetForcedOrder = [], this.morphTargetInfluences = [], 
        this.morphTargetDictionary = {};
        for (var a = 0, b = this.geometry.morphTargets.length; b > a; a++) this.morphTargetInfluences.push(0), 
        this.morphTargetDictionary[this.geometry.morphTargets[a].name] = a;
    }
}, THREE.Mesh.prototype.getMorphTargetIndexByName = function(a) {
    return void 0 !== this.morphTargetDictionary[a] ? this.morphTargetDictionary[a] : (console.log("THREE.Mesh.getMorphTargetIndexByName: morph target " + a + " does not exist. Returning 0."), 
    0);
}, THREE.Mesh.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.Mesh(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, a), 
    a;
}, THREE.Bone = function(a) {
    THREE.Object3D.call(this), this.skin = a, this.skinMatrix = new THREE.Matrix4();
}, THREE.Bone.prototype = Object.create(THREE.Object3D.prototype), THREE.Bone.prototype.update = function(a, b) {
    this.matrixAutoUpdate && (b |= this.updateMatrix()), (b || this.matrixWorldNeedsUpdate) && (a ? this.skinMatrix.multiplyMatrices(a, this.matrix) : this.skinMatrix.copy(this.matrix), 
    this.matrixWorldNeedsUpdate = !1, b = !0);
    var c, d = this.children.length;
    for (c = 0; d > c; c++) this.children[c].update(this.skinMatrix, b);
}, THREE.SkinnedMesh = function(a, b, c) {
    THREE.Mesh.call(this, a, b), this.useVertexTexture = void 0 !== c ? c : !0, this.identityMatrix = new THREE.Matrix4(), 
    this.bones = [], this.boneMatrices = [];
    var d, e, f;
    if (this.geometry && void 0 !== this.geometry.bones) {
        for (a = 0; a < this.geometry.bones.length; a++) c = this.geometry.bones[a], d = c.pos, 
        e = c.rotq, f = c.scl, b = this.addBone(), b.name = c.name, b.position.set(d[0], d[1], d[2]), 
        b.quaternion.set(e[0], e[1], e[2], e[3]), void 0 !== f ? b.scale.set(f[0], f[1], f[2]) : b.scale.set(1, 1, 1);
        for (a = 0; a < this.bones.length; a++) c = this.geometry.bones[a], b = this.bones[a], 
        -1 === c.parent ? this.add(b) : this.bones[c.parent].add(b);
        a = this.bones.length, this.useVertexTexture ? (this.boneTextureHeight = this.boneTextureWidth = a = a > 256 ? 64 : a > 64 ? 32 : a > 16 ? 16 : 8, 
        this.boneMatrices = new Float32Array(4 * this.boneTextureWidth * this.boneTextureHeight), 
        this.boneTexture = new THREE.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType), 
        this.boneTexture.minFilter = THREE.NearestFilter, this.boneTexture.magFilter = THREE.NearestFilter, 
        this.boneTexture.generateMipmaps = !1, this.boneTexture.flipY = !1) : this.boneMatrices = new Float32Array(16 * a), 
        this.pose();
    }
}, THREE.SkinnedMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.SkinnedMesh.prototype.addBone = function(a) {
    return void 0 === a && (a = new THREE.Bone(this)), this.bones.push(a), a;
}, THREE.SkinnedMesh.prototype.updateMatrixWorld = function() {
    var a = new THREE.Matrix4();
    return function(b) {
        this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || b) && (this.parent ? this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix) : this.matrixWorld.copy(this.matrix), 
        this.matrixWorldNeedsUpdate = !1);
        for (var b = 0, c = this.children.length; c > b; b++) {
            var d = this.children[b];
            d instanceof THREE.Bone ? d.update(this.identityMatrix, !1) : d.updateMatrixWorld(!0);
        }
        if (void 0 == this.boneInverses) for (this.boneInverses = [], b = 0, c = this.bones.length; c > b; b++) d = new THREE.Matrix4(), 
        d.getInverse(this.bones[b].skinMatrix), this.boneInverses.push(d);
        for (b = 0, c = this.bones.length; c > b; b++) a.multiplyMatrices(this.bones[b].skinMatrix, this.boneInverses[b]), 
        a.flattenToArrayOffset(this.boneMatrices, 16 * b);
        this.useVertexTexture && (this.boneTexture.needsUpdate = !0);
    };
}(), THREE.SkinnedMesh.prototype.pose = function() {
    this.updateMatrixWorld(!0), this.normalizeSkinWeights();
}, THREE.SkinnedMesh.prototype.normalizeSkinWeights = function() {
    if (this.geometry instanceof THREE.Geometry) for (var a = 0; a < this.geometry.skinIndices.length; a++) {
        var b = this.geometry.skinWeights[a], c = 1 / b.lengthManhattan();
        1/0 !== c ? b.multiplyScalar(c) : b.set(1);
    }
}, THREE.SkinnedMesh.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.SkinnedMesh(this.geometry, this.material, this.useVertexTexture)), 
    THREE.Mesh.prototype.clone.call(this, a), a;
}, THREE.MorphAnimMesh = function(a, b) {
    THREE.Mesh.call(this, a, b), this.duration = 1e3, this.mirroredLoop = !1, this.currentKeyframe = this.lastKeyframe = this.time = 0, 
    this.direction = 1, this.directionBackwards = !1, this.setFrameRange(0, this.geometry.morphTargets.length - 1);
}, THREE.MorphAnimMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphAnimMesh.prototype.setFrameRange = function(a, b) {
    this.startKeyframe = a, this.endKeyframe = b, this.length = this.endKeyframe - this.startKeyframe + 1;
}, THREE.MorphAnimMesh.prototype.setDirectionForward = function() {
    this.direction = 1, this.directionBackwards = !1;
}, THREE.MorphAnimMesh.prototype.setDirectionBackward = function() {
    this.direction = -1, this.directionBackwards = !0;
}, THREE.MorphAnimMesh.prototype.parseAnimations = function() {
    var a = this.geometry;
    a.animations || (a.animations = {});
    for (var b, c = a.animations, d = /([a-z]+)(\d+)/, e = 0, f = a.morphTargets.length; f > e; e++) {
        var g = a.morphTargets[e].name.match(d);
        if (g && 1 < g.length) {
            g = g[1], c[g] || (c[g] = {
                start: 1/0,
                end: -1/0
            });
            var h = c[g];
            e < h.start && (h.start = e), e > h.end && (h.end = e), b || (b = g);
        }
    }
    a.firstAnimation = b;
}, THREE.MorphAnimMesh.prototype.setAnimationLabel = function(a, b, c) {
    this.geometry.animations || (this.geometry.animations = {}), this.geometry.animations[a] = {
        start: b,
        end: c
    };
}, THREE.MorphAnimMesh.prototype.playAnimation = function(a, b) {
    var c = this.geometry.animations[a];
    c ? (this.setFrameRange(c.start, c.end), this.duration = 1e3 * ((c.end - c.start) / b), 
    this.time = 0) : console.warn("animation[" + a + "] undefined");
}, THREE.MorphAnimMesh.prototype.updateAnimation = function(a) {
    var b = this.duration / this.length;
    this.time += this.direction * a, this.mirroredLoop ? (this.time > this.duration || 0 > this.time) && (this.direction *= -1, 
    this.time > this.duration && (this.time = this.duration, this.directionBackwards = !0), 
    0 > this.time && (this.time = 0, this.directionBackwards = !1)) : (this.time %= this.duration, 
    0 > this.time && (this.time += this.duration)), a = this.startKeyframe + THREE.Math.clamp(Math.floor(this.time / b), 0, this.length - 1), 
    a !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0, 
    this.morphTargetInfluences[this.currentKeyframe] = 1, this.morphTargetInfluences[a] = 0, 
    this.lastKeyframe = this.currentKeyframe, this.currentKeyframe = a), b = this.time % b / b, 
    this.directionBackwards && (b = 1 - b), this.morphTargetInfluences[this.currentKeyframe] = b, 
    this.morphTargetInfluences[this.lastKeyframe] = 1 - b;
}, THREE.MorphAnimMesh.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.MorphAnimMesh(this.geometry, this.material)), 
    a.duration = this.duration, a.mirroredLoop = this.mirroredLoop, a.time = this.time, 
    a.lastKeyframe = this.lastKeyframe, a.currentKeyframe = this.currentKeyframe, a.direction = this.direction, 
    a.directionBackwards = this.directionBackwards, THREE.Mesh.prototype.clone.call(this, a), 
    a;
}, THREE.LOD = function() {
    THREE.Object3D.call(this), this.objects = [];
}, THREE.LOD.prototype = Object.create(THREE.Object3D.prototype), THREE.LOD.prototype.addLevel = function(a, b) {
    void 0 === b && (b = 0);
    for (var b = Math.abs(b), c = 0; c < this.objects.length && !(b < this.objects[c].distance); c++) ;
    this.objects.splice(c, 0, {
        distance: b,
        object: a
    }), this.add(a);
}, THREE.LOD.prototype.getObjectForDistance = function(a) {
    for (var b = 1, c = this.objects.length; c > b && !(a < this.objects[b].distance); b++) ;
    return this.objects[b - 1].object;
}, THREE.LOD.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3();
    return function(c) {
        if (1 < this.objects.length) {
            a.setFromMatrixPosition(c.matrixWorld), b.setFromMatrixPosition(this.matrixWorld), 
            c = a.distanceTo(b), this.objects[0].object.visible = !0;
            for (var d = 1, e = this.objects.length; e > d && c >= this.objects[d].distance; d++) this.objects[d - 1].object.visible = !1, 
            this.objects[d].object.visible = !0;
            for (;e > d; d++) this.objects[d].object.visible = !1;
        }
    };
}(), THREE.LOD.prototype.clone = function() {}, THREE.Sprite = function(a) {
    THREE.Object3D.call(this), this.material = void 0 !== a ? a : new THREE.SpriteMaterial();
}, THREE.Sprite.prototype = Object.create(THREE.Object3D.prototype), THREE.Sprite.prototype.updateMatrix = function() {
    this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0;
}, THREE.Sprite.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.Sprite(this.material)), THREE.Object3D.prototype.clone.call(this, a), 
    a;
}, THREE.Particle = THREE.Sprite, THREE.Scene = function() {
    THREE.Object3D.call(this), this.overrideMaterial = this.fog = null, this.autoUpdate = !0, 
    this.matrixAutoUpdate = !1, this.__lights = [], this.__objectsAdded = [], this.__objectsRemoved = [];
}, THREE.Scene.prototype = Object.create(THREE.Object3D.prototype), THREE.Scene.prototype.__addObject = function(a) {
    if (a instanceof THREE.Light) -1 === this.__lights.indexOf(a) && this.__lights.push(a), 
    a.target && void 0 === a.target.parent && this.add(a.target); else if (!(a instanceof THREE.Camera || a instanceof THREE.Bone)) {
        this.__objectsAdded.push(a);
        var b = this.__objectsRemoved.indexOf(a);
        -1 !== b && this.__objectsRemoved.splice(b, 1);
    }
    for (b = 0; b < a.children.length; b++) this.__addObject(a.children[b]);
}, THREE.Scene.prototype.__removeObject = function(a) {
    if (a instanceof THREE.Light) {
        var b = this.__lights.indexOf(a);
        if (-1 !== b && this.__lights.splice(b, 1), a.shadowCascadeArray) for (b = 0; b < a.shadowCascadeArray.length; b++) this.__removeObject(a.shadowCascadeArray[b]);
    } else a instanceof THREE.Camera || (this.__objectsRemoved.push(a), b = this.__objectsAdded.indexOf(a), 
    -1 !== b && this.__objectsAdded.splice(b, 1));
    for (b = 0; b < a.children.length; b++) this.__removeObject(a.children[b]);
}, THREE.Scene.prototype.clone = function(a) {
    return void 0 === a && (a = new THREE.Scene()), THREE.Object3D.prototype.clone.call(this, a), 
    null !== this.fog && (a.fog = this.fog.clone()), null !== this.overrideMaterial && (a.overrideMaterial = this.overrideMaterial.clone()), 
    a.autoUpdate = this.autoUpdate, a.matrixAutoUpdate = this.matrixAutoUpdate, a;
}, THREE.Fog = function(a, b, c) {
    this.name = "", this.color = new THREE.Color(a), this.near = void 0 !== b ? b : 1, 
    this.far = void 0 !== c ? c : 1e3;
}, THREE.Fog.prototype.clone = function() {
    return new THREE.Fog(this.color.getHex(), this.near, this.far);
}, THREE.FogExp2 = function(a, b) {
    this.name = "", this.color = new THREE.Color(a), this.density = void 0 !== b ? b : 25e-5;
}, THREE.FogExp2.prototype.clone = function() {
    return new THREE.FogExp2(this.color.getHex(), this.density);
}, THREE.CanvasRenderer = function(a) {
    function b(a, b, c) {
        for (var d = 0, e = s.length; e > d; d++) {
            var f = s[d];
            if (sb.copy(f.color), f instanceof THREE.DirectionalLight) {
                var g = Bb.setFromMatrixPosition(f.matrixWorld).normalize(), h = b.dot(g);
                0 >= h || (h *= f.intensity, c.add(sb.multiplyScalar(h)));
            } else f instanceof THREE.PointLight && (g = Bb.setFromMatrixPosition(f.matrixWorld), 
            h = b.dot(Bb.subVectors(g, a).normalize()), 0 >= h || (h *= 0 == f.distance ? 1 : 1 - Math.min(a.distanceTo(g) / f.distance, 1), 
            0 != h && (h *= f.intensity, c.add(sb.multiplyScalar(h)))));
        }
    }
    function c(a, b, c, d) {
        k(b), l(c), m(d), n(a.getStyle()), F.stroke(), xb.expandByScalar(2 * b);
    }
    function d(a) {
        o(a.getStyle()), F.fill();
    }
    function e(a, b, c, e, f, g, h, i, j, k, l, m, n) {
        if (!(n instanceof THREE.DataTexture || void 0 === n.image || 0 === n.image.width)) {
            if (!0 === n.needsUpdate) {
                var p = n.wrapS === THREE.RepeatWrapping, q = n.wrapT === THREE.RepeatWrapping;
                tb[n.id] = F.createPattern(n.image, !0 === p && !0 === q ? "repeat" : !0 === p && !1 === q ? "repeat-x" : !1 === p && !0 === q ? "repeat-y" : "no-repeat"), 
                n.needsUpdate = !1;
            }
            void 0 === tb[n.id] ? o("rgba(0,0,0,1)") : o(tb[n.id]);
            var p = n.offset.x / n.repeat.x, q = n.offset.y / n.repeat.y, r = n.image.width * n.repeat.x, s = n.image.height * n.repeat.y, h = (h + p) * r, i = (1 - i + q) * s, c = c - a, e = e - b, f = f - a, g = g - b, j = (j + p) * r - h, k = (1 - k + q) * s - i, l = (l + p) * r - h, m = (1 - m + q) * s - i, p = j * m - l * k;
            0 === p ? (void 0 === ub[n.id] && (b = document.createElement("canvas"), b.width = n.image.width, 
            b.height = n.image.height, b = b.getContext("2d"), b.drawImage(n.image, 0, 0), ub[n.id] = b.getImageData(0, 0, n.image.width, n.image.height).data), 
            b = ub[n.id], h = 4 * (Math.floor(h) + Math.floor(i) * n.image.width), lb.setRGB(b[h] / 255, b[h + 1] / 255, b[h + 2] / 255), 
            d(lb)) : (p = 1 / p, n = (m * c - k * f) * p, k = (m * e - k * g) * p, c = (j * f - l * c) * p, 
            e = (j * g - l * e) * p, a = a - n * h - c * i, h = b - k * h - e * i, F.save(), 
            F.transform(n, k, c, e, a, h), F.fill(), F.restore());
        }
    }
    function f(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        var n, o;
        n = m.width - 1, o = m.height - 1, g *= n, h *= o, c -= a, d -= b, e -= a, f -= b, 
        i = i * n - g, j = j * o - h, k = k * n - g, l = l * o - h, o = 1 / (i * l - k * j), 
        n = (l * c - j * e) * o, j = (l * d - j * f) * o, c = (i * e - k * c) * o, d = (i * f - k * d) * o, 
        a = a - n * g - c * h, b = b - j * g - d * h, F.save(), F.transform(n, j, c, d, a, b), 
        F.clip(), F.drawImage(m, 0, 0), F.restore();
    }
    function g(a, b, c, d) {
        return ib[0] = 255 * a.r | 0, ib[1] = 255 * a.g | 0, ib[2] = 255 * a.b | 0, ib[4] = 255 * b.r | 0, 
        ib[5] = 255 * b.g | 0, ib[6] = 255 * b.b | 0, ib[8] = 255 * c.r | 0, ib[9] = 255 * c.g | 0, 
        ib[10] = 255 * c.b | 0, ib[12] = 255 * d.r | 0, ib[13] = 255 * d.g | 0, ib[14] = 255 * d.b | 0, 
        gb.putImageData(hb, 0, 0), kb.drawImage(fb, 0, 0), jb;
    }
    function h(a, b, c) {
        var d = b.x - a.x, e = b.y - a.y, f = d * d + e * e;
        0 !== f && (c /= Math.sqrt(f), d *= c, e *= c, b.x += d, b.y += e, a.x -= d, a.y -= e);
    }
    function i(a) {
        I !== a && (I = F.globalAlpha = a);
    }
    function j(a) {
        J !== a && (a === THREE.NormalBlending ? F.globalCompositeOperation = "source-over" : a === THREE.AdditiveBlending ? F.globalCompositeOperation = "lighter" : a === THREE.SubtractiveBlending && (F.globalCompositeOperation = "darker"), 
        J = a);
    }
    function k(a) {
        M !== a && (M = F.lineWidth = a);
    }
    function l(a) {
        N !== a && (N = F.lineCap = a);
    }
    function m(a) {
        O !== a && (O = F.lineJoin = a);
    }
    function n(a) {
        K !== a && (K = F.strokeStyle = a);
    }
    function o(a) {
        L !== a && (L = F.fillStyle = a);
    }
    function p(a, b) {
        (P !== a || Q !== b) && (F.setLineDash([ a, b ]), P = a, Q = b);
    }
    console.log("THREE.CanvasRenderer", THREE.REVISION);
    var q, r, s, t, u, v, w, x = THREE.Math.smoothstep, a = a || {}, y = this, z = new THREE.Projector(), A = void 0 !== a.canvas ? a.canvas : document.createElement("canvas"), B = A.width, C = A.height, D = Math.floor(B / 2), E = Math.floor(C / 2), F = A.getContext("2d"), G = new THREE.Color(0), H = 0, I = 1, J = 0, K = null, L = null, M = null, N = null, O = null, P = null, Q = 0;
    new THREE.RenderableVertex(), new THREE.RenderableVertex();
    var R, S, T, U, V, W, X, Y, Z, $, _, ab, bb, cb, db, eb, fb, gb, hb, ib, jb, kb, lb = new THREE.Color(), mb = new THREE.Color(), nb = new THREE.Color(), ob = new THREE.Color(), pb = new THREE.Color(), qb = new THREE.Color(), rb = new THREE.Color(), sb = new THREE.Color(), tb = {}, ub = {}, vb = new THREE.Box2(), wb = new THREE.Box2(), xb = new THREE.Box2(), yb = new THREE.Color(), zb = new THREE.Color(), Ab = new THREE.Color(), Bb = new THREE.Vector3(), Cb = 16;
    fb = document.createElement("canvas"), fb.width = fb.height = 2, gb = fb.getContext("2d"), 
    gb.fillStyle = "rgba(0,0,0,1)", gb.fillRect(0, 0, 2, 2), hb = gb.getImageData(0, 0, 2, 2), 
    ib = hb.data, jb = document.createElement("canvas"), jb.width = jb.height = Cb, 
    kb = jb.getContext("2d"), kb.translate(-Cb / 2, -Cb / 2), kb.scale(Cb, Cb), Cb--, 
    void 0 === F.setLineDash && (F.setLineDash = void 0 !== F.mozDash ? function(a) {
        F.mozDash = null !== a[0] ? a : null;
    } : function() {}), this.domElement = A, this.devicePixelRatio = void 0 !== a.devicePixelRatio ? a.devicePixelRatio : void 0 !== self.devicePixelRatio ? self.devicePixelRatio : 1, 
    this.sortElements = this.sortObjects = this.autoClear = !0, this.info = {
        render: {
            vertices: 0,
            faces: 0
        }
    }, this.supportsVertexTextures = function() {}, this.setFaceCulling = function() {}, 
    this.setSize = function(a, b, c) {
        B = a * this.devicePixelRatio, C = b * this.devicePixelRatio, D = Math.floor(B / 2), 
        E = Math.floor(C / 2), A.width = B, A.height = C, 1 !== this.devicePixelRatio && !1 !== c && (A.style.width = a + "px", 
        A.style.height = b + "px"), vb.set(new THREE.Vector2(-D, -E), new THREE.Vector2(D, E)), 
        wb.set(new THREE.Vector2(-D, -E), new THREE.Vector2(D, E)), I = 1, J = 0, O = N = M = L = K = null;
    }, this.setClearColor = function(a, b) {
        G.set(a), H = void 0 !== b ? b : 1, wb.set(new THREE.Vector2(-D, -E), new THREE.Vector2(D, E));
    }, this.setClearColorHex = function(a, b) {
        console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."), 
        this.setClearColor(a, b);
    }, this.getMaxAnisotropy = function() {
        return 0;
    }, this.clear = function() {
        F.setTransform(1, 0, 0, -1, D, E), !1 === wb.empty() && (wb.intersect(vb), wb.expandByScalar(2), 
        1 > H && F.clearRect(0 | wb.min.x, 0 | wb.min.y, wb.max.x - wb.min.x | 0, wb.max.y - wb.min.y | 0), 
        H > 0 && (j(THREE.NormalBlending), i(1), o("rgba(" + Math.floor(255 * G.r) + "," + Math.floor(255 * G.g) + "," + Math.floor(255 * G.b) + "," + H + ")"), 
        F.fillRect(0 | wb.min.x, 0 | wb.min.y, wb.max.x - wb.min.x | 0, wb.max.y - wb.min.y | 0)), 
        wb.makeEmpty());
    }, this.clearColor = function() {}, this.clearDepth = function() {}, this.clearStencil = function() {}, 
    this.render = function(a, A) {
        if (!1 == A instanceof THREE.Camera) console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera."); else {
            !0 === this.autoClear && this.clear(), F.setTransform(1, 0, 0, -1, D, E), y.info.render.vertices = 0, 
            y.info.render.faces = 0, q = z.projectScene(a, A, this.sortObjects, this.sortElements), 
            r = q.elements, s = q.lights, t = A, yb.setRGB(0, 0, 0), zb.setRGB(0, 0, 0), Ab.setRGB(0, 0, 0);
            for (var B = 0, C = s.length; C > B; B++) {
                var G = s[B], H = G.color;
                G instanceof THREE.AmbientLight ? yb.add(H) : G instanceof THREE.DirectionalLight ? zb.add(H) : G instanceof THREE.PointLight && Ab.add(H);
            }
            for (B = 0, C = r.length; C > B; B++) {
                var I = r[B], J = I.material;
                if (void 0 !== J && !1 !== J.visible) {
                    if (xb.makeEmpty(), I instanceof THREE.RenderableSprite) {
                        u = I, u.x *= D, u.y *= E;
                        var G = u, H = I, K = J;
                        i(K.opacity), j(K.blending);
                        var I = H.scale.x * D, J = H.scale.y * E, L = .5 * Math.sqrt(I * I + J * J);
                        xb.min.set(G.x - L, G.y - L), xb.max.set(G.x + L, G.y + L), !1 === vb.isIntersectionBox(xb) ? xb.makeEmpty() : K instanceof THREE.SpriteMaterial || K instanceof THREE.ParticleSystemMaterial ? (null !== K.map ? (H = K.map.image, 
                        F.save(), F.translate(G.x, G.y), F.rotate(K.rotation), F.scale(I, -J), F.drawImage(H, 0, 0, H.width, H.height, -.5, -.5, 1, 1)) : (o(K.color.getStyle()), 
                        F.save(), F.translate(G.x, G.y), F.rotate(K.rotation), F.scale(I, -J), F.fillRect(-.5, -.5, 1, 1)), 
                        F.restore()) : K instanceof THREE.SpriteCanvasMaterial && (n(K.color.getStyle()), 
                        o(K.color.getStyle()), F.save(), F.translate(G.x, G.y), F.rotate(-H.rotation), F.scale(I, J), 
                        K.program(F), F.restore());
                    } else if (I instanceof THREE.RenderableLine) {
                        if (u = I.v1, v = I.v2, u.positionScreen.x *= D, u.positionScreen.y *= E, v.positionScreen.x *= D, 
                        v.positionScreen.y *= E, xb.setFromPoints([ u.positionScreen, v.positionScreen ]), 
                        !0 === vb.isIntersectionBox(xb)) if (G = u, H = v, K = I, I = J, i(I.opacity), j(I.blending), 
                        F.beginPath(), F.moveTo(G.positionScreen.x, G.positionScreen.y), F.lineTo(H.positionScreen.x, H.positionScreen.y), 
                        I instanceof THREE.LineBasicMaterial) {
                            if (k(I.linewidth), l(I.linecap), m(I.linejoin), I.vertexColors !== THREE.VertexColors) n(I.color.getStyle()); else if (J = K.vertexColors[0].getStyle(), 
                            K = K.vertexColors[1].getStyle(), J === K) n(J); else {
                                try {
                                    var M = F.createLinearGradient(G.positionScreen.x, G.positionScreen.y, H.positionScreen.x, H.positionScreen.y);
                                    M.addColorStop(0, J), M.addColorStop(1, K);
                                } catch (N) {
                                    M = J;
                                }
                                n(M);
                            }
                            F.stroke(), xb.expandByScalar(2 * I.linewidth);
                        } else I instanceof THREE.LineDashedMaterial && (k(I.linewidth), l(I.linecap), m(I.linejoin), 
                        n(I.color.getStyle()), p(I.dashSize, I.gapSize), F.stroke(), xb.expandByScalar(2 * I.linewidth), 
                        p(null, null));
                    } else if (I instanceof THREE.RenderableFace3) {
                        if (u = I.v1, v = I.v2, w = I.v3, -1 > u.positionScreen.z || 1 < u.positionScreen.z) continue;
                        if (-1 > v.positionScreen.z || 1 < v.positionScreen.z) continue;
                        if (-1 > w.positionScreen.z || 1 < w.positionScreen.z) continue;
                        if (u.positionScreen.x *= D, u.positionScreen.y *= E, v.positionScreen.x *= D, v.positionScreen.y *= E, 
                        w.positionScreen.x *= D, w.positionScreen.y *= E, 0 < J.overdraw && (h(u.positionScreen, v.positionScreen, J.overdraw), 
                        h(v.positionScreen, w.positionScreen, J.overdraw), h(w.positionScreen, u.positionScreen, J.overdraw)), 
                        xb.setFromPoints([ u.positionScreen, v.positionScreen, w.positionScreen ]), !0 === vb.isIntersectionBox(xb)) {
                            G = u, H = v, K = w, y.info.render.vertices += 3, y.info.render.faces++, i(J.opacity), 
                            j(J.blending), R = G.positionScreen.x, S = G.positionScreen.y, T = H.positionScreen.x, 
                            U = H.positionScreen.y, V = K.positionScreen.x, W = K.positionScreen.y;
                            var L = R, O = S, P = T, Q = U, fb = V, gb = W;
                            F.beginPath(), F.moveTo(L, O), F.lineTo(P, Q), F.lineTo(fb, gb), F.closePath(), 
                            (J instanceof THREE.MeshLambertMaterial || J instanceof THREE.MeshPhongMaterial) && null === J.map ? (qb.copy(J.color), 
                            rb.copy(J.emissive), J.vertexColors === THREE.FaceColors && qb.multiply(I.color), 
                            !1 === J.wireframe && J.shading === THREE.SmoothShading && 3 === I.vertexNormalsLength ? (mb.copy(yb), 
                            nb.copy(yb), ob.copy(yb), b(I.v1.positionWorld, I.vertexNormalsModel[0], mb), b(I.v2.positionWorld, I.vertexNormalsModel[1], nb), 
                            b(I.v3.positionWorld, I.vertexNormalsModel[2], ob), mb.multiply(qb).add(rb), nb.multiply(qb).add(rb), 
                            ob.multiply(qb).add(rb), pb.addColors(nb, ob).multiplyScalar(.5), Z = g(mb, nb, ob, pb), 
                            f(R, S, T, U, V, W, 0, 0, 1, 0, 0, 1, Z)) : (lb.copy(yb), b(I.centroidModel, I.normalModel, lb), 
                            lb.multiply(qb).add(rb), !0 === J.wireframe ? c(lb, J.wireframeLinewidth, J.wireframeLinecap, J.wireframeLinejoin) : d(lb))) : J instanceof THREE.MeshBasicMaterial || J instanceof THREE.MeshLambertMaterial || J instanceof THREE.MeshPhongMaterial ? null !== J.map ? J.map.mapping instanceof THREE.UVMapping && ($ = I.uvs[0], 
                            e(R, S, T, U, V, W, $[0].x, $[0].y, $[1].x, $[1].y, $[2].x, $[2].y, J.map)) : null !== J.envMap ? J.envMap.mapping instanceof THREE.SphericalReflectionMapping && (Bb.copy(I.vertexNormalsModelView[0]), 
                            _ = .5 * Bb.x + .5, ab = .5 * Bb.y + .5, Bb.copy(I.vertexNormalsModelView[1]), bb = .5 * Bb.x + .5, 
                            cb = .5 * Bb.y + .5, Bb.copy(I.vertexNormalsModelView[2]), db = .5 * Bb.x + .5, 
                            eb = .5 * Bb.y + .5, e(R, S, T, U, V, W, _, ab, bb, cb, db, eb, J.envMap)) : (lb.copy(J.color), 
                            J.vertexColors === THREE.FaceColors && lb.multiply(I.color), !0 === J.wireframe ? c(lb, J.wireframeLinewidth, J.wireframeLinecap, J.wireframeLinejoin) : d(lb)) : J instanceof THREE.MeshDepthMaterial ? (X = t.near, 
                            Y = t.far, mb.r = mb.g = mb.b = 1 - x(G.positionScreen.z * G.positionScreen.w, X, Y), 
                            nb.r = nb.g = nb.b = 1 - x(H.positionScreen.z * H.positionScreen.w, X, Y), ob.r = ob.g = ob.b = 1 - x(K.positionScreen.z * K.positionScreen.w, X, Y), 
                            pb.addColors(nb, ob).multiplyScalar(.5), Z = g(mb, nb, ob, pb), f(R, S, T, U, V, W, 0, 0, 1, 0, 0, 1, Z)) : J instanceof THREE.MeshNormalMaterial && (G = void 0, 
                            J.shading === THREE.FlatShading ? (G = I.normalModelView, lb.setRGB(G.x, G.y, G.z).multiplyScalar(.5).addScalar(.5), 
                            !0 === J.wireframe ? c(lb, J.wireframeLinewidth, J.wireframeLinecap, J.wireframeLinejoin) : d(lb)) : J.shading === THREE.SmoothShading && (G = I.vertexNormalsModelView[0], 
                            mb.setRGB(G.x, G.y, G.z).multiplyScalar(.5).addScalar(.5), G = I.vertexNormalsModelView[1], 
                            nb.setRGB(G.x, G.y, G.z).multiplyScalar(.5).addScalar(.5), G = I.vertexNormalsModelView[2], 
                            ob.setRGB(G.x, G.y, G.z).multiplyScalar(.5).addScalar(.5), pb.addColors(nb, ob).multiplyScalar(.5), 
                            Z = g(mb, nb, ob, pb), f(R, S, T, U, V, W, 0, 0, 1, 0, 0, 1, Z)));
                        }
                    }
                    wb.union(xb);
                }
            }
            F.setTransform(1, 0, 0, 1, 0, 0);
        }
    };
}, THREE.ShaderChunk = {
    fog_pars_fragment: "#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",
    fog_fragment: "#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",
    envmap_pars_fragment: "#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",
    envmap_fragment: "#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
    envmap_pars_vertex: "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",
    worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
    envmap_vertex: "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",
    map_particle_pars_fragment: "#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
    map_particle_fragment: "#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",
    map_pars_vertex: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",
    map_pars_fragment: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
    map_vertex: "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",
    map_fragment: "#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",
    lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",
    lightmap_pars_vertex: "#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",
    lightmap_fragment: "#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",
    lightmap_vertex: "#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",
    bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
    normalmap_pars_fragment: "#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
    specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",
    specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",
    lights_lambert_pars_vertex: "uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
    lights_lambert_vertex: "vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
    lights_phong_pars_vertex: "#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",
    lights_phong_vertex: "#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
    lights_phong_pars_fragment: "uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
    lights_phong_fragment: "vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
    color_pars_fragment: "#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",
    color_fragment: "#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif",
    color_pars_vertex: "#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",
    color_vertex: "#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",
    skinning_pars_vertex: "#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nuniform int boneTextureWidth;\nuniform int boneTextureHeight;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, float( boneTextureWidth ) );\nfloat y = floor( j / float( boneTextureWidth ) );\nfloat dx = 1.0 / float( boneTextureWidth );\nfloat dy = 1.0 / float( boneTextureHeight );\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
    skinbase_vertex: "#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",
    skinning_vertex: "#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned 	  += boneMatY * skinVertex * skinWeight.y;\n#endif",
    morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
    morphtarget_vertex: "#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
    default_vertex: "vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",
    morphnormal_vertex: "#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
    skinnormal_vertex: "#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix 	+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",
    defaultnormal_vertex: "vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
    shadowmap_pars_fragment: "#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",
    shadowmap_fragment: "#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
    shadowmap_pars_vertex: "#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",
    shadowmap_vertex: "#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",
    alphatest_fragment: "#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",
    linear_to_gamma_fragment: "#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"
}, THREE.UniformsUtils = {
    merge: function(a) {
        var b, c, d, e = {};
        for (b = 0; b < a.length; b++) for (c in d = this.clone(a[b])) e[c] = d[c];
        return e;
    },
    clone: function(a) {
        var b, c, d, e = {};
        for (b in a) for (c in e[b] = {}, a[b]) d = a[b][c], e[b][c] = d instanceof THREE.Color || d instanceof THREE.Vector2 || d instanceof THREE.Vector3 || d instanceof THREE.Vector4 || d instanceof THREE.Matrix4 || d instanceof THREE.Texture ? d.clone() : d instanceof Array ? d.slice() : d;
        return e;
    }
}, THREE.UniformsLib = {
    common: {
        diffuse: {
            type: "c",
            value: new THREE.Color(15658734)
        },
        opacity: {
            type: "f",
            value: 1
        },
        map: {
            type: "t",
            value: null
        },
        offsetRepeat: {
            type: "v4",
            value: new THREE.Vector4(0, 0, 1, 1)
        },
        lightMap: {
            type: "t",
            value: null
        },
        specularMap: {
            type: "t",
            value: null
        },
        envMap: {
            type: "t",
            value: null
        },
        flipEnvMap: {
            type: "f",
            value: -1
        },
        useRefract: {
            type: "i",
            value: 0
        },
        reflectivity: {
            type: "f",
            value: 1
        },
        refractionRatio: {
            type: "f",
            value: .98
        },
        combine: {
            type: "i",
            value: 0
        },
        morphTargetInfluences: {
            type: "f",
            value: 0
        }
    },
    bump: {
        bumpMap: {
            type: "t",
            value: null
        },
        bumpScale: {
            type: "f",
            value: 1
        }
    },
    normalmap: {
        normalMap: {
            type: "t",
            value: null
        },
        normalScale: {
            type: "v2",
            value: new THREE.Vector2(1, 1)
        }
    },
    fog: {
        fogDensity: {
            type: "f",
            value: 25e-5
        },
        fogNear: {
            type: "f",
            value: 1
        },
        fogFar: {
            type: "f",
            value: 2e3
        },
        fogColor: {
            type: "c",
            value: new THREE.Color(16777215)
        }
    },
    lights: {
        ambientLightColor: {
            type: "fv",
            value: []
        },
        directionalLightDirection: {
            type: "fv",
            value: []
        },
        directionalLightColor: {
            type: "fv",
            value: []
        },
        hemisphereLightDirection: {
            type: "fv",
            value: []
        },
        hemisphereLightSkyColor: {
            type: "fv",
            value: []
        },
        hemisphereLightGroundColor: {
            type: "fv",
            value: []
        },
        pointLightColor: {
            type: "fv",
            value: []
        },
        pointLightPosition: {
            type: "fv",
            value: []
        },
        pointLightDistance: {
            type: "fv1",
            value: []
        },
        spotLightColor: {
            type: "fv",
            value: []
        },
        spotLightPosition: {
            type: "fv",
            value: []
        },
        spotLightDirection: {
            type: "fv",
            value: []
        },
        spotLightDistance: {
            type: "fv1",
            value: []
        },
        spotLightAngleCos: {
            type: "fv1",
            value: []
        },
        spotLightExponent: {
            type: "fv1",
            value: []
        }
    },
    particle: {
        psColor: {
            type: "c",
            value: new THREE.Color(15658734)
        },
        opacity: {
            type: "f",
            value: 1
        },
        size: {
            type: "f",
            value: 1
        },
        scale: {
            type: "f",
            value: 1
        },
        map: {
            type: "t",
            value: null
        },
        fogDensity: {
            type: "f",
            value: 25e-5
        },
        fogNear: {
            type: "f",
            value: 1
        },
        fogFar: {
            type: "f",
            value: 2e3
        },
        fogColor: {
            type: "c",
            value: new THREE.Color(16777215)
        }
    },
    shadowmap: {
        shadowMap: {
            type: "tv",
            value: []
        },
        shadowMapSize: {
            type: "v2v",
            value: []
        },
        shadowBias: {
            type: "fv1",
            value: []
        },
        shadowDarkness: {
            type: "fv1",
            value: []
        },
        shadowMatrix: {
            type: "m4v",
            value: []
        }
    }
}, THREE.ShaderLib = {
    basic: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.shadowmap ]),
        vertexShader: [ THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.skinbase_vertex, "#ifdef USE_ENVMAP", THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "#endif", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.shadowmap_vertex, "}" ].join("\n"),
        fragmentShader: [ "uniform vec3 diffuse;\nuniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {\ngl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}" ].join("\n")
    },
    lambert: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
            ambient: {
                type: "c",
                value: new THREE.Color(16777215)
            },
            emissive: {
                type: "c",
                value: new THREE.Color(0)
            },
            wrapRGB: {
                type: "v3",
                value: new THREE.Vector3(1, 1, 1)
            }
        } ]),
        vertexShader: [ "#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_lambert_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_lambert_vertex, THREE.ShaderChunk.shadowmap_vertex, "}" ].join("\n"),
        fragmentShader: [ "uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, "#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif", THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}" ].join("\n")
    },
    phong: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.normalmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
            ambient: {
                type: "c",
                value: new THREE.Color(16777215)
            },
            emissive: {
                type: "c",
                value: new THREE.Color(0)
            },
            specular: {
                type: "c",
                value: new THREE.Color(1118481)
            },
            shininess: {
                type: "f",
                value: 30
            },
            wrapRGB: {
                type: "v3",
                value: new THREE.Vector3(1, 1, 1)
            }
        } ]),
        vertexShader: [ "#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_phong_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "vNormal = normalize( transformedNormal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, "vViewPosition = -mvPosition.xyz;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_phong_vertex, THREE.ShaderChunk.shadowmap_vertex, "}" ].join("\n"),
        fragmentShader: [ "uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.lights_phong_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.bumpmap_pars_fragment, THREE.ShaderChunk.normalmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, "void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );", THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lights_phong_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}" ].join("\n")
    },
    particle_basic: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.particle, THREE.UniformsLib.shadowmap ]),
        vertexShader: [ "uniform float size;\nuniform float scale;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.shadowmap_vertex, "}" ].join("\n"),
        fragmentShader: [ "uniform vec3 psColor;\nuniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_particle_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, "void main() {\ngl_FragColor = vec4( psColor, opacity );", THREE.ShaderChunk.map_particle_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.fog_fragment, "}" ].join("\n")
    },
    dashed: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.common, THREE.UniformsLib.fog, {
            scale: {
                type: "f",
                value: 1
            },
            dashSize: {
                type: "f",
                value: 1
            },
            totalSize: {
                type: "f",
                value: 2
            }
        } ]),
        vertexShader: [ "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;", THREE.ShaderChunk.color_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}" ].join("\n"),
        fragmentShader: [ "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, "void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.fog_fragment, "}" ].join("\n")
    },
    depth: {
        uniforms: {
            mNear: {
                type: "f",
                value: 1
            },
            mFar: {
                type: "f",
                value: 2e3
            },
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: "void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
        fragmentShader: "uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"
    },
    normal: {
        uniforms: {
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: [ "varying vec3 vNormal;", THREE.ShaderChunk.morphtarget_pars_vertex, "void main() {\nvNormal = normalize( normalMatrix * normal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, "}" ].join("\n"),
        fragmentShader: "uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"
    },
    normalmap: {
        uniforms: THREE.UniformsUtils.merge([ THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
            enableAO: {
                type: "i",
                value: 0
            },
            enableDiffuse: {
                type: "i",
                value: 0
            },
            enableSpecular: {
                type: "i",
                value: 0
            },
            enableReflection: {
                type: "i",
                value: 0
            },
            enableDisplacement: {
                type: "i",
                value: 0
            },
            tDisplacement: {
                type: "t",
                value: null
            },
            tDiffuse: {
                type: "t",
                value: null
            },
            tCube: {
                type: "t",
                value: null
            },
            tNormal: {
                type: "t",
                value: null
            },
            tSpecular: {
                type: "t",
                value: null
            },
            tAO: {
                type: "t",
                value: null
            },
            uNormalScale: {
                type: "v2",
                value: new THREE.Vector2(1, 1)
            },
            uDisplacementBias: {
                type: "f",
                value: 0
            },
            uDisplacementScale: {
                type: "f",
                value: 1
            },
            uDiffuseColor: {
                type: "c",
                value: new THREE.Color(16777215)
            },
            uSpecularColor: {
                type: "c",
                value: new THREE.Color(1118481)
            },
            uAmbientColor: {
                type: "c",
                value: new THREE.Color(16777215)
            },
            uShininess: {
                type: "f",
                value: 30
            },
            uOpacity: {
                type: "f",
                value: 1
            },
            useRefract: {
                type: "i",
                value: 0
            },
            uRefractionRatio: {
                type: "f",
                value: .98
            },
            uReflectivity: {
                type: "f",
                value: .5
            },
            uOffset: {
                type: "v2",
                value: new THREE.Vector2(0, 0)
            },
            uRepeat: {
                type: "v2",
                value: new THREE.Vector2(1, 1)
            },
            wrapRGB: {
                type: "v3",
                value: new THREE.Vector3(1, 1, 1)
            }
        } ]),
        fragmentShader: [ "uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float uRefractionRatio;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;", THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, "void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\n#ifdef FLIP_SIDED\nfinalNormal = -finalNormal;\n#endif\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\nfloat pointDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\npointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\npointVector = normalize( pointVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\nfloat spotDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\nspotVector = normalize( spotVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n#endif\nspotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;\nvec3 spotHalfVector = normalize( spotVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += uDiffuseColor * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;\n#endif\nif ( enableReflection ) {\nvec3 vReflect;\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, normal, uRefractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, normal );\n}\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}", THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}" ].join("\n"),
        vertexShader: [ "attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;", THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, "#ifdef USE_SKINNING\nvNormal = normalize( normalMatrix * skinnedNormal.xyz );\nvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\nvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n#else\nvNormal = normalize( normalMatrix * normal );\nvTangent = normalize( normalMatrix * tangent.xyz );\n#endif\nvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\nvUv = uv * uRepeat + uOffset;\nvec3 displacedPosition;\n#ifdef VERTEX_TEXTURES\nif ( enableDisplacement ) {\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\ndisplacedPosition = position + normalize( normal ) * df;\n} else {\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned 	  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n}\n#else\n#ifdef USE_SKINNING\nvec4 skinVertex = vec4( position, 1.0 );\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned 	  += boneMatY * skinVertex * skinWeight.y;\ndisplacedPosition  = skinned.xyz;\n#else\ndisplacedPosition = position;\n#endif\n#endif\nvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\nvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\nvWorldPosition = worldPosition.xyz;\nvViewPosition = -mvPosition.xyz;\n#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif\n}" ].join("\n")
    },
    cube: {
        uniforms: {
            tCube: {
                type: "t",
                value: null
            },
            tFlip: {
                type: "f",
                value: -1
            }
        },
        vertexShader: "varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
        fragmentShader: "uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"
    },
    depthRGBA: {
        uniforms: {},
        vertexShader: [ THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, "}" ].join("\n"),
        fragmentShader: "vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"
    }
}, THREE.WebGLRenderer = function(a) {
    function b(a, b) {
        var c = a.vertices.length, d = b.material;
        if (d.attributes) {
            void 0 === a.__webglCustomAttributesList && (a.__webglCustomAttributesList = []);
            for (var e in d.attributes) {
                var f = d.attributes[e];
                if (!f.__webglInitialized || f.createUniqueBuffers) {
                    f.__webglInitialized = !0;
                    var g = 1;
                    "v2" === f.type ? g = 2 : "v3" === f.type ? g = 3 : "v4" === f.type ? g = 4 : "c" === f.type && (g = 3), 
                    f.size = g, f.array = new Float32Array(c * g), f.buffer = P.createBuffer(), f.buffer.belongsToAttribute = e, 
                    f.needsUpdate = !0;
                }
                a.__webglCustomAttributesList.push(f);
            }
        }
    }
    function c(a, b) {
        var c = b.geometry, g = a.faces3, h = 3 * g.length, i = 1 * g.length, j = 3 * g.length, g = d(b, a), k = f(g), l = e(g), m = g.vertexColors ? g.vertexColors : !1;
        if (a.__vertexArray = new Float32Array(3 * h), l && (a.__normalArray = new Float32Array(3 * h)), 
        c.hasTangents && (a.__tangentArray = new Float32Array(4 * h)), m && (a.__colorArray = new Float32Array(3 * h)), 
        k && (0 < c.faceVertexUvs.length && (a.__uvArray = new Float32Array(2 * h)), 1 < c.faceVertexUvs.length && (a.__uv2Array = new Float32Array(2 * h))), 
        b.geometry.skinWeights.length && b.geometry.skinIndices.length && (a.__skinIndexArray = new Float32Array(4 * h), 
        a.__skinWeightArray = new Float32Array(4 * h)), a.__faceArray = new Uint16Array(3 * i), 
        a.__lineArray = new Uint16Array(2 * j), a.numMorphTargets) for (a.__morphTargetsArrays = [], 
        c = 0, k = a.numMorphTargets; k > c; c++) a.__morphTargetsArrays.push(new Float32Array(3 * h));
        if (a.numMorphNormals) for (a.__morphNormalsArrays = [], c = 0, k = a.numMorphNormals; k > c; c++) a.__morphNormalsArrays.push(new Float32Array(3 * h));
        if (a.__webglFaceCount = 3 * i, a.__webglLineCount = 2 * j, g.attributes) {
            void 0 === a.__webglCustomAttributesList && (a.__webglCustomAttributesList = []);
            for (var n in g.attributes) {
                var o, i = g.attributes[n], j = {};
                for (o in i) j[o] = i[o];
                (!j.__webglInitialized || j.createUniqueBuffers) && (j.__webglInitialized = !0, 
                c = 1, "v2" === j.type ? c = 2 : "v3" === j.type ? c = 3 : "v4" === j.type ? c = 4 : "c" === j.type && (c = 3), 
                j.size = c, j.array = new Float32Array(h * c), j.buffer = P.createBuffer(), j.buffer.belongsToAttribute = n, 
                i.needsUpdate = !0, j.__original = i), a.__webglCustomAttributesList.push(j);
            }
        }
        a.__inittedArrays = !0;
    }
    function d(a, b) {
        return a.material instanceof THREE.MeshFaceMaterial ? a.material.materials[b.materialIndex] : a.material;
    }
    function e(a) {
        return a instanceof THREE.MeshBasicMaterial && !a.envMap || a instanceof THREE.MeshDepthMaterial ? !1 : a && void 0 !== a.shading && a.shading === THREE.SmoothShading ? THREE.SmoothShading : THREE.FlatShading;
    }
    function f(a) {
        return a.map || a.lightMap || a.bumpMap || a.normalMap || a.specularMap || a instanceof THREE.ShaderMaterial ? !0 : !1;
    }
    function g(a) {
        ub[a] || (P.enableVertexAttribArray(a), ub[a] = !0);
    }
    function h() {
        for (var a in ub) ub[a] && (P.disableVertexAttribArray(a), ub[a] = !1);
    }
    function i(a, b) {
        return a.z !== b.z ? b.z - a.z : a.id - b.id;
    }
    function j(a, b) {
        return b[0] - a[0];
    }
    function k(a, b, c) {
        if (a.length) for (var d = 0, e = a.length; e > d; d++) _ = X = null, Z = $ = db = cb = jb = ib = eb = -1, 
        Ab = !0, a[d].render(b, c, sb, tb), _ = X = null, Z = $ = db = cb = jb = ib = eb = -1, 
        Ab = !0;
    }
    function l(a, b, c, d, e, f, g, h) {
        var i, j, k, l;
        b ? (j = a.length - 1, l = b = -1) : (j = 0, b = a.length, l = 1);
        for (var m = j; m !== b; m += l) if (i = a[m], i.render) {
            if (j = i.object, k = i.buffer, h) i = h; else {
                if (i = i[c], !i) continue;
                g && U.setBlending(i.blending, i.blendEquation, i.blendSrc, i.blendDst), U.setDepthTest(i.depthTest), 
                U.setDepthWrite(i.depthWrite), z(i.polygonOffset, i.polygonOffsetFactor, i.polygonOffsetUnits);
            }
            U.setMaterialFaces(i), k instanceof THREE.BufferGeometry ? U.renderBufferDirect(d, e, f, i, k, j) : U.renderBuffer(d, e, f, i, k, j);
        }
    }
    function m(a, b, c, d, e, f, g) {
        for (var h, i, j = 0, k = a.length; k > j; j++) if (h = a[j], i = h.object, i.visible) {
            if (g) h = g; else {
                if (h = h[b], !h) continue;
                f && U.setBlending(h.blending, h.blendEquation, h.blendSrc, h.blendDst), U.setDepthTest(h.depthTest), 
                U.setDepthWrite(h.depthWrite), z(h.polygonOffset, h.polygonOffsetFactor, h.polygonOffsetUnits);
            }
            U.renderImmediateObject(c, d, e, h, i);
        }
    }
    function n(a, d) {
        var e, f, g, h;
        if (void 0 === a.__webglInit && (a.__webglInit = !0, a._modelViewMatrix = new THREE.Matrix4(), 
        a._normalMatrix = new THREE.Matrix3(), void 0 !== a.geometry && void 0 === a.geometry.__webglInit && (a.geometry.__webglInit = !0, 
        a.geometry.addEventListener("dispose", Qb)), f = a.geometry, void 0 !== f)) if (f instanceof THREE.BufferGeometry) {
            var i, j;
            for (i in f.attributes) j = "index" === i ? P.ELEMENT_ARRAY_BUFFER : P.ARRAY_BUFFER, 
            h = f.attributes[i], void 0 === h.numItems && (h.numItems = h.array.length), h.buffer = P.createBuffer(), 
            P.bindBuffer(j, h.buffer), P.bufferData(j, h.array, P.STATIC_DRAW);
        } else if (a instanceof THREE.Mesh) {
            if (g = a.material, void 0 === f.geometryGroups) {
                i = f;
                var k, l, m;
                j = {};
                var n = i.morphTargets.length, p = i.morphNormals.length, q = g instanceof THREE.MeshFaceMaterial;
                for (i.geometryGroups = {}, g = 0, k = i.faces.length; k > g; g++) l = i.faces[g], 
                l = q ? l.materialIndex : 0, void 0 === j[l] && (j[l] = {
                    hash: l,
                    counter: 0
                }), m = j[l].hash + "_" + j[l].counter, void 0 === i.geometryGroups[m] && (i.geometryGroups[m] = {
                    faces3: [],
                    materialIndex: l,
                    vertices: 0,
                    numMorphTargets: n,
                    numMorphNormals: p
                }), 65535 < i.geometryGroups[m].vertices + 3 && (j[l].counter += 1, m = j[l].hash + "_" + j[l].counter, 
                void 0 === i.geometryGroups[m] && (i.geometryGroups[m] = {
                    faces3: [],
                    materialIndex: l,
                    vertices: 0,
                    numMorphTargets: n,
                    numMorphNormals: p
                })), i.geometryGroups[m].faces3.push(g), i.geometryGroups[m].vertices += 3;
                i.geometryGroupsList = [];
                for (h in i.geometryGroups) i.geometryGroups[h].id = ab++, i.geometryGroupsList.push(i.geometryGroups[h]);
            }
            for (e in f.geometryGroups) if (h = f.geometryGroups[e], !h.__webglVertexBuffer) {
                if (i = h, i.__webglVertexBuffer = P.createBuffer(), i.__webglNormalBuffer = P.createBuffer(), 
                i.__webglTangentBuffer = P.createBuffer(), i.__webglColorBuffer = P.createBuffer(), 
                i.__webglUVBuffer = P.createBuffer(), i.__webglUV2Buffer = P.createBuffer(), i.__webglSkinIndicesBuffer = P.createBuffer(), 
                i.__webglSkinWeightsBuffer = P.createBuffer(), i.__webglFaceBuffer = P.createBuffer(), 
                i.__webglLineBuffer = P.createBuffer(), n = j = void 0, i.numMorphTargets) for (i.__webglMorphTargetsBuffers = [], 
                j = 0, n = i.numMorphTargets; n > j; j++) i.__webglMorphTargetsBuffers.push(P.createBuffer());
                if (i.numMorphNormals) for (i.__webglMorphNormalsBuffers = [], j = 0, n = i.numMorphNormals; n > j; j++) i.__webglMorphNormalsBuffers.push(P.createBuffer());
                U.info.memory.geometries++, c(h, a), f.verticesNeedUpdate = !0, f.morphTargetsNeedUpdate = !0, 
                f.elementsNeedUpdate = !0, f.uvsNeedUpdate = !0, f.normalsNeedUpdate = !0, f.tangentsNeedUpdate = !0, 
                f.colorsNeedUpdate = !0;
            }
        } else a instanceof THREE.Line ? f.__webglVertexBuffer || (h = f, h.__webglVertexBuffer = P.createBuffer(), 
        h.__webglColorBuffer = P.createBuffer(), h.__webglLineDistanceBuffer = P.createBuffer(), 
        U.info.memory.geometries++, h = f, i = h.vertices.length, h.__vertexArray = new Float32Array(3 * i), 
        h.__colorArray = new Float32Array(3 * i), h.__lineDistanceArray = new Float32Array(1 * i), 
        h.__webglLineCount = i, b(h, a), f.verticesNeedUpdate = !0, f.colorsNeedUpdate = !0, 
        f.lineDistancesNeedUpdate = !0) : a instanceof THREE.ParticleSystem && !f.__webglVertexBuffer && (h = f, 
        h.__webglVertexBuffer = P.createBuffer(), h.__webglColorBuffer = P.createBuffer(), 
        U.info.memory.geometries++, h = f, i = h.vertices.length, h.__vertexArray = new Float32Array(3 * i), 
        h.__colorArray = new Float32Array(3 * i), h.__sortArray = [], h.__webglParticleCount = i, 
        b(h, a), f.verticesNeedUpdate = !0, f.colorsNeedUpdate = !0);
        if (void 0 === a.__webglActive) {
            if (a instanceof THREE.Mesh) {
                if (f = a.geometry, f instanceof THREE.BufferGeometry) o(d.__webglObjects, f, a); else if (f instanceof THREE.Geometry) for (e in f.geometryGroups) h = f.geometryGroups[e], 
                o(d.__webglObjects, h, a);
            } else a instanceof THREE.Line || a instanceof THREE.ParticleSystem ? (f = a.geometry, 
            o(d.__webglObjects, f, a)) : a instanceof THREE.ImmediateRenderObject || a.immediateRenderCallback ? d.__webglObjectsImmediate.push({
                id: null,
                object: a,
                opaque: null,
                transparent: null,
                z: 0
            }) : a instanceof THREE.Sprite ? d.__webglSprites.push(a) : a instanceof THREE.LensFlare && d.__webglFlares.push(a);
            a.__webglActive = !0;
        }
    }
    function o(a, b, c) {
        a.push({
            id: null,
            buffer: b,
            object: c,
            opaque: null,
            transparent: null,
            z: 0
        });
    }
    function p(a) {
        for (var b in a.attributes) if (a.attributes[b].needsUpdate) return !0;
        return !1;
    }
    function q(a) {
        for (var b in a.attributes) a.attributes[b].needsUpdate = !1;
    }
    function r(a, b) {
        a instanceof THREE.Mesh || a instanceof THREE.ParticleSystem || a instanceof THREE.Line ? s(b.__webglObjects, a) : a instanceof THREE.Sprite ? t(b.__webglSprites, a) : a instanceof THREE.LensFlare ? t(b.__webglFlares, a) : (a instanceof THREE.ImmediateRenderObject || a.immediateRenderCallback) && s(b.__webglObjectsImmediate, a), 
        delete a.__webglActive;
    }
    function s(a, b) {
        for (var c = a.length - 1; c >= 0; c--) a[c].object === b && a.splice(c, 1);
    }
    function t(a, b) {
        for (var c = a.length - 1; c >= 0; c--) a[c] === b && a.splice(c, 1);
    }
    function u(a, b, c, d, e) {
        bb = 0, d.needsUpdate && (d.program && Vb(d), U.initMaterial(d, b, c, e), d.needsUpdate = !1), 
        d.morphTargets && !e.__webglMorphTargetInfluences && (e.__webglMorphTargetInfluences = new Float32Array(U.maxMorphTargets));
        var f = !1, g = d.program, h = g.uniforms, i = d.uniforms;
        if (g !== X && (P.useProgram(g), X = g, f = !0), d.id !== Z && (Z = d.id, f = !0), 
        (f || a !== _) && (P.uniformMatrix4fv(h.projectionMatrix, !1, a.projectionMatrix.elements), 
        a !== _ && (_ = a)), d.skinning) if (Jb && e.useVertexTexture) {
            if (null !== h.boneTexture) {
                var j = v();
                P.uniform1i(h.boneTexture, j), U.setTexture(e.boneTexture, j);
            }
            null !== h.boneTextureWidth && P.uniform1i(h.boneTextureWidth, e.boneTextureWidth), 
            null !== h.boneTextureHeight && P.uniform1i(h.boneTextureHeight, e.boneTextureHeight);
        } else null !== h.boneGlobalMatrices && P.uniformMatrix4fv(h.boneGlobalMatrices, !1, e.boneMatrices);
        if (f) {
            if (c && d.fog && (i.fogColor.value = c.color, c instanceof THREE.Fog ? (i.fogNear.value = c.near, 
            i.fogFar.value = c.far) : c instanceof THREE.FogExp2 && (i.fogDensity.value = c.density)), 
            d instanceof THREE.MeshPhongMaterial || d instanceof THREE.MeshLambertMaterial || d.lights) {
                if (Ab) {
                    for (var k, l, m, n, o = j = 0, p = 0, q = Bb, r = q.directional.colors, s = q.directional.positions, t = q.point.colors, u = q.point.positions, y = q.point.distances, z = q.spot.colors, A = q.spot.positions, B = q.spot.distances, D = q.spot.directions, E = q.spot.anglesCos, H = q.spot.exponents, I = q.hemi.skyColors, J = q.hemi.groundColors, K = q.hemi.positions, L = 0, M = 0, N = 0, O = 0, Q = 0, R = 0, S = 0, T = 0, V = k = 0, c = n = V = 0, f = b.length; f > c; c++) k = b[c], 
                    k.onlyShadow || (l = k.color, m = k.intensity, n = k.distance, k instanceof THREE.AmbientLight ? k.visible && (U.gammaInput ? (j += l.r * l.r, 
                    o += l.g * l.g, p += l.b * l.b) : (j += l.r, o += l.g, p += l.b)) : k instanceof THREE.DirectionalLight ? (Q += 1, 
                    k.visible && (zb.setFromMatrixPosition(k.matrixWorld), yb.setFromMatrixPosition(k.target.matrixWorld), 
                    zb.sub(yb), zb.normalize(), 0 === zb.x && 0 === zb.y && 0 === zb.z || (k = 3 * L, 
                    s[k] = zb.x, s[k + 1] = zb.y, s[k + 2] = zb.z, U.gammaInput ? w(r, k, l, m * m) : x(r, k, l, m), 
                    L += 1))) : k instanceof THREE.PointLight ? (R += 1, k.visible && (V = 3 * M, U.gammaInput ? w(t, V, l, m * m) : x(t, V, l, m), 
                    yb.setFromMatrixPosition(k.matrixWorld), u[V] = yb.x, u[V + 1] = yb.y, u[V + 2] = yb.z, 
                    y[M] = n, M += 1)) : k instanceof THREE.SpotLight ? (S += 1, k.visible && (V = 3 * N, 
                    U.gammaInput ? w(z, V, l, m * m) : x(z, V, l, m), yb.setFromMatrixPosition(k.matrixWorld), 
                    A[V] = yb.x, A[V + 1] = yb.y, A[V + 2] = yb.z, B[N] = n, zb.copy(yb), yb.setFromMatrixPosition(k.target.matrixWorld), 
                    zb.sub(yb), zb.normalize(), D[V] = zb.x, D[V + 1] = zb.y, D[V + 2] = zb.z, E[N] = Math.cos(k.angle), 
                    H[N] = k.exponent, N += 1)) : k instanceof THREE.HemisphereLight && (T += 1, k.visible && (zb.setFromMatrixPosition(k.matrixWorld), 
                    zb.normalize(), 0 === zb.x && 0 === zb.y && 0 === zb.z || (n = 3 * O, K[n] = zb.x, 
                    K[n + 1] = zb.y, K[n + 2] = zb.z, l = k.color, k = k.groundColor, U.gammaInput ? (m *= m, 
                    w(I, n, l, m), w(J, n, k, m)) : (x(I, n, l, m), x(J, n, k, m)), O += 1))));
                    for (c = 3 * L, f = Math.max(r.length, 3 * Q); f > c; c++) r[c] = 0;
                    for (c = 3 * M, f = Math.max(t.length, 3 * R); f > c; c++) t[c] = 0;
                    for (c = 3 * N, f = Math.max(z.length, 3 * S); f > c; c++) z[c] = 0;
                    for (c = 3 * O, f = Math.max(I.length, 3 * T); f > c; c++) I[c] = 0;
                    for (c = 3 * O, f = Math.max(J.length, 3 * T); f > c; c++) J[c] = 0;
                    q.directional.length = L, q.point.length = M, q.spot.length = N, q.hemi.length = O, 
                    q.ambient[0] = j, q.ambient[1] = o, q.ambient[2] = p, Ab = !1;
                }
                c = Bb, i.ambientLightColor.value = c.ambient, i.directionalLightColor.value = c.directional.colors, 
                i.directionalLightDirection.value = c.directional.positions, i.pointLightColor.value = c.point.colors, 
                i.pointLightPosition.value = c.point.positions, i.pointLightDistance.value = c.point.distances, 
                i.spotLightColor.value = c.spot.colors, i.spotLightPosition.value = c.spot.positions, 
                i.spotLightDistance.value = c.spot.distances, i.spotLightDirection.value = c.spot.directions, 
                i.spotLightAngleCos.value = c.spot.anglesCos, i.spotLightExponent.value = c.spot.exponents, 
                i.hemisphereLightSkyColor.value = c.hemi.skyColors, i.hemisphereLightGroundColor.value = c.hemi.groundColors, 
                i.hemisphereLightDirection.value = c.hemi.positions;
            }
            if (d instanceof THREE.MeshBasicMaterial || d instanceof THREE.MeshLambertMaterial || d instanceof THREE.MeshPhongMaterial) {
                i.opacity.value = d.opacity, U.gammaInput ? i.diffuse.value.copyGammaToLinear(d.color) : i.diffuse.value = d.color, 
                i.map.value = d.map, i.lightMap.value = d.lightMap, i.specularMap.value = d.specularMap, 
                d.bumpMap && (i.bumpMap.value = d.bumpMap, i.bumpScale.value = d.bumpScale), d.normalMap && (i.normalMap.value = d.normalMap, 
                i.normalScale.value.copy(d.normalScale));
                var W;
                d.map ? W = d.map : d.specularMap ? W = d.specularMap : d.normalMap ? W = d.normalMap : d.bumpMap && (W = d.bumpMap), 
                void 0 !== W && (c = W.offset, W = W.repeat, i.offsetRepeat.value.set(c.x, c.y, W.x, W.y)), 
                i.envMap.value = d.envMap, i.flipEnvMap.value = d.envMap instanceof THREE.WebGLRenderTargetCube ? 1 : -1, 
                i.reflectivity.value = d.reflectivity, i.refractionRatio.value = d.refractionRatio, 
                i.combine.value = d.combine, i.useRefract.value = d.envMap && d.envMap.mapping instanceof THREE.CubeRefractionMapping;
            }
            if (d instanceof THREE.LineBasicMaterial ? (i.diffuse.value = d.color, i.opacity.value = d.opacity) : d instanceof THREE.LineDashedMaterial ? (i.diffuse.value = d.color, 
            i.opacity.value = d.opacity, i.dashSize.value = d.dashSize, i.totalSize.value = d.dashSize + d.gapSize, 
            i.scale.value = d.scale) : d instanceof THREE.ParticleSystemMaterial ? (i.psColor.value = d.color, 
            i.opacity.value = d.opacity, i.size.value = d.size, i.scale.value = G.height / 2, 
            i.map.value = d.map) : d instanceof THREE.MeshPhongMaterial ? (i.shininess.value = d.shininess, 
            U.gammaInput ? (i.ambient.value.copyGammaToLinear(d.ambient), i.emissive.value.copyGammaToLinear(d.emissive), 
            i.specular.value.copyGammaToLinear(d.specular)) : (i.ambient.value = d.ambient, 
            i.emissive.value = d.emissive, i.specular.value = d.specular), d.wrapAround && i.wrapRGB.value.copy(d.wrapRGB)) : d instanceof THREE.MeshLambertMaterial ? (U.gammaInput ? (i.ambient.value.copyGammaToLinear(d.ambient), 
            i.emissive.value.copyGammaToLinear(d.emissive)) : (i.ambient.value = d.ambient, 
            i.emissive.value = d.emissive), d.wrapAround && i.wrapRGB.value.copy(d.wrapRGB)) : d instanceof THREE.MeshDepthMaterial ? (i.mNear.value = a.near, 
            i.mFar.value = a.far, i.opacity.value = d.opacity) : d instanceof THREE.MeshNormalMaterial && (i.opacity.value = d.opacity), 
            e.receiveShadow && !d._shadowPass && i.shadowMatrix) for (c = W = 0, f = b.length; f > c; c++) j = b[c], 
            j.castShadow && (j instanceof THREE.SpotLight || j instanceof THREE.DirectionalLight && !j.shadowCascade) && (i.shadowMap.value[W] = j.shadowMap, 
            i.shadowMapSize.value[W] = j.shadowMapSize, i.shadowMatrix.value[W] = j.shadowMatrix, 
            i.shadowDarkness.value[W] = j.shadowDarkness, i.shadowBias.value[W] = j.shadowBias, 
            W++);
            for (b = d.uniformsList, i = 0, W = b.length; W > i; i++) if (f = g.uniforms[b[i][1]]) if (c = b[i][0], 
            o = c.type, j = c.value, "i" === o) P.uniform1i(f, j); else if ("f" === o) P.uniform1f(f, j); else if ("v2" === o) P.uniform2f(f, j.x, j.y); else if ("v3" === o) P.uniform3f(f, j.x, j.y, j.z); else if ("v4" === o) P.uniform4f(f, j.x, j.y, j.z, j.w); else if ("c" === o) P.uniform3f(f, j.r, j.g, j.b); else if ("iv1" === o) P.uniform1iv(f, j); else if ("iv" === o) P.uniform3iv(f, j); else if ("fv1" === o) P.uniform1fv(f, j); else if ("fv" === o) P.uniform3fv(f, j); else if ("v2v" === o) {
                for (void 0 === c._array && (c._array = new Float32Array(2 * j.length)), o = 0, 
                p = j.length; p > o; o++) q = 2 * o, c._array[q] = j[o].x, c._array[q + 1] = j[o].y;
                P.uniform2fv(f, c._array);
            } else if ("v3v" === o) {
                for (void 0 === c._array && (c._array = new Float32Array(3 * j.length)), o = 0, 
                p = j.length; p > o; o++) q = 3 * o, c._array[q] = j[o].x, c._array[q + 1] = j[o].y, 
                c._array[q + 2] = j[o].z;
                P.uniform3fv(f, c._array);
            } else if ("v4v" === o) {
                for (void 0 === c._array && (c._array = new Float32Array(4 * j.length)), o = 0, 
                p = j.length; p > o; o++) q = 4 * o, c._array[q] = j[o].x, c._array[q + 1] = j[o].y, 
                c._array[q + 2] = j[o].z, c._array[q + 3] = j[o].w;
                P.uniform4fv(f, c._array);
            } else if ("m4" === o) void 0 === c._array && (c._array = new Float32Array(16)), 
            j.flattenToArray(c._array), P.uniformMatrix4fv(f, !1, c._array); else if ("m4v" === o) {
                for (void 0 === c._array && (c._array = new Float32Array(16 * j.length)), o = 0, 
                p = j.length; p > o; o++) j[o].flattenToArrayOffset(c._array, 16 * o);
                P.uniformMatrix4fv(f, !1, c._array);
            } else if ("t" === o) {
                if (q = j, j = v(), P.uniform1i(f, j), q) if (q.image instanceof Array && 6 === q.image.length) {
                    if (c = q, f = j, 6 === c.image.length) if (c.needsUpdate) {
                        for (c.image.__webglTextureCube || (c.addEventListener("dispose", Rb), c.image.__webglTextureCube = P.createTexture(), 
                        U.info.memory.textures++), P.activeTexture(P.TEXTURE0 + f), P.bindTexture(P.TEXTURE_CUBE_MAP, c.image.__webglTextureCube), 
                        P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL, c.flipY), f = c instanceof THREE.CompressedTexture, 
                        j = [], o = 0; 6 > o; o++) U.autoScaleCubemaps && !f ? (p = j, q = o, r = c.image[o], 
                        t = Gb, r.width <= t && r.height <= t || (u = Math.max(r.width, r.height), s = Math.floor(r.width * t / u), 
                        t = Math.floor(r.height * t / u), u = document.createElement("canvas"), u.width = s, 
                        u.height = t, u.getContext("2d").drawImage(r, 0, 0, r.width, r.height, 0, 0, s, t), 
                        r = u), p[q] = r) : j[o] = c.image[o];
                        for (o = j[0], p = 0 === (o.width & o.width - 1) && 0 === (o.height & o.height - 1), 
                        q = F(c.format), r = F(c.type), C(P.TEXTURE_CUBE_MAP, c, p), o = 0; 6 > o; o++) if (f) for (t = j[o].mipmaps, 
                        u = 0, y = t.length; y > u; u++) s = t[u], c.format !== THREE.RGBAFormat ? P.compressedTexImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + o, u, q, s.width, s.height, 0, s.data) : P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + o, u, q, s.width, s.height, 0, q, r, s.data); else P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + o, 0, q, q, r, j[o]);
                        c.generateMipmaps && p && P.generateMipmap(P.TEXTURE_CUBE_MAP), c.needsUpdate = !1, 
                        c.onUpdate && c.onUpdate();
                    } else P.activeTexture(P.TEXTURE0 + f), P.bindTexture(P.TEXTURE_CUBE_MAP, c.image.__webglTextureCube);
                } else q instanceof THREE.WebGLRenderTargetCube ? (c = q, P.activeTexture(P.TEXTURE0 + j), 
                P.bindTexture(P.TEXTURE_CUBE_MAP, c.__webglTexture)) : U.setTexture(q, j);
            } else if ("tv" === o) {
                for (void 0 === c._array && (c._array = []), o = 0, p = c.value.length; p > o; o++) c._array[o] = v();
                for (P.uniform1iv(f, c._array), o = 0, p = c.value.length; p > o; o++) q = c.value[o], 
                j = c._array[o], q && U.setTexture(q, j);
            } else console.warn("THREE.WebGLRenderer: Unknown uniform type: " + o);
            (d instanceof THREE.ShaderMaterial || d instanceof THREE.MeshPhongMaterial || d.envMap) && null !== h.cameraPosition && (yb.setFromMatrixPosition(a.matrixWorld), 
            P.uniform3f(h.cameraPosition, yb.x, yb.y, yb.z)), (d instanceof THREE.MeshPhongMaterial || d instanceof THREE.MeshLambertMaterial || d instanceof THREE.ShaderMaterial || d.skinning) && null !== h.viewMatrix && P.uniformMatrix4fv(h.viewMatrix, !1, a.matrixWorldInverse.elements);
        }
        return P.uniformMatrix4fv(h.modelViewMatrix, !1, e._modelViewMatrix.elements), h.normalMatrix && P.uniformMatrix3fv(h.normalMatrix, !1, e._normalMatrix.elements), 
        null !== h.modelMatrix && P.uniformMatrix4fv(h.modelMatrix, !1, e.matrixWorld.elements), 
        g;
    }
    function v() {
        var a = bb;
        return a >= Eb && console.warn("WebGLRenderer: trying to use " + a + " texture units while this GPU supports only " + Eb), 
        bb += 1, a;
    }
    function w(a, b, c, d) {
        a[b] = c.r * c.r * d, a[b + 1] = c.g * c.g * d, a[b + 2] = c.b * c.b * d;
    }
    function x(a, b, c, d) {
        a[b] = c.r * d, a[b + 1] = c.g * d, a[b + 2] = c.b * d;
    }
    function y(a) {
        a !== nb && (P.lineWidth(a), nb = a);
    }
    function z(a, b, c) {
        kb !== a && (a ? P.enable(P.POLYGON_OFFSET_FILL) : P.disable(P.POLYGON_OFFSET_FILL), 
        kb = a), !a || lb === b && mb === c || (P.polygonOffset(b, c), lb = b, mb = c);
    }
    function A(a) {
        for (var a = a.split("\n"), b = 0, c = a.length; c > b; b++) a[b] = b + 1 + ": " + a[b];
        return a.join("\n");
    }
    function B(a, b) {
        var c;
        return "fragment" === a ? c = P.createShader(P.FRAGMENT_SHADER) : "vertex" === a && (c = P.createShader(P.VERTEX_SHADER)), 
        P.shaderSource(c, b), P.compileShader(c), P.getShaderParameter(c, P.COMPILE_STATUS) ? c : (console.error(P.getShaderInfoLog(c)), 
        console.error(A(b)), null);
    }
    function C(a, b, c) {
        c ? (P.texParameteri(a, P.TEXTURE_WRAP_S, F(b.wrapS)), P.texParameteri(a, P.TEXTURE_WRAP_T, F(b.wrapT)), 
        P.texParameteri(a, P.TEXTURE_MAG_FILTER, F(b.magFilter)), P.texParameteri(a, P.TEXTURE_MIN_FILTER, F(b.minFilter))) : (P.texParameteri(a, P.TEXTURE_WRAP_S, P.CLAMP_TO_EDGE), 
        P.texParameteri(a, P.TEXTURE_WRAP_T, P.CLAMP_TO_EDGE), P.texParameteri(a, P.TEXTURE_MAG_FILTER, E(b.magFilter)), 
        P.texParameteri(a, P.TEXTURE_MIN_FILTER, E(b.minFilter))), S && b.type !== THREE.FloatType && (1 < b.anisotropy || b.__oldAnisotropy) && (P.texParameterf(a, S.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(b.anisotropy, Hb)), 
        b.__oldAnisotropy = b.anisotropy);
    }
    function D(a, b) {
        P.bindRenderbuffer(P.RENDERBUFFER, a), b.depthBuffer && !b.stencilBuffer ? (P.renderbufferStorage(P.RENDERBUFFER, P.DEPTH_COMPONENT16, b.width, b.height), 
        P.framebufferRenderbuffer(P.FRAMEBUFFER, P.DEPTH_ATTACHMENT, P.RENDERBUFFER, a)) : b.depthBuffer && b.stencilBuffer ? (P.renderbufferStorage(P.RENDERBUFFER, P.DEPTH_STENCIL, b.width, b.height), 
        P.framebufferRenderbuffer(P.FRAMEBUFFER, P.DEPTH_STENCIL_ATTACHMENT, P.RENDERBUFFER, a)) : P.renderbufferStorage(P.RENDERBUFFER, P.RGBA4, b.width, b.height);
    }
    function E(a) {
        return a === THREE.NearestFilter || a === THREE.NearestMipMapNearestFilter || a === THREE.NearestMipMapLinearFilter ? P.NEAREST : P.LINEAR;
    }
    function F(a) {
        if (a === THREE.RepeatWrapping) return P.REPEAT;
        if (a === THREE.ClampToEdgeWrapping) return P.CLAMP_TO_EDGE;
        if (a === THREE.MirroredRepeatWrapping) return P.MIRRORED_REPEAT;
        if (a === THREE.NearestFilter) return P.NEAREST;
        if (a === THREE.NearestMipMapNearestFilter) return P.NEAREST_MIPMAP_NEAREST;
        if (a === THREE.NearestMipMapLinearFilter) return P.NEAREST_MIPMAP_LINEAR;
        if (a === THREE.LinearFilter) return P.LINEAR;
        if (a === THREE.LinearMipMapNearestFilter) return P.LINEAR_MIPMAP_NEAREST;
        if (a === THREE.LinearMipMapLinearFilter) return P.LINEAR_MIPMAP_LINEAR;
        if (a === THREE.UnsignedByteType) return P.UNSIGNED_BYTE;
        if (a === THREE.UnsignedShort4444Type) return P.UNSIGNED_SHORT_4_4_4_4;
        if (a === THREE.UnsignedShort5551Type) return P.UNSIGNED_SHORT_5_5_5_1;
        if (a === THREE.UnsignedShort565Type) return P.UNSIGNED_SHORT_5_6_5;
        if (a === THREE.ByteType) return P.BYTE;
        if (a === THREE.ShortType) return P.SHORT;
        if (a === THREE.UnsignedShortType) return P.UNSIGNED_SHORT;
        if (a === THREE.IntType) return P.INT;
        if (a === THREE.UnsignedIntType) return P.UNSIGNED_INT;
        if (a === THREE.FloatType) return P.FLOAT;
        if (a === THREE.AlphaFormat) return P.ALPHA;
        if (a === THREE.RGBFormat) return P.RGB;
        if (a === THREE.RGBAFormat) return P.RGBA;
        if (a === THREE.LuminanceFormat) return P.LUMINANCE;
        if (a === THREE.LuminanceAlphaFormat) return P.LUMINANCE_ALPHA;
        if (a === THREE.AddEquation) return P.FUNC_ADD;
        if (a === THREE.SubtractEquation) return P.FUNC_SUBTRACT;
        if (a === THREE.ReverseSubtractEquation) return P.FUNC_REVERSE_SUBTRACT;
        if (a === THREE.ZeroFactor) return P.ZERO;
        if (a === THREE.OneFactor) return P.ONE;
        if (a === THREE.SrcColorFactor) return P.SRC_COLOR;
        if (a === THREE.OneMinusSrcColorFactor) return P.ONE_MINUS_SRC_COLOR;
        if (a === THREE.SrcAlphaFactor) return P.SRC_ALPHA;
        if (a === THREE.OneMinusSrcAlphaFactor) return P.ONE_MINUS_SRC_ALPHA;
        if (a === THREE.DstAlphaFactor) return P.DST_ALPHA;
        if (a === THREE.OneMinusDstAlphaFactor) return P.ONE_MINUS_DST_ALPHA;
        if (a === THREE.DstColorFactor) return P.DST_COLOR;
        if (a === THREE.OneMinusDstColorFactor) return P.ONE_MINUS_DST_COLOR;
        if (a === THREE.SrcAlphaSaturateFactor) return P.SRC_ALPHA_SATURATE;
        if (void 0 !== T) {
            if (a === THREE.RGB_S3TC_DXT1_Format) return T.COMPRESSED_RGB_S3TC_DXT1_EXT;
            if (a === THREE.RGBA_S3TC_DXT1_Format) return T.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            if (a === THREE.RGBA_S3TC_DXT3_Format) return T.COMPRESSED_RGBA_S3TC_DXT3_EXT;
            if (a === THREE.RGBA_S3TC_DXT5_Format) return T.COMPRESSED_RGBA_S3TC_DXT5_EXT;
        }
        return 0;
    }
    console.log("THREE.WebGLRenderer", THREE.REVISION);
    var a = a || {}, G = void 0 !== a.canvas ? a.canvas : document.createElement("canvas"), H = void 0 !== a.precision ? a.precision : "highp", I = void 0 !== a.alpha ? a.alpha : !1, J = void 0 !== a.premultipliedAlpha ? a.premultipliedAlpha : !0, K = void 0 !== a.antialias ? a.antialias : !1, L = void 0 !== a.stencil ? a.stencil : !0, M = void 0 !== a.preserveDrawingBuffer ? a.preserveDrawingBuffer : !1, N = new THREE.Color(0), O = 0;
    this.domElement = G, this.context = null, this.devicePixelRatio = void 0 !== a.devicePixelRatio ? a.devicePixelRatio : void 0 !== self.devicePixelRatio ? self.devicePixelRatio : 1, 
    this.autoUpdateObjects = this.sortObjects = this.autoClearStencil = this.autoClearDepth = this.autoClearColor = this.autoClear = !0, 
    this.shadowMapEnabled = this.physicallyBasedShading = this.gammaOutput = this.gammaInput = !1, 
    this.shadowMapAutoUpdate = !0, this.shadowMapType = THREE.PCFShadowMap, this.shadowMapCullFace = THREE.CullFaceFront, 
    this.shadowMapCascade = this.shadowMapDebug = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, 
    this.autoScaleCubemaps = !0, this.renderPluginsPre = [], this.renderPluginsPost = [], 
    this.info = {
        memory: {
            programs: 0,
            geometries: 0,
            textures: 0
        },
        render: {
            calls: 0,
            vertices: 0,
            faces: 0,
            points: 0
        }
    };
    var P, Q, R, S, T, U = this, V = [], W = 0, X = null, Y = null, Z = -1, $ = null, _ = null, ab = 0, bb = 0, cb = -1, db = -1, eb = -1, fb = -1, gb = -1, hb = -1, ib = -1, jb = -1, kb = null, lb = null, mb = null, nb = null, ob = 0, pb = 0, qb = G.width, rb = G.height, sb = 0, tb = 0, ub = {}, vb = new THREE.Frustum(), wb = new THREE.Matrix4(), xb = new THREE.Matrix4(), yb = new THREE.Vector3(), zb = new THREE.Vector3(), Ab = !0, Bb = {
        ambient: [ 0, 0, 0 ],
        directional: {
            length: 0,
            colors: [],
            positions: []
        },
        point: {
            length: 0,
            colors: [],
            positions: [],
            distances: []
        },
        spot: {
            length: 0,
            colors: [],
            positions: [],
            distances: [],
            directions: [],
            anglesCos: [],
            exponents: []
        },
        hemi: {
            length: 0,
            skyColors: [],
            groundColors: [],
            positions: []
        }
    };
    try {
        var Cb = {
            alpha: I,
            premultipliedAlpha: J,
            antialias: K,
            stencil: L,
            preserveDrawingBuffer: M
        };
        if (P = G.getContext("webgl", Cb) || G.getContext("experimental-webgl", Cb), null === P) throw "Error creating WebGL context.";
    } catch (Db) {
        console.error(Db);
    }
    Q = P.getExtension("OES_texture_float"), P.getExtension("OES_texture_float_linear"), 
    R = P.getExtension("OES_standard_derivatives"), S = P.getExtension("EXT_texture_filter_anisotropic") || P.getExtension("MOZ_EXT_texture_filter_anisotropic") || P.getExtension("WEBKIT_EXT_texture_filter_anisotropic"), 
    T = P.getExtension("WEBGL_compressed_texture_s3tc") || P.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || P.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"), 
    Q || console.log("THREE.WebGLRenderer: Float textures not supported."), R || console.log("THREE.WebGLRenderer: Standard derivatives not supported."), 
    S || console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."), 
    T || console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."), 
    void 0 === P.getShaderPrecisionFormat && (P.getShaderPrecisionFormat = function() {
        return {
            rangeMin: 1,
            rangeMax: 1,
            precision: 1
        };
    }), P.clearColor(0, 0, 0, 1), P.clearDepth(1), P.clearStencil(0), P.enable(P.DEPTH_TEST), 
    P.depthFunc(P.LEQUAL), P.frontFace(P.CCW), P.cullFace(P.BACK), P.enable(P.CULL_FACE), 
    P.enable(P.BLEND), P.blendEquation(P.FUNC_ADD), P.blendFunc(P.SRC_ALPHA, P.ONE_MINUS_SRC_ALPHA), 
    P.viewport(ob, pb, qb, rb), P.clearColor(N.r, N.g, N.b, O), this.context = P;
    var Eb = P.getParameter(P.MAX_TEXTURE_IMAGE_UNITS), Fb = P.getParameter(P.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
    P.getParameter(P.MAX_TEXTURE_SIZE);
    var Gb = P.getParameter(P.MAX_CUBE_MAP_TEXTURE_SIZE), Hb = S ? P.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0, Ib = Fb > 0, Jb = Ib && Q;
    T && P.getParameter(P.COMPRESSED_TEXTURE_FORMATS);
    var Kb = P.getShaderPrecisionFormat(P.VERTEX_SHADER, P.HIGH_FLOAT), Lb = P.getShaderPrecisionFormat(P.VERTEX_SHADER, P.MEDIUM_FLOAT);
    P.getShaderPrecisionFormat(P.VERTEX_SHADER, P.LOW_FLOAT);
    var Mb = P.getShaderPrecisionFormat(P.FRAGMENT_SHADER, P.HIGH_FLOAT), Nb = P.getShaderPrecisionFormat(P.FRAGMENT_SHADER, P.MEDIUM_FLOAT);
    P.getShaderPrecisionFormat(P.FRAGMENT_SHADER, P.LOW_FLOAT), P.getShaderPrecisionFormat(P.VERTEX_SHADER, P.HIGH_INT), 
    P.getShaderPrecisionFormat(P.VERTEX_SHADER, P.MEDIUM_INT), P.getShaderPrecisionFormat(P.VERTEX_SHADER, P.LOW_INT), 
    P.getShaderPrecisionFormat(P.FRAGMENT_SHADER, P.HIGH_INT), P.getShaderPrecisionFormat(P.FRAGMENT_SHADER, P.MEDIUM_INT), 
    P.getShaderPrecisionFormat(P.FRAGMENT_SHADER, P.LOW_INT);
    var Ob = 0 < Kb.precision && 0 < Mb.precision, Pb = 0 < Lb.precision && 0 < Nb.precision;
    "highp" === H && !Ob && (Pb ? (H = "mediump", console.warn("WebGLRenderer: highp not supported, using mediump")) : (H = "lowp", 
    console.warn("WebGLRenderer: highp and mediump not supported, using lowp"))), "mediump" === H && !Pb && (H = "lowp", 
    console.warn("WebGLRenderer: mediump not supported, using lowp")), this.getContext = function() {
        return P;
    }, this.supportsVertexTextures = function() {
        return Ib;
    }, this.supportsFloatTextures = function() {
        return Q;
    }, this.supportsStandardDerivatives = function() {
        return R;
    }, this.supportsCompressedTextureS3TC = function() {
        return T;
    }, this.getMaxAnisotropy = function() {
        return Hb;
    }, this.getPrecision = function() {
        return H;
    }, this.setSize = function(a, b, c) {
        G.width = a * this.devicePixelRatio, G.height = b * this.devicePixelRatio, 1 !== this.devicePixelRatio && !1 !== c && (G.style.width = a + "px", 
        G.style.height = b + "px"), this.setViewport(0, 0, G.width, G.height);
    }, this.setViewport = function(a, b, c, d) {
        ob = void 0 !== a ? a : 0, pb = void 0 !== b ? b : 0, qb = void 0 !== c ? c : G.width, 
        rb = void 0 !== d ? d : G.height, P.viewport(ob, pb, qb, rb);
    }, this.setScissor = function(a, b, c, d) {
        P.scissor(a, b, c, d);
    }, this.enableScissorTest = function(a) {
        a ? P.enable(P.SCISSOR_TEST) : P.disable(P.SCISSOR_TEST);
    }, this.setClearColor = function(a, b) {
        N.set(a), O = void 0 !== b ? b : 1, P.clearColor(N.r, N.g, N.b, O);
    }, this.setClearColorHex = function(a, b) {
        console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."), 
        this.setClearColor(a, b);
    }, this.getClearColor = function() {
        return N;
    }, this.getClearAlpha = function() {
        return O;
    }, this.clear = function(a, b, c) {
        var d = 0;
        (void 0 === a || a) && (d |= P.COLOR_BUFFER_BIT), (void 0 === b || b) && (d |= P.DEPTH_BUFFER_BIT), 
        (void 0 === c || c) && (d |= P.STENCIL_BUFFER_BIT), P.clear(d);
    }, this.clearColor = function() {
        P.clear(P.COLOR_BUFFER_BIT);
    }, this.clearDepth = function() {
        P.clear(P.DEPTH_BUFFER_BIT);
    }, this.clearStencil = function() {
        P.clear(P.STENCIL_BUFFER_BIT);
    }, this.clearTarget = function(a, b, c, d) {
        this.setRenderTarget(a), this.clear(b, c, d);
    }, this.addPostPlugin = function(a) {
        a.init(this), this.renderPluginsPost.push(a);
    }, this.addPrePlugin = function(a) {
        a.init(this), this.renderPluginsPre.push(a);
    }, this.updateShadowMap = function(a, b) {
        X = null, Z = $ = jb = ib = eb = -1, Ab = !0, db = cb = -1, this.shadowMapPlugin.update(a, b);
    };
    var Qb = function(a) {
        if (a = a.target, a.removeEventListener("dispose", Qb), a.__webglInit = void 0, 
        a instanceof THREE.BufferGeometry) {
            var b, c = a.attributes;
            for (b in c) void 0 !== c[b].buffer && P.deleteBuffer(c[b].buffer);
            U.info.memory.geometries--;
        } else if (void 0 !== a.geometryGroups) for (c in a.geometryGroups) {
            if (b = a.geometryGroups[c], void 0 !== b.numMorphTargets) for (var d = 0, e = b.numMorphTargets; e > d; d++) P.deleteBuffer(b.__webglMorphTargetsBuffers[d]);
            if (void 0 !== b.numMorphNormals) for (d = 0, e = b.numMorphNormals; e > d; d++) P.deleteBuffer(b.__webglMorphNormalsBuffers[d]);
            Ub(b);
        } else Ub(a);
    }, Rb = function(a) {
        a = a.target, a.removeEventListener("dispose", Rb), a.image && a.image.__webglTextureCube ? P.deleteTexture(a.image.__webglTextureCube) : a.__webglInit && (a.__webglInit = !1, 
        P.deleteTexture(a.__webglTexture)), U.info.memory.textures--;
    }, Sb = function(a) {
        if (a = a.target, a.removeEventListener("dispose", Sb), a && a.__webglTexture) if (P.deleteTexture(a.__webglTexture), 
        a instanceof THREE.WebGLRenderTargetCube) for (var b = 0; 6 > b; b++) P.deleteFramebuffer(a.__webglFramebuffer[b]), 
        P.deleteRenderbuffer(a.__webglRenderbuffer[b]); else P.deleteFramebuffer(a.__webglFramebuffer), 
        P.deleteRenderbuffer(a.__webglRenderbuffer);
        U.info.memory.textures--;
    }, Tb = function(a) {
        a = a.target, a.removeEventListener("dispose", Tb), Vb(a);
    }, Ub = function(a) {
        if (void 0 !== a.__webglVertexBuffer && P.deleteBuffer(a.__webglVertexBuffer), void 0 !== a.__webglNormalBuffer && P.deleteBuffer(a.__webglNormalBuffer), 
        void 0 !== a.__webglTangentBuffer && P.deleteBuffer(a.__webglTangentBuffer), void 0 !== a.__webglColorBuffer && P.deleteBuffer(a.__webglColorBuffer), 
        void 0 !== a.__webglUVBuffer && P.deleteBuffer(a.__webglUVBuffer), void 0 !== a.__webglUV2Buffer && P.deleteBuffer(a.__webglUV2Buffer), 
        void 0 !== a.__webglSkinIndicesBuffer && P.deleteBuffer(a.__webglSkinIndicesBuffer), 
        void 0 !== a.__webglSkinWeightsBuffer && P.deleteBuffer(a.__webglSkinWeightsBuffer), 
        void 0 !== a.__webglFaceBuffer && P.deleteBuffer(a.__webglFaceBuffer), void 0 !== a.__webglLineBuffer && P.deleteBuffer(a.__webglLineBuffer), 
        void 0 !== a.__webglLineDistanceBuffer && P.deleteBuffer(a.__webglLineDistanceBuffer), 
        void 0 !== a.__webglCustomAttributesList) for (var b in a.__webglCustomAttributesList) P.deleteBuffer(a.__webglCustomAttributesList[b].buffer);
        U.info.memory.geometries--;
    }, Vb = function(a) {
        var b = a.program;
        if (void 0 !== b) {
            a.program = void 0;
            var c, d, e = !1, a = 0;
            for (c = V.length; c > a; a++) if (d = V[a], d.program === b) {
                d.usedTimes--, 0 === d.usedTimes && (e = !0);
                break;
            }
            if (!0 === e) {
                for (e = [], a = 0, c = V.length; c > a; a++) d = V[a], d.program !== b && e.push(d);
                V = e, P.deleteProgram(b), U.info.memory.programs--;
            }
        }
    };
    this.renderBufferImmediate = function(a, b, c) {
        if (a.hasPositions && !a.__webglVertexBuffer && (a.__webglVertexBuffer = P.createBuffer()), 
        a.hasNormals && !a.__webglNormalBuffer && (a.__webglNormalBuffer = P.createBuffer()), 
        a.hasUvs && !a.__webglUvBuffer && (a.__webglUvBuffer = P.createBuffer()), a.hasColors && !a.__webglColorBuffer && (a.__webglColorBuffer = P.createBuffer()), 
        a.hasPositions && (P.bindBuffer(P.ARRAY_BUFFER, a.__webglVertexBuffer), P.bufferData(P.ARRAY_BUFFER, a.positionArray, P.DYNAMIC_DRAW), 
        P.enableVertexAttribArray(b.attributes.position), P.vertexAttribPointer(b.attributes.position, 3, P.FLOAT, !1, 0, 0)), 
        a.hasNormals) {
            if (P.bindBuffer(P.ARRAY_BUFFER, a.__webglNormalBuffer), c.shading === THREE.FlatShading) {
                var d, e, f, g, h, i, j, k, l, m, n, o = 3 * a.count;
                for (n = 0; o > n; n += 9) m = a.normalArray, d = m[n], e = m[n + 1], f = m[n + 2], 
                g = m[n + 3], i = m[n + 4], k = m[n + 5], h = m[n + 6], j = m[n + 7], l = m[n + 8], 
                d = (d + g + h) / 3, e = (e + i + j) / 3, f = (f + k + l) / 3, m[n] = d, m[n + 1] = e, 
                m[n + 2] = f, m[n + 3] = d, m[n + 4] = e, m[n + 5] = f, m[n + 6] = d, m[n + 7] = e, 
                m[n + 8] = f;
            }
            P.bufferData(P.ARRAY_BUFFER, a.normalArray, P.DYNAMIC_DRAW), P.enableVertexAttribArray(b.attributes.normal), 
            P.vertexAttribPointer(b.attributes.normal, 3, P.FLOAT, !1, 0, 0);
        }
        a.hasUvs && c.map && (P.bindBuffer(P.ARRAY_BUFFER, a.__webglUvBuffer), P.bufferData(P.ARRAY_BUFFER, a.uvArray, P.DYNAMIC_DRAW), 
        P.enableVertexAttribArray(b.attributes.uv), P.vertexAttribPointer(b.attributes.uv, 2, P.FLOAT, !1, 0, 0)), 
        a.hasColors && c.vertexColors !== THREE.NoColors && (P.bindBuffer(P.ARRAY_BUFFER, a.__webglColorBuffer), 
        P.bufferData(P.ARRAY_BUFFER, a.colorArray, P.DYNAMIC_DRAW), P.enableVertexAttribArray(b.attributes.color), 
        P.vertexAttribPointer(b.attributes.color, 3, P.FLOAT, !1, 0, 0)), P.drawArrays(P.TRIANGLES, 0, a.count), 
        a.count = 0;
    }, this.renderBufferDirect = function(a, b, c, d, e, f) {
        if (!1 !== d.visible) {
            var i, j, k, l;
            if (i = u(a, b, c, d, f), b = i.attributes, a = e.attributes, c = !1, i = 16777215 * e.id + 2 * i.id + (d.wireframe ? 1 : 0), 
            i !== $ && ($ = i, c = !0), c && h(), f instanceof THREE.Mesh) if (f = a.index) {
                e = e.offsets, 1 < e.length && (c = !0);
                for (var m = 0, n = e.length; n > m; m++) {
                    var o = e[m].index;
                    if (c) {
                        for (j in b) k = b[j], i = a[j], k >= 0 && (i ? (l = i.itemSize, P.bindBuffer(P.ARRAY_BUFFER, i.buffer), 
                        g(k), P.vertexAttribPointer(k, l, P.FLOAT, !1, 0, 4 * o * l)) : d.defaultAttributeValues && (2 === d.defaultAttributeValues[j].length ? P.vertexAttrib2fv(k, d.defaultAttributeValues[j]) : 3 === d.defaultAttributeValues[j].length && P.vertexAttrib3fv(k, d.defaultAttributeValues[j])));
                        P.bindBuffer(P.ELEMENT_ARRAY_BUFFER, f.buffer);
                    }
                    P.drawElements(P.TRIANGLES, e[m].count, P.UNSIGNED_SHORT, 2 * e[m].start), U.info.render.calls++, 
                    U.info.render.vertices += e[m].count, U.info.render.faces += e[m].count / 3;
                }
            } else {
                if (c) for (j in b) "index" !== j && (k = b[j], i = a[j], k >= 0 && (i ? (l = i.itemSize, 
                P.bindBuffer(P.ARRAY_BUFFER, i.buffer), g(k), P.vertexAttribPointer(k, l, P.FLOAT, !1, 0, 0)) : d.defaultAttributeValues && d.defaultAttributeValues[j] && (2 === d.defaultAttributeValues[j].length ? P.vertexAttrib2fv(k, d.defaultAttributeValues[j]) : 3 === d.defaultAttributeValues[j].length && P.vertexAttrib3fv(k, d.defaultAttributeValues[j]))));
                d = e.attributes.position, P.drawArrays(P.TRIANGLES, 0, d.numItems / 3), U.info.render.calls++, 
                U.info.render.vertices += d.numItems / 3, U.info.render.faces += d.numItems / 3 / 3;
            } else if (f instanceof THREE.ParticleSystem) {
                if (c) {
                    for (j in b) k = b[j], i = a[j], k >= 0 && (i ? (l = i.itemSize, P.bindBuffer(P.ARRAY_BUFFER, i.buffer), 
                    g(k), P.vertexAttribPointer(k, l, P.FLOAT, !1, 0, 0)) : d.defaultAttributeValues && d.defaultAttributeValues[j] && (2 === d.defaultAttributeValues[j].length ? P.vertexAttrib2fv(k, d.defaultAttributeValues[j]) : 3 === d.defaultAttributeValues[j].length && P.vertexAttrib3fv(k, d.defaultAttributeValues[j])));
                    d = a.position, P.drawArrays(P.POINTS, 0, d.numItems / 3), U.info.render.calls++, 
                    U.info.render.points += d.numItems / 3;
                }
            } else if (f instanceof THREE.Line && c) {
                for (j in b) k = b[j], i = a[j], k >= 0 && (i ? (l = i.itemSize, P.bindBuffer(P.ARRAY_BUFFER, i.buffer), 
                g(k), P.vertexAttribPointer(k, l, P.FLOAT, !1, 0, 0)) : d.defaultAttributeValues && d.defaultAttributeValues[j] && (2 === d.defaultAttributeValues[j].length ? P.vertexAttrib2fv(k, d.defaultAttributeValues[j]) : 3 === d.defaultAttributeValues[j].length && P.vertexAttrib3fv(k, d.defaultAttributeValues[j])));
                j = f.type === THREE.LineStrip ? P.LINE_STRIP : P.LINES, y(d.linewidth), d = a.position, 
                P.drawArrays(j, 0, d.numItems / 3), U.info.render.calls++, U.info.render.points += d.numItems;
            }
        }
    }, this.renderBuffer = function(a, b, c, d, e, f) {
        if (!1 !== d.visible) {
            var i, k, c = u(a, b, c, d, f), a = c.attributes, b = !1, c = 16777215 * e.id + 2 * c.id + (d.wireframe ? 1 : 0);
            if (c !== $ && ($ = c, b = !0), b && h(), !d.morphTargets && 0 <= a.position) b && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglVertexBuffer), 
            g(a.position), P.vertexAttribPointer(a.position, 3, P.FLOAT, !1, 0, 0)); else if (f.morphTargetBase) {
                if (c = d.program.attributes, -1 !== f.morphTargetBase && 0 <= c.position ? (P.bindBuffer(P.ARRAY_BUFFER, e.__webglMorphTargetsBuffers[f.morphTargetBase]), 
                g(c.position), P.vertexAttribPointer(c.position, 3, P.FLOAT, !1, 0, 0)) : 0 <= c.position && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglVertexBuffer), 
                g(c.position), P.vertexAttribPointer(c.position, 3, P.FLOAT, !1, 0, 0)), f.morphTargetForcedOrder.length) {
                    var l = 0;
                    for (k = f.morphTargetForcedOrder, i = f.morphTargetInfluences; l < d.numSupportedMorphTargets && l < k.length; ) 0 <= c["morphTarget" + l] && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglMorphTargetsBuffers[k[l]]), 
                    g(c["morphTarget" + l]), P.vertexAttribPointer(c["morphTarget" + l], 3, P.FLOAT, !1, 0, 0)), 
                    0 <= c["morphNormal" + l] && d.morphNormals && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglMorphNormalsBuffers[k[l]]), 
                    g(c["morphNormal" + l]), P.vertexAttribPointer(c["morphNormal" + l], 3, P.FLOAT, !1, 0, 0)), 
                    f.__webglMorphTargetInfluences[l] = i[k[l]], l++;
                } else {
                    k = [], i = f.morphTargetInfluences;
                    var m, n = i.length;
                    for (m = 0; n > m; m++) l = i[m], l > 0 && k.push([ l, m ]);
                    for (k.length > d.numSupportedMorphTargets ? (k.sort(j), k.length = d.numSupportedMorphTargets) : k.length > d.numSupportedMorphNormals ? k.sort(j) : 0 === k.length && k.push([ 0, 0 ]), 
                    l = 0; l < d.numSupportedMorphTargets; ) k[l] ? (m = k[l][1], 0 <= c["morphTarget" + l] && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglMorphTargetsBuffers[m]), 
                    g(c["morphTarget" + l]), P.vertexAttribPointer(c["morphTarget" + l], 3, P.FLOAT, !1, 0, 0)), 
                    0 <= c["morphNormal" + l] && d.morphNormals && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglMorphNormalsBuffers[m]), 
                    g(c["morphNormal" + l]), P.vertexAttribPointer(c["morphNormal" + l], 3, P.FLOAT, !1, 0, 0)), 
                    f.__webglMorphTargetInfluences[l] = i[m]) : f.__webglMorphTargetInfluences[l] = 0, 
                    l++;
                }
                null !== d.program.uniforms.morphTargetInfluences && P.uniform1fv(d.program.uniforms.morphTargetInfluences, f.__webglMorphTargetInfluences);
            }
            if (b) {
                if (e.__webglCustomAttributesList) for (i = 0, k = e.__webglCustomAttributesList.length; k > i; i++) c = e.__webglCustomAttributesList[i], 
                0 <= a[c.buffer.belongsToAttribute] && (P.bindBuffer(P.ARRAY_BUFFER, c.buffer), 
                g(a[c.buffer.belongsToAttribute]), P.vertexAttribPointer(a[c.buffer.belongsToAttribute], c.size, P.FLOAT, !1, 0, 0));
                0 <= a.color && (0 < f.geometry.colors.length || 0 < f.geometry.faces.length ? (P.bindBuffer(P.ARRAY_BUFFER, e.__webglColorBuffer), 
                g(a.color), P.vertexAttribPointer(a.color, 3, P.FLOAT, !1, 0, 0)) : d.defaultAttributeValues && P.vertexAttrib3fv(a.color, d.defaultAttributeValues.color)), 
                0 <= a.normal && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglNormalBuffer), g(a.normal), 
                P.vertexAttribPointer(a.normal, 3, P.FLOAT, !1, 0, 0)), 0 <= a.tangent && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglTangentBuffer), 
                g(a.tangent), P.vertexAttribPointer(a.tangent, 4, P.FLOAT, !1, 0, 0)), 0 <= a.uv && (f.geometry.faceVertexUvs[0] ? (P.bindBuffer(P.ARRAY_BUFFER, e.__webglUVBuffer), 
                g(a.uv), P.vertexAttribPointer(a.uv, 2, P.FLOAT, !1, 0, 0)) : d.defaultAttributeValues && P.vertexAttrib2fv(a.uv, d.defaultAttributeValues.uv)), 
                0 <= a.uv2 && (f.geometry.faceVertexUvs[1] ? (P.bindBuffer(P.ARRAY_BUFFER, e.__webglUV2Buffer), 
                g(a.uv2), P.vertexAttribPointer(a.uv2, 2, P.FLOAT, !1, 0, 0)) : d.defaultAttributeValues && P.vertexAttrib2fv(a.uv2, d.defaultAttributeValues.uv2)), 
                d.skinning && 0 <= a.skinIndex && 0 <= a.skinWeight && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglSkinIndicesBuffer), 
                g(a.skinIndex), P.vertexAttribPointer(a.skinIndex, 4, P.FLOAT, !1, 0, 0), P.bindBuffer(P.ARRAY_BUFFER, e.__webglSkinWeightsBuffer), 
                g(a.skinWeight), P.vertexAttribPointer(a.skinWeight, 4, P.FLOAT, !1, 0, 0)), 0 <= a.lineDistance && (P.bindBuffer(P.ARRAY_BUFFER, e.__webglLineDistanceBuffer), 
                g(a.lineDistance), P.vertexAttribPointer(a.lineDistance, 1, P.FLOAT, !1, 0, 0));
            }
            f instanceof THREE.Mesh ? (d.wireframe ? (y(d.wireframeLinewidth), b && P.bindBuffer(P.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer), 
            P.drawElements(P.LINES, e.__webglLineCount, P.UNSIGNED_SHORT, 0)) : (b && P.bindBuffer(P.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer), 
            P.drawElements(P.TRIANGLES, e.__webglFaceCount, P.UNSIGNED_SHORT, 0)), U.info.render.calls++, 
            U.info.render.vertices += e.__webglFaceCount, U.info.render.faces += e.__webglFaceCount / 3) : f instanceof THREE.Line ? (f = f.type === THREE.LineStrip ? P.LINE_STRIP : P.LINES, 
            y(d.linewidth), P.drawArrays(f, 0, e.__webglLineCount), U.info.render.calls++) : f instanceof THREE.ParticleSystem && (P.drawArrays(P.POINTS, 0, e.__webglParticleCount), 
            U.info.render.calls++, U.info.render.points += e.__webglParticleCount);
        }
    }, this.render = function(a, b, c, d) {
        if (!1 == b instanceof THREE.Camera) console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."); else {
            var e, f, g, h, j = a.__lights, n = a.fog;
            for (Z = -1, Ab = !0, !0 === a.autoUpdate && a.updateMatrixWorld(), void 0 === b.parent && b.updateMatrixWorld(), 
            b.matrixWorldInverse.getInverse(b.matrixWorld), wb.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse), 
            vb.setFromMatrix(wb), this.autoUpdateObjects && this.initWebGLObjects(a), k(this.renderPluginsPre, a, b), 
            U.info.render.calls = 0, U.info.render.vertices = 0, U.info.render.faces = 0, U.info.render.points = 0, 
            this.setRenderTarget(c), (this.autoClear || d) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil), 
            h = a.__webglObjects, d = 0, e = h.length; e > d; d++) if (f = h[d], g = f.object, 
            f.id = d, f.render = !1, g.visible && (!(g instanceof THREE.Mesh || g instanceof THREE.ParticleSystem) || !g.frustumCulled || vb.intersectsObject(g))) {
                var o = g;
                o._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse, o.matrixWorld), o._normalMatrix.getNormalMatrix(o._modelViewMatrix);
                var o = f, p = o.buffer, q = void 0, r = q = void 0, r = o.object.material;
                r instanceof THREE.MeshFaceMaterial ? (q = p.materialIndex, q = r.materials[q], 
                q.transparent ? (o.transparent = q, o.opaque = null) : (o.opaque = q, o.transparent = null)) : (q = r) && (q.transparent ? (o.transparent = q, 
                o.opaque = null) : (o.opaque = q, o.transparent = null)), f.render = !0, !0 === this.sortObjects && (null !== g.renderDepth ? f.z = g.renderDepth : (yb.setFromMatrixPosition(g.matrixWorld), 
                yb.applyProjection(wb), f.z = yb.z));
            }
            for (this.sortObjects && h.sort(i), h = a.__webglObjectsImmediate, d = 0, e = h.length; e > d; d++) f = h[d], 
            g = f.object, g.visible && (g._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse, g.matrixWorld), 
            g._normalMatrix.getNormalMatrix(g._modelViewMatrix), g = f.object.material, g.transparent ? (f.transparent = g, 
            f.opaque = null) : (f.opaque = g, f.transparent = null));
            a.overrideMaterial ? (d = a.overrideMaterial, this.setBlending(d.blending, d.blendEquation, d.blendSrc, d.blendDst), 
            this.setDepthTest(d.depthTest), this.setDepthWrite(d.depthWrite), z(d.polygonOffset, d.polygonOffsetFactor, d.polygonOffsetUnits), 
            l(a.__webglObjects, !1, "", b, j, n, !0, d), m(a.__webglObjectsImmediate, "", b, j, n, !1, d)) : (d = null, 
            this.setBlending(THREE.NoBlending), l(a.__webglObjects, !0, "opaque", b, j, n, !1, d), 
            m(a.__webglObjectsImmediate, "opaque", b, j, n, !1, d), l(a.__webglObjects, !1, "transparent", b, j, n, !0, d), 
            m(a.__webglObjectsImmediate, "transparent", b, j, n, !0, d)), k(this.renderPluginsPost, a, b), 
            c && c.generateMipmaps && c.minFilter !== THREE.NearestFilter && c.minFilter !== THREE.LinearFilter && (c instanceof THREE.WebGLRenderTargetCube ? (P.bindTexture(P.TEXTURE_CUBE_MAP, c.__webglTexture), 
            P.generateMipmap(P.TEXTURE_CUBE_MAP), P.bindTexture(P.TEXTURE_CUBE_MAP, null)) : (P.bindTexture(P.TEXTURE_2D, c.__webglTexture), 
            P.generateMipmap(P.TEXTURE_2D), P.bindTexture(P.TEXTURE_2D, null))), this.setDepthTest(!0), 
            this.setDepthWrite(!0);
        }
    }, this.renderImmediateObject = function(a, b, c, d, e) {
        var f = u(a, b, c, d, e);
        $ = -1, U.setMaterialFaces(d), e.immediateRenderCallback ? e.immediateRenderCallback(f, P, vb) : e.render(function(a) {
            U.renderBufferImmediate(a, f, d);
        });
    }, this.initWebGLObjects = function(a) {
        for (a.__webglObjects || (a.__webglObjects = [], a.__webglObjectsImmediate = [], 
        a.__webglSprites = [], a.__webglFlares = []); a.__objectsAdded.length; ) n(a.__objectsAdded[0], a), 
        a.__objectsAdded.splice(0, 1);
        for (;a.__objectsRemoved.length; ) r(a.__objectsRemoved[0], a), a.__objectsRemoved.splice(0, 1);
        for (var b = 0, g = a.__webglObjects.length; g > b; b++) {
            var h = a.__webglObjects[b].object;
            void 0 === h.__webglInit && (void 0 !== h.__webglActive && r(h, a), n(h, a));
            var i = h, k = i.geometry, l = void 0, m = void 0, o = void 0;
            if (k instanceof THREE.BufferGeometry) {
                var s = P.DYNAMIC_DRAW, t = !k.dynamic, u = k.attributes, v = void 0, w = void 0;
                for (v in u) w = u[v], w.needsUpdate && ("index" === v ? (P.bindBuffer(P.ELEMENT_ARRAY_BUFFER, w.buffer), 
                P.bufferData(P.ELEMENT_ARRAY_BUFFER, w.array, s)) : (P.bindBuffer(P.ARRAY_BUFFER, w.buffer), 
                P.bufferData(P.ARRAY_BUFFER, w.array, s)), w.needsUpdate = !1), t && !w.dynamic && (w.array = null);
            } else if (i instanceof THREE.Mesh) {
                for (var x = 0, y = k.geometryGroupsList.length; y > x; x++) if (l = k.geometryGroupsList[x], 
                o = d(i, l), k.buffersNeedUpdate && c(l, i), m = o.attributes && p(o), k.verticesNeedUpdate || k.morphTargetsNeedUpdate || k.elementsNeedUpdate || k.uvsNeedUpdate || k.normalsNeedUpdate || k.colorsNeedUpdate || k.tangentsNeedUpdate || m) {
                    var z = l, A = i, B = P.DYNAMIC_DRAW, C = !k.dynamic, D = o;
                    if (z.__inittedArrays) {
                        var E = e(D), F = D.vertexColors ? D.vertexColors : !1, G = f(D), H = E === THREE.SmoothShading, I = void 0, J = void 0, K = void 0, L = void 0, M = void 0, N = void 0, O = void 0, Q = void 0, R = void 0, S = void 0, T = void 0, U = void 0, V = void 0, W = void 0, X = void 0, Y = void 0, Z = void 0, $ = void 0, _ = void 0, ab = void 0, bb = void 0, cb = void 0, db = void 0, eb = void 0, fb = void 0, gb = void 0, hb = void 0, ib = void 0, jb = void 0, kb = void 0, lb = void 0, mb = void 0, nb = void 0, ob = void 0, pb = void 0, qb = void 0, rb = void 0, sb = void 0, tb = void 0, ub = void 0, vb = 0, zb = 0, Ab = 0, Bb = 0, Cb = 0, Db = 0, Eb = 0, Fb = 0, Gb = 0, Hb = 0, Ib = 0, Jb = 0, Kb = void 0, Lb = z.__vertexArray, Mb = z.__uvArray, Nb = z.__uv2Array, Ob = z.__normalArray, Pb = z.__tangentArray, Qb = z.__colorArray, Rb = z.__skinIndexArray, Sb = z.__skinWeightArray, Tb = z.__morphTargetsArrays, Ub = z.__morphNormalsArrays, Vb = z.__webglCustomAttributesList, Wb = void 0, Xb = z.__faceArray, Yb = z.__lineArray, Zb = A.geometry, $b = Zb.elementsNeedUpdate, _b = Zb.uvsNeedUpdate, ac = Zb.normalsNeedUpdate, bc = Zb.tangentsNeedUpdate, cc = Zb.colorsNeedUpdate, dc = Zb.morphTargetsNeedUpdate, ec = Zb.vertices, fc = z.faces3, gc = Zb.faces, hc = Zb.faceVertexUvs[0], ic = Zb.faceVertexUvs[1], jc = Zb.skinIndices, kc = Zb.skinWeights, lc = Zb.morphTargets, mc = Zb.morphNormals;
                        if (Zb.verticesNeedUpdate) {
                            for (I = 0, J = fc.length; J > I; I++) L = gc[fc[I]], U = ec[L.a], V = ec[L.b], 
                            W = ec[L.c], Lb[zb] = U.x, Lb[zb + 1] = U.y, Lb[zb + 2] = U.z, Lb[zb + 3] = V.x, 
                            Lb[zb + 4] = V.y, Lb[zb + 5] = V.z, Lb[zb + 6] = W.x, Lb[zb + 7] = W.y, Lb[zb + 8] = W.z, 
                            zb += 9;
                            P.bindBuffer(P.ARRAY_BUFFER, z.__webglVertexBuffer), P.bufferData(P.ARRAY_BUFFER, Lb, B);
                        }
                        if (dc) for (pb = 0, qb = lc.length; qb > pb; pb++) {
                            for (I = Ib = 0, J = fc.length; J > I; I++) tb = fc[I], L = gc[tb], U = lc[pb].vertices[L.a], 
                            V = lc[pb].vertices[L.b], W = lc[pb].vertices[L.c], rb = Tb[pb], rb[Ib] = U.x, rb[Ib + 1] = U.y, 
                            rb[Ib + 2] = U.z, rb[Ib + 3] = V.x, rb[Ib + 4] = V.y, rb[Ib + 5] = V.z, rb[Ib + 6] = W.x, 
                            rb[Ib + 7] = W.y, rb[Ib + 8] = W.z, D.morphNormals && (H ? (ub = mc[pb].vertexNormals[tb], 
                            $ = ub.a, _ = ub.b, ab = ub.c) : ab = _ = $ = mc[pb].faceNormals[tb], sb = Ub[pb], 
                            sb[Ib] = $.x, sb[Ib + 1] = $.y, sb[Ib + 2] = $.z, sb[Ib + 3] = _.x, sb[Ib + 4] = _.y, 
                            sb[Ib + 5] = _.z, sb[Ib + 6] = ab.x, sb[Ib + 7] = ab.y, sb[Ib + 8] = ab.z), Ib += 9;
                            P.bindBuffer(P.ARRAY_BUFFER, z.__webglMorphTargetsBuffers[pb]), P.bufferData(P.ARRAY_BUFFER, Tb[pb], B), 
                            D.morphNormals && (P.bindBuffer(P.ARRAY_BUFFER, z.__webglMorphNormalsBuffers[pb]), 
                            P.bufferData(P.ARRAY_BUFFER, Ub[pb], B));
                        }
                        if (kc.length) {
                            for (I = 0, J = fc.length; J > I; I++) L = gc[fc[I]], eb = kc[L.a], fb = kc[L.b], 
                            gb = kc[L.c], Sb[Hb] = eb.x, Sb[Hb + 1] = eb.y, Sb[Hb + 2] = eb.z, Sb[Hb + 3] = eb.w, 
                            Sb[Hb + 4] = fb.x, Sb[Hb + 5] = fb.y, Sb[Hb + 6] = fb.z, Sb[Hb + 7] = fb.w, Sb[Hb + 8] = gb.x, 
                            Sb[Hb + 9] = gb.y, Sb[Hb + 10] = gb.z, Sb[Hb + 11] = gb.w, hb = jc[L.a], ib = jc[L.b], 
                            jb = jc[L.c], Rb[Hb] = hb.x, Rb[Hb + 1] = hb.y, Rb[Hb + 2] = hb.z, Rb[Hb + 3] = hb.w, 
                            Rb[Hb + 4] = ib.x, Rb[Hb + 5] = ib.y, Rb[Hb + 6] = ib.z, Rb[Hb + 7] = ib.w, Rb[Hb + 8] = jb.x, 
                            Rb[Hb + 9] = jb.y, Rb[Hb + 10] = jb.z, Rb[Hb + 11] = jb.w, Hb += 12;
                            Hb > 0 && (P.bindBuffer(P.ARRAY_BUFFER, z.__webglSkinIndicesBuffer), P.bufferData(P.ARRAY_BUFFER, Rb, B), 
                            P.bindBuffer(P.ARRAY_BUFFER, z.__webglSkinWeightsBuffer), P.bufferData(P.ARRAY_BUFFER, Sb, B));
                        }
                        if (cc && F) {
                            for (I = 0, J = fc.length; J > I; I++) L = gc[fc[I]], O = L.vertexColors, Q = L.color, 
                            3 === O.length && F === THREE.VertexColors ? (bb = O[0], cb = O[1], db = O[2]) : db = cb = bb = Q, 
                            Qb[Gb] = bb.r, Qb[Gb + 1] = bb.g, Qb[Gb + 2] = bb.b, Qb[Gb + 3] = cb.r, Qb[Gb + 4] = cb.g, 
                            Qb[Gb + 5] = cb.b, Qb[Gb + 6] = db.r, Qb[Gb + 7] = db.g, Qb[Gb + 8] = db.b, Gb += 9;
                            Gb > 0 && (P.bindBuffer(P.ARRAY_BUFFER, z.__webglColorBuffer), P.bufferData(P.ARRAY_BUFFER, Qb, B));
                        }
                        if (bc && Zb.hasTangents) {
                            for (I = 0, J = fc.length; J > I; I++) L = gc[fc[I]], R = L.vertexTangents, X = R[0], 
                            Y = R[1], Z = R[2], Pb[Eb] = X.x, Pb[Eb + 1] = X.y, Pb[Eb + 2] = X.z, Pb[Eb + 3] = X.w, 
                            Pb[Eb + 4] = Y.x, Pb[Eb + 5] = Y.y, Pb[Eb + 6] = Y.z, Pb[Eb + 7] = Y.w, Pb[Eb + 8] = Z.x, 
                            Pb[Eb + 9] = Z.y, Pb[Eb + 10] = Z.z, Pb[Eb + 11] = Z.w, Eb += 12;
                            P.bindBuffer(P.ARRAY_BUFFER, z.__webglTangentBuffer), P.bufferData(P.ARRAY_BUFFER, Pb, B);
                        }
                        if (ac && E) {
                            for (I = 0, J = fc.length; J > I; I++) if (L = gc[fc[I]], M = L.vertexNormals, N = L.normal, 
                            3 === M.length && H) for (kb = 0; 3 > kb; kb++) mb = M[kb], Ob[Db] = mb.x, Ob[Db + 1] = mb.y, 
                            Ob[Db + 2] = mb.z, Db += 3; else for (kb = 0; 3 > kb; kb++) Ob[Db] = N.x, Ob[Db + 1] = N.y, 
                            Ob[Db + 2] = N.z, Db += 3;
                            P.bindBuffer(P.ARRAY_BUFFER, z.__webglNormalBuffer), P.bufferData(P.ARRAY_BUFFER, Ob, B);
                        }
                        if (_b && hc && G) {
                            for (I = 0, J = fc.length; J > I; I++) if (K = fc[I], S = hc[K], void 0 !== S) for (kb = 0; 3 > kb; kb++) nb = S[kb], 
                            Mb[Ab] = nb.x, Mb[Ab + 1] = nb.y, Ab += 2;
                            Ab > 0 && (P.bindBuffer(P.ARRAY_BUFFER, z.__webglUVBuffer), P.bufferData(P.ARRAY_BUFFER, Mb, B));
                        }
                        if (_b && ic && G) {
                            for (I = 0, J = fc.length; J > I; I++) if (K = fc[I], T = ic[K], void 0 !== T) for (kb = 0; 3 > kb; kb++) ob = T[kb], 
                            Nb[Bb] = ob.x, Nb[Bb + 1] = ob.y, Bb += 2;
                            Bb > 0 && (P.bindBuffer(P.ARRAY_BUFFER, z.__webglUV2Buffer), P.bufferData(P.ARRAY_BUFFER, Nb, B));
                        }
                        if ($b) {
                            for (I = 0, J = fc.length; J > I; I++) Xb[Cb] = vb, Xb[Cb + 1] = vb + 1, Xb[Cb + 2] = vb + 2, 
                            Cb += 3, Yb[Fb] = vb, Yb[Fb + 1] = vb + 1, Yb[Fb + 2] = vb, Yb[Fb + 3] = vb + 2, 
                            Yb[Fb + 4] = vb + 1, Yb[Fb + 5] = vb + 2, Fb += 6, vb += 3;
                            P.bindBuffer(P.ELEMENT_ARRAY_BUFFER, z.__webglFaceBuffer), P.bufferData(P.ELEMENT_ARRAY_BUFFER, Xb, B), 
                            P.bindBuffer(P.ELEMENT_ARRAY_BUFFER, z.__webglLineBuffer), P.bufferData(P.ELEMENT_ARRAY_BUFFER, Yb, B);
                        }
                        if (Vb) for (kb = 0, lb = Vb.length; lb > kb; kb++) if (Wb = Vb[kb], Wb.__original.needsUpdate) {
                            if (Jb = 0, 1 === Wb.size) {
                                if (void 0 === Wb.boundTo || "vertices" === Wb.boundTo) for (I = 0, J = fc.length; J > I; I++) L = gc[fc[I]], 
                                Wb.array[Jb] = Wb.value[L.a], Wb.array[Jb + 1] = Wb.value[L.b], Wb.array[Jb + 2] = Wb.value[L.c], 
                                Jb += 3; else if ("faces" === Wb.boundTo) for (I = 0, J = fc.length; J > I; I++) Kb = Wb.value[fc[I]], 
                                Wb.array[Jb] = Kb, Wb.array[Jb + 1] = Kb, Wb.array[Jb + 2] = Kb, Jb += 3;
                            } else if (2 === Wb.size) {
                                if (void 0 === Wb.boundTo || "vertices" === Wb.boundTo) for (I = 0, J = fc.length; J > I; I++) L = gc[fc[I]], 
                                U = Wb.value[L.a], V = Wb.value[L.b], W = Wb.value[L.c], Wb.array[Jb] = U.x, Wb.array[Jb + 1] = U.y, 
                                Wb.array[Jb + 2] = V.x, Wb.array[Jb + 3] = V.y, Wb.array[Jb + 4] = W.x, Wb.array[Jb + 5] = W.y, 
                                Jb += 6; else if ("faces" === Wb.boundTo) for (I = 0, J = fc.length; J > I; I++) W = V = U = Kb = Wb.value[fc[I]], 
                                Wb.array[Jb] = U.x, Wb.array[Jb + 1] = U.y, Wb.array[Jb + 2] = V.x, Wb.array[Jb + 3] = V.y, 
                                Wb.array[Jb + 4] = W.x, Wb.array[Jb + 5] = W.y, Jb += 6;
                            } else if (3 === Wb.size) {
                                var nc;
                                if (nc = "c" === Wb.type ? [ "r", "g", "b" ] : [ "x", "y", "z" ], void 0 === Wb.boundTo || "vertices" === Wb.boundTo) for (I = 0, 
                                J = fc.length; J > I; I++) L = gc[fc[I]], U = Wb.value[L.a], V = Wb.value[L.b], 
                                W = Wb.value[L.c], Wb.array[Jb] = U[nc[0]], Wb.array[Jb + 1] = U[nc[1]], Wb.array[Jb + 2] = U[nc[2]], 
                                Wb.array[Jb + 3] = V[nc[0]], Wb.array[Jb + 4] = V[nc[1]], Wb.array[Jb + 5] = V[nc[2]], 
                                Wb.array[Jb + 6] = W[nc[0]], Wb.array[Jb + 7] = W[nc[1]], Wb.array[Jb + 8] = W[nc[2]], 
                                Jb += 9; else if ("faces" === Wb.boundTo) for (I = 0, J = fc.length; J > I; I++) W = V = U = Kb = Wb.value[fc[I]], 
                                Wb.array[Jb] = U[nc[0]], Wb.array[Jb + 1] = U[nc[1]], Wb.array[Jb + 2] = U[nc[2]], 
                                Wb.array[Jb + 3] = V[nc[0]], Wb.array[Jb + 4] = V[nc[1]], Wb.array[Jb + 5] = V[nc[2]], 
                                Wb.array[Jb + 6] = W[nc[0]], Wb.array[Jb + 7] = W[nc[1]], Wb.array[Jb + 8] = W[nc[2]], 
                                Jb += 9; else if ("faceVertices" === Wb.boundTo) for (I = 0, J = fc.length; J > I; I++) Kb = Wb.value[fc[I]], 
                                U = Kb[0], V = Kb[1], W = Kb[2], Wb.array[Jb] = U[nc[0]], Wb.array[Jb + 1] = U[nc[1]], 
                                Wb.array[Jb + 2] = U[nc[2]], Wb.array[Jb + 3] = V[nc[0]], Wb.array[Jb + 4] = V[nc[1]], 
                                Wb.array[Jb + 5] = V[nc[2]], Wb.array[Jb + 6] = W[nc[0]], Wb.array[Jb + 7] = W[nc[1]], 
                                Wb.array[Jb + 8] = W[nc[2]], Jb += 9;
                            } else if (4 === Wb.size) if (void 0 === Wb.boundTo || "vertices" === Wb.boundTo) for (I = 0, 
                            J = fc.length; J > I; I++) L = gc[fc[I]], U = Wb.value[L.a], V = Wb.value[L.b], 
                            W = Wb.value[L.c], Wb.array[Jb] = U.x, Wb.array[Jb + 1] = U.y, Wb.array[Jb + 2] = U.z, 
                            Wb.array[Jb + 3] = U.w, Wb.array[Jb + 4] = V.x, Wb.array[Jb + 5] = V.y, Wb.array[Jb + 6] = V.z, 
                            Wb.array[Jb + 7] = V.w, Wb.array[Jb + 8] = W.x, Wb.array[Jb + 9] = W.y, Wb.array[Jb + 10] = W.z, 
                            Wb.array[Jb + 11] = W.w, Jb += 12; else if ("faces" === Wb.boundTo) for (I = 0, 
                            J = fc.length; J > I; I++) W = V = U = Kb = Wb.value[fc[I]], Wb.array[Jb] = U.x, 
                            Wb.array[Jb + 1] = U.y, Wb.array[Jb + 2] = U.z, Wb.array[Jb + 3] = U.w, Wb.array[Jb + 4] = V.x, 
                            Wb.array[Jb + 5] = V.y, Wb.array[Jb + 6] = V.z, Wb.array[Jb + 7] = V.w, Wb.array[Jb + 8] = W.x, 
                            Wb.array[Jb + 9] = W.y, Wb.array[Jb + 10] = W.z, Wb.array[Jb + 11] = W.w, Jb += 12; else if ("faceVertices" === Wb.boundTo) for (I = 0, 
                            J = fc.length; J > I; I++) Kb = Wb.value[fc[I]], U = Kb[0], V = Kb[1], W = Kb[2], 
                            Wb.array[Jb] = U.x, Wb.array[Jb + 1] = U.y, Wb.array[Jb + 2] = U.z, Wb.array[Jb + 3] = U.w, 
                            Wb.array[Jb + 4] = V.x, Wb.array[Jb + 5] = V.y, Wb.array[Jb + 6] = V.z, Wb.array[Jb + 7] = V.w, 
                            Wb.array[Jb + 8] = W.x, Wb.array[Jb + 9] = W.y, Wb.array[Jb + 10] = W.z, Wb.array[Jb + 11] = W.w, 
                            Jb += 12;
                            P.bindBuffer(P.ARRAY_BUFFER, Wb.buffer), P.bufferData(P.ARRAY_BUFFER, Wb.array, B);
                        }
                        C && (delete z.__inittedArrays, delete z.__colorArray, delete z.__normalArray, delete z.__tangentArray, 
                        delete z.__uvArray, delete z.__uv2Array, delete z.__faceArray, delete z.__vertexArray, 
                        delete z.__lineArray, delete z.__skinIndexArray, delete z.__skinWeightArray);
                    }
                }
                k.verticesNeedUpdate = !1, k.morphTargetsNeedUpdate = !1, k.elementsNeedUpdate = !1, 
                k.uvsNeedUpdate = !1, k.normalsNeedUpdate = !1, k.colorsNeedUpdate = !1, k.tangentsNeedUpdate = !1, 
                k.buffersNeedUpdate = !1, o.attributes && q(o);
            } else if (i instanceof THREE.Line) {
                if (o = d(i, k), m = o.attributes && p(o), k.verticesNeedUpdate || k.colorsNeedUpdate || k.lineDistancesNeedUpdate || m) {
                    var oc = k, pc = P.DYNAMIC_DRAW, qc = void 0, rc = void 0, sc = void 0, tc = void 0, uc = void 0, vc = void 0, wc = oc.vertices, xc = oc.colors, yc = oc.lineDistances, zc = wc.length, Ac = xc.length, Bc = yc.length, Cc = oc.__vertexArray, Dc = oc.__colorArray, Ec = oc.__lineDistanceArray, Fc = oc.colorsNeedUpdate, Gc = oc.lineDistancesNeedUpdate, Hc = oc.__webglCustomAttributesList, Ic = void 0, Jc = void 0, Kc = void 0, Lc = void 0, Mc = void 0, Nc = void 0;
                    if (oc.verticesNeedUpdate) {
                        for (qc = 0; zc > qc; qc++) tc = wc[qc], uc = 3 * qc, Cc[uc] = tc.x, Cc[uc + 1] = tc.y, 
                        Cc[uc + 2] = tc.z;
                        P.bindBuffer(P.ARRAY_BUFFER, oc.__webglVertexBuffer), P.bufferData(P.ARRAY_BUFFER, Cc, pc);
                    }
                    if (Fc) {
                        for (rc = 0; Ac > rc; rc++) vc = xc[rc], uc = 3 * rc, Dc[uc] = vc.r, Dc[uc + 1] = vc.g, 
                        Dc[uc + 2] = vc.b;
                        P.bindBuffer(P.ARRAY_BUFFER, oc.__webglColorBuffer), P.bufferData(P.ARRAY_BUFFER, Dc, pc);
                    }
                    if (Gc) {
                        for (sc = 0; Bc > sc; sc++) Ec[sc] = yc[sc];
                        P.bindBuffer(P.ARRAY_BUFFER, oc.__webglLineDistanceBuffer), P.bufferData(P.ARRAY_BUFFER, Ec, pc);
                    }
                    if (Hc) for (Ic = 0, Jc = Hc.length; Jc > Ic; Ic++) if (Nc = Hc[Ic], Nc.needsUpdate && (void 0 === Nc.boundTo || "vertices" === Nc.boundTo)) {
                        if (uc = 0, Lc = Nc.value.length, 1 === Nc.size) for (Kc = 0; Lc > Kc; Kc++) Nc.array[Kc] = Nc.value[Kc]; else if (2 === Nc.size) for (Kc = 0; Lc > Kc; Kc++) Mc = Nc.value[Kc], 
                        Nc.array[uc] = Mc.x, Nc.array[uc + 1] = Mc.y, uc += 2; else if (3 === Nc.size) if ("c" === Nc.type) for (Kc = 0; Lc > Kc; Kc++) Mc = Nc.value[Kc], 
                        Nc.array[uc] = Mc.r, Nc.array[uc + 1] = Mc.g, Nc.array[uc + 2] = Mc.b, uc += 3; else for (Kc = 0; Lc > Kc; Kc++) Mc = Nc.value[Kc], 
                        Nc.array[uc] = Mc.x, Nc.array[uc + 1] = Mc.y, Nc.array[uc + 2] = Mc.z, uc += 3; else if (4 === Nc.size) for (Kc = 0; Lc > Kc; Kc++) Mc = Nc.value[Kc], 
                        Nc.array[uc] = Mc.x, Nc.array[uc + 1] = Mc.y, Nc.array[uc + 2] = Mc.z, Nc.array[uc + 3] = Mc.w, 
                        uc += 4;
                        P.bindBuffer(P.ARRAY_BUFFER, Nc.buffer), P.bufferData(P.ARRAY_BUFFER, Nc.array, pc);
                    }
                }
                k.verticesNeedUpdate = !1, k.colorsNeedUpdate = !1, k.lineDistancesNeedUpdate = !1, 
                o.attributes && q(o);
            } else if (i instanceof THREE.ParticleSystem) {
                if (o = d(i, k), m = o.attributes && p(o), k.verticesNeedUpdate || k.colorsNeedUpdate || i.sortParticles || m) {
                    var Oc = k, Pc = P.DYNAMIC_DRAW, Qc = i, Rc = void 0, Sc = void 0, Tc = void 0, Uc = void 0, Vc = void 0, Wc = void 0, Xc = Oc.vertices, Yc = Xc.length, Zc = Oc.colors, $c = Zc.length, _c = Oc.__vertexArray, ad = Oc.__colorArray, bd = Oc.__sortArray, cd = Oc.verticesNeedUpdate, dd = Oc.colorsNeedUpdate, ed = Oc.__webglCustomAttributesList, fd = void 0, gd = void 0, hd = void 0, id = void 0, jd = void 0, kd = void 0;
                    if (Qc.sortParticles) {
                        for (xb.copy(wb), xb.multiply(Qc.matrixWorld), Rc = 0; Yc > Rc; Rc++) Tc = Xc[Rc], 
                        yb.copy(Tc), yb.applyProjection(xb), bd[Rc] = [ yb.z, Rc ];
                        for (bd.sort(j), Rc = 0; Yc > Rc; Rc++) Tc = Xc[bd[Rc][1]], Uc = 3 * Rc, _c[Uc] = Tc.x, 
                        _c[Uc + 1] = Tc.y, _c[Uc + 2] = Tc.z;
                        for (Sc = 0; $c > Sc; Sc++) Uc = 3 * Sc, Wc = Zc[bd[Sc][1]], ad[Uc] = Wc.r, ad[Uc + 1] = Wc.g, 
                        ad[Uc + 2] = Wc.b;
                        if (ed) for (fd = 0, gd = ed.length; gd > fd; fd++) if (kd = ed[fd], void 0 === kd.boundTo || "vertices" === kd.boundTo) if (Uc = 0, 
                        id = kd.value.length, 1 === kd.size) for (hd = 0; id > hd; hd++) Vc = bd[hd][1], 
                        kd.array[hd] = kd.value[Vc]; else if (2 === kd.size) for (hd = 0; id > hd; hd++) Vc = bd[hd][1], 
                        jd = kd.value[Vc], kd.array[Uc] = jd.x, kd.array[Uc + 1] = jd.y, Uc += 2; else if (3 === kd.size) if ("c" === kd.type) for (hd = 0; id > hd; hd++) Vc = bd[hd][1], 
                        jd = kd.value[Vc], kd.array[Uc] = jd.r, kd.array[Uc + 1] = jd.g, kd.array[Uc + 2] = jd.b, 
                        Uc += 3; else for (hd = 0; id > hd; hd++) Vc = bd[hd][1], jd = kd.value[Vc], kd.array[Uc] = jd.x, 
                        kd.array[Uc + 1] = jd.y, kd.array[Uc + 2] = jd.z, Uc += 3; else if (4 === kd.size) for (hd = 0; id > hd; hd++) Vc = bd[hd][1], 
                        jd = kd.value[Vc], kd.array[Uc] = jd.x, kd.array[Uc + 1] = jd.y, kd.array[Uc + 2] = jd.z, 
                        kd.array[Uc + 3] = jd.w, Uc += 4;
                    } else {
                        if (cd) for (Rc = 0; Yc > Rc; Rc++) Tc = Xc[Rc], Uc = 3 * Rc, _c[Uc] = Tc.x, _c[Uc + 1] = Tc.y, 
                        _c[Uc + 2] = Tc.z;
                        if (dd) for (Sc = 0; $c > Sc; Sc++) Wc = Zc[Sc], Uc = 3 * Sc, ad[Uc] = Wc.r, ad[Uc + 1] = Wc.g, 
                        ad[Uc + 2] = Wc.b;
                        if (ed) for (fd = 0, gd = ed.length; gd > fd; fd++) if (kd = ed[fd], kd.needsUpdate && (void 0 === kd.boundTo || "vertices" === kd.boundTo)) if (id = kd.value.length, 
                        Uc = 0, 1 === kd.size) for (hd = 0; id > hd; hd++) kd.array[hd] = kd.value[hd]; else if (2 === kd.size) for (hd = 0; id > hd; hd++) jd = kd.value[hd], 
                        kd.array[Uc] = jd.x, kd.array[Uc + 1] = jd.y, Uc += 2; else if (3 === kd.size) if ("c" === kd.type) for (hd = 0; id > hd; hd++) jd = kd.value[hd], 
                        kd.array[Uc] = jd.r, kd.array[Uc + 1] = jd.g, kd.array[Uc + 2] = jd.b, Uc += 3; else for (hd = 0; id > hd; hd++) jd = kd.value[hd], 
                        kd.array[Uc] = jd.x, kd.array[Uc + 1] = jd.y, kd.array[Uc + 2] = jd.z, Uc += 3; else if (4 === kd.size) for (hd = 0; id > hd; hd++) jd = kd.value[hd], 
                        kd.array[Uc] = jd.x, kd.array[Uc + 1] = jd.y, kd.array[Uc + 2] = jd.z, kd.array[Uc + 3] = jd.w, 
                        Uc += 4;
                    }
                    if ((cd || Qc.sortParticles) && (P.bindBuffer(P.ARRAY_BUFFER, Oc.__webglVertexBuffer), 
                    P.bufferData(P.ARRAY_BUFFER, _c, Pc)), (dd || Qc.sortParticles) && (P.bindBuffer(P.ARRAY_BUFFER, Oc.__webglColorBuffer), 
                    P.bufferData(P.ARRAY_BUFFER, ad, Pc)), ed) for (fd = 0, gd = ed.length; gd > fd; fd++) kd = ed[fd], 
                    (kd.needsUpdate || Qc.sortParticles) && (P.bindBuffer(P.ARRAY_BUFFER, kd.buffer), 
                    P.bufferData(P.ARRAY_BUFFER, kd.array, Pc));
                }
                k.verticesNeedUpdate = !1, k.colorsNeedUpdate = !1, o.attributes && q(o);
            }
        }
    }, this.initMaterial = function(a, b, c, d) {
        var e, f, g, h;
        a.addEventListener("dispose", Tb);
        var i, j, k, l, m;
        if (a instanceof THREE.MeshDepthMaterial ? m = "depth" : a instanceof THREE.MeshNormalMaterial ? m = "normal" : a instanceof THREE.MeshBasicMaterial ? m = "basic" : a instanceof THREE.MeshLambertMaterial ? m = "lambert" : a instanceof THREE.MeshPhongMaterial ? m = "phong" : a instanceof THREE.LineBasicMaterial ? m = "basic" : a instanceof THREE.LineDashedMaterial ? m = "dashed" : a instanceof THREE.ParticleSystemMaterial && (m = "particle_basic"), 
        m) {
            var n = THREE.ShaderLib[m];
            a.uniforms = THREE.UniformsUtils.clone(n.uniforms), a.vertexShader = n.vertexShader, 
            a.fragmentShader = n.fragmentShader;
        }
        var o = e = 0, p = 0, q = n = 0;
        for (f = b.length; f > q; q++) g = b[q], g.onlyShadow || (g instanceof THREE.DirectionalLight && e++, 
        g instanceof THREE.PointLight && o++, g instanceof THREE.SpotLight && p++, g instanceof THREE.HemisphereLight && n++);
        for (f = o, g = p, h = n, p = n = 0, o = b.length; o > p; p++) q = b[p], q.castShadow && (q instanceof THREE.SpotLight && n++, 
        q instanceof THREE.DirectionalLight && !q.shadowCascade && n++);
        l = n, Jb && d && d.useVertexTexture ? k = 1024 : (b = P.getParameter(P.MAX_VERTEX_UNIFORM_VECTORS), 
        b = Math.floor((b - 20) / 4), void 0 !== d && d instanceof THREE.SkinnedMesh && (b = Math.min(d.bones.length, b), 
        b < d.bones.length && console.warn("WebGLRenderer: too many bones - " + d.bones.length + ", this GPU supports just " + b + " (try OpenGL instead of ANGLE)")), 
        k = b);
        a: {
            var r, s, t, p = a.fragmentShader, o = a.vertexShader, n = a.uniforms, b = a.attributes, q = a.defines, c = {
                map: !!a.map,
                envMap: !!a.envMap,
                lightMap: !!a.lightMap,
                bumpMap: !!a.bumpMap,
                normalMap: !!a.normalMap,
                specularMap: !!a.specularMap,
                vertexColors: a.vertexColors,
                fog: c,
                useFog: a.fog,
                fogExp: c instanceof THREE.FogExp2,
                sizeAttenuation: a.sizeAttenuation,
                skinning: a.skinning,
                maxBones: k,
                useVertexTexture: Jb && d && d.useVertexTexture,
                morphTargets: a.morphTargets,
                morphNormals: a.morphNormals,
                maxMorphTargets: this.maxMorphTargets,
                maxMorphNormals: this.maxMorphNormals,
                maxDirLights: e,
                maxPointLights: f,
                maxSpotLights: g,
                maxHemiLights: h,
                maxShadows: l,
                shadowMapEnabled: this.shadowMapEnabled && d.receiveShadow,
                shadowMapType: this.shadowMapType,
                shadowMapDebug: this.shadowMapDebug,
                shadowMapCascade: this.shadowMapCascade,
                alphaTest: a.alphaTest,
                metal: a.metal,
                perPixel: a.perPixel,
                wrapAround: a.wrapAround,
                doubleSided: a.side === THREE.DoubleSide,
                flipSided: a.side === THREE.BackSide
            }, d = a.index0AttributeName;
            e = [], m ? e.push(m) : (e.push(p), e.push(o));
            for (s in q) e.push(s), e.push(q[s]);
            for (r in c) e.push(r), e.push(c[r]);
            for (m = e.join(), r = 0, s = V.length; s > r; r++) if (e = V[r], e.code === m) {
                e.usedTimes++, j = e.program;
                break a;
            }
            r = "SHADOWMAP_TYPE_BASIC", c.shadowMapType === THREE.PCFShadowMap ? r = "SHADOWMAP_TYPE_PCF" : c.shadowMapType === THREE.PCFSoftShadowMap && (r = "SHADOWMAP_TYPE_PCF_SOFT"), 
            s = [];
            for (t in q) e = q[t], !1 !== e && (e = "#define " + t + " " + e, s.push(e));
            e = s.join("\n"), t = P.createProgram(), s = [ "precision " + H + " float;", "precision " + H + " int;", e, Ib ? "#define VERTEX_TEXTURES" : "", U.gammaInput ? "#define GAMMA_INPUT" : "", U.gammaOutput ? "#define GAMMA_OUTPUT" : "", U.physicallyBasedShading ? "#define PHYSICALLY_BASED_SHADING" : "", "#define MAX_DIR_LIGHTS " + c.maxDirLights, "#define MAX_POINT_LIGHTS " + c.maxPointLights, "#define MAX_SPOT_LIGHTS " + c.maxSpotLights, "#define MAX_HEMI_LIGHTS " + c.maxHemiLights, "#define MAX_SHADOWS " + c.maxShadows, "#define MAX_BONES " + c.maxBones, c.map ? "#define USE_MAP" : "", c.envMap ? "#define USE_ENVMAP" : "", c.lightMap ? "#define USE_LIGHTMAP" : "", c.bumpMap ? "#define USE_BUMPMAP" : "", c.normalMap ? "#define USE_NORMALMAP" : "", c.specularMap ? "#define USE_SPECULARMAP" : "", c.vertexColors ? "#define USE_COLOR" : "", c.skinning ? "#define USE_SKINNING" : "", c.useVertexTexture ? "#define BONE_TEXTURE" : "", c.morphTargets ? "#define USE_MORPHTARGETS" : "", c.morphNormals ? "#define USE_MORPHNORMALS" : "", c.perPixel ? "#define PHONG_PER_PIXEL" : "", c.wrapAround ? "#define WRAP_AROUND" : "", c.doubleSided ? "#define DOUBLE_SIDED" : "", c.flipSided ? "#define FLIP_SIDED" : "", c.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", c.shadowMapEnabled ? "#define " + r : "", c.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", c.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", c.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", "uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n" ].join("\n"), 
            r = [ "precision " + H + " float;", "precision " + H + " int;", c.bumpMap || c.normalMap ? "#extension GL_OES_standard_derivatives : enable" : "", e, "#define MAX_DIR_LIGHTS " + c.maxDirLights, "#define MAX_POINT_LIGHTS " + c.maxPointLights, "#define MAX_SPOT_LIGHTS " + c.maxSpotLights, "#define MAX_HEMI_LIGHTS " + c.maxHemiLights, "#define MAX_SHADOWS " + c.maxShadows, c.alphaTest ? "#define ALPHATEST " + c.alphaTest : "", U.gammaInput ? "#define GAMMA_INPUT" : "", U.gammaOutput ? "#define GAMMA_OUTPUT" : "", U.physicallyBasedShading ? "#define PHYSICALLY_BASED_SHADING" : "", c.useFog && c.fog ? "#define USE_FOG" : "", c.useFog && c.fogExp ? "#define FOG_EXP2" : "", c.map ? "#define USE_MAP" : "", c.envMap ? "#define USE_ENVMAP" : "", c.lightMap ? "#define USE_LIGHTMAP" : "", c.bumpMap ? "#define USE_BUMPMAP" : "", c.normalMap ? "#define USE_NORMALMAP" : "", c.specularMap ? "#define USE_SPECULARMAP" : "", c.vertexColors ? "#define USE_COLOR" : "", c.metal ? "#define METAL" : "", c.perPixel ? "#define PHONG_PER_PIXEL" : "", c.wrapAround ? "#define WRAP_AROUND" : "", c.doubleSided ? "#define DOUBLE_SIDED" : "", c.flipSided ? "#define FLIP_SIDED" : "", c.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", c.shadowMapEnabled ? "#define " + r : "", c.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", c.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", "uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n" ].join("\n"), 
            s = B("vertex", s + o), r = B("fragment", r + p), P.attachShader(t, s), P.attachShader(t, r), 
            d && P.bindAttribLocation(t, 0, d), P.linkProgram(t), P.getProgramParameter(t, P.LINK_STATUS) || (console.error("Could not initialise shader\nVALIDATE_STATUS: " + P.getProgramParameter(t, P.VALIDATE_STATUS) + ", gl error [" + P.getError() + "]"), 
            console.error("Program Info Log: " + P.getProgramInfoLog(t))), P.deleteShader(r), 
            P.deleteShader(s), t.uniforms = {}, t.attributes = {};
            var u;
            r = "viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" "), 
            c.useVertexTexture ? (r.push("boneTexture"), r.push("boneTextureWidth"), r.push("boneTextureHeight")) : r.push("boneGlobalMatrices");
            for (u in n) r.push(u);
            for (u = r, r = 0, s = u.length; s > r; r++) n = u[r], t.uniforms[n] = P.getUniformLocation(t, n);
            for (r = "position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "), 
            u = 0; u < c.maxMorphTargets; u++) r.push("morphTarget" + u);
            for (u = 0; u < c.maxMorphNormals; u++) r.push("morphNormal" + u);
            for (j in b) r.push(j);
            for (j = r, u = 0, b = j.length; b > u; u++) r = j[u], t.attributes[r] = P.getAttribLocation(t, r);
            t.id = W++, V.push({
                program: t,
                code: m,
                usedTimes: 1
            }), U.info.memory.programs = V.length, j = t;
        }
        if (a.program = j, u = a.program.attributes, a.morphTargets) for (a.numSupportedMorphTargets = 0, 
        b = "morphTarget", j = 0; j < this.maxMorphTargets; j++) t = b + j, 0 <= u[t] && a.numSupportedMorphTargets++;
        if (a.morphNormals) for (a.numSupportedMorphNormals = 0, b = "morphNormal", j = 0; j < this.maxMorphNormals; j++) t = b + j, 
        0 <= u[t] && a.numSupportedMorphNormals++;
        a.uniformsList = [];
        for (i in a.uniforms) a.uniformsList.push([ a.uniforms[i], i ]);
    }, this.setFaceCulling = function(a, b) {
        a === THREE.CullFaceNone ? P.disable(P.CULL_FACE) : (b === THREE.FrontFaceDirectionCW ? P.frontFace(P.CW) : P.frontFace(P.CCW), 
        a === THREE.CullFaceBack ? P.cullFace(P.BACK) : a === THREE.CullFaceFront ? P.cullFace(P.FRONT) : P.cullFace(P.FRONT_AND_BACK), 
        P.enable(P.CULL_FACE));
    }, this.setMaterialFaces = function(a) {
        var b = a.side === THREE.DoubleSide, a = a.side === THREE.BackSide;
        cb !== b && (b ? P.disable(P.CULL_FACE) : P.enable(P.CULL_FACE), cb = b), db !== a && (a ? P.frontFace(P.CW) : P.frontFace(P.CCW), 
        db = a);
    }, this.setDepthTest = function(a) {
        ib !== a && (a ? P.enable(P.DEPTH_TEST) : P.disable(P.DEPTH_TEST), ib = a);
    }, this.setDepthWrite = function(a) {
        jb !== a && (P.depthMask(a), jb = a);
    }, this.setBlending = function(a, b, c, d) {
        a !== eb && (a === THREE.NoBlending ? P.disable(P.BLEND) : a === THREE.AdditiveBlending ? (P.enable(P.BLEND), 
        P.blendEquation(P.FUNC_ADD), P.blendFunc(P.SRC_ALPHA, P.ONE)) : a === THREE.SubtractiveBlending ? (P.enable(P.BLEND), 
        P.blendEquation(P.FUNC_ADD), P.blendFunc(P.ZERO, P.ONE_MINUS_SRC_COLOR)) : a === THREE.MultiplyBlending ? (P.enable(P.BLEND), 
        P.blendEquation(P.FUNC_ADD), P.blendFunc(P.ZERO, P.SRC_COLOR)) : a === THREE.CustomBlending ? P.enable(P.BLEND) : (P.enable(P.BLEND), 
        P.blendEquationSeparate(P.FUNC_ADD, P.FUNC_ADD), P.blendFuncSeparate(P.SRC_ALPHA, P.ONE_MINUS_SRC_ALPHA, P.ONE, P.ONE_MINUS_SRC_ALPHA)), 
        eb = a), a === THREE.CustomBlending ? (b !== fb && (P.blendEquation(F(b)), fb = b), 
        (c !== gb || d !== hb) && (P.blendFunc(F(c), F(d)), gb = c, hb = d)) : hb = gb = fb = null;
    }, this.setTexture = function(a, b) {
        if (a.needsUpdate) {
            a.__webglInit || (a.__webglInit = !0, a.addEventListener("dispose", Rb), a.__webglTexture = P.createTexture(), 
            U.info.memory.textures++), P.activeTexture(P.TEXTURE0 + b), P.bindTexture(P.TEXTURE_2D, a.__webglTexture), 
            P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL, a.flipY), P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.premultiplyAlpha), 
            P.pixelStorei(P.UNPACK_ALIGNMENT, a.unpackAlignment);
            var c = a.image, d = 0 === (c.width & c.width - 1) && 0 === (c.height & c.height - 1), e = F(a.format), f = F(a.type);
            C(P.TEXTURE_2D, a, d);
            var g = a.mipmaps;
            if (a instanceof THREE.DataTexture) if (0 < g.length && d) {
                for (var h = 0, i = g.length; i > h; h++) c = g[h], P.texImage2D(P.TEXTURE_2D, h, e, c.width, c.height, 0, e, f, c.data);
                a.generateMipmaps = !1;
            } else P.texImage2D(P.TEXTURE_2D, 0, e, c.width, c.height, 0, e, f, c.data); else if (a instanceof THREE.CompressedTexture) for (h = 0, 
            i = g.length; i > h; h++) c = g[h], a.format !== THREE.RGBAFormat ? P.compressedTexImage2D(P.TEXTURE_2D, h, e, c.width, c.height, 0, c.data) : P.texImage2D(P.TEXTURE_2D, h, e, c.width, c.height, 0, e, f, c.data); else if (0 < g.length && d) {
                for (h = 0, i = g.length; i > h; h++) c = g[h], P.texImage2D(P.TEXTURE_2D, h, e, e, f, c);
                a.generateMipmaps = !1;
            } else P.texImage2D(P.TEXTURE_2D, 0, e, e, f, a.image);
            a.generateMipmaps && d && P.generateMipmap(P.TEXTURE_2D), a.needsUpdate = !1, a.onUpdate && a.onUpdate();
        } else P.activeTexture(P.TEXTURE0 + b), P.bindTexture(P.TEXTURE_2D, a.__webglTexture);
    }, this.setRenderTarget = function(a) {
        var b = a instanceof THREE.WebGLRenderTargetCube;
        if (a && !a.__webglFramebuffer) {
            void 0 === a.depthBuffer && (a.depthBuffer = !0), void 0 === a.stencilBuffer && (a.stencilBuffer = !0), 
            a.addEventListener("dispose", Sb), a.__webglTexture = P.createTexture(), U.info.memory.textures++;
            var c = 0 === (a.width & a.width - 1) && 0 === (a.height & a.height - 1), d = F(a.format), e = F(a.type);
            if (b) {
                a.__webglFramebuffer = [], a.__webglRenderbuffer = [], P.bindTexture(P.TEXTURE_CUBE_MAP, a.__webglTexture), 
                C(P.TEXTURE_CUBE_MAP, a, c);
                for (var f = 0; 6 > f; f++) {
                    a.__webglFramebuffer[f] = P.createFramebuffer(), a.__webglRenderbuffer[f] = P.createRenderbuffer(), 
                    P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, d, a.width, a.height, 0, d, e, null);
                    var g = a, h = P.TEXTURE_CUBE_MAP_POSITIVE_X + f;
                    P.bindFramebuffer(P.FRAMEBUFFER, a.__webglFramebuffer[f]), P.framebufferTexture2D(P.FRAMEBUFFER, P.COLOR_ATTACHMENT0, h, g.__webglTexture, 0), 
                    D(a.__webglRenderbuffer[f], a);
                }
                c && P.generateMipmap(P.TEXTURE_CUBE_MAP);
            } else a.__webglFramebuffer = P.createFramebuffer(), a.__webglRenderbuffer = a.shareDepthFrom ? a.shareDepthFrom.__webglRenderbuffer : P.createRenderbuffer(), 
            P.bindTexture(P.TEXTURE_2D, a.__webglTexture), C(P.TEXTURE_2D, a, c), P.texImage2D(P.TEXTURE_2D, 0, d, a.width, a.height, 0, d, e, null), 
            d = P.TEXTURE_2D, P.bindFramebuffer(P.FRAMEBUFFER, a.__webglFramebuffer), P.framebufferTexture2D(P.FRAMEBUFFER, P.COLOR_ATTACHMENT0, d, a.__webglTexture, 0), 
            a.shareDepthFrom ? a.depthBuffer && !a.stencilBuffer ? P.framebufferRenderbuffer(P.FRAMEBUFFER, P.DEPTH_ATTACHMENT, P.RENDERBUFFER, a.__webglRenderbuffer) : a.depthBuffer && a.stencilBuffer && P.framebufferRenderbuffer(P.FRAMEBUFFER, P.DEPTH_STENCIL_ATTACHMENT, P.RENDERBUFFER, a.__webglRenderbuffer) : D(a.__webglRenderbuffer, a), 
            c && P.generateMipmap(P.TEXTURE_2D);
            b ? P.bindTexture(P.TEXTURE_CUBE_MAP, null) : P.bindTexture(P.TEXTURE_2D, null), 
            P.bindRenderbuffer(P.RENDERBUFFER, null), P.bindFramebuffer(P.FRAMEBUFFER, null);
        }
        a ? (b = b ? a.__webglFramebuffer[a.activeCubeFace] : a.__webglFramebuffer, c = a.width, 
        a = a.height, e = d = 0) : (b = null, c = qb, a = rb, d = ob, e = pb), b !== Y && (P.bindFramebuffer(P.FRAMEBUFFER, b), 
        P.viewport(d, e, c, a), Y = b), sb = c, tb = a;
    }, this.shadowMapPlugin = new THREE.ShadowMapPlugin(), this.addPrePlugin(this.shadowMapPlugin), 
    this.addPostPlugin(new THREE.SpritePlugin()), this.addPostPlugin(new THREE.LensFlarePlugin());
}, THREE.WebGLRenderTarget = function(a, b, c) {
    this.width = a, this.height = b, c = c || {}, this.wrapS = void 0 !== c.wrapS ? c.wrapS : THREE.ClampToEdgeWrapping, 
    this.wrapT = void 0 !== c.wrapT ? c.wrapT : THREE.ClampToEdgeWrapping, this.magFilter = void 0 !== c.magFilter ? c.magFilter : THREE.LinearFilter, 
    this.minFilter = void 0 !== c.minFilter ? c.minFilter : THREE.LinearMipMapLinearFilter, 
    this.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1, this.offset = new THREE.Vector2(0, 0), 
    this.repeat = new THREE.Vector2(1, 1), this.format = void 0 !== c.format ? c.format : THREE.RGBAFormat, 
    this.type = void 0 !== c.type ? c.type : THREE.UnsignedByteType, this.depthBuffer = void 0 !== c.depthBuffer ? c.depthBuffer : !0, 
    this.stencilBuffer = void 0 !== c.stencilBuffer ? c.stencilBuffer : !0, this.generateMipmaps = !0, 
    this.shareDepthFrom = null;
}, THREE.WebGLRenderTarget.prototype = {
    constructor: THREE.WebGLRenderTarget,
    clone: function() {
        var a = new THREE.WebGLRenderTarget(this.width, this.height);
        return a.wrapS = this.wrapS, a.wrapT = this.wrapT, a.magFilter = this.magFilter, 
        a.minFilter = this.minFilter, a.anisotropy = this.anisotropy, a.offset.copy(this.offset), 
        a.repeat.copy(this.repeat), a.format = this.format, a.type = this.type, a.depthBuffer = this.depthBuffer, 
        a.stencilBuffer = this.stencilBuffer, a.generateMipmaps = this.generateMipmaps, 
        a.shareDepthFrom = this.shareDepthFrom, a;
    },
    dispose: function() {
        this.dispatchEvent({
            type: "dispose"
        });
    }
}, THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype), THREE.WebGLRenderTargetCube = function(a, b, c) {
    THREE.WebGLRenderTarget.call(this, a, b, c), this.activeCubeFace = 0;
}, THREE.WebGLRenderTargetCube.prototype = Object.create(THREE.WebGLRenderTarget.prototype), 
THREE.RenderableVertex = function() {
    this.positionWorld = new THREE.Vector3(), this.positionScreen = new THREE.Vector4(), 
    this.visible = !0;
}, THREE.RenderableVertex.prototype.copy = function(a) {
    this.positionWorld.copy(a.positionWorld), this.positionScreen.copy(a.positionScreen);
}, THREE.RenderableFace3 = function() {
    this.id = 0, this.v1 = new THREE.RenderableVertex(), this.v2 = new THREE.RenderableVertex(), 
    this.v3 = new THREE.RenderableVertex(), this.centroidModel = new THREE.Vector3(), 
    this.normalModel = new THREE.Vector3(), this.normalModelView = new THREE.Vector3(), 
    this.vertexNormalsLength = 0, this.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ], 
    this.vertexNormalsModelView = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ], 
    this.material = this.color = null, this.uvs = [ [] ], this.z = 0;
}, THREE.RenderableObject = function() {
    this.id = 0, this.object = null, this.z = 0;
}, THREE.RenderableSprite = function() {
    this.id = 0, this.object = null, this.rotation = this.z = this.y = this.x = 0, this.scale = new THREE.Vector2(), 
    this.material = null;
}, THREE.RenderableLine = function() {
    this.id = 0, this.v1 = new THREE.RenderableVertex(), this.v2 = new THREE.RenderableVertex(), 
    this.vertexColors = [ new THREE.Color(), new THREE.Color() ], this.material = null, 
    this.z = 0;
}, THREE.GeometryUtils = {
    merge: function(a, b, c) {
        var d, e, f = a.vertices.length, g = b instanceof THREE.Mesh ? b.geometry : b, h = a.vertices, i = g.vertices, j = a.faces, k = g.faces, a = a.faceVertexUvs[0], g = g.faceVertexUvs[0];
        void 0 === c && (c = 0), b instanceof THREE.Mesh && (b.matrixAutoUpdate && b.updateMatrix(), 
        d = b.matrix, e = new THREE.Matrix3().getNormalMatrix(d));
        for (var b = 0, l = i.length; l > b; b++) {
            var m = i[b].clone();
            d && m.applyMatrix4(d), h.push(m);
        }
        for (b = 0, l = k.length; l > b; b++) {
            var n, o, m = k[b], p = m.vertexNormals, q = m.vertexColors;
            for (n = new THREE.Face3(m.a + f, m.b + f, m.c + f), n.normal.copy(m.normal), e && n.normal.applyMatrix3(e).normalize(), 
            h = 0, i = p.length; i > h; h++) o = p[h].clone(), e && o.applyMatrix3(e).normalize(), 
            n.vertexNormals.push(o);
            for (n.color.copy(m.color), h = 0, i = q.length; i > h; h++) o = q[h], n.vertexColors.push(o.clone());
            n.materialIndex = m.materialIndex + c, n.centroid.copy(m.centroid), d && n.centroid.applyMatrix4(d), 
            j.push(n);
        }
        for (b = 0, l = g.length; l > b; b++) {
            for (c = g[b], d = [], h = 0, i = c.length; i > h; h++) d.push(new THREE.Vector2(c[h].x, c[h].y));
            a.push(d);
        }
    },
    randomPointInTriangle: function() {
        var a = new THREE.Vector3();
        return function(b, c, d) {
            var e = new THREE.Vector3(), f = THREE.Math.random16(), g = THREE.Math.random16();
            f + g > 1 && (f = 1 - f, g = 1 - g);
            var h = 1 - f - g;
            return e.copy(b), e.multiplyScalar(f), a.copy(c), a.multiplyScalar(g), e.add(a), 
            a.copy(d), a.multiplyScalar(h), e.add(a), e;
        };
    }(),
    randomPointInFace: function(a, b) {
        return THREE.GeometryUtils.randomPointInTriangle(b.vertices[a.a], b.vertices[a.b], b.vertices[a.c]);
    },
    randomPointsInGeometry: function(a, b) {
        function c(a) {
            function b(c, d) {
                if (c > d) return c;
                var e = c + Math.floor((d - c) / 2);
                return m[e] > a ? b(c, e - 1) : m[e] < a ? b(e + 1, d) : e;
            }
            return b(0, m.length - 1);
        }
        var d, e, f, g, h, i = a.faces, j = a.vertices, k = i.length, l = 0, m = [];
        for (e = 0; k > e; e++) d = i[e], f = j[d.a], g = j[d.b], h = j[d.c], d._area = THREE.GeometryUtils.triangleArea(f, g, h), 
        l += d._area, m[e] = l;
        for (d = [], e = 0; b > e; e++) j = THREE.Math.random16() * l, j = c(j), d[e] = THREE.GeometryUtils.randomPointInFace(i[j], a, !0);
        return d;
    },
    triangleArea: function() {
        var a = new THREE.Vector3(), b = new THREE.Vector3();
        return function(c, d, e) {
            return a.subVectors(d, c), b.subVectors(e, c), a.cross(b), .5 * a.length();
        };
    }(),
    center: function(a) {
        a.computeBoundingBox();
        var b = a.boundingBox, c = new THREE.Vector3();
        return c.addVectors(b.min, b.max), c.multiplyScalar(-.5), a.applyMatrix(new THREE.Matrix4().makeTranslation(c.x, c.y, c.z)), 
        a.computeBoundingBox(), c;
    },
    triangulateQuads: function(a) {
        var b, c, d, e, f = [], g = [];
        for (b = 0, c = a.faceVertexUvs.length; c > b; b++) g[b] = [];
        for (b = 0, c = a.faces.length; c > b; b++) for (f.push(a.faces[b]), d = 0, e = a.faceVertexUvs.length; e > d; d++) g[d].push(a.faceVertexUvs[d][b]);
        a.faces = f, a.faceVertexUvs = g, a.computeCentroids(), a.computeFaceNormals(), 
        a.computeVertexNormals(), a.hasTangents && a.computeTangents();
    }
}, THREE.ImageUtils = {
    crossOrigin: "anonymous",
    loadTexture: function(a, b, c) {
        var d = new THREE.ImageLoader();
        d.crossOrigin = this.crossOrigin;
        var e = new THREE.Texture(void 0, b), b = d.load(a, function() {
            e.needsUpdate = !0, c && c(e);
        });
        return e.image = b, e.sourceFile = a, e;
    },
    loadCompressedTexture: function(a, b, c, d) {
        var e = new THREE.CompressedTexture();
        e.mapping = b;
        var f = new XMLHttpRequest();
        return f.onload = function() {
            var a = THREE.ImageUtils.parseDDS(f.response, !0);
            e.format = a.format, e.mipmaps = a.mipmaps, e.image.width = a.width, e.image.height = a.height, 
            e.generateMipmaps = !1, e.needsUpdate = !0, c && c(e);
        }, f.onerror = d, f.open("GET", a, !0), f.responseType = "arraybuffer", f.send(null), 
        e;
    },
    loadTextureCube: function(a, b, c, d) {
        var e = [];
        e.loadCount = 0;
        var f = new THREE.Texture();
        f.image = e, void 0 !== b && (f.mapping = b), f.flipY = !1;
        for (var b = 0, g = a.length; g > b; ++b) {
            var h = new Image();
            e[b] = h, h.onload = function() {
                e.loadCount += 1, 6 === e.loadCount && (f.needsUpdate = !0, c && c(f));
            }, h.onerror = d, h.crossOrigin = this.crossOrigin, h.src = a[b];
        }
        return f;
    },
    loadCompressedTextureCube: function(a, b, c, d) {
        var e = [];
        e.loadCount = 0;
        var f = new THREE.CompressedTexture();
        if (f.image = e, void 0 !== b && (f.mapping = b), f.flipY = !1, f.generateMipmaps = !1, 
        b = function(a, b) {
            return function() {
                var d = THREE.ImageUtils.parseDDS(a.response, !0);
                b.format = d.format, b.mipmaps = d.mipmaps, b.width = d.width, b.height = d.height, 
                e.loadCount += 1, 6 === e.loadCount && (f.format = d.format, f.needsUpdate = !0, 
                c && c(f));
            };
        }, a instanceof Array) for (var g = 0, h = a.length; h > g; ++g) {
            var i = {};
            e[g] = i;
            var j = new XMLHttpRequest();
            j.onload = b(j, i), j.onerror = d, i = a[g], j.open("GET", i, !0), j.responseType = "arraybuffer", 
            j.send(null);
        } else j = new XMLHttpRequest(), j.onload = function() {
            var a = THREE.ImageUtils.parseDDS(j.response, !0);
            if (a.isCubemap) {
                for (var b = a.mipmaps.length / a.mipmapCount, d = 0; b > d; d++) {
                    e[d] = {
                        mipmaps: []
                    };
                    for (var g = 0; g < a.mipmapCount; g++) e[d].mipmaps.push(a.mipmaps[d * a.mipmapCount + g]), 
                    e[d].format = a.format, e[d].width = a.width, e[d].height = a.height;
                }
                f.format = a.format, f.needsUpdate = !0, c && c(f);
            }
        }, j.onerror = d, j.open("GET", a, !0), j.responseType = "arraybuffer", j.send(null);
        return f;
    },
    loadDDSTexture: function(a, b, c, d) {
        var e = [];
        e.loadCount = 0;
        var f = new THREE.CompressedTexture();
        f.image = e, void 0 !== b && (f.mapping = b), f.flipY = !1, f.generateMipmaps = !1;
        var g = new XMLHttpRequest();
        return g.onload = function() {
            var a = THREE.ImageUtils.parseDDS(g.response, !0);
            if (a.isCubemap) for (var b = a.mipmaps.length / a.mipmapCount, d = 0; b > d; d++) {
                e[d] = {
                    mipmaps: []
                };
                for (var h = 0; h < a.mipmapCount; h++) e[d].mipmaps.push(a.mipmaps[d * a.mipmapCount + h]), 
                e[d].format = a.format, e[d].width = a.width, e[d].height = a.height;
            } else f.image.width = a.width, f.image.height = a.height, f.mipmaps = a.mipmaps;
            f.format = a.format, f.needsUpdate = !0, c && c(f);
        }, g.onerror = d, g.open("GET", a, !0), g.responseType = "arraybuffer", g.send(null), 
        f;
    },
    parseDDS: function(a, b) {
        function c(a) {
            return a.charCodeAt(0) + (a.charCodeAt(1) << 8) + (a.charCodeAt(2) << 16) + (a.charCodeAt(3) << 24);
        }
        var d = {
            mipmaps: [],
            width: 0,
            height: 0,
            format: null,
            mipmapCount: 1
        }, e = c("DXT1"), f = c("DXT3"), g = c("DXT5"), h = new Int32Array(a, 0, 31);
        if (542327876 !== h[0]) return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"), 
        d;
        if (4 & !h[20]) return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"), 
        d;
        var i = h[21], j = !1;
        switch (i) {
          case e:
            e = 8, d.format = THREE.RGB_S3TC_DXT1_Format;
            break;

          case f:
            e = 16, d.format = THREE.RGBA_S3TC_DXT3_Format;
            break;

          case g:
            e = 16, d.format = THREE.RGBA_S3TC_DXT5_Format;
            break;

          default:
            if (!(32 == h[22] && 16711680 & h[23] && 65280 & h[24] && 255 & h[25] && 4278190080 & h[26])) return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ", String.fromCharCode(255 & i, i >> 8 & 255, i >> 16 & 255, i >> 24 & 255)), 
            d;
            j = !0, e = 64, d.format = THREE.RGBAFormat;
        }
        d.mipmapCount = 1, 131072 & h[2] && !1 !== b && (d.mipmapCount = Math.max(1, h[7])), 
        d.isCubemap = 512 & h[28] ? !0 : !1, d.width = h[4], d.height = h[3];
        for (var h = h[1] + 4, f = d.width, g = d.height, i = d.isCubemap ? 6 : 1, k = 0; i > k; k++) {
            for (var l = 0; l < d.mipmapCount; l++) {
                if (j) {
                    var m;
                    m = f;
                    for (var n = g, o = 4 * m * n, p = new Uint8Array(a, h, o), o = new Uint8Array(o), q = 0, r = 0, s = 0; n > s; s++) for (var t = 0; m > t; t++) {
                        var u = p[r];
                        r++;
                        var v = p[r];
                        r++;
                        var w = p[r];
                        r++;
                        var x = p[r];
                        r++, o[q] = w, q++, o[q] = v, q++, o[q] = u, q++, o[q] = x, q++;
                    }
                    m = o, n = m.length;
                } else n = Math.max(4, f) / 4 * Math.max(4, g) / 4 * e, m = new Uint8Array(a, h, n);
                d.mipmaps.push({
                    data: m,
                    width: f,
                    height: g
                }), h += n, f = Math.max(.5 * f, 1), g = Math.max(.5 * g, 1);
            }
            f = d.width, g = d.height;
        }
        return d;
    },
    getNormalMap: function(a, b) {
        var c = function(a) {
            var b = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);
            return [ a[0] / b, a[1] / b, a[2] / b ];
        }, b = 1 | b, d = a.width, e = a.height, f = document.createElement("canvas");
        f.width = d, f.height = e;
        var g = f.getContext("2d");
        g.drawImage(a, 0, 0);
        for (var h = g.getImageData(0, 0, d, e).data, i = g.createImageData(d, e), j = i.data, k = 0; d > k; k++) for (var l = 0; e > l; l++) {
            var m = 0 > l - 1 ? 0 : l - 1, n = l + 1 > e - 1 ? e - 1 : l + 1, o = 0 > k - 1 ? 0 : k - 1, p = k + 1 > d - 1 ? d - 1 : k + 1, q = [], r = [ 0, 0, h[4 * (l * d + k)] / 255 * b ];
            for (q.push([ -1, 0, h[4 * (l * d + o)] / 255 * b ]), q.push([ -1, -1, h[4 * (m * d + o)] / 255 * b ]), 
            q.push([ 0, -1, h[4 * (m * d + k)] / 255 * b ]), q.push([ 1, -1, h[4 * (m * d + p)] / 255 * b ]), 
            q.push([ 1, 0, h[4 * (l * d + p)] / 255 * b ]), q.push([ 1, 1, h[4 * (n * d + p)] / 255 * b ]), 
            q.push([ 0, 1, h[4 * (n * d + k)] / 255 * b ]), q.push([ -1, 1, h[4 * (n * d + o)] / 255 * b ]), 
            m = [], o = q.length, n = 0; o > n; n++) {
                var p = q[n], s = q[(n + 1) % o], p = [ p[0] - r[0], p[1] - r[1], p[2] - r[2] ], s = [ s[0] - r[0], s[1] - r[1], s[2] - r[2] ];
                m.push(c([ p[1] * s[2] - p[2] * s[1], p[2] * s[0] - p[0] * s[2], p[0] * s[1] - p[1] * s[0] ]));
            }
            for (q = [ 0, 0, 0 ], n = 0; n < m.length; n++) q[0] += m[n][0], q[1] += m[n][1], 
            q[2] += m[n][2];
            q[0] /= m.length, q[1] /= m.length, q[2] /= m.length, r = 4 * (l * d + k), j[r] = 255 * ((q[0] + 1) / 2) | 0, 
            j[r + 1] = 255 * ((q[1] + 1) / 2) | 0, j[r + 2] = 255 * q[2] | 0, j[r + 3] = 255;
        }
        return g.putImageData(i, 0, 0), f;
    },
    generateDataTexture: function(a, b, c) {
        for (var d = a * b, e = new Uint8Array(3 * d), f = Math.floor(255 * c.r), g = Math.floor(255 * c.g), c = Math.floor(255 * c.b), h = 0; d > h; h++) e[3 * h] = f, 
        e[3 * h + 1] = g, e[3 * h + 2] = c;
        return a = new THREE.DataTexture(e, a, b, THREE.RGBFormat), a.needsUpdate = !0, 
        a;
    }
}, THREE.SceneUtils = {
    createMultiMaterialObject: function(a, b) {
        for (var c = new THREE.Object3D(), d = 0, e = b.length; e > d; d++) c.add(new THREE.Mesh(a, b[d]));
        return c;
    },
    detach: function(a, b, c) {
        a.applyMatrix(b.matrixWorld), b.remove(a), c.add(a);
    },
    attach: function(a, b, c) {
        var d = new THREE.Matrix4();
        d.getInverse(c.matrixWorld), a.applyMatrix(d), b.remove(a), c.add(a);
    }
}, THREE.FontUtils = {
    faces: {},
    face: "helvetiker",
    weight: "normal",
    style: "normal",
    size: 150,
    divisions: 10,
    getFace: function() {
        return this.faces[this.face][this.weight][this.style];
    },
    loadFace: function(a) {
        var b = a.familyName.toLowerCase();
        return this.faces[b] = this.faces[b] || {}, this.faces[b][a.cssFontWeight] = this.faces[b][a.cssFontWeight] || {}, 
        this.faces[b][a.cssFontWeight][a.cssFontStyle] = a, this.faces[b][a.cssFontWeight][a.cssFontStyle] = a;
    },
    drawText: function(a) {
        for (var b = this.getFace(), c = this.size / b.resolution, d = 0, e = String(a).split(""), f = e.length, g = [], a = 0; f > a; a++) {
            var h = new THREE.Path(), h = this.extractGlyphPoints(e[a], b, c, d, h), d = d + h.offset;
            g.push(h.path);
        }
        return {
            paths: g,
            offset: d / 2
        };
    },
    extractGlyphPoints: function(a, b, c, d, e) {
        var f, g, h, i, j, k, l, m, n, o, p, q = [], r = b.glyphs[a] || b.glyphs["?"];
        if (r) {
            if (r.o) for (b = r._cachedOutline || (r._cachedOutline = r.o.split(" ")), i = b.length, 
            a = 0; i > a; ) switch (h = b[a++]) {
              case "m":
                h = b[a++] * c + d, j = b[a++] * c, e.moveTo(h, j);
                break;

              case "l":
                h = b[a++] * c + d, j = b[a++] * c, e.lineTo(h, j);
                break;

              case "q":
                if (h = b[a++] * c + d, j = b[a++] * c, m = b[a++] * c + d, n = b[a++] * c, e.quadraticCurveTo(m, n, h, j), 
                f = q[q.length - 1]) for (k = f.x, l = f.y, f = 1, g = this.divisions; g >= f; f++) {
                    var s = f / g;
                    THREE.Shape.Utils.b2(s, k, m, h), THREE.Shape.Utils.b2(s, l, n, j);
                }
                break;

              case "b":
                if (h = b[a++] * c + d, j = b[a++] * c, m = b[a++] * c + d, n = b[a++] * -c, o = b[a++] * c + d, 
                p = b[a++] * -c, e.bezierCurveTo(h, j, m, n, o, p), f = q[q.length - 1]) for (k = f.x, 
                l = f.y, f = 1, g = this.divisions; g >= f; f++) s = f / g, THREE.Shape.Utils.b3(s, k, m, o, h), 
                THREE.Shape.Utils.b3(s, l, n, p, j);
            }
            return {
                offset: r.ha * c,
                path: e
            };
        }
    }
}, THREE.FontUtils.generateShapes = function(a, b) {
    var b = b || {}, c = void 0 !== b.curveSegments ? b.curveSegments : 4, d = void 0 !== b.font ? b.font : "helvetiker", e = void 0 !== b.weight ? b.weight : "normal", f = void 0 !== b.style ? b.style : "normal";
    for (THREE.FontUtils.size = void 0 !== b.size ? b.size : 100, THREE.FontUtils.divisions = c, 
    THREE.FontUtils.face = d, THREE.FontUtils.weight = e, THREE.FontUtils.style = f, 
    c = THREE.FontUtils.drawText(a).paths, d = [], e = 0, f = c.length; f > e; e++) Array.prototype.push.apply(d, c[e].toShapes());
    return d;
}, function(a) {
    var b = function(a) {
        for (var b = a.length, c = 0, d = b - 1, e = 0; b > e; d = e++) c += a[d].x * a[e].y - a[e].x * a[d].y;
        return .5 * c;
    };
    return a.Triangulate = function(a, c) {
        var d = a.length;
        if (3 > d) return null;
        var e, f, g, h = [], i = [], j = [];
        if (0 < b(a)) for (f = 0; d > f; f++) i[f] = f; else for (f = 0; d > f; f++) i[f] = d - 1 - f;
        var k = 2 * d;
        for (f = d - 1; d > 2; ) {
            if (0 >= k--) {
                console.log("Warning, unable to triangulate polygon!");
                break;
            }
            e = f, e >= d && (e = 0), f = e + 1, f >= d && (f = 0), g = f + 1, g >= d && (g = 0);
            var l;
            a: {
                var m = l = void 0, n = void 0, o = void 0, p = void 0, q = void 0, r = void 0, s = void 0, t = void 0, m = a[i[e]].x, n = a[i[e]].y, o = a[i[f]].x, p = a[i[f]].y, q = a[i[g]].x, r = a[i[g]].y;
                if (1e-10 > (o - m) * (r - n) - (p - n) * (q - m)) l = !1; else {
                    var u = void 0, v = void 0, w = void 0, x = void 0, y = void 0, z = void 0, A = void 0, B = void 0, C = void 0, D = void 0, C = B = A = t = s = void 0, u = q - o, v = r - p, w = m - q, x = n - r, y = o - m, z = p - n;
                    for (l = 0; d > l; l++) if (l !== e && l !== f && l !== g && (s = a[i[l]].x, t = a[i[l]].y, 
                    A = s - m, B = t - n, C = s - o, D = t - p, s -= q, t -= r, C = u * D - v * C, A = y * B - z * A, 
                    B = w * t - x * s, C >= -1e-10 && B >= -1e-10 && A >= -1e-10)) {
                        l = !1;
                        break a;
                    }
                    l = !0;
                }
            }
            if (l) {
                for (h.push([ a[i[e]], a[i[f]], a[i[g]] ]), j.push([ i[e], i[f], i[g] ]), e = f, 
                g = f + 1; d > g; e++, g++) i[e] = i[g];
                d--, k = 2 * d;
            }
        }
        return c ? j : h;
    }, a.Triangulate.area = b, a;
}(THREE.FontUtils), self._typeface_js = {
    faces: THREE.FontUtils.faces,
    loadFace: THREE.FontUtils.loadFace
}, THREE.typeface_js = self._typeface_js, THREE.Curve = function() {}, THREE.Curve.prototype.getPoint = function() {
    return console.log("Warning, getPoint() not implemented!"), null;
}, THREE.Curve.prototype.getPointAt = function(a) {
    return a = this.getUtoTmapping(a), this.getPoint(a);
}, THREE.Curve.prototype.getPoints = function(a) {
    a || (a = 5);
    var b, c = [];
    for (b = 0; a >= b; b++) c.push(this.getPoint(b / a));
    return c;
}, THREE.Curve.prototype.getSpacedPoints = function(a) {
    a || (a = 5);
    var b, c = [];
    for (b = 0; a >= b; b++) c.push(this.getPointAt(b / a));
    return c;
}, THREE.Curve.prototype.getLength = function() {
    var a = this.getLengths();
    return a[a.length - 1];
}, THREE.Curve.prototype.getLengths = function(a) {
    if (a || (a = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == a + 1 && !this.needsUpdate) return this.cacheArcLengths;
    this.needsUpdate = !1;
    var b, c, d = [], e = this.getPoint(0), f = 0;
    for (d.push(0), c = 1; a >= c; c++) b = this.getPoint(c / a), f += b.distanceTo(e), 
    d.push(f), e = b;
    return this.cacheArcLengths = d;
}, THREE.Curve.prototype.updateArcLengths = function() {
    this.needsUpdate = !0, this.getLengths();
}, THREE.Curve.prototype.getUtoTmapping = function(a, b) {
    var c, d = this.getLengths(), e = 0, f = d.length;
    c = b ? b : a * d[f - 1];
    for (var g, h = 0, i = f - 1; i >= h; ) if (e = Math.floor(h + (i - h) / 2), g = d[e] - c, 
    0 > g) h = e + 1; else {
        if (!(g > 0)) {
            i = e;
            break;
        }
        i = e - 1;
    }
    return e = i, d[e] == c ? e / (f - 1) : (h = d[e], d = (e + (c - h) / (d[e + 1] - h)) / (f - 1));
}, THREE.Curve.prototype.getTangent = function(a) {
    var b = a - 1e-4, a = a + 1e-4;
    return 0 > b && (b = 0), a > 1 && (a = 1), b = this.getPoint(b), this.getPoint(a).clone().sub(b).normalize();
}, THREE.Curve.prototype.getTangentAt = function(a) {
    return a = this.getUtoTmapping(a), this.getTangent(a);
}, THREE.Curve.Utils = {
    tangentQuadraticBezier: function(a, b, c, d) {
        return 2 * (1 - a) * (c - b) + 2 * a * (d - c);
    },
    tangentCubicBezier: function(a, b, c, d, e) {
        return -3 * b * (1 - a) * (1 - a) + 3 * c * (1 - a) * (1 - a) - 6 * a * c * (1 - a) + 6 * a * d * (1 - a) - 3 * a * a * d + 3 * a * a * e;
    },
    tangentSpline: function(a) {
        return 6 * a * a - 6 * a + (3 * a * a - 4 * a + 1) + (-6 * a * a + 6 * a) + (3 * a * a - 2 * a);
    },
    interpolate: function(a, b, c, d, e) {
        var a = .5 * (c - a), d = .5 * (d - b), f = e * e;
        return (2 * b - 2 * c + a + d) * e * f + (-3 * b + 3 * c - 2 * a - d) * f + a * e + b;
    }
}, THREE.Curve.create = function(a, b) {
    return a.prototype = Object.create(THREE.Curve.prototype), a.prototype.getPoint = b, 
    a;
}, THREE.CurvePath = function() {
    this.curves = [], this.bends = [], this.autoClose = !1;
}, THREE.CurvePath.prototype = Object.create(THREE.Curve.prototype), THREE.CurvePath.prototype.add = function(a) {
    this.curves.push(a);
}, THREE.CurvePath.prototype.checkConnection = function() {}, THREE.CurvePath.prototype.closePath = function() {
    var a = this.curves[0].getPoint(0), b = this.curves[this.curves.length - 1].getPoint(1);
    a.equals(b) || this.curves.push(new THREE.LineCurve(b, a));
}, THREE.CurvePath.prototype.getPoint = function(a) {
    for (var b = a * this.getLength(), c = this.getCurveLengths(), a = 0; a < c.length; ) {
        if (c[a] >= b) return b = c[a] - b, a = this.curves[a], b = 1 - b / a.getLength(), 
        a.getPointAt(b);
        a++;
    }
    return null;
}, THREE.CurvePath.prototype.getLength = function() {
    var a = this.getCurveLengths();
    return a[a.length - 1];
}, THREE.CurvePath.prototype.getCurveLengths = function() {
    if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
    var a, b = [], c = 0, d = this.curves.length;
    for (a = 0; d > a; a++) c += this.curves[a].getLength(), b.push(c);
    return this.cacheLengths = b;
}, THREE.CurvePath.prototype.getBoundingBox = function() {
    var a, b, c, d, e, f, g = this.getPoints();
    a = b = Number.NEGATIVE_INFINITY, d = e = Number.POSITIVE_INFINITY;
    var h, i, j, k, l = g[0] instanceof THREE.Vector3;
    for (k = l ? new THREE.Vector3() : new THREE.Vector2(), i = 0, j = g.length; j > i; i++) h = g[i], 
    h.x > a ? a = h.x : h.x < d && (d = h.x), h.y > b ? b = h.y : h.y < e && (e = h.y), 
    l && (h.z > c ? c = h.z : h.z < f && (f = h.z)), k.add(h);
    return g = {
        minX: d,
        minY: e,
        maxX: a,
        maxY: b,
        centroid: k.divideScalar(j)
    }, l && (g.maxZ = c, g.minZ = f), g;
}, THREE.CurvePath.prototype.createPointsGeometry = function(a) {
    return a = this.getPoints(a, !0), this.createGeometry(a);
}, THREE.CurvePath.prototype.createSpacedPointsGeometry = function(a) {
    return a = this.getSpacedPoints(a, !0), this.createGeometry(a);
}, THREE.CurvePath.prototype.createGeometry = function(a) {
    for (var b = new THREE.Geometry(), c = 0; c < a.length; c++) b.vertices.push(new THREE.Vector3(a[c].x, a[c].y, a[c].z || 0));
    return b;
}, THREE.CurvePath.prototype.addWrapPath = function(a) {
    this.bends.push(a);
}, THREE.CurvePath.prototype.getTransformedPoints = function(a, b) {
    var c, d, e = this.getPoints(a);
    for (b || (b = this.bends), c = 0, d = b.length; d > c; c++) e = this.getWrapPoints(e, b[c]);
    return e;
}, THREE.CurvePath.prototype.getTransformedSpacedPoints = function(a, b) {
    var c, d, e = this.getSpacedPoints(a);
    for (b || (b = this.bends), c = 0, d = b.length; d > c; c++) e = this.getWrapPoints(e, b[c]);
    return e;
}, THREE.CurvePath.prototype.getWrapPoints = function(a, b) {
    var c, d, e, f, g, h, i = this.getBoundingBox();
    for (c = 0, d = a.length; d > c; c++) e = a[c], f = e.x, g = e.y, h = f / i.maxX, 
    h = b.getUtoTmapping(h, f), f = b.getPoint(h), h = b.getTangent(h), h.set(-h.y, h.x).multiplyScalar(g), 
    e.x = f.x + h.x, e.y = f.y + h.y;
    return a;
}, THREE.Gyroscope = function() {
    THREE.Object3D.call(this);
}, THREE.Gyroscope.prototype = Object.create(THREE.Object3D.prototype), THREE.Gyroscope.prototype.updateMatrixWorld = function(a) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || a) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), 
    this.matrixWorld.decompose(this.translationWorld, this.quaternionWorld, this.scaleWorld), 
    this.matrix.decompose(this.translationObject, this.quaternionObject, this.scaleObject), 
    this.matrixWorld.compose(this.translationWorld, this.quaternionObject, this.scaleWorld)) : this.matrixWorld.copy(this.matrix), 
    this.matrixWorldNeedsUpdate = !1, a = !0);
    for (var b = 0, c = this.children.length; c > b; b++) this.children[b].updateMatrixWorld(a);
}, THREE.Gyroscope.prototype.translationWorld = new THREE.Vector3(), THREE.Gyroscope.prototype.translationObject = new THREE.Vector3(), 
THREE.Gyroscope.prototype.quaternionWorld = new THREE.Quaternion(), THREE.Gyroscope.prototype.quaternionObject = new THREE.Quaternion(), 
THREE.Gyroscope.prototype.scaleWorld = new THREE.Vector3(), THREE.Gyroscope.prototype.scaleObject = new THREE.Vector3(), 
THREE.Path = function(a) {
    THREE.CurvePath.call(this), this.actions = [], a && this.fromPoints(a);
}, THREE.Path.prototype = Object.create(THREE.CurvePath.prototype), THREE.PathActions = {
    MOVE_TO: "moveTo",
    LINE_TO: "lineTo",
    QUADRATIC_CURVE_TO: "quadraticCurveTo",
    BEZIER_CURVE_TO: "bezierCurveTo",
    CSPLINE_THRU: "splineThru",
    ARC: "arc",
    ELLIPSE: "ellipse"
}, THREE.Path.prototype.fromPoints = function(a) {
    this.moveTo(a[0].x, a[0].y);
    for (var b = 1, c = a.length; c > b; b++) this.lineTo(a[b].x, a[b].y);
}, THREE.Path.prototype.moveTo = function() {
    var a = Array.prototype.slice.call(arguments);
    this.actions.push({
        action: THREE.PathActions.MOVE_TO,
        args: a
    });
}, THREE.Path.prototype.lineTo = function(a, b) {
    var c = Array.prototype.slice.call(arguments), d = this.actions[this.actions.length - 1].args, d = new THREE.LineCurve(new THREE.Vector2(d[d.length - 2], d[d.length - 1]), new THREE.Vector2(a, b));
    this.curves.push(d), this.actions.push({
        action: THREE.PathActions.LINE_TO,
        args: c
    });
}, THREE.Path.prototype.quadraticCurveTo = function(a, b, c, d) {
    var e = Array.prototype.slice.call(arguments), f = this.actions[this.actions.length - 1].args, f = new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length - 2], f[f.length - 1]), new THREE.Vector2(a, b), new THREE.Vector2(c, d));
    this.curves.push(f), this.actions.push({
        action: THREE.PathActions.QUADRATIC_CURVE_TO,
        args: e
    });
}, THREE.Path.prototype.bezierCurveTo = function(a, b, c, d, e, f) {
    var g = Array.prototype.slice.call(arguments), h = this.actions[this.actions.length - 1].args, h = new THREE.CubicBezierCurve(new THREE.Vector2(h[h.length - 2], h[h.length - 1]), new THREE.Vector2(a, b), new THREE.Vector2(c, d), new THREE.Vector2(e, f));
    this.curves.push(h), this.actions.push({
        action: THREE.PathActions.BEZIER_CURVE_TO,
        args: g
    });
}, THREE.Path.prototype.splineThru = function(a) {
    var b = Array.prototype.slice.call(arguments), c = this.actions[this.actions.length - 1].args, c = [ new THREE.Vector2(c[c.length - 2], c[c.length - 1]) ];
    Array.prototype.push.apply(c, a), c = new THREE.SplineCurve(c), this.curves.push(c), 
    this.actions.push({
        action: THREE.PathActions.CSPLINE_THRU,
        args: b
    });
}, THREE.Path.prototype.arc = function(a, b, c, d, e, f) {
    var g = this.actions[this.actions.length - 1].args;
    this.absarc(a + g[g.length - 2], b + g[g.length - 1], c, d, e, f);
}, THREE.Path.prototype.absarc = function(a, b, c, d, e, f) {
    this.absellipse(a, b, c, c, d, e, f);
}, THREE.Path.prototype.ellipse = function(a, b, c, d, e, f, g) {
    var h = this.actions[this.actions.length - 1].args;
    this.absellipse(a + h[h.length - 2], b + h[h.length - 1], c, d, e, f, g);
}, THREE.Path.prototype.absellipse = function(a, b, c, d, e, f, g) {
    var h = Array.prototype.slice.call(arguments), i = new THREE.EllipseCurve(a, b, c, d, e, f, g);
    this.curves.push(i), i = i.getPoint(1), h.push(i.x), h.push(i.y), this.actions.push({
        action: THREE.PathActions.ELLIPSE,
        args: h
    });
}, THREE.Path.prototype.getSpacedPoints = function(a) {
    a || (a = 40);
    for (var b = [], c = 0; a > c; c++) b.push(this.getPoint(c / a));
    return b;
}, THREE.Path.prototype.getPoints = function(a, b) {
    if (this.useSpacedPoints) return console.log("tata"), this.getSpacedPoints(a, b);
    var c, d, e, f, g, h, i, j, k, l, m, n, o, a = a || 12, p = [];
    for (c = 0, d = this.actions.length; d > c; c++) switch (e = this.actions[c], f = e.action, 
    e = e.args, f) {
      case THREE.PathActions.MOVE_TO:
        p.push(new THREE.Vector2(e[0], e[1]));
        break;

      case THREE.PathActions.LINE_TO:
        p.push(new THREE.Vector2(e[0], e[1]));
        break;

      case THREE.PathActions.QUADRATIC_CURVE_TO:
        for (g = e[2], h = e[3], k = e[0], l = e[1], 0 < p.length ? (f = p[p.length - 1], 
        m = f.x, n = f.y) : (f = this.actions[c - 1].args, m = f[f.length - 2], n = f[f.length - 1]), 
        e = 1; a >= e; e++) o = e / a, f = THREE.Shape.Utils.b2(o, m, k, g), o = THREE.Shape.Utils.b2(o, n, l, h), 
        p.push(new THREE.Vector2(f, o));
        break;

      case THREE.PathActions.BEZIER_CURVE_TO:
        for (g = e[4], h = e[5], k = e[0], l = e[1], i = e[2], j = e[3], 0 < p.length ? (f = p[p.length - 1], 
        m = f.x, n = f.y) : (f = this.actions[c - 1].args, m = f[f.length - 2], n = f[f.length - 1]), 
        e = 1; a >= e; e++) o = e / a, f = THREE.Shape.Utils.b3(o, m, k, i, g), o = THREE.Shape.Utils.b3(o, n, l, j, h), 
        p.push(new THREE.Vector2(f, o));
        break;

      case THREE.PathActions.CSPLINE_THRU:
        for (f = this.actions[c - 1].args, o = [ new THREE.Vector2(f[f.length - 2], f[f.length - 1]) ], 
        f = a * e[0].length, o = o.concat(e[0]), o = new THREE.SplineCurve(o), e = 1; f >= e; e++) p.push(o.getPointAt(e / f));
        break;

      case THREE.PathActions.ARC:
        for (g = e[0], h = e[1], l = e[2], i = e[3], f = e[4], k = !!e[5], m = f - i, n = 2 * a, 
        e = 1; n >= e; e++) o = e / n, k || (o = 1 - o), o = i + o * m, f = g + l * Math.cos(o), 
        o = h + l * Math.sin(o), p.push(new THREE.Vector2(f, o));
        break;

      case THREE.PathActions.ELLIPSE:
        for (g = e[0], h = e[1], l = e[2], j = e[3], i = e[4], f = e[5], k = !!e[6], m = f - i, 
        n = 2 * a, e = 1; n >= e; e++) o = e / n, k || (o = 1 - o), o = i + o * m, f = g + l * Math.cos(o), 
        o = h + j * Math.sin(o), p.push(new THREE.Vector2(f, o));
    }
    return c = p[p.length - 1], 1e-10 > Math.abs(c.x - p[0].x) && 1e-10 > Math.abs(c.y - p[0].y) && p.splice(p.length - 1, 1), 
    b && p.push(p[0]), p;
}, THREE.Path.prototype.toShapes = function(a) {
    var b, c, d, e, f = [], g = new THREE.Path();
    for (b = 0, c = this.actions.length; c > b; b++) d = this.actions[b], e = d.args, 
    d = d.action, d == THREE.PathActions.MOVE_TO && 0 != g.actions.length && (f.push(g), 
    g = new THREE.Path()), g[d].apply(g, e);
    if (0 != g.actions.length && f.push(g), 0 == f.length) return [];
    var h;
    if (e = [], 1 == f.length) return d = f[0], h = new THREE.Shape(), h.actions = d.actions, 
    h.curves = d.curves, e.push(h), e;
    if (b = !THREE.Shape.Utils.isClockWise(f[0].getPoints()), a ? !b : b) for (h = new THREE.Shape(), 
    b = 0, c = f.length; c > b; b++) d = f[b], g = THREE.Shape.Utils.isClockWise(d.getPoints()), 
    (g = a ? !g : g) ? (h.actions = d.actions, h.curves = d.curves, e.push(h), h = new THREE.Shape()) : h.holes.push(d); else {
        for (h = void 0, b = 0, c = f.length; c > b; b++) d = f[b], g = THREE.Shape.Utils.isClockWise(d.getPoints()), 
        (g = a ? !g : g) ? (h && e.push(h), h = new THREE.Shape(), h.actions = d.actions, 
        h.curves = d.curves) : h.holes.push(d);
        e.push(h);
    }
    return e;
}, THREE.Shape = function() {
    THREE.Path.apply(this, arguments), this.holes = [];
}, THREE.Shape.prototype = Object.create(THREE.Path.prototype), THREE.Shape.prototype.extrude = function(a) {
    return new THREE.ExtrudeGeometry(this, a);
}, THREE.Shape.prototype.makeGeometry = function(a) {
    return new THREE.ShapeGeometry(this, a);
}, THREE.Shape.prototype.getPointsHoles = function(a) {
    var b, c = this.holes.length, d = [];
    for (b = 0; c > b; b++) d[b] = this.holes[b].getTransformedPoints(a, this.bends);
    return d;
}, THREE.Shape.prototype.getSpacedPointsHoles = function(a) {
    var b, c = this.holes.length, d = [];
    for (b = 0; c > b; b++) d[b] = this.holes[b].getTransformedSpacedPoints(a, this.bends);
    return d;
}, THREE.Shape.prototype.extractAllPoints = function(a) {
    return {
        shape: this.getTransformedPoints(a),
        holes: this.getPointsHoles(a)
    };
}, THREE.Shape.prototype.extractPoints = function(a) {
    return this.useSpacedPoints ? this.extractAllSpacedPoints(a) : this.extractAllPoints(a);
}, THREE.Shape.prototype.extractAllSpacedPoints = function(a) {
    return {
        shape: this.getTransformedSpacedPoints(a),
        holes: this.getSpacedPointsHoles(a)
    };
}, THREE.Shape.Utils = {
    removeHoles: function(a, b) {
        var c, d, e, f, g, h, i, j, k, l, m = a.concat(), n = m.concat(), o = [];
        for (g = 0; g < b.length; g++) {
            for (h = b[g], Array.prototype.push.apply(n, h), d = Number.POSITIVE_INFINITY, c = 0; c < h.length; c++) for (k = h[c], 
            l = [], j = 0; j < m.length; j++) i = m[j], i = k.distanceToSquared(i), l.push(i), 
            d > i && (d = i, e = c, f = j);
            c = f - 1 >= 0 ? f - 1 : m.length - 1, d = e - 1 >= 0 ? e - 1 : h.length - 1;
            var p = [ h[e], m[f], m[c] ];
            j = THREE.FontUtils.Triangulate.area(p);
            var q = [ h[e], h[d], m[f] ];
            k = THREE.FontUtils.Triangulate.area(q), l = f, i = e, f += 1, e += -1, 0 > f && (f += m.length), 
            f %= m.length, 0 > e && (e += h.length), e %= h.length, c = f - 1 >= 0 ? f - 1 : m.length - 1, 
            d = e - 1 >= 0 ? e - 1 : h.length - 1, p = [ h[e], m[f], m[c] ], p = THREE.FontUtils.Triangulate.area(p), 
            q = [ h[e], h[d], m[f] ], q = THREE.FontUtils.Triangulate.area(q), j + k > p + q && (f = l, 
            e = i, 0 > f && (f += m.length), f %= m.length, 0 > e && (e += h.length), e %= h.length, 
            c = f - 1 >= 0 ? f - 1 : m.length - 1, d = e - 1 >= 0 ? e - 1 : h.length - 1), j = m.slice(0, f), 
            k = m.slice(f), l = h.slice(e), i = h.slice(0, e), d = [ h[e], h[d], m[f] ], o.push([ h[e], m[f], m[c] ]), 
            o.push(d), m = j.concat(l).concat(i).concat(k);
        }
        return {
            shape: m,
            isolatedPts: o,
            allpoints: n
        };
    },
    triangulateShape: function(a, b) {
        var c, d, e, f, g = THREE.Shape.Utils.removeHoles(a, b), h = g.allpoints, i = g.isolatedPts, g = THREE.FontUtils.Triangulate(g.shape, !1), j = {};
        for (c = 0, d = h.length; d > c; c++) f = h[c].x + ":" + h[c].y, void 0 !== j[f] && console.log("Duplicate point", f), 
        j[f] = c;
        for (c = 0, d = g.length; d > c; c++) for (e = g[c], h = 0; 3 > h; h++) f = e[h].x + ":" + e[h].y, 
        f = j[f], void 0 !== f && (e[h] = f);
        for (c = 0, d = i.length; d > c; c++) for (e = i[c], h = 0; 3 > h; h++) f = e[h].x + ":" + e[h].y, 
        f = j[f], void 0 !== f && (e[h] = f);
        return g.concat(i);
    },
    isClockWise: function(a) {
        return 0 > THREE.FontUtils.Triangulate.area(a);
    },
    b2p0: function(a, b) {
        var c = 1 - a;
        return c * c * b;
    },
    b2p1: function(a, b) {
        return 2 * (1 - a) * a * b;
    },
    b2p2: function(a, b) {
        return a * a * b;
    },
    b2: function(a, b, c, d) {
        return this.b2p0(a, b) + this.b2p1(a, c) + this.b2p2(a, d);
    },
    b3p0: function(a, b) {
        var c = 1 - a;
        return c * c * c * b;
    },
    b3p1: function(a, b) {
        var c = 1 - a;
        return 3 * c * c * a * b;
    },
    b3p2: function(a, b) {
        return 3 * (1 - a) * a * a * b;
    },
    b3p3: function(a, b) {
        return a * a * a * b;
    },
    b3: function(a, b, c, d, e) {
        return this.b3p0(a, b) + this.b3p1(a, c) + this.b3p2(a, d) + this.b3p3(a, e);
    }
}, THREE.LineCurve = function(a, b) {
    this.v1 = a, this.v2 = b;
}, THREE.LineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.LineCurve.prototype.getPoint = function(a) {
    var b = this.v2.clone().sub(this.v1);
    return b.multiplyScalar(a).add(this.v1), b;
}, THREE.LineCurve.prototype.getPointAt = function(a) {
    return this.getPoint(a);
}, THREE.LineCurve.prototype.getTangent = function() {
    return this.v2.clone().sub(this.v1).normalize();
}, THREE.QuadraticBezierCurve = function(a, b, c) {
    this.v0 = a, this.v1 = b, this.v2 = c;
}, THREE.QuadraticBezierCurve.prototype = Object.create(THREE.Curve.prototype), 
THREE.QuadraticBezierCurve.prototype.getPoint = function(a) {
    var b;
    return b = THREE.Shape.Utils.b2(a, this.v0.x, this.v1.x, this.v2.x), a = THREE.Shape.Utils.b2(a, this.v0.y, this.v1.y, this.v2.y), 
    new THREE.Vector2(b, a);
}, THREE.QuadraticBezierCurve.prototype.getTangent = function(a) {
    var b;
    return b = THREE.Curve.Utils.tangentQuadraticBezier(a, this.v0.x, this.v1.x, this.v2.x), 
    a = THREE.Curve.Utils.tangentQuadraticBezier(a, this.v0.y, this.v1.y, this.v2.y), 
    b = new THREE.Vector2(b, a), b.normalize(), b;
}, THREE.CubicBezierCurve = function(a, b, c, d) {
    this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d;
}, THREE.CubicBezierCurve.prototype = Object.create(THREE.Curve.prototype), THREE.CubicBezierCurve.prototype.getPoint = function(a) {
    var b;
    return b = THREE.Shape.Utils.b3(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), 
    a = THREE.Shape.Utils.b3(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new THREE.Vector2(b, a);
}, THREE.CubicBezierCurve.prototype.getTangent = function(a) {
    var b;
    return b = THREE.Curve.Utils.tangentCubicBezier(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), 
    a = THREE.Curve.Utils.tangentCubicBezier(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), 
    b = new THREE.Vector2(b, a), b.normalize(), b;
}, THREE.SplineCurve = function(a) {
    this.points = void 0 == a ? [] : a;
}, THREE.SplineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.SplineCurve.prototype.getPoint = function(a) {
    var b, c = new THREE.Vector2(), d = [], e = this.points;
    return b = (e.length - 1) * a, a = Math.floor(b), b -= a, d[0] = 0 == a ? a : a - 1, 
    d[1] = a, d[2] = a > e.length - 2 ? e.length - 1 : a + 1, d[3] = a > e.length - 3 ? e.length - 1 : a + 2, 
    c.x = THREE.Curve.Utils.interpolate(e[d[0]].x, e[d[1]].x, e[d[2]].x, e[d[3]].x, b), 
    c.y = THREE.Curve.Utils.interpolate(e[d[0]].y, e[d[1]].y, e[d[2]].y, e[d[3]].y, b), 
    c;
}, THREE.EllipseCurve = function(a, b, c, d, e, f, g) {
    this.aX = a, this.aY = b, this.xRadius = c, this.yRadius = d, this.aStartAngle = e, 
    this.aEndAngle = f, this.aClockwise = g;
}, THREE.EllipseCurve.prototype = Object.create(THREE.Curve.prototype), THREE.EllipseCurve.prototype.getPoint = function(a) {
    var b;
    return b = this.aEndAngle - this.aStartAngle, 0 > b && (b += 2 * Math.PI), b > 2 * Math.PI && (b -= 2 * Math.PI), 
    b = !0 === this.aClockwise ? this.aEndAngle + (1 - a) * (2 * Math.PI - b) : this.aStartAngle + a * b, 
    a = this.aX + this.xRadius * Math.cos(b), b = this.aY + this.yRadius * Math.sin(b), 
    new THREE.Vector2(a, b);
}, THREE.ArcCurve = function(a, b, c, d, e, f) {
    THREE.EllipseCurve.call(this, a, b, c, c, d, e, f);
}, THREE.ArcCurve.prototype = Object.create(THREE.EllipseCurve.prototype), THREE.LineCurve3 = THREE.Curve.create(function(a, b) {
    this.v1 = a, this.v2 = b;
}, function(a) {
    var b = new THREE.Vector3();
    return b.subVectors(this.v2, this.v1), b.multiplyScalar(a), b.add(this.v1), b;
}), THREE.QuadraticBezierCurve3 = THREE.Curve.create(function(a, b, c) {
    this.v0 = a, this.v1 = b, this.v2 = c;
}, function(a) {
    var b, c;
    return b = THREE.Shape.Utils.b2(a, this.v0.x, this.v1.x, this.v2.x), c = THREE.Shape.Utils.b2(a, this.v0.y, this.v1.y, this.v2.y), 
    a = THREE.Shape.Utils.b2(a, this.v0.z, this.v1.z, this.v2.z), new THREE.Vector3(b, c, a);
}), THREE.CubicBezierCurve3 = THREE.Curve.create(function(a, b, c, d) {
    this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d;
}, function(a) {
    var b, c;
    return b = THREE.Shape.Utils.b3(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), 
    c = THREE.Shape.Utils.b3(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), a = THREE.Shape.Utils.b3(a, this.v0.z, this.v1.z, this.v2.z, this.v3.z), 
    new THREE.Vector3(b, c, a);
}), THREE.SplineCurve3 = THREE.Curve.create(function(a) {
    this.points = void 0 == a ? [] : a;
}, function(a) {
    var b, c = new THREE.Vector3(), d = [], e = this.points, a = (e.length - 1) * a;
    b = Math.floor(a), a -= b, d[0] = 0 == b ? b : b - 1, d[1] = b, d[2] = b > e.length - 2 ? e.length - 1 : b + 1, 
    d[3] = b > e.length - 3 ? e.length - 1 : b + 2, b = e[d[0]];
    var f = e[d[1]], g = e[d[2]], d = e[d[3]];
    return c.x = THREE.Curve.Utils.interpolate(b.x, f.x, g.x, d.x, a), c.y = THREE.Curve.Utils.interpolate(b.y, f.y, g.y, d.y, a), 
    c.z = THREE.Curve.Utils.interpolate(b.z, f.z, g.z, d.z, a), c;
}), THREE.ClosedSplineCurve3 = THREE.Curve.create(function(a) {
    this.points = void 0 == a ? [] : a;
}, function(a) {
    var b, c = new THREE.Vector3(), d = [], e = this.points;
    return b = (e.length - 0) * a, a = Math.floor(b), b -= a, a += a > 0 ? 0 : (Math.floor(Math.abs(a) / e.length) + 1) * e.length, 
    d[0] = (a - 1) % e.length, d[1] = a % e.length, d[2] = (a + 1) % e.length, d[3] = (a + 2) % e.length, 
    c.x = THREE.Curve.Utils.interpolate(e[d[0]].x, e[d[1]].x, e[d[2]].x, e[d[3]].x, b), 
    c.y = THREE.Curve.Utils.interpolate(e[d[0]].y, e[d[1]].y, e[d[2]].y, e[d[3]].y, b), 
    c.z = THREE.Curve.Utils.interpolate(e[d[0]].z, e[d[1]].z, e[d[2]].z, e[d[3]].z, b), 
    c;
}), THREE.AnimationHandler = function() {
    var a = [], b = {}, c = {
        update: function(b) {
            for (var c = 0; c < a.length; c++) a[c].update(b);
        },
        addToUpdate: function(b) {
            -1 === a.indexOf(b) && a.push(b);
        },
        removeFromUpdate: function(b) {
            b = a.indexOf(b), -1 !== b && a.splice(b, 1);
        },
        add: function(a) {
            if (void 0 !== b[a.name] && console.log("THREE.AnimationHandler.add: Warning! " + a.name + " already exists in library. Overwriting."), 
            b[a.name] = a, !0 !== a.initialized) {
                for (var c = 0; c < a.hierarchy.length; c++) {
                    for (var d = 0; d < a.hierarchy[c].keys.length; d++) if (0 > a.hierarchy[c].keys[d].time && (a.hierarchy[c].keys[d].time = 0), 
                    void 0 !== a.hierarchy[c].keys[d].rot && !(a.hierarchy[c].keys[d].rot instanceof THREE.Quaternion)) {
                        var e = a.hierarchy[c].keys[d].rot;
                        a.hierarchy[c].keys[d].rot = new THREE.Quaternion(e[0], e[1], e[2], e[3]);
                    }
                    if (a.hierarchy[c].keys.length && void 0 !== a.hierarchy[c].keys[0].morphTargets) {
                        for (e = {}, d = 0; d < a.hierarchy[c].keys.length; d++) for (var f = 0; f < a.hierarchy[c].keys[d].morphTargets.length; f++) {
                            var g = a.hierarchy[c].keys[d].morphTargets[f];
                            e[g] = -1;
                        }
                        for (a.hierarchy[c].usedMorphTargets = e, d = 0; d < a.hierarchy[c].keys.length; d++) {
                            var h = {};
                            for (g in e) {
                                for (f = 0; f < a.hierarchy[c].keys[d].morphTargets.length; f++) if (a.hierarchy[c].keys[d].morphTargets[f] === g) {
                                    h[g] = a.hierarchy[c].keys[d].morphTargetsInfluences[f];
                                    break;
                                }
                                f === a.hierarchy[c].keys[d].morphTargets.length && (h[g] = 0);
                            }
                            a.hierarchy[c].keys[d].morphTargetsInfluences = h;
                        }
                    }
                    for (d = 1; d < a.hierarchy[c].keys.length; d++) a.hierarchy[c].keys[d].time === a.hierarchy[c].keys[d - 1].time && (a.hierarchy[c].keys.splice(d, 1), 
                    d--);
                    for (d = 0; d < a.hierarchy[c].keys.length; d++) a.hierarchy[c].keys[d].index = d;
                }
                for (d = parseInt(a.length * a.fps, 10), a.JIT = {}, a.JIT.hierarchy = [], c = 0; c < a.hierarchy.length; c++) a.JIT.hierarchy.push(Array(d));
                a.initialized = !0;
            }
        },
        get: function(a) {
            return "string" == typeof a ? b[a] ? b[a] : (console.log("THREE.AnimationHandler.get: Couldn't find animation " + a), 
            null) : void 0;
        },
        parse: function(a) {
            var b = [];
            if (a instanceof THREE.SkinnedMesh) for (var c = 0; c < a.bones.length; c++) b.push(a.bones[c]); else d(a, b);
            return b;
        }
    }, d = function(a, b) {
        b.push(a);
        for (var c = 0; c < a.children.length; c++) d(a.children[c], b);
    };
    return c.LINEAR = 0, c.CATMULLROM = 1, c.CATMULLROM_FORWARD = 2, c;
}(), THREE.Animation = function(a, b, c) {
    this.root = a, this.data = THREE.AnimationHandler.get(b), this.hierarchy = THREE.AnimationHandler.parse(a), 
    this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.loop = this.isPaused = !0, 
    this.interpolationType = void 0 !== c ? c : THREE.AnimationHandler.LINEAR, this.points = [], 
    this.target = new THREE.Vector3();
}, THREE.Animation.prototype.play = function(a, b) {
    if (!1 === this.isPlaying) {
        this.isPlaying = !0, this.loop = void 0 !== a ? a : !0, this.currentTime = void 0 !== b ? b : 0;
        var c, d, e = this.hierarchy.length;
        for (c = 0; e > c; c++) {
            d = this.hierarchy[c], d.matrixAutoUpdate = !0, void 0 === d.animationCache && (d.animationCache = {}, 
            d.animationCache.prevKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, d.animationCache.nextKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, d.animationCache.originalMatrix = d instanceof THREE.Bone ? d.skinMatrix : d.matrix);
            var f = d.animationCache.prevKey;
            d = d.animationCache.nextKey, f.pos = this.data.hierarchy[c].keys[0], f.rot = this.data.hierarchy[c].keys[0], 
            f.scl = this.data.hierarchy[c].keys[0], d.pos = this.getNextKeyWith("pos", c, 1), 
            d.rot = this.getNextKeyWith("rot", c, 1), d.scl = this.getNextKeyWith("scl", c, 1);
        }
        this.update(0);
    }
    this.isPaused = !1, THREE.AnimationHandler.addToUpdate(this);
}, THREE.Animation.prototype.pause = function() {
    !0 === this.isPaused ? THREE.AnimationHandler.addToUpdate(this) : THREE.AnimationHandler.removeFromUpdate(this), 
    this.isPaused = !this.isPaused;
}, THREE.Animation.prototype.stop = function() {
    this.isPaused = this.isPlaying = !1, THREE.AnimationHandler.removeFromUpdate(this);
}, THREE.Animation.prototype.update = function(a) {
    if (!1 !== this.isPlaying) {
        var b, c, d, e, f, g, h, i, j, k = [ "pos", "rot", "scl" ];
        for (j = this.currentTime += a * this.timeScale; this.currentTime > this.data.length; ) this.currentTime -= this.data.length;
        i = this.currentTime %= this.data.length, parseInt(Math.min(i * this.data.fps, this.data.length * this.data.fps), 10);
        for (var l = 0, m = this.hierarchy.length; m > l; l++) {
            a = this.hierarchy[l], h = a.animationCache;
            for (var n = 0; 3 > n; n++) {
                if (b = k[n], f = h.prevKey[b], g = h.nextKey[b], g.time <= j) {
                    if (j >= i) {
                        if (!this.loop) return this.stop(), void 0;
                        for (f = this.data.hierarchy[l].keys[0], g = this.getNextKeyWith(b, l, 1); null !== g && g.time < i && g.index > f.index; ) f = g, 
                        g = this.getNextKeyWith(b, l, g.index + 1);
                    } else do f = g, g = this.getNextKeyWith(b, l, g.index + 1); while (null !== g && g.time < i && g.index > f.index);
                    h.prevKey[b] = f, h.nextKey[b] = g;
                }
                a.matrixAutoUpdate = !0, a.matrixWorldNeedsUpdate = !0, c = (i - f.time) / (g.time - f.time), 
                d = f[b], e = g[b], (0 > c || c > 1) && (console.log("THREE.Animation.update: Warning! Scale out of bounds:" + c + " on bone " + l), 
                c = 0 > c ? 0 : 1), "pos" === b ? (b = a.position, this.interpolationType === THREE.AnimationHandler.LINEAR ? (b.x = d[0] + (e[0] - d[0]) * c, 
                b.y = d[1] + (e[1] - d[1]) * c, b.z = d[2] + (e[2] - d[2]) * c) : (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) && (this.points[0] = this.getPrevKeyWith("pos", l, f.index - 1).pos, 
                this.points[1] = d, this.points[2] = e, this.points[3] = this.getNextKeyWith("pos", l, g.index + 1).pos, 
                c = .33 * c + .33, d = this.interpolateCatmullRom(this.points, c), b.x = d[0], b.y = d[1], 
                b.z = d[2], this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD && (c = this.interpolateCatmullRom(this.points, 1.01 * c), 
                this.target.set(c[0], c[1], c[2]), this.target.sub(b), this.target.y = 0, this.target.normalize(), 
                c = Math.atan2(this.target.x, this.target.z), a.rotation.set(0, c, 0)))) : "rot" === b ? THREE.Quaternion.slerp(d, e, a.quaternion, c) : "scl" === b && (b = a.scale, 
                b.x = d[0] + (e[0] - d[0]) * c, b.y = d[1] + (e[1] - d[1]) * c, b.z = d[2] + (e[2] - d[2]) * c);
            }
        }
    }
}, THREE.Animation.prototype.interpolateCatmullRom = function(a, b) {
    var c, d, e, f, g, h, i = [], j = [];
    return c = (a.length - 1) * b, d = Math.floor(c), c -= d, i[0] = 0 === d ? d : d - 1, 
    i[1] = d, i[2] = d > a.length - 2 ? d : d + 1, i[3] = d > a.length - 3 ? d : d + 2, 
    d = a[i[0]], f = a[i[1]], g = a[i[2]], h = a[i[3]], i = c * c, e = c * i, j[0] = this.interpolate(d[0], f[0], g[0], h[0], c, i, e), 
    j[1] = this.interpolate(d[1], f[1], g[1], h[1], c, i, e), j[2] = this.interpolate(d[2], f[2], g[2], h[2], c, i, e), 
    j;
}, THREE.Animation.prototype.interpolate = function(a, b, c, d, e, f, g) {
    return a = .5 * (c - a), d = .5 * (d - b), (2 * (b - c) + a + d) * g + (-3 * (b - c) - 2 * a - d) * f + a * e + b;
}, THREE.Animation.prototype.getNextKeyWith = function(a, b, c) {
    for (var d = this.data.hierarchy[b].keys, c = this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? c < d.length - 1 ? c : d.length - 1 : c % d.length; c < d.length; c++) if (void 0 !== d[c][a]) return d[c];
    return this.data.hierarchy[b].keys[0];
}, THREE.Animation.prototype.getPrevKeyWith = function(a, b, c) {
    for (var d = this.data.hierarchy[b].keys, c = this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? c > 0 ? c : 0 : c >= 0 ? c : c + d.length; c >= 0; c--) if (void 0 !== d[c][a]) return d[c];
    return this.data.hierarchy[b].keys[d.length - 1];
}, THREE.KeyFrameAnimation = function(a, b, c) {
    for (this.root = a, this.data = THREE.AnimationHandler.get(b), this.hierarchy = THREE.AnimationHandler.parse(a), 
    this.currentTime = 0, this.timeScale = .001, this.isPlaying = !1, this.loop = this.isPaused = !0, 
    this.JITCompile = void 0 !== c ? c : !0, a = 0, b = this.hierarchy.length; b > a; a++) {
        var c = this.data.hierarchy[a].sids, d = this.hierarchy[a];
        if (this.data.hierarchy[a].keys.length && c) {
            for (var e = 0; e < c.length; e++) {
                var f = c[e], g = this.getNextKeyWith(f, a, 0);
                g && g.apply(f);
            }
            d.matrixAutoUpdate = !1, this.data.hierarchy[a].node.updateMatrix(), d.matrixWorldNeedsUpdate = !0;
        }
    }
}, THREE.KeyFrameAnimation.prototype.play = function(a, b) {
    if (!this.isPlaying) {
        this.isPlaying = !0, this.loop = void 0 !== a ? a : !0, this.currentTime = void 0 !== b ? b : 0, 
        this.startTimeMs = b, this.startTime = 1e7, this.endTime = -this.startTime;
        var c, d, e, f = this.hierarchy.length;
        for (c = 0; f > c; c++) d = this.hierarchy[c], e = this.data.hierarchy[c], void 0 === e.animationCache && (e.animationCache = {}, 
        e.animationCache.prevKey = null, e.animationCache.nextKey = null, e.animationCache.originalMatrix = d instanceof THREE.Bone ? d.skinMatrix : d.matrix), 
        d = this.data.hierarchy[c].keys, d.length && (e.animationCache.prevKey = d[0], e.animationCache.nextKey = d[1], 
        this.startTime = Math.min(d[0].time, this.startTime), this.endTime = Math.max(d[d.length - 1].time, this.endTime));
        this.update(0);
    }
    this.isPaused = !1, THREE.AnimationHandler.addToUpdate(this);
}, THREE.KeyFrameAnimation.prototype.pause = function() {
    this.isPaused ? THREE.AnimationHandler.addToUpdate(this) : THREE.AnimationHandler.removeFromUpdate(this), 
    this.isPaused = !this.isPaused;
}, THREE.KeyFrameAnimation.prototype.stop = function() {
    this.isPaused = this.isPlaying = !1, THREE.AnimationHandler.removeFromUpdate(this);
    for (var a = 0; a < this.data.hierarchy.length; a++) {
        var b = this.hierarchy[a], c = this.data.hierarchy[a];
        if (void 0 !== c.animationCache) {
            var d = c.animationCache.originalMatrix;
            b instanceof THREE.Bone ? (d.copy(b.skinMatrix), b.skinMatrix = d) : (d.copy(b.matrix), 
            b.matrix = d), delete c.animationCache;
        }
    }
}, THREE.KeyFrameAnimation.prototype.update = function(a) {
    if (this.isPlaying) {
        var b, c, d, e, f, g, h, i = this.data.JIT.hierarchy;
        if (g = this.currentTime += a * this.timeScale, f = this.currentTime %= this.data.length, 
        f < this.startTimeMs && (f = this.currentTime = this.startTimeMs + f), e = parseInt(Math.min(f * this.data.fps, this.data.length * this.data.fps), 10), 
        (h = g > f) && !this.loop) {
            for (var a = 0, j = this.hierarchy.length; j > a; a++) {
                var k = this.data.hierarchy[a].keys, i = this.data.hierarchy[a].sids;
                if (d = k.length - 1, e = this.hierarchy[a], k.length) {
                    for (k = 0; k < i.length; k++) f = i[k], (g = this.getPrevKeyWith(f, a, d)) && g.apply(f);
                    this.data.hierarchy[a].node.updateMatrix(), e.matrixWorldNeedsUpdate = !0;
                }
            }
            this.stop();
        } else if (!(f < this.startTime)) {
            for (a = 0, j = this.hierarchy.length; j > a; a++) {
                d = this.hierarchy[a], b = this.data.hierarchy[a];
                var k = b.keys, l = b.animationCache;
                if (this.JITCompile && void 0 !== i[a][e]) d instanceof THREE.Bone ? (d.skinMatrix = i[a][e], 
                d.matrixWorldNeedsUpdate = !1) : (d.matrix = i[a][e], d.matrixWorldNeedsUpdate = !0); else if (k.length) {
                    if (this.JITCompile && l && (d instanceof THREE.Bone ? d.skinMatrix = l.originalMatrix : d.matrix = l.originalMatrix), 
                    b = l.prevKey, c = l.nextKey, b && c) {
                        if (c.time <= g) {
                            if (h && this.loop) for (b = k[0], c = k[1]; c.time < f; ) b = c, c = k[b.index + 1]; else if (!h) for (var m = k.length - 1; c.time < f && c.index !== m; ) b = c, 
                            c = k[b.index + 1];
                            l.prevKey = b, l.nextKey = c;
                        }
                        c.time >= f ? b.interpolate(c, f) : b.interpolate(c, c.time);
                    }
                    this.data.hierarchy[a].node.updateMatrix(), d.matrixWorldNeedsUpdate = !0;
                }
            }
            if (this.JITCompile && void 0 === i[0][e]) for (this.hierarchy[0].updateMatrixWorld(!0), 
            a = 0; a < this.hierarchy.length; a++) i[a][e] = this.hierarchy[a] instanceof THREE.Bone ? this.hierarchy[a].skinMatrix.clone() : this.hierarchy[a].matrix.clone();
        }
    }
}, THREE.KeyFrameAnimation.prototype.getNextKeyWith = function(a, b, c) {
    for (b = this.data.hierarchy[b].keys, c %= b.length; c < b.length; c++) if (b[c].hasTarget(a)) return b[c];
    return b[0];
}, THREE.KeyFrameAnimation.prototype.getPrevKeyWith = function(a, b, c) {
    for (b = this.data.hierarchy[b].keys, c = c >= 0 ? c : c + b.length; c >= 0; c--) if (b[c].hasTarget(a)) return b[c];
    return b[b.length - 1];
}, THREE.CubeCamera = function(a, b, c) {
    THREE.Object3D.call(this);
    var d = new THREE.PerspectiveCamera(90, 1, a, b);
    d.up.set(0, -1, 0), d.lookAt(new THREE.Vector3(1, 0, 0)), this.add(d);
    var e = new THREE.PerspectiveCamera(90, 1, a, b);
    e.up.set(0, -1, 0), e.lookAt(new THREE.Vector3(-1, 0, 0)), this.add(e);
    var f = new THREE.PerspectiveCamera(90, 1, a, b);
    f.up.set(0, 0, 1), f.lookAt(new THREE.Vector3(0, 1, 0)), this.add(f);
    var g = new THREE.PerspectiveCamera(90, 1, a, b);
    g.up.set(0, 0, -1), g.lookAt(new THREE.Vector3(0, -1, 0)), this.add(g);
    var h = new THREE.PerspectiveCamera(90, 1, a, b);
    h.up.set(0, -1, 0), h.lookAt(new THREE.Vector3(0, 0, 1)), this.add(h);
    var i = new THREE.PerspectiveCamera(90, 1, a, b);
    i.up.set(0, -1, 0), i.lookAt(new THREE.Vector3(0, 0, -1)), this.add(i), this.renderTarget = new THREE.WebGLRenderTargetCube(c, c, {
        format: THREE.RGBFormat,
        magFilter: THREE.LinearFilter,
        minFilter: THREE.LinearFilter
    }), this.updateCubeMap = function(a, b) {
        var c = this.renderTarget, j = c.generateMipmaps;
        c.generateMipmaps = !1, c.activeCubeFace = 0, a.render(b, d, c), c.activeCubeFace = 1, 
        a.render(b, e, c), c.activeCubeFace = 2, a.render(b, f, c), c.activeCubeFace = 3, 
        a.render(b, g, c), c.activeCubeFace = 4, a.render(b, h, c), c.generateMipmaps = j, 
        c.activeCubeFace = 5, a.render(b, i, c);
    };
}, THREE.CubeCamera.prototype = Object.create(THREE.Object3D.prototype), THREE.CombinedCamera = function(a, b, c, d, e, f, g) {
    THREE.Camera.call(this), this.fov = c, this.left = -a / 2, this.right = a / 2, this.top = b / 2, 
    this.bottom = -b / 2, this.cameraO = new THREE.OrthographicCamera(a / -2, a / 2, b / 2, b / -2, f, g), 
    this.cameraP = new THREE.PerspectiveCamera(c, a / b, d, e), this.zoom = 1, this.toPerspective();
}, THREE.CombinedCamera.prototype = Object.create(THREE.Camera.prototype), THREE.CombinedCamera.prototype.toPerspective = function() {
    this.near = this.cameraP.near, this.far = this.cameraP.far, this.cameraP.fov = this.fov / this.zoom, 
    this.cameraP.updateProjectionMatrix(), this.projectionMatrix = this.cameraP.projectionMatrix, 
    this.inPerspectiveMode = !0, this.inOrthographicMode = !1;
}, THREE.CombinedCamera.prototype.toOrthographic = function() {
    var a = this.cameraP.aspect, b = (this.cameraP.near + this.cameraP.far) / 2, b = Math.tan(this.fov / 2) * b, a = 2 * b * a / 2, b = b / this.zoom, a = a / this.zoom;
    this.cameraO.left = -a, this.cameraO.right = a, this.cameraO.top = b, this.cameraO.bottom = -b, 
    this.cameraO.updateProjectionMatrix(), this.near = this.cameraO.near, this.far = this.cameraO.far, 
    this.projectionMatrix = this.cameraO.projectionMatrix, this.inPerspectiveMode = !1, 
    this.inOrthographicMode = !0;
}, THREE.CombinedCamera.prototype.setSize = function(a, b) {
    this.cameraP.aspect = a / b, this.left = -a / 2, this.right = a / 2, this.top = b / 2, 
    this.bottom = -b / 2;
}, THREE.CombinedCamera.prototype.setFov = function(a) {
    this.fov = a, this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic();
}, THREE.CombinedCamera.prototype.updateProjectionMatrix = function() {
    this.inPerspectiveMode ? this.toPerspective() : (this.toPerspective(), this.toOrthographic());
}, THREE.CombinedCamera.prototype.setLens = function(a, b) {
    void 0 === b && (b = 24);
    var c = 2 * THREE.Math.radToDeg(Math.atan(b / (2 * a)));
    return this.setFov(c), c;
}, THREE.CombinedCamera.prototype.setZoom = function(a) {
    this.zoom = a, this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic();
}, THREE.CombinedCamera.prototype.toFrontView = function() {
    this.rotation.x = 0, this.rotation.y = 0, this.rotation.z = 0, this.rotationAutoUpdate = !1;
}, THREE.CombinedCamera.prototype.toBackView = function() {
    this.rotation.x = 0, this.rotation.y = Math.PI, this.rotation.z = 0, this.rotationAutoUpdate = !1;
}, THREE.CombinedCamera.prototype.toLeftView = function() {
    this.rotation.x = 0, this.rotation.y = -Math.PI / 2, this.rotation.z = 0, this.rotationAutoUpdate = !1;
}, THREE.CombinedCamera.prototype.toRightView = function() {
    this.rotation.x = 0, this.rotation.y = Math.PI / 2, this.rotation.z = 0, this.rotationAutoUpdate = !1;
}, THREE.CombinedCamera.prototype.toTopView = function() {
    this.rotation.x = -Math.PI / 2, this.rotation.y = 0, this.rotation.z = 0, this.rotationAutoUpdate = !1;
}, THREE.CombinedCamera.prototype.toBottomView = function() {
    this.rotation.x = Math.PI / 2, this.rotation.y = 0, this.rotation.z = 0, this.rotationAutoUpdate = !1;
}, THREE.CircleGeometry = function(a, b, c, d) {
    THREE.Geometry.call(this), this.radius = a = a || 50, this.segments = b = void 0 !== b ? Math.max(3, b) : 8, 
    this.thetaStart = c = void 0 !== c ? c : 0, this.thetaLength = d = void 0 !== d ? d : 2 * Math.PI;
    var e, f = [];
    e = new THREE.Vector3();
    var g = new THREE.Vector2(.5, .5);
    for (this.vertices.push(e), f.push(g), e = 0; b >= e; e++) {
        var h = new THREE.Vector3(), i = c + e / b * d;
        h.x = a * Math.cos(i), h.y = a * Math.sin(i), this.vertices.push(h), f.push(new THREE.Vector2((h.x / a + 1) / 2, (h.y / a + 1) / 2));
    }
    for (c = new THREE.Vector3(0, 0, 1), e = 1; b >= e; e++) this.faces.push(new THREE.Face3(e, e + 1, 0, [ c.clone(), c.clone(), c.clone() ])), 
    this.faceVertexUvs[0].push([ f[e].clone(), f[e + 1].clone(), g.clone() ]);
    this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), a);
}, THREE.CircleGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CubeGeometry = function(a, b, c, d, e, f) {
    function g(a, b, c, d, e, f, g, i) {
        var j, k = h.widthSegments, l = h.heightSegments, m = e / 2, n = f / 2, o = h.vertices.length;
        "x" === a && "y" === b || "y" === a && "x" === b ? j = "z" : "x" === a && "z" === b || "z" === a && "x" === b ? (j = "y", 
        l = h.depthSegments) : ("z" === a && "y" === b || "y" === a && "z" === b) && (j = "x", 
        k = h.depthSegments);
        var p = k + 1, q = l + 1, r = e / k, s = f / l, t = new THREE.Vector3();
        for (t[j] = g > 0 ? 1 : -1, e = 0; q > e; e++) for (f = 0; p > f; f++) {
            var u = new THREE.Vector3();
            u[a] = (f * r - m) * c, u[b] = (e * s - n) * d, u[j] = g, h.vertices.push(u);
        }
        for (e = 0; l > e; e++) for (f = 0; k > f; f++) n = f + p * e, a = f + p * (e + 1), 
        b = f + 1 + p * (e + 1), c = f + 1 + p * e, d = new THREE.Vector2(f / k, 1 - e / l), 
        g = new THREE.Vector2(f / k, 1 - (e + 1) / l), j = new THREE.Vector2((f + 1) / k, 1 - (e + 1) / l), 
        m = new THREE.Vector2((f + 1) / k, 1 - e / l), n = new THREE.Face3(n + o, a + o, c + o), 
        n.normal.copy(t), n.vertexNormals.push(t.clone(), t.clone(), t.clone()), n.materialIndex = i, 
        h.faces.push(n), h.faceVertexUvs[0].push([ d, g, m ]), n = new THREE.Face3(a + o, b + o, c + o), 
        n.normal.copy(t), n.vertexNormals.push(t.clone(), t.clone(), t.clone()), n.materialIndex = i, 
        h.faces.push(n), h.faceVertexUvs[0].push([ g.clone(), j, m.clone() ]);
    }
    THREE.Geometry.call(this);
    var h = this;
    this.width = a, this.height = b, this.depth = c, this.widthSegments = d || 1, this.heightSegments = e || 1, 
    this.depthSegments = f || 1, a = this.width / 2, b = this.height / 2, c = this.depth / 2, 
    g("z", "y", -1, -1, this.depth, this.height, a, 0), g("z", "y", 1, -1, this.depth, this.height, -a, 1), 
    g("x", "z", 1, 1, this.width, this.depth, b, 2), g("x", "z", 1, -1, this.width, this.depth, -b, 3), 
    g("x", "y", 1, -1, this.width, this.height, c, 4), g("x", "y", -1, -1, this.width, this.height, -c, 5), 
    this.computeCentroids(), this.mergeVertices();
}, THREE.CubeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CylinderGeometry = function(a, b, c, d, e, f) {
    THREE.Geometry.call(this), this.radiusTop = a = void 0 !== a ? a : 20, this.radiusBottom = b = void 0 !== b ? b : 20, 
    this.height = c = void 0 !== c ? c : 100, this.radialSegments = d = d || 8, this.heightSegments = e = e || 1, 
    this.openEnded = f = void 0 !== f ? f : !1;
    var g, h, i = c / 2, j = [], k = [];
    for (h = 0; e >= h; h++) {
        var l = [], m = [], n = h / e, o = n * (b - a) + a;
        for (g = 0; d >= g; g++) {
            var p = g / d, q = new THREE.Vector3();
            q.x = o * Math.sin(2 * p * Math.PI), q.y = -n * c + i, q.z = o * Math.cos(2 * p * Math.PI), 
            this.vertices.push(q), l.push(this.vertices.length - 1), m.push(new THREE.Vector2(p, 1 - n));
        }
        j.push(l), k.push(m);
    }
    for (c = (b - a) / c, g = 0; d > g; g++) for (0 !== a ? (l = this.vertices[j[0][g]].clone(), 
    m = this.vertices[j[0][g + 1]].clone()) : (l = this.vertices[j[1][g]].clone(), m = this.vertices[j[1][g + 1]].clone()), 
    l.setY(Math.sqrt(l.x * l.x + l.z * l.z) * c).normalize(), m.setY(Math.sqrt(m.x * m.x + m.z * m.z) * c).normalize(), 
    h = 0; e > h; h++) {
        var n = j[h][g], o = j[h + 1][g], p = j[h + 1][g + 1], q = j[h][g + 1], r = l.clone(), s = l.clone(), t = m.clone(), u = m.clone(), v = k[h][g].clone(), w = k[h + 1][g].clone(), x = k[h + 1][g + 1].clone(), y = k[h][g + 1].clone();
        this.faces.push(new THREE.Face3(n, o, q, [ r, s, u ])), this.faceVertexUvs[0].push([ v, w, y ]), 
        this.faces.push(new THREE.Face3(o, p, q, [ s.clone(), t, u.clone() ])), this.faceVertexUvs[0].push([ w.clone(), x, y.clone() ]);
    }
    if (!1 === f && a > 0) for (this.vertices.push(new THREE.Vector3(0, i, 0)), g = 0; d > g; g++) n = j[0][g], 
    o = j[0][g + 1], p = this.vertices.length - 1, r = new THREE.Vector3(0, 1, 0), s = new THREE.Vector3(0, 1, 0), 
    t = new THREE.Vector3(0, 1, 0), v = k[0][g].clone(), w = k[0][g + 1].clone(), x = new THREE.Vector2(w.x, 0), 
    this.faces.push(new THREE.Face3(n, o, p, [ r, s, t ])), this.faceVertexUvs[0].push([ v, w, x ]);
    if (!1 === f && b > 0) for (this.vertices.push(new THREE.Vector3(0, -i, 0)), g = 0; d > g; g++) n = j[h][g + 1], 
    o = j[h][g], p = this.vertices.length - 1, r = new THREE.Vector3(0, -1, 0), s = new THREE.Vector3(0, -1, 0), 
    t = new THREE.Vector3(0, -1, 0), v = k[h][g + 1].clone(), w = k[h][g].clone(), x = new THREE.Vector2(w.x, 1), 
    this.faces.push(new THREE.Face3(n, o, p, [ r, s, t ])), this.faceVertexUvs[0].push([ v, w, x ]);
    this.computeCentroids(), this.computeFaceNormals();
}, THREE.CylinderGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ExtrudeGeometry = function(a, b) {
    "undefined" != typeof a && (THREE.Geometry.call(this), a = a instanceof Array ? a : [ a ], 
    this.shapebb = a[a.length - 1].getBoundingBox(), this.addShapeList(a, b), this.computeCentroids(), 
    this.computeFaceNormals());
}, THREE.ExtrudeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ExtrudeGeometry.prototype.addShapeList = function(a, b) {
    for (var c = a.length, d = 0; c > d; d++) this.addShape(a[d], b);
}, THREE.ExtrudeGeometry.prototype.addShape = function(a, b) {
    function c(a, b, c) {
        return b || console.log("die"), b.clone().multiplyScalar(c).add(a);
    }
    function d(a, b, c) {
        var d = THREE.ExtrudeGeometry.__v1, e = THREE.ExtrudeGeometry.__v2, f = THREE.ExtrudeGeometry.__v3, g = THREE.ExtrudeGeometry.__v4, h = THREE.ExtrudeGeometry.__v5, i = THREE.ExtrudeGeometry.__v6;
        return d.set(a.x - b.x, a.y - b.y), e.set(a.x - c.x, a.y - c.y), d = d.normalize(), 
        e = e.normalize(), f.set(-d.y, d.x), g.set(e.y, -e.x), h.copy(a).add(f), i.copy(a).add(g), 
        h.equals(i) ? g.clone() : (h.copy(b).add(f), i.copy(c).add(g), f = d.dot(g), g = i.sub(h).dot(g), 
        0 === f && (console.log("Either infinite or no solutions!"), 0 === g ? console.log("Its finite solutions.") : console.log("Too bad, no solutions.")), 
        g /= f, 0 > g ? (b = Math.atan2(b.y - a.y, b.x - a.x), a = Math.atan2(c.y - a.y, c.x - a.x), 
        b > a && (a += 2 * Math.PI), c = (b + a) / 2, a = -Math.cos(c), c = -Math.sin(c), 
        new THREE.Vector2(a, c)) : d.multiplyScalar(g).add(h).sub(a).clone());
    }
    function e(c, d) {
        var e, f;
        for (M = c.length; 0 <= --M; ) {
            e = M, f = M - 1, 0 > f && (f = c.length - 1);
            for (var g = 0, h = s + 2 * p, g = 0; h > g; g++) {
                var i = J * g, j = J * (g + 1), k = d + e + i, i = d + f + i, l = d + f + j, j = d + e + j, m = c, n = g, o = h, q = e, r = f, k = k + C, i = i + C, l = l + C, j = j + C;
                B.faces.push(new THREE.Face3(k, i, j, null, null, w)), B.faces.push(new THREE.Face3(i, l, j, null, null, w)), 
                k = x.generateSideWallUV(B, a, m, b, k, i, l, j, n, o, q, r), B.faceVertexUvs[0].push([ k[0], k[1], k[3] ]), 
                B.faceVertexUvs[0].push([ k[1], k[2], k[3] ]);
            }
        }
    }
    function f(a, b, c) {
        B.vertices.push(new THREE.Vector3(a, b, c));
    }
    function g(c, d, e, f) {
        c += C, d += C, e += C, B.faces.push(new THREE.Face3(c, d, e, null, null, v)), c = f ? x.generateBottomUV(B, a, b, c, d, e) : x.generateTopUV(B, a, b, c, d, e), 
        B.faceVertexUvs[0].push(c);
    }
    var h, i, j, k, l, m = void 0 !== b.amount ? b.amount : 100, n = void 0 !== b.bevelThickness ? b.bevelThickness : 6, o = void 0 !== b.bevelSize ? b.bevelSize : n - 2, p = void 0 !== b.bevelSegments ? b.bevelSegments : 3, q = void 0 !== b.bevelEnabled ? b.bevelEnabled : !0, r = void 0 !== b.curveSegments ? b.curveSegments : 12, s = void 0 !== b.steps ? b.steps : 1, t = b.extrudePath, u = !1, v = b.material, w = b.extrudeMaterial, x = void 0 !== b.UVGenerator ? b.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;
    t && (h = t.getSpacedPoints(s), u = !0, q = !1, i = void 0 !== b.frames ? b.frames : new THREE.TubeGeometry.FrenetFrames(t, s, !1), 
    j = new THREE.Vector3(), k = new THREE.Vector3(), l = new THREE.Vector3()), q || (o = n = p = 0);
    var y, z, A, B = this, C = this.vertices.length, r = a.extractPoints(r), D = r.shape, r = r.holes;
    if (t = !THREE.Shape.Utils.isClockWise(D)) {
        for (D = D.reverse(), z = 0, A = r.length; A > z; z++) y = r[z], THREE.Shape.Utils.isClockWise(y) && (r[z] = y.reverse());
        t = !1;
    }
    var E = THREE.Shape.Utils.triangulateShape(D, r), t = D;
    for (z = 0, A = r.length; A > z; z++) y = r[z], D = D.concat(y);
    var F, G, H, I, J = D.length, K = E.length, L = [], M = 0, N = t.length;
    for (F = N - 1, G = M + 1; N > M; M++, F++, G++) F === N && (F = 0), G === N && (G = 0), 
    L[M] = d(t[M], t[F], t[G]);
    var O, P = [], Q = L.concat();
    for (z = 0, A = r.length; A > z; z++) {
        for (y = r[z], O = [], M = 0, N = y.length, F = N - 1, G = M + 1; N > M; M++, F++, 
        G++) F === N && (F = 0), G === N && (G = 0), O[M] = d(y[M], y[F], y[G]);
        P.push(O), Q = Q.concat(O);
    }
    for (F = 0; p > F; F++) {
        for (y = F / p, H = n * (1 - y), G = o * Math.sin(y * Math.PI / 2), M = 0, N = t.length; N > M; M++) I = c(t[M], L[M], G), 
        f(I.x, I.y, -H);
        for (z = 0, A = r.length; A > z; z++) for (y = r[z], O = P[z], M = 0, N = y.length; N > M; M++) I = c(y[M], O[M], G), 
        f(I.x, I.y, -H);
    }
    for (G = o, M = 0; J > M; M++) I = q ? c(D[M], Q[M], G) : D[M], u ? (k.copy(i.normals[0]).multiplyScalar(I.x), 
    j.copy(i.binormals[0]).multiplyScalar(I.y), l.copy(h[0]).add(k).add(j), f(l.x, l.y, l.z)) : f(I.x, I.y, 0);
    for (y = 1; s >= y; y++) for (M = 0; J > M; M++) I = q ? c(D[M], Q[M], G) : D[M], 
    u ? (k.copy(i.normals[y]).multiplyScalar(I.x), j.copy(i.binormals[y]).multiplyScalar(I.y), 
    l.copy(h[y]).add(k).add(j), f(l.x, l.y, l.z)) : f(I.x, I.y, m / s * y);
    for (F = p - 1; F >= 0; F--) {
        for (y = F / p, H = n * (1 - y), G = o * Math.sin(y * Math.PI / 2), M = 0, N = t.length; N > M; M++) I = c(t[M], L[M], G), 
        f(I.x, I.y, m + H);
        for (z = 0, A = r.length; A > z; z++) for (y = r[z], O = P[z], M = 0, N = y.length; N > M; M++) I = c(y[M], O[M], G), 
        u ? f(I.x, I.y + h[s - 1].y, h[s - 1].x + H) : f(I.x, I.y, m + H);
    }
    if (q) {
        for (n = 0 * J, M = 0; K > M; M++) m = E[M], g(m[2] + n, m[1] + n, m[0] + n, !0);
        for (n = J * (s + 2 * p), M = 0; K > M; M++) m = E[M], g(m[0] + n, m[1] + n, m[2] + n, !1);
    } else {
        for (M = 0; K > M; M++) m = E[M], g(m[2], m[1], m[0], !0);
        for (M = 0; K > M; M++) m = E[M], g(m[0] + J * s, m[1] + J * s, m[2] + J * s, !1);
    }
    for (m = 0, e(t, m), m += t.length, z = 0, A = r.length; A > z; z++) y = r[z], e(y, m), 
    m += y.length;
}, THREE.ExtrudeGeometry.WorldUVGenerator = {
    generateTopUV: function(a, b, c, d, e, f) {
        return b = a.vertices[e].x, e = a.vertices[e].y, c = a.vertices[f].x, f = a.vertices[f].y, 
        [ new THREE.Vector2(a.vertices[d].x, a.vertices[d].y), new THREE.Vector2(b, e), new THREE.Vector2(c, f) ];
    },
    generateBottomUV: function(a, b, c, d, e, f) {
        return this.generateTopUV(a, b, c, d, e, f);
    },
    generateSideWallUV: function(a, b, c, d, e, f, g, h) {
        var b = a.vertices[e].x, c = a.vertices[e].y, e = a.vertices[e].z, d = a.vertices[f].x, i = a.vertices[f].y, f = a.vertices[f].z, j = a.vertices[g].x, k = a.vertices[g].y, g = a.vertices[g].z, l = a.vertices[h].x, m = a.vertices[h].y, a = a.vertices[h].z;
        return .01 > Math.abs(c - i) ? [ new THREE.Vector2(b, 1 - e), new THREE.Vector2(d, 1 - f), new THREE.Vector2(j, 1 - g), new THREE.Vector2(l, 1 - a) ] : [ new THREE.Vector2(c, 1 - e), new THREE.Vector2(i, 1 - f), new THREE.Vector2(k, 1 - g), new THREE.Vector2(m, 1 - a) ];
    }
}, THREE.ExtrudeGeometry.__v1 = new THREE.Vector2(), THREE.ExtrudeGeometry.__v2 = new THREE.Vector2(), 
THREE.ExtrudeGeometry.__v3 = new THREE.Vector2(), THREE.ExtrudeGeometry.__v4 = new THREE.Vector2(), 
THREE.ExtrudeGeometry.__v5 = new THREE.Vector2(), THREE.ExtrudeGeometry.__v6 = new THREE.Vector2(), 
THREE.ShapeGeometry = function(a, b) {
    THREE.Geometry.call(this), !1 == a instanceof Array && (a = [ a ]), this.shapebb = a[a.length - 1].getBoundingBox(), 
    this.addShapeList(a, b), this.computeCentroids(), this.computeFaceNormals();
}, THREE.ShapeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ShapeGeometry.prototype.addShapeList = function(a, b) {
    for (var c = 0, d = a.length; d > c; c++) this.addShape(a[c], b);
    return this;
}, THREE.ShapeGeometry.prototype.addShape = function(a, b) {
    void 0 === b && (b = {});
    var c, d, e, f = b.material, g = void 0 === b.UVGenerator ? THREE.ExtrudeGeometry.WorldUVGenerator : b.UVGenerator, h = this.vertices.length;
    c = a.extractPoints(void 0 !== b.curveSegments ? b.curveSegments : 12);
    var i = c.shape, j = c.holes;
    if (!THREE.Shape.Utils.isClockWise(i)) for (i = i.reverse(), c = 0, d = j.length; d > c; c++) e = j[c], 
    THREE.Shape.Utils.isClockWise(e) && (j[c] = e.reverse());
    var k = THREE.Shape.Utils.triangulateShape(i, j);
    for (c = 0, d = j.length; d > c; c++) e = j[c], i = i.concat(e);
    for (j = i.length, d = k.length, c = 0; j > c; c++) e = i[c], this.vertices.push(new THREE.Vector3(e.x, e.y, 0));
    for (c = 0; d > c; c++) j = k[c], i = j[0] + h, e = j[1] + h, j = j[2] + h, this.faces.push(new THREE.Face3(i, e, j, null, null, f)), 
    this.faceVertexUvs[0].push(g.generateBottomUV(this, a, b, i, e, j));
}, THREE.LatheGeometry = function(a, b, c, d) {
    THREE.Geometry.call(this);
    for (var b = b || 12, c = c || 0, d = d || 2 * Math.PI, e = 1 / (a.length - 1), f = 1 / b, g = 0, h = b; h >= g; g++) for (var i = c + g * f * d, j = Math.cos(i), k = Math.sin(i), i = 0, l = a.length; l > i; i++) {
        var m = a[i], n = new THREE.Vector3();
        n.x = j * m.x - k * m.y, n.y = k * m.x + j * m.y, n.z = m.z, this.vertices.push(n);
    }
    for (c = a.length, g = 0, h = b; h > g; g++) for (i = 0, l = a.length - 1; l > i; i++) {
        var b = k = i + c * g, d = k + c, j = k + 1 + c, k = k + 1, m = g * f, n = i * e, o = m + f, p = n + e;
        this.faces.push(new THREE.Face3(b, d, k)), this.faceVertexUvs[0].push([ new THREE.Vector2(m, n), new THREE.Vector2(o, n), new THREE.Vector2(m, p) ]), 
        this.faces.push(new THREE.Face3(d, j, k)), this.faceVertexUvs[0].push([ new THREE.Vector2(o, n), new THREE.Vector2(o, p), new THREE.Vector2(m, p) ]);
    }
    this.mergeVertices(), this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals();
}, THREE.LatheGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.PlaneGeometry = function(a, b, c, d) {
    THREE.Geometry.call(this), this.width = a, this.height = b, this.widthSegments = c || 1, 
    this.heightSegments = d || 1;
    for (var e = a / 2, f = b / 2, c = this.widthSegments, d = this.heightSegments, g = c + 1, h = d + 1, i = this.width / c, j = this.height / d, k = new THREE.Vector3(0, 0, 1), a = 0; h > a; a++) for (b = 0; g > b; b++) this.vertices.push(new THREE.Vector3(b * i - e, -(a * j - f), 0));
    for (a = 0; d > a; a++) for (b = 0; c > b; b++) {
        var l = b + g * a, e = b + g * (a + 1), f = b + 1 + g * (a + 1), h = b + 1 + g * a, i = new THREE.Vector2(b / c, 1 - a / d), j = new THREE.Vector2(b / c, 1 - (a + 1) / d), m = new THREE.Vector2((b + 1) / c, 1 - (a + 1) / d), n = new THREE.Vector2((b + 1) / c, 1 - a / d), l = new THREE.Face3(l, e, h);
        l.normal.copy(k), l.vertexNormals.push(k.clone(), k.clone(), k.clone()), this.faces.push(l), 
        this.faceVertexUvs[0].push([ i, j, n ]), l = new THREE.Face3(e, f, h), l.normal.copy(k), 
        l.vertexNormals.push(k.clone(), k.clone(), k.clone()), this.faces.push(l), this.faceVertexUvs[0].push([ j.clone(), m, n.clone() ]);
    }
    this.computeCentroids();
}, THREE.PlaneGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.RingGeometry = function(a, b, c, d, e, f) {
    THREE.Geometry.call(this);
    for (var g, a = a || 0, b = b || 50, e = void 0 !== e ? e : 0, f = void 0 !== f ? f : 2 * Math.PI, c = void 0 !== c ? Math.max(3, c) : 8, d = void 0 !== d ? Math.max(3, d) : 8, h = [], i = a, j = (b - a) / d, a = 0; d >= a; a++) {
        for (g = 0; c >= g; g++) {
            var k = new THREE.Vector3(), l = e + g / c * f;
            k.x = i * Math.cos(l), k.y = i * Math.sin(l), this.vertices.push(k), h.push(new THREE.Vector2((k.x / b + 1) / 2, (k.y / b + 1) / 2));
        }
        i += j;
    }
    for (b = new THREE.Vector3(0, 0, 1), a = 0; d > a; a++) for (e = a * c, g = 0; c >= g; g++) l = g + e, 
    f = l + a, j = l + c + a, k = l + c + 1 + a, this.faces.push(new THREE.Face3(f, j, k, [ b.clone(), b.clone(), b.clone() ])), 
    this.faceVertexUvs[0].push([ h[f].clone(), h[j].clone(), h[k].clone() ]), f = l + a, 
    j = l + c + 1 + a, k = l + 1 + a, this.faces.push(new THREE.Face3(f, j, k, [ b.clone(), b.clone(), b.clone() ])), 
    this.faceVertexUvs[0].push([ h[f].clone(), h[j].clone(), h[k].clone() ]);
    this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), i);
}, THREE.RingGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.SphereGeometry = function(a, b, c, d, e, f, g) {
    THREE.Geometry.call(this), this.radius = a = a || 50, this.widthSegments = b = Math.max(3, Math.floor(b) || 8), 
    this.heightSegments = c = Math.max(2, Math.floor(c) || 6), this.phiStart = d = void 0 !== d ? d : 0, 
    this.phiLength = e = void 0 !== e ? e : 2 * Math.PI, this.thetaStart = f = void 0 !== f ? f : 0, 
    this.thetaLength = g = void 0 !== g ? g : Math.PI;
    var h, i, j = [], k = [];
    for (i = 0; c >= i; i++) {
        var l = [], m = [];
        for (h = 0; b >= h; h++) {
            var n = h / b, o = i / c, p = new THREE.Vector3();
            p.x = -a * Math.cos(d + n * e) * Math.sin(f + o * g), p.y = a * Math.cos(f + o * g), 
            p.z = a * Math.sin(d + n * e) * Math.sin(f + o * g), this.vertices.push(p), l.push(this.vertices.length - 1), 
            m.push(new THREE.Vector2(n, 1 - o));
        }
        j.push(l), k.push(m);
    }
    for (i = 0; i < this.heightSegments; i++) for (h = 0; h < this.widthSegments; h++) {
        var b = j[i][h + 1], c = j[i][h], d = j[i + 1][h], e = j[i + 1][h + 1], f = this.vertices[b].clone().normalize(), g = this.vertices[c].clone().normalize(), l = this.vertices[d].clone().normalize(), m = this.vertices[e].clone().normalize(), n = k[i][h + 1].clone(), o = k[i][h].clone(), p = k[i + 1][h].clone(), q = k[i + 1][h + 1].clone();
        Math.abs(this.vertices[b].y) === this.radius ? (n.x = (n.x + o.x) / 2, this.faces.push(new THREE.Face3(b, d, e, [ f, l, m ])), 
        this.faceVertexUvs[0].push([ n, p, q ])) : Math.abs(this.vertices[d].y) === this.radius ? (p.x = (p.x + q.x) / 2, 
        this.faces.push(new THREE.Face3(b, c, d, [ f, g, l ])), this.faceVertexUvs[0].push([ n, o, p ])) : (this.faces.push(new THREE.Face3(b, c, e, [ f, g, m ])), 
        this.faceVertexUvs[0].push([ n, o, q ]), this.faces.push(new THREE.Face3(c, d, e, [ g.clone(), l, m.clone() ])), 
        this.faceVertexUvs[0].push([ o.clone(), p, q.clone() ]));
    }
    this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), a);
}, THREE.SphereGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TextGeometry = function(a, b) {
    var b = b || {}, c = THREE.FontUtils.generateShapes(a, b);
    b.amount = void 0 !== b.height ? b.height : 50, void 0 === b.bevelThickness && (b.bevelThickness = 10), 
    void 0 === b.bevelSize && (b.bevelSize = 8), void 0 === b.bevelEnabled && (b.bevelEnabled = !1), 
    THREE.ExtrudeGeometry.call(this, c, b);
}, THREE.TextGeometry.prototype = Object.create(THREE.ExtrudeGeometry.prototype), 
THREE.TorusGeometry = function(a, b, c, d, e) {
    for (THREE.Geometry.call(this), this.radius = a || 100, this.tube = b || 40, this.radialSegments = c || 8, 
    this.tubularSegments = d || 6, this.arc = e || 2 * Math.PI, e = new THREE.Vector3(), 
    a = [], b = [], c = 0; c <= this.radialSegments; c++) for (d = 0; d <= this.tubularSegments; d++) {
        var f = d / this.tubularSegments * this.arc, g = 2 * c / this.radialSegments * Math.PI;
        e.x = this.radius * Math.cos(f), e.y = this.radius * Math.sin(f);
        var h = new THREE.Vector3();
        h.x = (this.radius + this.tube * Math.cos(g)) * Math.cos(f), h.y = (this.radius + this.tube * Math.cos(g)) * Math.sin(f), 
        h.z = this.tube * Math.sin(g), this.vertices.push(h), a.push(new THREE.Vector2(d / this.tubularSegments, c / this.radialSegments)), 
        b.push(h.clone().sub(e).normalize());
    }
    for (c = 1; c <= this.radialSegments; c++) for (d = 1; d <= this.tubularSegments; d++) {
        var e = (this.tubularSegments + 1) * c + d - 1, f = (this.tubularSegments + 1) * (c - 1) + d - 1, g = (this.tubularSegments + 1) * (c - 1) + d, h = (this.tubularSegments + 1) * c + d, i = new THREE.Face3(e, f, h, [ b[e], b[f], b[h] ]);
        i.normal.add(b[e]), i.normal.add(b[f]), i.normal.add(b[h]), i.normal.normalize(), 
        this.faces.push(i), this.faceVertexUvs[0].push([ a[e].clone(), a[f].clone(), a[h].clone() ]), 
        i = new THREE.Face3(f, g, h, [ b[f], b[g], b[h] ]), i.normal.add(b[f]), i.normal.add(b[g]), 
        i.normal.add(b[h]), i.normal.normalize(), this.faces.push(i), this.faceVertexUvs[0].push([ a[f].clone(), a[g].clone(), a[h].clone() ]);
    }
    this.computeCentroids();
}, THREE.TorusGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TorusKnotGeometry = function(a, b, c, d, e, f, g) {
    function h(a, b, c, d, e) {
        var f = Math.cos(a), g = Math.sin(a), a = b / c * a, b = Math.cos(a), f = .5 * d * (2 + b) * f, g = .5 * d * (2 + b) * g, d = .5 * e * d * Math.sin(a);
        return new THREE.Vector3(f, g, d);
    }
    for (THREE.Geometry.call(this), this.radius = a || 100, this.tube = b || 40, this.radialSegments = c || 64, 
    this.tubularSegments = d || 8, this.p = e || 2, this.q = f || 3, this.heightScale = g || 1, 
    this.grid = Array(this.radialSegments), c = new THREE.Vector3(), d = new THREE.Vector3(), 
    e = new THREE.Vector3(), a = 0; a < this.radialSegments; ++a) for (this.grid[a] = Array(this.tubularSegments), 
    b = 2 * (a / this.radialSegments) * this.p * Math.PI, f = h(b, this.q, this.p, this.radius, this.heightScale), 
    b = h(b + .01, this.q, this.p, this.radius, this.heightScale), c.subVectors(b, f), 
    d.addVectors(b, f), e.crossVectors(c, d), d.crossVectors(e, c), e.normalize(), d.normalize(), 
    b = 0; b < this.tubularSegments; ++b) {
        var i = 2 * (b / this.tubularSegments) * Math.PI, g = -this.tube * Math.cos(i), i = this.tube * Math.sin(i), j = new THREE.Vector3();
        j.x = f.x + g * d.x + i * e.x, j.y = f.y + g * d.y + i * e.y, j.z = f.z + g * d.z + i * e.z, 
        this.grid[a][b] = this.vertices.push(j) - 1;
    }
    for (a = 0; a < this.radialSegments; ++a) for (b = 0; b < this.tubularSegments; ++b) {
        var e = (a + 1) % this.radialSegments, f = (b + 1) % this.tubularSegments, c = this.grid[a][b], d = this.grid[e][b], e = this.grid[e][f], f = this.grid[a][f], g = new THREE.Vector2(a / this.radialSegments, b / this.tubularSegments), i = new THREE.Vector2((a + 1) / this.radialSegments, b / this.tubularSegments), j = new THREE.Vector2((a + 1) / this.radialSegments, (b + 1) / this.tubularSegments), k = new THREE.Vector2(a / this.radialSegments, (b + 1) / this.tubularSegments);
        this.faces.push(new THREE.Face3(c, d, f)), this.faceVertexUvs[0].push([ g, i, k ]), 
        this.faces.push(new THREE.Face3(d, e, f)), this.faceVertexUvs[0].push([ i.clone(), j, k.clone() ]);
    }
    this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals();
}, THREE.TorusKnotGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.TubeGeometry = function(a, b, c, d, e) {
    THREE.Geometry.call(this), this.path = a, this.segments = b || 64, this.radius = c || 1, 
    this.radialSegments = d || 8, this.closed = e || !1, this.grid = [];
    var f, g, h, i, j, k, l, d = this.segments + 1, e = new THREE.Vector3(), b = new THREE.TubeGeometry.FrenetFrames(this.path, this.segments, this.closed);
    for (k = b.normals, l = b.binormals, this.tangents = b.tangents, this.normals = k, 
    this.binormals = l, b = 0; d > b; b++) for (this.grid[b] = [], c = b / (d - 1), 
    j = a.getPointAt(c), f = k[b], g = l[b], c = 0; c < this.radialSegments; c++) h = 2 * (c / this.radialSegments) * Math.PI, 
    i = -this.radius * Math.cos(h), h = this.radius * Math.sin(h), e.copy(j), e.x += i * f.x + h * g.x, 
    e.y += i * f.y + h * g.y, e.z += i * f.z + h * g.z, this.grid[b][c] = this.vertices.push(new THREE.Vector3(e.x, e.y, e.z)) - 1;
    for (b = 0; b < this.segments; b++) for (c = 0; c < this.radialSegments; c++) e = this.closed ? (b + 1) % this.segments : b + 1, 
    k = (c + 1) % this.radialSegments, a = this.grid[b][c], d = this.grid[e][c], e = this.grid[e][k], 
    k = this.grid[b][k], l = new THREE.Vector2(b / this.segments, c / this.radialSegments), 
    f = new THREE.Vector2((b + 1) / this.segments, c / this.radialSegments), g = new THREE.Vector2((b + 1) / this.segments, (c + 1) / this.radialSegments), 
    i = new THREE.Vector2(b / this.segments, (c + 1) / this.radialSegments), this.faces.push(new THREE.Face3(a, d, k)), 
    this.faceVertexUvs[0].push([ l, f, i ]), this.faces.push(new THREE.Face3(d, e, k)), 
    this.faceVertexUvs[0].push([ f.clone(), g, i.clone() ]);
    this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals();
}, THREE.TubeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TubeGeometry.FrenetFrames = function(a, b, c) {
    new THREE.Vector3();
    var d = new THREE.Vector3();
    new THREE.Vector3();
    var e, f, g, h = [], i = [], j = [], k = new THREE.Vector3(), l = new THREE.Matrix4(), b = b + 1;
    for (this.tangents = h, this.normals = i, this.binormals = j, e = 0; b > e; e++) f = e / (b - 1), 
    h[e] = a.getTangentAt(f), h[e].normalize();
    for (i[0] = new THREE.Vector3(), j[0] = new THREE.Vector3(), a = Number.MAX_VALUE, 
    e = Math.abs(h[0].x), f = Math.abs(h[0].y), g = Math.abs(h[0].z), a >= e && (a = e, 
    d.set(1, 0, 0)), a >= f && (a = f, d.set(0, 1, 0)), a >= g && d.set(0, 0, 1), k.crossVectors(h[0], d).normalize(), 
    i[0].crossVectors(h[0], k), j[0].crossVectors(h[0], i[0]), e = 1; b > e; e++) i[e] = i[e - 1].clone(), 
    j[e] = j[e - 1].clone(), k.crossVectors(h[e - 1], h[e]), 1e-4 < k.length() && (k.normalize(), 
    d = Math.acos(THREE.Math.clamp(h[e - 1].dot(h[e]), -1, 1)), i[e].applyMatrix4(l.makeRotationAxis(k, d))), 
    j[e].crossVectors(h[e], i[e]);
    if (c) for (d = Math.acos(THREE.Math.clamp(i[0].dot(i[b - 1]), -1, 1)), d /= b - 1, 
    0 < h[0].dot(k.crossVectors(i[0], i[b - 1])) && (d = -d), e = 1; b > e; e++) i[e].applyMatrix4(l.makeRotationAxis(h[e], d * e)), 
    j[e].crossVectors(h[e], i[e]);
}, THREE.PolyhedronGeometry = function(a, b, c, d) {
    function e(a) {
        var b = a.normalize().clone();
        b.index = h.vertices.push(b) - 1;
        var c = Math.atan2(a.z, -a.x) / 2 / Math.PI + .5, a = Math.atan2(-a.y, Math.sqrt(a.x * a.x + a.z * a.z)) / Math.PI + .5;
        return b.uv = new THREE.Vector2(c, 1 - a), b;
    }
    function f(a, b, c) {
        var d = new THREE.Face3(a.index, b.index, c.index, [ a.clone(), b.clone(), c.clone() ]);
        d.centroid.add(a).add(b).add(c).divideScalar(3), h.faces.push(d), d = Math.atan2(d.centroid.z, -d.centroid.x), 
        h.faceVertexUvs[0].push([ g(a.uv, a, d), g(b.uv, b, d), g(c.uv, c, d) ]);
    }
    function g(a, b, c) {
        return 0 > c && 1 === a.x && (a = new THREE.Vector2(a.x - 1, a.y)), 0 === b.x && 0 === b.z && (a = new THREE.Vector2(c / 2 / Math.PI + .5, a.y)), 
        a.clone();
    }
    THREE.Geometry.call(this);
    for (var c = c || 1, d = d || 0, h = this, i = 0, j = a.length; j > i; i++) e(new THREE.Vector3(a[i][0], a[i][1], a[i][2]));
    for (var k = this.vertices, a = [], i = 0, j = b.length; j > i; i++) {
        var l = k[b[i][0]], m = k[b[i][1]], n = k[b[i][2]];
        a[i] = new THREE.Face3(l.index, m.index, n.index, [ l.clone(), m.clone(), n.clone() ]);
    }
    for (i = 0, j = a.length; j > i; i++) {
        m = a[i], k = d, b = Math.pow(2, k), Math.pow(4, k);
        for (var k = e(h.vertices[m.a]), l = e(h.vertices[m.b]), o = e(h.vertices[m.c]), m = [], n = 0; b >= n; n++) {
            m[n] = [];
            for (var p = e(k.clone().lerp(o, n / b)), q = e(l.clone().lerp(o, n / b)), r = b - n, s = 0; r >= s; s++) m[n][s] = 0 == s && n == b ? p : e(p.clone().lerp(q, s / r));
        }
        for (n = 0; b > n; n++) for (s = 0; 2 * (b - n) - 1 > s; s++) k = Math.floor(s / 2), 
        0 == s % 2 ? f(m[n][k + 1], m[n + 1][k], m[n][k]) : f(m[n][k + 1], m[n + 1][k + 1], m[n + 1][k]);
    }
    for (i = 0, j = this.faceVertexUvs[0].length; j > i; i++) d = this.faceVertexUvs[0][i], 
    a = d[0].x, b = d[1].x, k = d[2].x, l = Math.max(a, Math.max(b, k)), m = Math.min(a, Math.min(b, k)), 
    l > .9 && .1 > m && (.2 > a && (d[0].x += 1), .2 > b && (d[1].x += 1), .2 > k && (d[2].x += 1));
    for (i = 0, j = this.vertices.length; j > i; i++) this.vertices[i].multiplyScalar(c);
    this.mergeVertices(), this.computeCentroids(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3(), c);
}, THREE.PolyhedronGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.IcosahedronGeometry = function(a, b) {
    this.radius = a, this.detail = b;
    var c = (1 + Math.sqrt(5)) / 2;
    THREE.PolyhedronGeometry.call(this, [ [ -1, c, 0 ], [ 1, c, 0 ], [ -1, -c, 0 ], [ 1, -c, 0 ], [ 0, -1, c ], [ 0, 1, c ], [ 0, -1, -c ], [ 0, 1, -c ], [ c, 0, -1 ], [ c, 0, 1 ], [ -c, 0, -1 ], [ -c, 0, 1 ] ], [ [ 0, 11, 5 ], [ 0, 5, 1 ], [ 0, 1, 7 ], [ 0, 7, 10 ], [ 0, 10, 11 ], [ 1, 5, 9 ], [ 5, 11, 4 ], [ 11, 10, 2 ], [ 10, 7, 6 ], [ 7, 1, 8 ], [ 3, 9, 4 ], [ 3, 4, 2 ], [ 3, 2, 6 ], [ 3, 6, 8 ], [ 3, 8, 9 ], [ 4, 9, 5 ], [ 2, 4, 11 ], [ 6, 2, 10 ], [ 8, 6, 7 ], [ 9, 8, 1 ] ], a, b);
}, THREE.IcosahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.OctahedronGeometry = function(a, b) {
    THREE.PolyhedronGeometry.call(this, [ [ 1, 0, 0 ], [ -1, 0, 0 ], [ 0, 1, 0 ], [ 0, -1, 0 ], [ 0, 0, 1 ], [ 0, 0, -1 ] ], [ [ 0, 2, 4 ], [ 0, 4, 3 ], [ 0, 3, 5 ], [ 0, 5, 2 ], [ 1, 2, 5 ], [ 1, 5, 3 ], [ 1, 3, 4 ], [ 1, 4, 2 ] ], a, b);
}, THREE.OctahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.TetrahedronGeometry = function(a, b) {
    THREE.PolyhedronGeometry.call(this, [ [ 1, 1, 1 ], [ -1, -1, 1 ], [ -1, 1, -1 ], [ 1, -1, -1 ] ], [ [ 2, 1, 0 ], [ 0, 3, 2 ], [ 1, 3, 0 ], [ 2, 3, 1 ] ], a, b);
}, THREE.TetrahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.ParametricGeometry = function(a, b, c) {
    THREE.Geometry.call(this);
    var d, e, f, g, h = this.vertices, i = this.faces, j = this.faceVertexUvs[0], k = b + 1;
    for (d = 0; c >= d; d++) for (g = d / c, e = 0; b >= e; e++) f = e / b, f = a(f, g), 
    h.push(f);
    var l, m, n, o;
    for (d = 0; c > d; d++) for (e = 0; b > e; e++) a = d * k + e, h = d * k + e + 1, 
    g = (d + 1) * k + e + 1, f = (d + 1) * k + e, l = new THREE.Vector2(e / b, d / c), 
    m = new THREE.Vector2((e + 1) / b, d / c), n = new THREE.Vector2((e + 1) / b, (d + 1) / c), 
    o = new THREE.Vector2(e / b, (d + 1) / c), i.push(new THREE.Face3(a, h, f)), j.push([ l, m, o ]), 
    i.push(new THREE.Face3(h, g, f)), j.push([ m.clone(), n, o.clone() ]);
    this.computeCentroids(), this.computeFaceNormals(), this.computeVertexNormals();
}, THREE.ParametricGeometry.prototype = Object.create(THREE.Geometry.prototype), 
THREE.AxisHelper = function(a) {
    var a = a || 1, b = new THREE.Geometry();
    b.vertices.push(new THREE.Vector3(), new THREE.Vector3(a, 0, 0), new THREE.Vector3(), new THREE.Vector3(0, a, 0), new THREE.Vector3(), new THREE.Vector3(0, 0, a)), 
    b.colors.push(new THREE.Color(16711680), new THREE.Color(16755200), new THREE.Color(65280), new THREE.Color(11206400), new THREE.Color(255), new THREE.Color(43775)), 
    a = new THREE.LineBasicMaterial({
        vertexColors: THREE.VertexColors
    }), THREE.Line.call(this, b, a, THREE.LinePieces);
}, THREE.AxisHelper.prototype = Object.create(THREE.Line.prototype), THREE.ArrowHelper = function(a, b, c, d, e, f) {
    THREE.Object3D.call(this), void 0 === d && (d = 16776960), void 0 === c && (c = 1), 
    void 0 === e && (e = .2 * c), void 0 === f && (f = .2 * e), this.position = b, b = new THREE.Geometry(), 
    b.vertices.push(new THREE.Vector3(0, 0, 0)), b.vertices.push(new THREE.Vector3(0, 1, 0)), 
    this.line = new THREE.Line(b, new THREE.LineBasicMaterial({
        color: d
    })), this.line.matrixAutoUpdate = !1, this.add(this.line), b = new THREE.CylinderGeometry(0, .5, 1, 5, 1), 
    b.applyMatrix(new THREE.Matrix4().makeTranslation(0, -.5, 0)), this.cone = new THREE.Mesh(b, new THREE.MeshBasicMaterial({
        color: d
    })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(a), 
    this.setLength(c, e, f);
}, THREE.ArrowHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.ArrowHelper.prototype.setDirection = function() {
    var a, b = new THREE.Vector3();
    return function(c) {
        .99999 < c.y ? this.quaternion.set(0, 0, 0, 1) : -.99999 > c.y ? this.quaternion.set(1, 0, 0, 0) : (b.set(c.z, 0, -c.x).normalize(), 
        a = Math.acos(c.y), this.quaternion.setFromAxisAngle(b, a));
    };
}(), THREE.ArrowHelper.prototype.setLength = function(a, b, c) {
    void 0 === b && (b = .2 * a), void 0 === c && (c = .2 * b), this.line.scale.set(1, a, 1), 
    this.line.updateMatrix(), this.cone.scale.set(c, b, c), this.cone.position.y = a, 
    this.cone.updateMatrix();
}, THREE.ArrowHelper.prototype.setColor = function(a) {
    this.line.material.color.setHex(a), this.cone.material.color.setHex(a);
}, THREE.BoxHelper = function(a) {
    var b = [ new THREE.Vector3(1, 1, 1), new THREE.Vector3(-1, 1, 1), new THREE.Vector3(-1, -1, 1), new THREE.Vector3(1, -1, 1), new THREE.Vector3(1, 1, -1), new THREE.Vector3(-1, 1, -1), new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, -1, -1) ];
    this.vertices = b;
    var c = new THREE.Geometry();
    c.vertices.push(b[0], b[1], b[1], b[2], b[2], b[3], b[3], b[0], b[4], b[5], b[5], b[6], b[6], b[7], b[7], b[4], b[0], b[4], b[1], b[5], b[2], b[6], b[3], b[7]), 
    THREE.Line.call(this, c, new THREE.LineBasicMaterial({
        color: 16776960
    }), THREE.LinePieces), void 0 !== a && this.update(a);
}, THREE.BoxHelper.prototype = Object.create(THREE.Line.prototype), THREE.BoxHelper.prototype.update = function(a) {
    var b = a.geometry;
    null === b.boundingBox && b.computeBoundingBox();
    var c = b.boundingBox.min, b = b.boundingBox.max, d = this.vertices;
    d[0].set(b.x, b.y, b.z), d[1].set(c.x, b.y, b.z), d[2].set(c.x, c.y, b.z), d[3].set(b.x, c.y, b.z), 
    d[4].set(b.x, b.y, c.z), d[5].set(c.x, b.y, c.z), d[6].set(c.x, c.y, c.z), d[7].set(b.x, c.y, c.z), 
    this.geometry.computeBoundingSphere(), this.geometry.verticesNeedUpdate = !0, this.matrixAutoUpdate = !1, 
    this.matrixWorld = a.matrixWorld;
}, THREE.BoundingBoxHelper = function(a, b) {
    var c = b || 8947848;
    this.object = a, this.box = new THREE.Box3(), THREE.Mesh.call(this, new THREE.CubeGeometry(1, 1, 1), new THREE.MeshBasicMaterial({
        color: c,
        wireframe: !0
    }));
}, THREE.BoundingBoxHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.BoundingBoxHelper.prototype.update = function() {
    this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position);
}, THREE.CameraHelper = function(a) {
    function b(a, b, d) {
        c(a, d), c(b, d);
    }
    function c(a, b) {
        d.vertices.push(new THREE.Vector3()), d.colors.push(new THREE.Color(b)), void 0 === f[a] && (f[a] = []), 
        f[a].push(d.vertices.length - 1);
    }
    var d = new THREE.Geometry(), e = new THREE.LineBasicMaterial({
        color: 16777215,
        vertexColors: THREE.FaceColors
    }), f = {};
    b("n1", "n2", 16755200), b("n2", "n4", 16755200), b("n4", "n3", 16755200), b("n3", "n1", 16755200), 
    b("f1", "f2", 16755200), b("f2", "f4", 16755200), b("f4", "f3", 16755200), b("f3", "f1", 16755200), 
    b("n1", "f1", 16755200), b("n2", "f2", 16755200), b("n3", "f3", 16755200), b("n4", "f4", 16755200), 
    b("p", "n1", 16711680), b("p", "n2", 16711680), b("p", "n3", 16711680), b("p", "n4", 16711680), 
    b("u1", "u2", 43775), b("u2", "u3", 43775), b("u3", "u1", 43775), b("c", "t", 16777215), 
    b("p", "c", 3355443), b("cn1", "cn2", 3355443), b("cn3", "cn4", 3355443), b("cf1", "cf2", 3355443), 
    b("cf3", "cf4", 3355443), THREE.Line.call(this, d, e, THREE.LinePieces), this.camera = a, 
    this.matrixWorld = a.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = f, 
    this.update();
}, THREE.CameraHelper.prototype = Object.create(THREE.Line.prototype), THREE.CameraHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Camera(), c = new THREE.Projector();
    return function() {
        function d(d, f, g, h) {
            if (a.set(f, g, h), c.unprojectVector(a, b), d = e.pointMap[d], void 0 !== d) for (f = 0, 
            g = d.length; g > f; f++) e.geometry.vertices[d[f]].copy(a);
        }
        var e = this;
        b.projectionMatrix.copy(this.camera.projectionMatrix), d("c", 0, 0, -1), d("t", 0, 0, 1), 
        d("n1", -1, -1, -1), d("n2", 1, -1, -1), d("n3", -1, 1, -1), d("n4", 1, 1, -1), 
        d("f1", -1, -1, 1), d("f2", 1, -1, 1), d("f3", -1, 1, 1), d("f4", 1, 1, 1), d("u1", .7, 1.1, -1), 
        d("u2", -.7, 1.1, -1), d("u3", 0, 2, -1), d("cf1", -1, 0, 1), d("cf2", 1, 0, 1), 
        d("cf3", 0, -1, 1), d("cf4", 0, 1, 1), d("cn1", -1, 0, -1), d("cn2", 1, 0, -1), 
        d("cn3", 0, -1, -1), d("cn4", 0, 1, -1), this.geometry.verticesNeedUpdate = !0;
    };
}(), THREE.DirectionalLightHelper = function(a, b) {
    THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrixWorld = a.matrixWorld, 
    this.matrixAutoUpdate = !1;
    var b = b || 1, c = new THREE.PlaneGeometry(b, b), d = new THREE.MeshBasicMaterial({
        wireframe: !0,
        fog: !1
    });
    d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new THREE.Mesh(c, d), 
    this.add(this.lightPlane), c = new THREE.Geometry(), c.vertices.push(new THREE.Vector3()), 
    c.vertices.push(new THREE.Vector3()), d = new THREE.LineBasicMaterial({
        fog: !1
    }), d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new THREE.Line(c, d), 
    this.add(this.targetLine), this.update();
}, THREE.DirectionalLightHelper.prototype = Object.create(THREE.Object3D.prototype), 
THREE.DirectionalLightHelper.prototype.dispose = function() {
    this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), 
    this.targetLine.material.dispose();
}, THREE.DirectionalLightHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3(), c = new THREE.Vector3();
    return function() {
        a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), 
        c.subVectors(b, a), this.lightPlane.lookAt(c), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), 
        this.targetLine.geometry.vertices[1].copy(c), this.targetLine.geometry.verticesNeedUpdate = !0, 
        this.targetLine.material.color.copy(this.lightPlane.material.color);
    };
}(), THREE.FaceNormalsHelper = function(a, b, c, d) {
    this.object = a, this.size = b || 1;
    for (var a = c || 16776960, d = d || 1, b = new THREE.Geometry(), c = 0, e = this.object.geometry.faces.length; e > c; c++) b.vertices.push(new THREE.Vector3()), 
    b.vertices.push(new THREE.Vector3());
    THREE.Line.call(this, b, new THREE.LineBasicMaterial({
        color: a,
        linewidth: d
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3(), 
    this.update();
}, THREE.FaceNormalsHelper.prototype = Object.create(THREE.Line.prototype), THREE.FaceNormalsHelper.prototype.update = function() {
    var a = new THREE.Vector3();
    return function() {
        this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
        for (var b = this.geometry.vertices, c = this.object.geometry.faces, d = this.object.matrixWorld, e = 0, f = c.length; f > e; e++) {
            var g = c[e];
            a.copy(g.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
            var h = 2 * e;
            b[h].copy(g.centroid).applyMatrix4(d), b[h + 1].addVectors(b[h], a);
        }
        return this.geometry.verticesNeedUpdate = !0, this;
    };
}(), THREE.GridHelper = function(a, b) {
    var c = new THREE.Geometry(), d = new THREE.LineBasicMaterial({
        vertexColors: THREE.VertexColors
    });
    this.color1 = new THREE.Color(4473924), this.color2 = new THREE.Color(8947848);
    for (var e = -a; a >= e; e += b) {
        c.vertices.push(new THREE.Vector3(-a, 0, e), new THREE.Vector3(a, 0, e), new THREE.Vector3(e, 0, -a), new THREE.Vector3(e, 0, a));
        var f = 0 === e ? this.color1 : this.color2;
        c.colors.push(f, f, f, f);
    }
    THREE.Line.call(this, c, d, THREE.LinePieces);
}, THREE.GridHelper.prototype = Object.create(THREE.Line.prototype), THREE.GridHelper.prototype.setColors = function(a, b) {
    this.color1.set(a), this.color2.set(b), this.geometry.colorsNeedUpdate = !0;
}, THREE.HemisphereLightHelper = function(a, b) {
    THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrixWorld = a.matrixWorld, 
    this.matrixAutoUpdate = !1, this.colors = [ new THREE.Color(), new THREE.Color() ];
    var c = new THREE.SphereGeometry(b, 4, 2);
    c.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 2));
    for (var d = 0; 8 > d; d++) c.faces[d].color = this.colors[4 > d ? 0 : 1];
    d = new THREE.MeshBasicMaterial({
        vertexColors: THREE.FaceColors,
        wireframe: !0
    }), this.lightSphere = new THREE.Mesh(c, d), this.add(this.lightSphere), this.update();
}, THREE.HemisphereLightHelper.prototype = Object.create(THREE.Object3D.prototype), 
THREE.HemisphereLightHelper.prototype.dispose = function() {
    this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose();
}, THREE.HemisphereLightHelper.prototype.update = function() {
    var a = new THREE.Vector3();
    return function() {
        this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), 
        this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()), 
        this.lightSphere.geometry.colorsNeedUpdate = !0;
    };
}(), THREE.PointLightHelper = function(a, b) {
    this.light = a, this.light.updateMatrixWorld();
    var c = new THREE.SphereGeometry(b, 4, 2), d = new THREE.MeshBasicMaterial({
        wireframe: !0,
        fog: !1
    });
    d.color.copy(this.light.color).multiplyScalar(this.light.intensity), THREE.Mesh.call(this, c, d), 
    this.matrixWorld = this.light.matrixWorld, this.matrixAutoUpdate = !1;
}, THREE.PointLightHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.PointLightHelper.prototype.dispose = function() {
    this.geometry.dispose(), this.material.dispose();
}, THREE.PointLightHelper.prototype.update = function() {
    this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);
}, THREE.SpotLightHelper = function(a) {
    THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrixWorld = a.matrixWorld, 
    this.matrixAutoUpdate = !1, a = new THREE.CylinderGeometry(0, 1, 1, 8, 1, !0), a.applyMatrix(new THREE.Matrix4().makeTranslation(0, -.5, 0)), 
    a.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 2));
    var b = new THREE.MeshBasicMaterial({
        wireframe: !0,
        fog: !1
    });
    this.cone = new THREE.Mesh(a, b), this.add(this.cone), this.update();
}, THREE.SpotLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.SpotLightHelper.prototype.dispose = function() {
    this.cone.geometry.dispose(), this.cone.material.dispose();
}, THREE.SpotLightHelper.prototype.update = function() {
    var a = new THREE.Vector3(), b = new THREE.Vector3();
    return function() {
        var c = this.light.distance ? this.light.distance : 1e4, d = c * Math.tan(this.light.angle);
        this.cone.scale.set(d, d, c), a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), 
        this.cone.lookAt(b.sub(a)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);
    };
}(), THREE.VertexNormalsHelper = function(a, b, c, d) {
    this.object = a, this.size = b || 1;
    for (var b = c || 16711680, d = d || 1, c = new THREE.Geometry(), a = a.geometry.faces, e = 0, f = a.length; f > e; e++) for (var g = 0, h = a[e].vertexNormals.length; h > g; g++) c.vertices.push(new THREE.Vector3()), 
    c.vertices.push(new THREE.Vector3());
    THREE.Line.call(this, c, new THREE.LineBasicMaterial({
        color: b,
        linewidth: d
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3(), 
    this.update();
}, THREE.VertexNormalsHelper.prototype = Object.create(THREE.Line.prototype), THREE.VertexNormalsHelper.prototype.update = function() {
    var a = new THREE.Vector3();
    return function() {
        var b = [ "a", "b", "c", "d" ];
        this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
        for (var c = this.geometry.vertices, d = this.object.geometry.vertices, e = this.object.geometry.faces, f = this.object.matrixWorld, g = 0, h = 0, i = e.length; i > h; h++) for (var j = e[h], k = 0, l = j.vertexNormals.length; l > k; k++) {
            var m = j.vertexNormals[k];
            c[g].copy(d[j[b[k]]]).applyMatrix4(f), a.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size), 
            a.add(c[g]), g += 1, c[g].copy(a), g += 1;
        }
        return this.geometry.verticesNeedUpdate = !0, this;
    };
}(), THREE.VertexTangentsHelper = function(a, b, c, d) {
    this.object = a, this.size = b || 1;
    for (var b = c || 255, d = d || 1, c = new THREE.Geometry(), a = a.geometry.faces, e = 0, f = a.length; f > e; e++) for (var g = 0, h = a[e].vertexTangents.length; h > g; g++) c.vertices.push(new THREE.Vector3()), 
    c.vertices.push(new THREE.Vector3());
    THREE.Line.call(this, c, new THREE.LineBasicMaterial({
        color: b,
        linewidth: d
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.update();
}, THREE.VertexTangentsHelper.prototype = Object.create(THREE.Line.prototype), THREE.VertexTangentsHelper.prototype.update = function() {
    var a = new THREE.Vector3();
    return function() {
        var b = [ "a", "b", "c", "d" ];
        this.object.updateMatrixWorld(!0);
        for (var c = this.geometry.vertices, d = this.object.geometry.vertices, e = this.object.geometry.faces, f = this.object.matrixWorld, g = 0, h = 0, i = e.length; i > h; h++) for (var j = e[h], k = 0, l = j.vertexTangents.length; l > k; k++) {
            var m = j.vertexTangents[k];
            c[g].copy(d[j[b[k]]]).applyMatrix4(f), a.copy(m).transformDirection(f).multiplyScalar(this.size), 
            a.add(c[g]), g += 1, c[g].copy(a), g += 1;
        }
        return this.geometry.verticesNeedUpdate = !0, this;
    };
}(), THREE.WireframeHelper = function(a) {
    var b = [ 0, 0 ], c = {}, d = function(a, b) {
        return a - b;
    }, e = [ "a", "b", "c", "d" ], f = new THREE.BufferGeometry(), g = 0;
    if (a.geometry instanceof THREE.Geometry) {
        for (var h = a.geometry.vertices, i = a.geometry.faces, j = new Uint32Array(6 * i.length), k = 0, l = i.length; l > k; k++) for (var m = i[k], n = 0; 3 > n; n++) {
            b[0] = m[e[n]], b[1] = m[e[(n + 1) % 3]], b.sort(d);
            var o = b.toString();
            void 0 === c[o] && (j[2 * g] = b[0], j[2 * g + 1] = b[1], c[o] = !0, g++);
        }
        for (f.addAttribute("position", Float32Array, 2 * g, 3), b = f.attributes.position.array, 
        k = 0, l = g; l > k; k++) for (n = 0; 2 > n; n++) g = h[j[2 * k + n]], e = 6 * k + 3 * n, 
        b[e + 0] = g.x, b[e + 1] = g.y, b[e + 2] = g.z;
    } else {
        for (h = a.geometry.attributes.position.array, i = a.geometry.attributes.index.array, 
        j = new Uint32Array(2 * i.length), k = 0, l = i.length / 3; l > k; k++) for (n = 0; 3 > n; n++) e = 3 * k, 
        b[0] = i[e + n], b[1] = i[e + (n + 1) % 3], b.sort(d), o = b.toString(), void 0 === c[o] && (j[2 * g] = b[0], 
        j[2 * g + 1] = b[1], c[o] = !0, g++);
        for (f.addAttribute("position", Float32Array, 2 * g, 3), b = f.attributes.position.array, 
        k = 0, l = g; l > k; k++) for (n = 0; 2 > n; n++) e = 6 * k + 3 * n, g = 3 * j[2 * k + n], 
        b[e + 0] = h[g], b[e + 1] = h[g + 1], b[e + 2] = h[g + 2];
    }
    THREE.Line.call(this, f, new THREE.LineBasicMaterial({
        color: 16777215
    }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.matrixWorld = a.matrixWorld;
}, THREE.WireframeHelper.prototype = Object.create(THREE.Line.prototype), THREE.ImmediateRenderObject = function() {
    THREE.Object3D.call(this), this.render = function() {};
}, THREE.ImmediateRenderObject.prototype = Object.create(THREE.Object3D.prototype), 
THREE.LensFlare = function(a, b, c, d, e) {
    THREE.Object3D.call(this), this.lensFlares = [], this.positionScreen = new THREE.Vector3(), 
    this.customUpdateCallback = void 0, void 0 !== a && this.add(a, b, c, d, e);
}, THREE.LensFlare.prototype = Object.create(THREE.Object3D.prototype), THREE.LensFlare.prototype.add = function(a, b, c, d, e, f) {
    void 0 === b && (b = -1), void 0 === c && (c = 0), void 0 === f && (f = 1), void 0 === e && (e = new THREE.Color(16777215)), 
    void 0 === d && (d = THREE.NormalBlending), c = Math.min(c, Math.max(0, c)), this.lensFlares.push({
        texture: a,
        size: b,
        distance: c,
        x: 0,
        y: 0,
        z: 0,
        scale: 1,
        rotation: 1,
        opacity: f,
        color: e,
        blending: d
    });
}, THREE.LensFlare.prototype.updateLensFlares = function() {
    var a, b, c = this.lensFlares.length, d = 2 * -this.positionScreen.x, e = 2 * -this.positionScreen.y;
    for (a = 0; c > a; a++) b = this.lensFlares[a], b.x = this.positionScreen.x + d * b.distance, 
    b.y = this.positionScreen.y + e * b.distance, b.wantedRotation = .25 * b.x * Math.PI, 
    b.rotation += .25 * (b.wantedRotation - b.rotation);
}, THREE.MorphBlendMesh = function(a, b) {
    THREE.Mesh.call(this, a, b), this.animationsMap = {}, this.animationsList = [];
    var c = this.geometry.morphTargets.length;
    this.createAnimation("__default", 0, c - 1, c / 1), this.setAnimationWeight("__default", 1);
}, THREE.MorphBlendMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphBlendMesh.prototype.createAnimation = function(a, b, c, d) {
    b = {
        startFrame: b,
        endFrame: c,
        length: c - b + 1,
        fps: d,
        duration: (c - b) / d,
        lastFrame: 0,
        currentFrame: 0,
        active: !1,
        time: 0,
        direction: 1,
        weight: 1,
        directionBackwards: !1,
        mirroredLoop: !1
    }, this.animationsMap[a] = b, this.animationsList.push(b);
}, THREE.MorphBlendMesh.prototype.autoCreateAnimations = function(a) {
    for (var b, c = /([a-z]+)(\d+)/, d = {}, e = this.geometry, f = 0, g = e.morphTargets.length; g > f; f++) {
        var h = e.morphTargets[f].name.match(c);
        if (h && 1 < h.length) {
            var i = h[1];
            d[i] || (d[i] = {
                start: 1/0,
                end: -1/0
            }), h = d[i], f < h.start && (h.start = f), f > h.end && (h.end = f), b || (b = i);
        }
    }
    for (i in d) h = d[i], this.createAnimation(i, h.start, h.end, a);
    this.firstAnimation = b;
}, THREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function(a) {
    (a = this.animationsMap[a]) && (a.direction = 1, a.directionBackwards = !1);
}, THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(a) {
    (a = this.animationsMap[a]) && (a.direction = -1, a.directionBackwards = !0);
}, THREE.MorphBlendMesh.prototype.setAnimationFPS = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.fps = b, c.duration = (c.end - c.start) / c.fps);
}, THREE.MorphBlendMesh.prototype.setAnimationDuration = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.duration = b, c.fps = (c.end - c.start) / c.duration);
}, THREE.MorphBlendMesh.prototype.setAnimationWeight = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.weight = b);
}, THREE.MorphBlendMesh.prototype.setAnimationTime = function(a, b) {
    var c = this.animationsMap[a];
    c && (c.time = b);
}, THREE.MorphBlendMesh.prototype.getAnimationTime = function(a) {
    var b = 0;
    return (a = this.animationsMap[a]) && (b = a.time), b;
}, THREE.MorphBlendMesh.prototype.getAnimationDuration = function(a) {
    var b = -1;
    return (a = this.animationsMap[a]) && (b = a.duration), b;
}, THREE.MorphBlendMesh.prototype.playAnimation = function(a) {
    var b = this.animationsMap[a];
    b ? (b.time = 0, b.active = !0) : console.warn("animation[" + a + "] undefined");
}, THREE.MorphBlendMesh.prototype.stopAnimation = function(a) {
    (a = this.animationsMap[a]) && (a.active = !1);
}, THREE.MorphBlendMesh.prototype.update = function(a) {
    for (var b = 0, c = this.animationsList.length; c > b; b++) {
        var d = this.animationsList[b];
        if (d.active) {
            var e = d.duration / d.length;
            d.time += d.direction * a, d.mirroredLoop ? (d.time > d.duration || 0 > d.time) && (d.direction *= -1, 
            d.time > d.duration && (d.time = d.duration, d.directionBackwards = !0), 0 > d.time && (d.time = 0, 
            d.directionBackwards = !1)) : (d.time %= d.duration, 0 > d.time && (d.time += d.duration));
            var f = d.startFrame + THREE.Math.clamp(Math.floor(d.time / e), 0, d.length - 1), g = d.weight;
            f !== d.currentFrame && (this.morphTargetInfluences[d.lastFrame] = 0, this.morphTargetInfluences[d.currentFrame] = 1 * g, 
            this.morphTargetInfluences[f] = 0, d.lastFrame = d.currentFrame, d.currentFrame = f), 
            e = d.time % e / e, d.directionBackwards && (e = 1 - e), this.morphTargetInfluences[d.currentFrame] = e * g, 
            this.morphTargetInfluences[d.lastFrame] = (1 - e) * g;
        }
    }
}, THREE.LensFlarePlugin = function() {
    function a(a, c) {
        var d = b.createProgram(), e = b.createShader(b.FRAGMENT_SHADER), f = b.createShader(b.VERTEX_SHADER), g = "precision " + c + " float;\n";
        return b.shaderSource(e, g + a.fragmentShader), b.shaderSource(f, g + a.vertexShader), 
        b.compileShader(e), b.compileShader(f), b.attachShader(d, e), b.attachShader(d, f), 
        b.linkProgram(d), d;
    }
    var b, c, d, e, f, g, h, i, j, k, l, m, n;
    this.init = function(o) {
        b = o.context, c = o, d = o.getPrecision(), e = new Float32Array(16), f = new Uint16Array(6), 
        o = 0, e[o++] = -1, e[o++] = -1, e[o++] = 0, e[o++] = 0, e[o++] = 1, e[o++] = -1, 
        e[o++] = 1, e[o++] = 0, e[o++] = 1, e[o++] = 1, e[o++] = 1, e[o++] = 1, e[o++] = -1, 
        e[o++] = 1, e[o++] = 0, e[o++] = 1, o = 0, f[o++] = 0, f[o++] = 1, f[o++] = 2, f[o++] = 0, 
        f[o++] = 2, f[o++] = 3, g = b.createBuffer(), h = b.createBuffer(), b.bindBuffer(b.ARRAY_BUFFER, g), 
        b.bufferData(b.ARRAY_BUFFER, e, b.STATIC_DRAW), b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, h), 
        b.bufferData(b.ELEMENT_ARRAY_BUFFER, f, b.STATIC_DRAW), i = b.createTexture(), j = b.createTexture(), 
        b.bindTexture(b.TEXTURE_2D, i), b.texImage2D(b.TEXTURE_2D, 0, b.RGB, 16, 16, 0, b.RGB, b.UNSIGNED_BYTE, null), 
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE), 
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.NEAREST), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.NEAREST), 
        b.bindTexture(b.TEXTURE_2D, j), b.texImage2D(b.TEXTURE_2D, 0, b.RGBA, 16, 16, 0, b.RGBA, b.UNSIGNED_BYTE, null), 
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE), 
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.NEAREST), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.NEAREST), 
        0 >= b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS) ? (k = !1, l = a(THREE.ShaderFlares.lensFlare, d)) : (k = !0, 
        l = a(THREE.ShaderFlares.lensFlareVertexTexture, d)), m = {}, n = {}, m.vertex = b.getAttribLocation(l, "position"), 
        m.uv = b.getAttribLocation(l, "uv"), n.renderType = b.getUniformLocation(l, "renderType"), 
        n.map = b.getUniformLocation(l, "map"), n.occlusionMap = b.getUniformLocation(l, "occlusionMap"), 
        n.opacity = b.getUniformLocation(l, "opacity"), n.color = b.getUniformLocation(l, "color"), 
        n.scale = b.getUniformLocation(l, "scale"), n.rotation = b.getUniformLocation(l, "rotation"), 
        n.screenPosition = b.getUniformLocation(l, "screenPosition");
    }, this.render = function(a, d, e, f) {
        var a = a.__webglFlares, o = a.length;
        if (o) {
            var p = new THREE.Vector3(), q = f / e, r = .5 * e, s = .5 * f, t = 16 / f, u = new THREE.Vector2(t * q, t), v = new THREE.Vector3(1, 1, 0), w = new THREE.Vector2(1, 1), x = n, t = m;
            b.useProgram(l), b.enableVertexAttribArray(m.vertex), b.enableVertexAttribArray(m.uv), 
            b.uniform1i(x.occlusionMap, 0), b.uniform1i(x.map, 1), b.bindBuffer(b.ARRAY_BUFFER, g), 
            b.vertexAttribPointer(t.vertex, 2, b.FLOAT, !1, 16, 0), b.vertexAttribPointer(t.uv, 2, b.FLOAT, !1, 16, 8), 
            b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, h), b.disable(b.CULL_FACE), b.depthMask(!1);
            var y, z, A, B, C;
            for (y = 0; o > y; y++) if (t = 16 / f, u.set(t * q, t), B = a[y], p.set(B.matrixWorld.elements[12], B.matrixWorld.elements[13], B.matrixWorld.elements[14]), 
            p.applyMatrix4(d.matrixWorldInverse), p.applyProjection(d.projectionMatrix), v.copy(p), 
            w.x = v.x * r + r, w.y = v.y * s + s, k || 0 < w.x && w.x < e && 0 < w.y && w.y < f) for (b.activeTexture(b.TEXTURE1), 
            b.bindTexture(b.TEXTURE_2D, i), b.copyTexImage2D(b.TEXTURE_2D, 0, b.RGB, w.x - 8, w.y - 8, 16, 16, 0), 
            b.uniform1i(x.renderType, 0), b.uniform2f(x.scale, u.x, u.y), b.uniform3f(x.screenPosition, v.x, v.y, v.z), 
            b.disable(b.BLEND), b.enable(b.DEPTH_TEST), b.drawElements(b.TRIANGLES, 6, b.UNSIGNED_SHORT, 0), 
            b.activeTexture(b.TEXTURE0), b.bindTexture(b.TEXTURE_2D, j), b.copyTexImage2D(b.TEXTURE_2D, 0, b.RGBA, w.x - 8, w.y - 8, 16, 16, 0), 
            b.uniform1i(x.renderType, 1), b.disable(b.DEPTH_TEST), b.activeTexture(b.TEXTURE1), 
            b.bindTexture(b.TEXTURE_2D, i), b.drawElements(b.TRIANGLES, 6, b.UNSIGNED_SHORT, 0), 
            B.positionScreen.copy(v), B.customUpdateCallback ? B.customUpdateCallback(B) : B.updateLensFlares(), 
            b.uniform1i(x.renderType, 2), b.enable(b.BLEND), z = 0, A = B.lensFlares.length; A > z; z++) C = B.lensFlares[z], 
            .001 < C.opacity && .001 < C.scale && (v.x = C.x, v.y = C.y, v.z = C.z, t = C.size * C.scale / f, 
            u.x = t * q, u.y = t, b.uniform3f(x.screenPosition, v.x, v.y, v.z), b.uniform2f(x.scale, u.x, u.y), 
            b.uniform1f(x.rotation, C.rotation), b.uniform1f(x.opacity, C.opacity), b.uniform3f(x.color, C.color.r, C.color.g, C.color.b), 
            c.setBlending(C.blending, C.blendEquation, C.blendSrc, C.blendDst), c.setTexture(C.texture, 1), 
            b.drawElements(b.TRIANGLES, 6, b.UNSIGNED_SHORT, 0));
            b.enable(b.CULL_FACE), b.enable(b.DEPTH_TEST), b.depthMask(!0);
        }
    };
}, THREE.ShadowMapPlugin = function() {
    var a, b, c, d, e, f, g = new THREE.Frustum(), h = new THREE.Matrix4(), i = new THREE.Vector3(), j = new THREE.Vector3(), k = new THREE.Vector3();
    this.init = function(g) {
        a = g.context, b = g;
        var g = THREE.ShaderLib.depthRGBA, h = THREE.UniformsUtils.clone(g.uniforms);
        c = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h
        }), d = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h,
            morphTargets: !0
        }), e = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h,
            skinning: !0
        }), f = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h,
            morphTargets: !0,
            skinning: !0
        }), c._shadowPass = !0, d._shadowPass = !0, e._shadowPass = !0, f._shadowPass = !0;
    }, this.render = function(a, c) {
        b.shadowMapEnabled && b.shadowMapAutoUpdate && this.update(a, c);
    }, this.update = function(l, m) {
        var n, o, p, q, r, s, t, u, v, w = [];
        for (q = 0, a.clearColor(1, 1, 1, 1), a.disable(a.BLEND), a.enable(a.CULL_FACE), 
        a.frontFace(a.CCW), b.shadowMapCullFace === THREE.CullFaceFront ? a.cullFace(a.FRONT) : a.cullFace(a.BACK), 
        b.setDepthTest(!0), n = 0, o = l.__lights.length; o > n; n++) if (p = l.__lights[n], 
        p.castShadow) if (p instanceof THREE.DirectionalLight && p.shadowCascade) for (r = 0; r < p.shadowCascadeCount; r++) {
            var x;
            if (p.shadowCascadeArray[r]) x = p.shadowCascadeArray[r]; else {
                v = p, t = r, x = new THREE.DirectionalLight(), x.isVirtual = !0, x.onlyShadow = !0, 
                x.castShadow = !0, x.shadowCameraNear = v.shadowCameraNear, x.shadowCameraFar = v.shadowCameraFar, 
                x.shadowCameraLeft = v.shadowCameraLeft, x.shadowCameraRight = v.shadowCameraRight, 
                x.shadowCameraBottom = v.shadowCameraBottom, x.shadowCameraTop = v.shadowCameraTop, 
                x.shadowCameraVisible = v.shadowCameraVisible, x.shadowDarkness = v.shadowDarkness, 
                x.shadowBias = v.shadowCascadeBias[t], x.shadowMapWidth = v.shadowCascadeWidth[t], 
                x.shadowMapHeight = v.shadowCascadeHeight[t], x.pointsWorld = [], x.pointsFrustum = [], 
                u = x.pointsWorld, s = x.pointsFrustum;
                for (var y = 0; 8 > y; y++) u[y] = new THREE.Vector3(), s[y] = new THREE.Vector3();
                u = v.shadowCascadeNearZ[t], v = v.shadowCascadeFarZ[t], s[0].set(-1, -1, u), s[1].set(1, -1, u), 
                s[2].set(-1, 1, u), s[3].set(1, 1, u), s[4].set(-1, -1, v), s[5].set(1, -1, v), 
                s[6].set(-1, 1, v), s[7].set(1, 1, v), x.originalCamera = m, s = new THREE.Gyroscope(), 
                s.position = p.shadowCascadeOffset, s.add(x), s.add(x.target), m.add(s), p.shadowCascadeArray[r] = x, 
                console.log("Created virtualLight", x);
            }
            t = p, u = r, v = t.shadowCascadeArray[u], v.position.copy(t.position), v.target.position.copy(t.target.position), 
            v.lookAt(v.target), v.shadowCameraVisible = t.shadowCameraVisible, v.shadowDarkness = t.shadowDarkness, 
            v.shadowBias = t.shadowCascadeBias[u], s = t.shadowCascadeNearZ[u], t = t.shadowCascadeFarZ[u], 
            v = v.pointsFrustum, v[0].z = s, v[1].z = s, v[2].z = s, v[3].z = s, v[4].z = t, 
            v[5].z = t, v[6].z = t, v[7].z = t, w[q] = x, q++;
        } else w[q] = p, q++;
        for (n = 0, o = w.length; o > n; n++) {
            if (p = w[n], p.shadowMap || (r = THREE.LinearFilter, b.shadowMapType === THREE.PCFSoftShadowMap && (r = THREE.NearestFilter), 
            p.shadowMap = new THREE.WebGLRenderTarget(p.shadowMapWidth, p.shadowMapHeight, {
                minFilter: r,
                magFilter: r,
                format: THREE.RGBAFormat
            }), p.shadowMapSize = new THREE.Vector2(p.shadowMapWidth, p.shadowMapHeight), p.shadowMatrix = new THREE.Matrix4()), 
            !p.shadowCamera) {
                if (p instanceof THREE.SpotLight) p.shadowCamera = new THREE.PerspectiveCamera(p.shadowCameraFov, p.shadowMapWidth / p.shadowMapHeight, p.shadowCameraNear, p.shadowCameraFar); else {
                    if (!(p instanceof THREE.DirectionalLight)) {
                        console.error("Unsupported light type for shadow");
                        continue;
                    }
                    p.shadowCamera = new THREE.OrthographicCamera(p.shadowCameraLeft, p.shadowCameraRight, p.shadowCameraTop, p.shadowCameraBottom, p.shadowCameraNear, p.shadowCameraFar);
                }
                l.add(p.shadowCamera), !0 === l.autoUpdate && l.updateMatrixWorld();
            }
            if (p.shadowCameraVisible && !p.cameraHelper && (p.cameraHelper = new THREE.CameraHelper(p.shadowCamera), 
            p.shadowCamera.add(p.cameraHelper)), p.isVirtual && x.originalCamera == m) {
                for (r = m, q = p.shadowCamera, s = p.pointsFrustum, v = p.pointsWorld, i.set(1/0, 1/0, 1/0), 
                j.set(-1/0, -1/0, -1/0), t = 0; 8 > t; t++) u = v[t], u.copy(s[t]), THREE.ShadowMapPlugin.__projector.unprojectVector(u, r), 
                u.applyMatrix4(q.matrixWorldInverse), u.x < i.x && (i.x = u.x), u.x > j.x && (j.x = u.x), 
                u.y < i.y && (i.y = u.y), u.y > j.y && (j.y = u.y), u.z < i.z && (i.z = u.z), u.z > j.z && (j.z = u.z);
                q.left = i.x, q.right = j.x, q.top = j.y, q.bottom = i.y, q.updateProjectionMatrix();
            }
            for (q = p.shadowMap, s = p.shadowMatrix, r = p.shadowCamera, r.position.setFromMatrixPosition(p.matrixWorld), 
            k.setFromMatrixPosition(p.target.matrixWorld), r.lookAt(k), r.updateMatrixWorld(), 
            r.matrixWorldInverse.getInverse(r.matrixWorld), p.cameraHelper && (p.cameraHelper.visible = p.shadowCameraVisible), 
            p.shadowCameraVisible && p.cameraHelper.update(), s.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), 
            s.multiply(r.projectionMatrix), s.multiply(r.matrixWorldInverse), h.multiplyMatrices(r.projectionMatrix, r.matrixWorldInverse), 
            g.setFromMatrix(h), b.setRenderTarget(q), b.clear(), v = l.__webglObjects, p = 0, 
            q = v.length; q > p; p++) t = v[p], s = t.object, t.render = !1, !s.visible || !s.castShadow || (s instanceof THREE.Mesh || s instanceof THREE.ParticleSystem) && s.frustumCulled && !g.intersectsObject(s) || (s._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse, s.matrixWorld), 
            t.render = !0);
            for (p = 0, q = v.length; q > p; p++) t = v[p], t.render && (s = t.object, t = t.buffer, 
            y = s.material instanceof THREE.MeshFaceMaterial ? s.material.materials[0] : s.material, 
            u = 0 < s.geometry.morphTargets.length && y.morphTargets, y = s instanceof THREE.SkinnedMesh && y.skinning, 
            u = s.customDepthMaterial ? s.customDepthMaterial : y ? u ? f : e : u ? d : c, t instanceof THREE.BufferGeometry ? b.renderBufferDirect(r, l.__lights, null, u, t, s) : b.renderBuffer(r, l.__lights, null, u, t, s));
            for (v = l.__webglObjectsImmediate, p = 0, q = v.length; q > p; p++) t = v[p], s = t.object, 
            s.visible && s.castShadow && (s._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse, s.matrixWorld), 
            b.renderImmediateObject(r, l.__lights, null, c, s));
        }
        n = b.getClearColor(), o = b.getClearAlpha(), a.clearColor(n.r, n.g, n.b, o), a.enable(a.BLEND), 
        b.shadowMapCullFace === THREE.CullFaceFront && a.cullFace(a.BACK);
    };
}, THREE.ShadowMapPlugin.__projector = new THREE.Projector(), THREE.SpritePlugin = function() {
    function a(a, b) {
        return a.z !== b.z ? b.z - a.z : b.id - a.id;
    }
    var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z;
    this.init = function(a) {
        s = a.context, t = a, v = new Float32Array([ -.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1 ]), 
        w = new Uint16Array([ 0, 1, 2, 0, 2, 3 ]), x = s.createBuffer(), y = s.createBuffer(), 
        s.bindBuffer(s.ARRAY_BUFFER, x), s.bufferData(s.ARRAY_BUFFER, v, s.STATIC_DRAW), 
        s.bindBuffer(s.ELEMENT_ARRAY_BUFFER, y), s.bufferData(s.ELEMENT_ARRAY_BUFFER, w, s.STATIC_DRAW);
        var a = s.createProgram(), A = s.createShader(s.VERTEX_SHADER), B = s.createShader(s.FRAGMENT_SHADER);
        s.shaderSource(A, [ "precision " + t.getPrecision() + " float;", "uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}" ].join("\n")), 
        s.shaderSource(B, [ "precision " + t.getPrecision() + " float;", "uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}" ].join("\n")), 
        s.compileShader(A), s.compileShader(B), s.attachShader(a, A), s.attachShader(a, B), 
        s.linkProgram(a), z = a, q = s.getAttribLocation(z, "position"), r = s.getAttribLocation(z, "uv"), 
        b = s.getUniformLocation(z, "uvOffset"), c = s.getUniformLocation(z, "uvScale"), 
        d = s.getUniformLocation(z, "rotation"), e = s.getUniformLocation(z, "scale"), f = s.getUniformLocation(z, "color"), 
        g = s.getUniformLocation(z, "map"), h = s.getUniformLocation(z, "opacity"), i = s.getUniformLocation(z, "modelViewMatrix"), 
        j = s.getUniformLocation(z, "projectionMatrix"), k = s.getUniformLocation(z, "fogType"), 
        l = s.getUniformLocation(z, "fogDensity"), m = s.getUniformLocation(z, "fogNear"), 
        n = s.getUniformLocation(z, "fogFar"), o = s.getUniformLocation(z, "fogColor"), 
        p = s.getUniformLocation(z, "alphaTest"), a = document.createElement("canvas"), 
        a.width = 8, a.height = 8, A = a.getContext("2d"), A.fillStyle = "#ffffff", A.fillRect(0, 0, a.width, a.height), 
        u = new THREE.Texture(a), u.needsUpdate = !0;
    }, this.render = function(v, w) {
        var A = v.__webglSprites, B = A.length;
        if (B) {
            s.useProgram(z), s.enableVertexAttribArray(q), s.enableVertexAttribArray(r), s.disable(s.CULL_FACE), 
            s.enable(s.BLEND), s.bindBuffer(s.ARRAY_BUFFER, x), s.vertexAttribPointer(q, 2, s.FLOAT, !1, 16, 0), 
            s.vertexAttribPointer(r, 2, s.FLOAT, !1, 16, 8), s.bindBuffer(s.ELEMENT_ARRAY_BUFFER, y), 
            s.uniformMatrix4fv(j, !1, w.projectionMatrix.elements), s.activeTexture(s.TEXTURE0), 
            s.uniform1i(g, 0);
            var C = 0, D = 0, E = v.fog;
            E ? (s.uniform3f(o, E.color.r, E.color.g, E.color.b), E instanceof THREE.Fog ? (s.uniform1f(m, E.near), 
            s.uniform1f(n, E.far), s.uniform1i(k, 1), D = C = 1) : E instanceof THREE.FogExp2 && (s.uniform1f(l, E.density), 
            s.uniform1i(k, 2), D = C = 2)) : (s.uniform1i(k, 0), D = C = 0);
            for (var F, G, H = [], E = 0; B > E; E++) F = A[E], !1 !== F.visible && (F._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse, F.matrixWorld), 
            F.z = -F._modelViewMatrix.elements[14]);
            for (A.sort(a), E = 0; B > E; E++) F = A[E], !1 !== F.visible && (G = F.material, 
            s.uniform1f(p, G.alphaTest), s.uniformMatrix4fv(i, !1, F._modelViewMatrix.elements), 
            H[0] = F.scale.x, H[1] = F.scale.y, F = v.fog && G.fog ? D : 0, C !== F && (s.uniform1i(k, F), 
            C = F), s.uniform2f(c, G.uvScale.x, G.uvScale.y), s.uniform2f(b, G.uvOffset.x, G.uvOffset.y), 
            s.uniform1f(h, G.opacity), s.uniform3f(f, G.color.r, G.color.g, G.color.b), s.uniform1f(d, G.rotation), 
            s.uniform2fv(e, H), t.setBlending(G.blending, G.blendEquation, G.blendSrc, G.blendDst), 
            t.setDepthTest(G.depthTest), t.setDepthWrite(G.depthWrite), G.map && G.map.image && G.map.image.width ? t.setTexture(G.map, 0) : t.setTexture(u, 0), 
            s.drawElements(s.TRIANGLES, 6, s.UNSIGNED_SHORT, 0));
            s.enable(s.CULL_FACE);
        }
    };
}, THREE.DepthPassPlugin = function() {
    this.enabled = !1, this.renderTarget = null;
    var a, b, c, d, e, f, g = new THREE.Frustum(), h = new THREE.Matrix4();
    this.init = function(g) {
        a = g.context, b = g;
        var g = THREE.ShaderLib.depthRGBA, h = THREE.UniformsUtils.clone(g.uniforms);
        c = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h
        }), d = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h,
            morphTargets: !0
        }), e = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h,
            skinning: !0
        }), f = new THREE.ShaderMaterial({
            fragmentShader: g.fragmentShader,
            vertexShader: g.vertexShader,
            uniforms: h,
            morphTargets: !0,
            skinning: !0
        }), c._shadowPass = !0, d._shadowPass = !0, e._shadowPass = !0, f._shadowPass = !0;
    }, this.render = function(a, b) {
        this.enabled && this.update(a, b);
    }, this.update = function(i, j) {
        var k, l, m, n, o, p;
        for (a.clearColor(1, 1, 1, 1), a.disable(a.BLEND), b.setDepthTest(!0), !0 === i.autoUpdate && i.updateMatrixWorld(), 
        j.matrixWorldInverse.getInverse(j.matrixWorld), h.multiplyMatrices(j.projectionMatrix, j.matrixWorldInverse), 
        g.setFromMatrix(h), b.setRenderTarget(this.renderTarget), b.clear(), p = i.__webglObjects, 
        k = 0, l = p.length; l > k; k++) m = p[k], o = m.object, m.render = !1, !o.visible || (o instanceof THREE.Mesh || o instanceof THREE.ParticleSystem) && o.frustumCulled && !g.intersectsObject(o) || (o._modelViewMatrix.multiplyMatrices(j.matrixWorldInverse, o.matrixWorld), 
        m.render = !0);
        var q;
        for (k = 0, l = p.length; l > k; k++) m = p[k], !m.render || (o = m.object, m = m.buffer, 
        o instanceof THREE.ParticleSystem && !o.customDepthMaterial) || ((q = o.material instanceof THREE.MeshFaceMaterial ? o.material.materials[0] : o.material) && b.setMaterialFaces(o.material), 
        n = 0 < o.geometry.morphTargets.length && q.morphTargets, q = o instanceof THREE.SkinnedMesh && q.skinning, 
        n = o.customDepthMaterial ? o.customDepthMaterial : q ? n ? f : e : n ? d : c, m instanceof THREE.BufferGeometry ? b.renderBufferDirect(j, i.__lights, null, n, m, o) : b.renderBuffer(j, i.__lights, null, n, m, o));
        for (p = i.__webglObjectsImmediate, k = 0, l = p.length; l > k; k++) m = p[k], o = m.object, 
        o.visible && (o._modelViewMatrix.multiplyMatrices(j.matrixWorldInverse, o.matrixWorld), 
        b.renderImmediateObject(j, i.__lights, null, c, o));
        k = b.getClearColor(), l = b.getClearAlpha(), a.clearColor(k.r, k.g, k.b, l), a.enable(a.BLEND);
    };
}, THREE.ShaderFlares = {
    lensFlareVertexTexture: {
        vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
        fragmentShader: "uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
    },
    lensFlare: {
        vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
        fragmentShader: "precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
    }
}, THREE.CopyShader = {
    uniforms: {
        tDiffuse: {
            type: "t",
            value: null
        },
        opacity: {
            type: "f",
            value: 1
        }
    },
    vertexShader: [ "varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}" ].join("\n"),
    fragmentShader: [ "uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}" ].join("\n")
}, THREE.VignetteShader = {
    uniforms: {
        tDiffuse: {
            type: "t",
            value: null
        },
        offset: {
            type: "f",
            value: 1
        },
        darkness: {
            type: "f",
            value: 1
        }
    },
    vertexShader: [ "varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}" ].join("\n"),
    fragmentShader: [ "uniform float offset;", "uniform float darkness;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );", "gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );", "}" ].join("\n")
}, THREE.FXAAShader = {
    uniforms: {
        tDiffuse: {
            type: "t",
            value: null
        },
        resolution: {
            type: "v2",
            value: new THREE.Vector2(1 / 1024, 1 / 512)
        }
    },
    vertexShader: [ "varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}" ].join("\n"),
    fragmentShader: [ "uniform sampler2D tDiffuse;", "uniform vec2 resolution;", "varying vec2 vUv;", "#define FXAA_REDUCE_MIN   (1.0/128.0)", "#define FXAA_REDUCE_MUL   (1.0/8.0)", "#define FXAA_SPAN_MAX     8.0", "void main() {", "vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;", "vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;", "vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;", "vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;", "vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );", "vec3 rgbM  = rgbaM.xyz;", "float opacity  = rgbaM.w;", "vec3 luma = vec3( 0.299, 0.587, 0.114 );", "float lumaNW = dot( rgbNW, luma );", "float lumaNE = dot( rgbNE, luma );", "float lumaSW = dot( rgbSW, luma );", "float lumaSE = dot( rgbSE, luma );", "float lumaM  = dot( rgbM,  luma );", "float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );", "float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );", "vec2 dir;", "dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));", "dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));", "float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );", "float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );", "dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),", "max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),", "dir * rcpDirMin)) * resolution;", "vec3 rgbA = texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz;", "rgbA += texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz;", "rgbA *= 0.5;", "vec3 rgbB = texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * -0.5 ).xyz;", "rgbB += texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * 0.5 ).xyz;", "rgbB *= 0.25;", "rgbB += rgbA * 0.5;", "float lumaB = dot( rgbB, luma );", "if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {", "gl_FragColor = vec4( rgbA, opacity );", "} else {", "gl_FragColor = vec4( rgbB, opacity );", "}", "}" ].join("\n")
}, THREE.EffectComposer = function(a, b) {
    if (this.renderer = a, void 0 === b) {
        var c = window.innerWidth || 1, d = window.innerHeight || 1, e = {
            minFilter: THREE.LinearFilter,
            magFilter: THREE.LinearFilter,
            format: THREE.RGBFormat,
            stencilBuffer: !1
        };
        b = new THREE.WebGLRenderTarget(c, d, e);
    }
    this.renderTarget1 = b, this.renderTarget2 = b.clone(), this.writeBuffer = this.renderTarget1, 
    this.readBuffer = this.renderTarget2, this.passes = [], void 0 === THREE.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"), 
    this.copyPass = new THREE.ShaderPass(THREE.CopyShader);
}, THREE.EffectComposer.prototype = {
    swapBuffers: function() {
        var a = this.readBuffer;
        this.readBuffer = this.writeBuffer, this.writeBuffer = a;
    },
    addPass: function(a) {
        this.passes.push(a);
    },
    insertPass: function(a, b) {
        this.passes.splice(b, 0, a);
    },
    render: function(a) {
        this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2;
        var b, c, d = !1, e = this.passes.length;
        for (c = 0; e > c; c++) if (b = this.passes[c], b.enabled) {
            if (b.render(this.renderer, this.writeBuffer, this.readBuffer, a, d), b.needsSwap) {
                if (d) {
                    var f = this.renderer.context;
                    f.stencilFunc(f.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, a), 
                    f.stencilFunc(f.EQUAL, 1, 4294967295);
                }
                this.swapBuffers();
            }
            b instanceof THREE.MaskPass ? d = !0 : b instanceof THREE.ClearMaskPass && (d = !1);
        }
    },
    reset: function(a) {
        void 0 === a && (a = this.renderTarget1.clone(), a.width = window.innerWidth, a.height = window.innerHeight), 
        this.renderTarget1 = a, this.renderTarget2 = a.clone(), this.writeBuffer = this.renderTarget1, 
        this.readBuffer = this.renderTarget2;
    },
    setSize: function(a, b) {
        var c = this.renderTarget1.clone();
        c.width = a, c.height = b, this.reset(c);
    }
}, THREE.EffectComposer.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), 
THREE.EffectComposer.quad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), null), 
THREE.EffectComposer.scene = new THREE.Scene(), THREE.EffectComposer.scene.add(THREE.EffectComposer.quad), 
THREE.RenderPass = function(a, b, c, d, e) {
    this.scene = a, this.camera = b, this.overrideMaterial = c, this.clearColor = d, 
    this.clearAlpha = void 0 !== e ? e : 1, this.oldClearColor = new THREE.Color(), 
    this.oldClearAlpha = 1, this.enabled = !0, this.clear = !0, this.needsSwap = !1;
}, THREE.RenderPass.prototype = {
    render: function(a, b, c) {
        this.scene.overrideMaterial = this.overrideMaterial, this.clearColor && (this.oldClearColor.copy(a.getClearColor()), 
        this.oldClearAlpha = a.getClearAlpha(), a.setClearColor(this.clearColor, this.clearAlpha)), 
        a.render(this.scene, this.camera, c, this.clear), this.clearColor && a.setClearColor(this.oldClearColor, this.oldClearAlpha), 
        this.scene.overrideMaterial = null;
    }
}, THREE.MaskPass = function(a, b) {
    this.scene = a, this.camera = b, this.enabled = !0, this.clear = !0, this.needsSwap = !1, 
    this.inverse = !1;
}, THREE.MaskPass.prototype = {
    render: function(a, b, c) {
        var d = a.context;
        d.colorMask(!1, !1, !1, !1), d.depthMask(!1);
        var e, f;
        this.inverse ? (e = 0, f = 1) : (e = 1, f = 0), d.enable(d.STENCIL_TEST), d.stencilOp(d.REPLACE, d.REPLACE, d.REPLACE), 
        d.stencilFunc(d.ALWAYS, e, 4294967295), d.clearStencil(f), a.render(this.scene, this.camera, c, this.clear), 
        a.render(this.scene, this.camera, b, this.clear), d.colorMask(!0, !0, !0, !0), d.depthMask(!0), 
        d.stencilFunc(d.EQUAL, 1, 4294967295), d.stencilOp(d.KEEP, d.KEEP, d.KEEP);
    }
}, THREE.ClearMaskPass = function() {
    this.enabled = !0;
}, THREE.ClearMaskPass.prototype = {
    render: function(a) {
        var b = a.context;
        b.disable(b.STENCIL_TEST);
    }
}, THREE.ShaderPass = function(a, b) {
    this.textureID = void 0 !== b ? b : "tDiffuse", this.uniforms = THREE.UniformsUtils.clone(a.uniforms), 
    this.material = new THREE.ShaderMaterial({
        uniforms: this.uniforms,
        vertexShader: a.vertexShader,
        fragmentShader: a.fragmentShader
    }), this.renderToScreen = !1, this.enabled = !0, this.needsSwap = !0, this.clear = !1;
}, THREE.ShaderPass.prototype = {
    render: function(a, b, c) {
        this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = c), THREE.EffectComposer.quad.material = this.material, 
        this.renderToScreen ? a.render(THREE.EffectComposer.scene, THREE.EffectComposer.camera) : a.render(THREE.EffectComposer.scene, THREE.EffectComposer.camera, b, this.clear);
    }
};

var THREEx = THREEx || {};

THREEx.KeyboardState = function() {
    this.keyCodes = {}, this.modifiers = {};
    var a = this;
    this._onKeyDown = function(b) {
        a._onKeyChange(b, !0);
    }, this._onKeyUp = function(b) {
        a._onKeyChange(b, !1);
    }, document.addEventListener("keydown", this._onKeyDown, !1), document.addEventListener("keyup", this._onKeyUp, !1);
}, THREEx.KeyboardState.prototype.destroy = function() {
    document.removeEventListener("keydown", this._onKeyDown, !1), document.removeEventListener("keyup", this._onKeyUp, !1);
}, THREEx.KeyboardState.MODIFIERS = [ "shift", "ctrl", "alt", "meta" ], THREEx.KeyboardState.ALIAS = {
    left: 37,
    up: 38,
    right: 39,
    down: 40,
    space: 32,
    pageup: 33,
    pagedown: 34,
    tab: 9
}, THREEx.KeyboardState.prototype._onKeyChange = function(a, b) {
    var c = a.keyCode;
    this.keyCodes[c] = b, this.modifiers.shift = a.shiftKey, this.modifiers.ctrl = a.ctrlKey, 
    this.modifiers.alt = a.altKey, this.modifiers.meta = a.metaKey;
}, THREEx.KeyboardState.prototype.pressed = function(a) {
    for (var b = a.split("+"), c = 0; c < b.length; c++) {
        var d, e = b[c];
        if (d = -1 !== THREEx.KeyboardState.MODIFIERS.indexOf(e) ? this.modifiers[e] : -1 != Object.keys(THREEx.KeyboardState.ALIAS).indexOf(e) ? this.keyCodes[THREEx.KeyboardState.ALIAS[e]] : this.keyCodes[e.toUpperCase().charCodeAt(0)], 
        !d) return !1;
    }
    return !0;
};

var Stats = function() {
    var a = Date.now(), b = a, c = 0, d = 1e3, e = 0, f = 0, g = 1e3, h = 0, i = 0, j = 0, k = document.createElement("div");
    k.id = "stats", k.addEventListener("mousedown", function(a) {
        a.preventDefault(), s(++j % 2);
    }, !1), k.style.cssText = "width:80px;opacity:0.9;cursor:pointer";
    var l = document.createElement("div");
    l.id = "fps", l.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#002", 
    k.appendChild(l);
    var m = document.createElement("div");
    m.id = "fpsText", m.style.cssText = "color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", 
    m.innerHTML = "FPS", l.appendChild(m);
    var n = document.createElement("div");
    for (n.id = "fpsGraph", n.style.cssText = "position:relative;width:74px;height:30px;background-color:#0ff", 
    l.appendChild(n); n.children.length < 74; ) {
        var o = document.createElement("span");
        o.style.cssText = "width:1px;height:30px;float:left;background-color:#113", n.appendChild(o);
    }
    var p = document.createElement("div");
    p.id = "ms", p.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#020;display:none", 
    k.appendChild(p);
    var q = document.createElement("div");
    q.id = "msText", q.style.cssText = "color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", 
    q.innerHTML = "MS", p.appendChild(q);
    var r = document.createElement("div");
    for (r.id = "msGraph", r.style.cssText = "position:relative;width:74px;height:30px;background-color:#0f0", 
    p.appendChild(r); r.children.length < 74; ) {
        var o = document.createElement("span");
        o.style.cssText = "width:1px;height:30px;float:left;background-color:#131", r.appendChild(o);
    }
    var s = function(a) {
        switch (j = a) {
          case 0:
            l.style.display = "block", p.style.display = "none";
            break;

          case 1:
            l.style.display = "none", p.style.display = "block";
        }
    }, t = function(a, b) {
        var c = a.appendChild(a.firstChild);
        c.style.height = b + "px";
    };
    return {
        domElement: k,
        setMode: s,
        begin: function() {
            a = Date.now();
        },
        end: function() {
            var j = Date.now();
            return c = j - a, d = Math.min(d, c), e = Math.max(e, c), q.textContent = c + " MS (" + d + "-" + e + ")", 
            t(r, Math.min(30, 30 - c / 200 * 30)), i++, j > b + 1e3 && (f = Math.round(1e3 * i / (j - b)), 
            g = Math.min(g, f), h = Math.max(h, f), m.textContent = f + " FPS (" + g + "-" + h + ")", 
            t(n, Math.min(30, 30 - f / 100 * 30)), b = j, i = 0), j;
        },
        update: function() {
            a = this.end();
        }
    };
}, Detector = {
    canvas: !!window.CanvasRenderingContext2D,
    webgl: function() {
        try {
            var a = document.createElement("canvas");
            return !!window.WebGLRenderingContext && (a.getContext("webgl") || a.getContext("experimental-webgl"));
        } catch (b) {
            return !1;
        }
    }(),
    workers: !!window.Worker,
    fileapi: window.File && window.FileReader && window.FileList && window.Blob,
    getWebGLErrorMessage: function() {
        var a = document.createElement("div");
        return a.id = "webgl-error-message", a.style.fontFamily = "monospace", a.style.fontSize = "13px", 
        a.style.fontWeight = "normal", a.style.textAlign = "center", a.style.background = "#fff", 
        a.style.color = "#000", a.style.padding = "1.5em", a.style.width = "400px", a.style.margin = "5em auto 0", 
        this.webgl || (a.innerHTML = window.WebGLRenderingContext ? [ 'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.' ].join("\n") : [ 'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.' ].join("\n")), 
        a;
    },
    addGetWebGLMessage: function(a) {
        var b, c, d;
        a = a || {}, b = void 0 !== a.parent ? a.parent : document.body, c = void 0 !== a.id ? a.id : "oldie", 
        d = Detector.getWebGLErrorMessage(), d.id = c, b.appendChild(d);
    }
}, dat = dat || {};

dat.gui = dat.gui || {}, dat.utils = dat.utils || {}, dat.controllers = dat.controllers || {}, 
dat.dom = dat.dom || {}, dat.color = dat.color || {}, dat.utils.css = function() {
    return {
        load: function(a, b) {
            b = b || document;
            var c = b.createElement("link");
            c.type = "text/css", c.rel = "stylesheet", c.href = a, b.getElementsByTagName("head")[0].appendChild(c);
        },
        inject: function(a, b) {
            b = b || document;
            var c = document.createElement("style");
            c.type = "text/css", c.innerHTML = a, b.getElementsByTagName("head")[0].appendChild(c);
        }
    };
}(), dat.utils.common = function() {
    var a = Array.prototype.forEach, b = Array.prototype.slice;
    return {
        BREAK: {},
        extend: function(a) {
            return this.each(b.call(arguments, 1), function(b) {
                for (var c in b) this.isUndefined(b[c]) || (a[c] = b[c]);
            }, this), a;
        },
        defaults: function(a) {
            return this.each(b.call(arguments, 1), function(b) {
                for (var c in b) this.isUndefined(a[c]) && (a[c] = b[c]);
            }, this), a;
        },
        compose: function() {
            var a = b.call(arguments);
            return function() {
                for (var c = b.call(arguments), d = a.length - 1; d >= 0; d--) c = [ a[d].apply(this, c) ];
                return c[0];
            };
        },
        each: function(b, c, d) {
            if (a && b.forEach === a) b.forEach(c, d); else if (b.length === b.length + 0) for (var e = 0, f = b.length; f > e && !(e in b && c.call(d, b[e], e) === this.BREAK); e++) ; else for (e in b) if (c.call(d, b[e], e) === this.BREAK) break;
        },
        defer: function(a) {
            setTimeout(a, 0);
        },
        toArray: function(a) {
            return a.toArray ? a.toArray() : b.call(a);
        },
        isUndefined: function(a) {
            return void 0 === a;
        },
        isNull: function(a) {
            return null === a;
        },
        isNaN: function(a) {
            return a !== a;
        },
        isArray: Array.isArray || function(a) {
            return a.constructor === Array;
        },
        isObject: function(a) {
            return a === Object(a);
        },
        isNumber: function(a) {
            return a === a + 0;
        },
        isString: function(a) {
            return a === a + "";
        },
        isBoolean: function(a) {
            return !1 === a || !0 === a;
        },
        isFunction: function(a) {
            return "[object Function]" === Object.prototype.toString.call(a);
        }
    };
}(), dat.controllers.Controller = function(a) {
    var b = function(a, b) {
        this.initialValue = a[b], this.domElement = document.createElement("div"), this.object = a, 
        this.property = b, this.__onFinishChange = this.__onChange = void 0;
    };
    return a.extend(b.prototype, {
        onChange: function(a) {
            return this.__onChange = a, this;
        },
        onFinishChange: function(a) {
            return this.__onFinishChange = a, this;
        },
        setValue: function(a) {
            return this.object[this.property] = a, this.__onChange && this.__onChange.call(this, a), 
            this.updateDisplay(), this;
        },
        getValue: function() {
            return this.object[this.property];
        },
        updateDisplay: function() {
            return this;
        },
        isModified: function() {
            return this.initialValue !== this.getValue();
        }
    }), b;
}(dat.utils.common), dat.dom.dom = function(a) {
    function b(b) {
        return "0" === b || a.isUndefined(b) ? 0 : (b = b.match(d), a.isNull(b) ? 0 : parseFloat(b[1]));
    }
    var c = {};
    a.each({
        HTMLEvents: [ "change" ],
        MouseEvents: [ "click", "mousemove", "mousedown", "mouseup", "mouseover" ],
        KeyboardEvents: [ "keydown" ]
    }, function(b, d) {
        a.each(b, function(a) {
            c[a] = d;
        });
    });
    var d = /(\d+(\.\d+)?)px/, e = {
        makeSelectable: function(a, b) {
            void 0 !== a && void 0 !== a.style && (a.onselectstart = b ? function() {
                return !1;
            } : function() {}, a.style.MozUserSelect = b ? "auto" : "none", a.style.KhtmlUserSelect = b ? "auto" : "none", 
            a.unselectable = b ? "on" : "off");
        },
        makeFullscreen: function(b, c, d) {
            a.isUndefined(c) && (c = !0), a.isUndefined(d) && (d = !0), b.style.position = "absolute", 
            c && (b.style.left = 0, b.style.right = 0), d && (b.style.top = 0, b.style.bottom = 0);
        },
        fakeEvent: function(b, d, e, f) {
            e = e || {};
            var g = c[d];
            if (!g) throw Error("Event type " + d + " not supported.");
            var h = document.createEvent(g);
            switch (g) {
              case "MouseEvents":
                h.initMouseEvent(d, e.bubbles || !1, e.cancelable || !0, window, e.clickCount || 1, 0, 0, e.x || e.clientX || 0, e.y || e.clientY || 0, !1, !1, !1, !1, 0, null);
                break;

              case "KeyboardEvents":
                g = h.initKeyboardEvent || h.initKeyEvent, a.defaults(e, {
                    cancelable: !0,
                    ctrlKey: !1,
                    altKey: !1,
                    shiftKey: !1,
                    metaKey: !1,
                    keyCode: void 0,
                    charCode: void 0
                }), g(d, e.bubbles || !1, e.cancelable, window, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.keyCode, e.charCode);
                break;

              default:
                h.initEvent(d, e.bubbles || !1, e.cancelable || !0);
            }
            a.defaults(h, f), b.dispatchEvent(h);
        },
        bind: function(a, b, c, d) {
            return a.addEventListener ? a.addEventListener(b, c, d || !1) : a.attachEvent && a.attachEvent("on" + b, c), 
            e;
        },
        unbind: function(a, b, c, d) {
            return a.removeEventListener ? a.removeEventListener(b, c, d || !1) : a.detachEvent && a.detachEvent("on" + b, c), 
            e;
        },
        addClass: function(a, b) {
            if (void 0 === a.className) a.className = b; else if (a.className !== b) {
                var c = a.className.split(/ +/);
                -1 == c.indexOf(b) && (c.push(b), a.className = c.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""));
            }
            return e;
        },
        removeClass: function(a, b) {
            if (b) {
                if (void 0 !== a.className) if (a.className === b) a.removeAttribute("class"); else {
                    var c = a.className.split(/ +/), d = c.indexOf(b);
                    -1 != d && (c.splice(d, 1), a.className = c.join(" "));
                }
            } else a.className = void 0;
            return e;
        },
        hasClass: function(a, b) {
            return RegExp("(?:^|\\s+)" + b + "(?:\\s+|$)").test(a.className) || !1;
        },
        getWidth: function(a) {
            return a = getComputedStyle(a), b(a["border-left-width"]) + b(a["border-right-width"]) + b(a["padding-left"]) + b(a["padding-right"]) + b(a.width);
        },
        getHeight: function(a) {
            return a = getComputedStyle(a), b(a["border-top-width"]) + b(a["border-bottom-width"]) + b(a["padding-top"]) + b(a["padding-bottom"]) + b(a.height);
        },
        getOffset: function(a) {
            var b = {
                left: 0,
                top: 0
            };
            if (a.offsetParent) do b.left += a.offsetLeft, b.top += a.offsetTop; while (a = a.offsetParent);
            return b;
        },
        isActive: function(a) {
            return a === document.activeElement && (a.type || a.href);
        }
    };
    return e;
}(dat.utils.common), dat.controllers.OptionController = function(a, b, c) {
    var d = function(a, e, f) {
        d.superclass.call(this, a, e);
        var g = this;
        if (this.__select = document.createElement("select"), c.isArray(f)) {
            var h = {};
            c.each(f, function(a) {
                h[a] = a;
            }), f = h;
        }
        c.each(f, function(a, b) {
            var c = document.createElement("option");
            c.innerHTML = b, c.setAttribute("value", a), g.__select.appendChild(c);
        }), this.updateDisplay(), b.bind(this.__select, "change", function() {
            g.setValue(this.options[this.selectedIndex].value);
        }), this.domElement.appendChild(this.__select);
    };
    return d.superclass = a, c.extend(d.prototype, a.prototype, {
        setValue: function(a) {
            return a = d.superclass.prototype.setValue.call(this, a), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), 
            a;
        },
        updateDisplay: function() {
            return this.__select.value = this.getValue(), d.superclass.prototype.updateDisplay.call(this);
        }
    }), d;
}(dat.controllers.Controller, dat.dom.dom, dat.utils.common), dat.controllers.NumberController = function(a, b) {
    var c = function(a, d, e) {
        c.superclass.call(this, a, d), e = e || {}, this.__min = e.min, this.__max = e.max, 
        this.__step = e.step, this.__impliedStep = b.isUndefined(this.__step) ? 0 == this.initialValue ? 1 : Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__step, 
        a = this.__impliedStep, a = a.toString(), a = -1 < a.indexOf(".") ? a.length - a.indexOf(".") - 1 : 0, 
        this.__precision = a;
    };
    return c.superclass = a, b.extend(c.prototype, a.prototype, {
        setValue: function(a) {
            return void 0 !== this.__min && a < this.__min ? a = this.__min : void 0 !== this.__max && a > this.__max && (a = this.__max), 
            void 0 !== this.__step && 0 != a % this.__step && (a = Math.round(a / this.__step) * this.__step), 
            c.superclass.prototype.setValue.call(this, a);
        },
        min: function(a) {
            return this.__min = a, this;
        },
        max: function(a) {
            return this.__max = a, this;
        },
        step: function(a) {
            return this.__step = a, this;
        }
    }), c;
}(dat.controllers.Controller, dat.utils.common), dat.controllers.NumberControllerBox = function(a, b, c) {
    var d = function(a, e, f) {
        function g() {
            var a = parseFloat(k.__input.value);
            c.isNaN(a) || k.setValue(a);
        }
        function h(a) {
            var b = j - a.clientY;
            k.setValue(k.getValue() + b * k.__impliedStep), j = a.clientY;
        }
        function i() {
            b.unbind(window, "mousemove", h), b.unbind(window, "mouseup", i);
        }
        this.__truncationSuspended = !1, d.superclass.call(this, a, e, f);
        var j, k = this;
        this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), 
        b.bind(this.__input, "change", g), b.bind(this.__input, "blur", function() {
            g(), k.__onFinishChange && k.__onFinishChange.call(k, k.getValue());
        }), b.bind(this.__input, "mousedown", function(a) {
            b.bind(window, "mousemove", h), b.bind(window, "mouseup", i), j = a.clientY;
        }), b.bind(this.__input, "keydown", function(a) {
            13 === a.keyCode && (k.__truncationSuspended = !0, this.blur(), k.__truncationSuspended = !1);
        }), this.updateDisplay(), this.domElement.appendChild(this.__input);
    };
    return d.superclass = a, c.extend(d.prototype, a.prototype, {
        updateDisplay: function() {
            var a, b = this.__input;
            if (this.__truncationSuspended) a = this.getValue(); else {
                a = this.getValue();
                var c = Math.pow(10, this.__precision);
                a = Math.round(a * c) / c;
            }
            return b.value = a, d.superclass.prototype.updateDisplay.call(this);
        }
    }), d;
}(dat.controllers.NumberController, dat.dom.dom, dat.utils.common), dat.controllers.NumberControllerSlider = function(a, b, c, d, e) {
    function f(a, b, c, d, e) {
        return d + (a - b) / (c - b) * (e - d);
    }
    var g = function(a, c, d, e, h) {
        function i(a) {
            a.preventDefault();
            var c = b.getOffset(k.__background), d = b.getWidth(k.__background);
            return k.setValue(f(a.clientX, c.left, c.left + d, k.__min, k.__max)), !1;
        }
        function j() {
            b.unbind(window, "mousemove", i), b.unbind(window, "mouseup", j), k.__onFinishChange && k.__onFinishChange.call(k, k.getValue());
        }
        g.superclass.call(this, a, c, {
            min: d,
            max: e,
            step: h
        });
        var k = this;
        this.__background = document.createElement("div"), this.__foreground = document.createElement("div"), 
        b.bind(this.__background, "mousedown", function(a) {
            b.bind(window, "mousemove", i), b.bind(window, "mouseup", j), i(a);
        }), b.addClass(this.__background, "slider"), b.addClass(this.__foreground, "slider-fg"), 
        this.updateDisplay(), this.__background.appendChild(this.__foreground), this.domElement.appendChild(this.__background);
    };
    return g.superclass = a, g.useDefaultStyles = function() {
        c.inject(e);
    }, d.extend(g.prototype, a.prototype, {
        updateDisplay: function() {
            var a = (this.getValue() - this.__min) / (this.__max - this.__min);
            return this.__foreground.style.width = 100 * a + "%", g.superclass.prototype.updateDisplay.call(this);
        }
    }), g;
}(dat.controllers.NumberController, dat.dom.dom, dat.utils.css, dat.utils.common, "/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"), 
dat.controllers.FunctionController = function(a, b, c) {
    var d = function(a, c, e) {
        d.superclass.call(this, a, c);
        var f = this;
        this.__button = document.createElement("div"), this.__button.innerHTML = void 0 === e ? "Fire" : e, 
        b.bind(this.__button, "click", function(a) {
            return a.preventDefault(), f.fire(), !1;
        }), b.addClass(this.__button, "button"), this.domElement.appendChild(this.__button);
    };
    return d.superclass = a, c.extend(d.prototype, a.prototype, {
        fire: function() {
            this.__onChange && this.__onChange.call(this), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), 
            this.getValue().call(this.object);
        }
    }), d;
}(dat.controllers.Controller, dat.dom.dom, dat.utils.common), dat.controllers.BooleanController = function(a, b, c) {
    var d = function(a, c) {
        d.superclass.call(this, a, c);
        var e = this;
        this.__prev = this.getValue(), this.__checkbox = document.createElement("input"), 
        this.__checkbox.setAttribute("type", "checkbox"), b.bind(this.__checkbox, "change", function() {
            e.setValue(!e.__prev);
        }, !1), this.domElement.appendChild(this.__checkbox), this.updateDisplay();
    };
    return d.superclass = a, c.extend(d.prototype, a.prototype, {
        setValue: function(a) {
            return a = d.superclass.prototype.setValue.call(this, a), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), 
            this.__prev = this.getValue(), a;
        },
        updateDisplay: function() {
            return !0 === this.getValue() ? (this.__checkbox.setAttribute("checked", "checked"), 
            this.__checkbox.checked = !0) : this.__checkbox.checked = !1, d.superclass.prototype.updateDisplay.call(this);
        }
    }), d;
}(dat.controllers.Controller, dat.dom.dom, dat.utils.common), dat.color.toString = function(a) {
    return function(b) {
        if (1 == b.a || a.isUndefined(b.a)) {
            for (b = b.hex.toString(16); 6 > b.length; ) b = "0" + b;
            return "#" + b;
        }
        return "rgba(" + Math.round(b.r) + "," + Math.round(b.g) + "," + Math.round(b.b) + "," + b.a + ")";
    };
}(dat.utils.common), dat.color.interpret = function(a, b) {
    var c, d, e = [ {
        litmus: b.isString,
        conversions: {
            THREE_CHAR_HEX: {
                read: function(a) {
                    return a = a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i), null === a ? !1 : {
                        space: "HEX",
                        hex: parseInt("0x" + a[1].toString() + a[1].toString() + a[2].toString() + a[2].toString() + a[3].toString() + a[3].toString())
                    };
                },
                write: a
            },
            SIX_CHAR_HEX: {
                read: function(a) {
                    return a = a.match(/^#([A-F0-9]{6})$/i), null === a ? !1 : {
                        space: "HEX",
                        hex: parseInt("0x" + a[1].toString())
                    };
                },
                write: a
            },
            CSS_RGB: {
                read: function(a) {
                    return a = a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/), null === a ? !1 : {
                        space: "RGB",
                        r: parseFloat(a[1]),
                        g: parseFloat(a[2]),
                        b: parseFloat(a[3])
                    };
                },
                write: a
            },
            CSS_RGBA: {
                read: function(a) {
                    return a = a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/), null === a ? !1 : {
                        space: "RGB",
                        r: parseFloat(a[1]),
                        g: parseFloat(a[2]),
                        b: parseFloat(a[3]),
                        a: parseFloat(a[4])
                    };
                },
                write: a
            }
        }
    }, {
        litmus: b.isNumber,
        conversions: {
            HEX: {
                read: function(a) {
                    return {
                        space: "HEX",
                        hex: a,
                        conversionName: "HEX"
                    };
                },
                write: function(a) {
                    return a.hex;
                }
            }
        }
    }, {
        litmus: b.isArray,
        conversions: {
            RGB_ARRAY: {
                read: function(a) {
                    return 3 != a.length ? !1 : {
                        space: "RGB",
                        r: a[0],
                        g: a[1],
                        b: a[2]
                    };
                },
                write: function(a) {
                    return [ a.r, a.g, a.b ];
                }
            },
            RGBA_ARRAY: {
                read: function(a) {
                    return 4 != a.length ? !1 : {
                        space: "RGB",
                        r: a[0],
                        g: a[1],
                        b: a[2],
                        a: a[3]
                    };
                },
                write: function(a) {
                    return [ a.r, a.g, a.b, a.a ];
                }
            }
        }
    }, {
        litmus: b.isObject,
        conversions: {
            RGBA_OBJ: {
                read: function(a) {
                    return b.isNumber(a.r) && b.isNumber(a.g) && b.isNumber(a.b) && b.isNumber(a.a) ? {
                        space: "RGB",
                        r: a.r,
                        g: a.g,
                        b: a.b,
                        a: a.a
                    } : !1;
                },
                write: function(a) {
                    return {
                        r: a.r,
                        g: a.g,
                        b: a.b,
                        a: a.a
                    };
                }
            },
            RGB_OBJ: {
                read: function(a) {
                    return b.isNumber(a.r) && b.isNumber(a.g) && b.isNumber(a.b) ? {
                        space: "RGB",
                        r: a.r,
                        g: a.g,
                        b: a.b
                    } : !1;
                },
                write: function(a) {
                    return {
                        r: a.r,
                        g: a.g,
                        b: a.b
                    };
                }
            },
            HSVA_OBJ: {
                read: function(a) {
                    return b.isNumber(a.h) && b.isNumber(a.s) && b.isNumber(a.v) && b.isNumber(a.a) ? {
                        space: "HSV",
                        h: a.h,
                        s: a.s,
                        v: a.v,
                        a: a.a
                    } : !1;
                },
                write: function(a) {
                    return {
                        h: a.h,
                        s: a.s,
                        v: a.v,
                        a: a.a
                    };
                }
            },
            HSV_OBJ: {
                read: function(a) {
                    return b.isNumber(a.h) && b.isNumber(a.s) && b.isNumber(a.v) ? {
                        space: "HSV",
                        h: a.h,
                        s: a.s,
                        v: a.v
                    } : !1;
                },
                write: function(a) {
                    return {
                        h: a.h,
                        s: a.s,
                        v: a.v
                    };
                }
            }
        }
    } ];
    return function() {
        d = !1;
        var a = 1 < arguments.length ? b.toArray(arguments) : arguments[0];
        return b.each(e, function(e) {
            return e.litmus(a) ? (b.each(e.conversions, function(e, f) {
                return c = e.read(a), !1 === d && !1 !== c ? (d = c, c.conversionName = f, c.conversion = e, 
                b.BREAK) : void 0;
            }), b.BREAK) : void 0;
        }), d;
    };
}(dat.color.toString, dat.utils.common), dat.GUI = dat.gui.GUI = function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
    function p(a, b, c, f) {
        if (void 0 === b[c]) throw Error("Object " + b + ' has no property "' + c + '"');
        f.color ? b = new k(b, c) : (b = [ b, c ].concat(f.factoryArgs), b = d.apply(a, b)), 
        f.before instanceof e && (f.before = f.before.__li), s(a, b), n.addClass(b.domElement, "c"), 
        c = document.createElement("span"), n.addClass(c, "property-name"), c.innerHTML = b.property;
        var g = document.createElement("div");
        return g.appendChild(c), g.appendChild(b.domElement), f = q(a, g, f.before), n.addClass(f, I.CLASS_CONTROLLER_ROW), 
        n.addClass(f, typeof b.getValue()), r(a, f, b), a.__controllers.push(b), b;
    }
    function q(a, b, c) {
        var d = document.createElement("li");
        return b && d.appendChild(b), c ? a.__ul.insertBefore(d, params.before) : a.__ul.appendChild(d), 
        a.onResize(), d;
    }
    function r(a, b, c) {
        if (c.__li = b, c.__gui = a, o.extend(c, {
            options: function(b) {
                return 1 < arguments.length ? (c.remove(), p(a, c.object, c.property, {
                    before: c.__li.nextElementSibling,
                    factoryArgs: [ o.toArray(arguments) ]
                })) : o.isArray(b) || o.isObject(b) ? (c.remove(), p(a, c.object, c.property, {
                    before: c.__li.nextElementSibling,
                    factoryArgs: [ b ]
                })) : void 0;
            },
            name: function(a) {
                return c.__li.firstElementChild.firstElementChild.innerHTML = a, c;
            },
            listen: function() {
                return c.__gui.listen(c), c;
            },
            remove: function() {
                return c.__gui.remove(c), c;
            }
        }), c instanceof i) {
            var d = new h(c.object, c.property, {
                min: c.__min,
                max: c.__max,
                step: c.__step
            });
            o.each([ "updateDisplay", "onChange", "onFinishChange" ], function(a) {
                var b = c[a], e = d[a];
                c[a] = d[a] = function() {
                    var a = Array.prototype.slice.call(arguments);
                    return b.apply(c, a), e.apply(d, a);
                };
            }), n.addClass(b, "has-slider"), c.domElement.insertBefore(d.domElement, c.domElement.firstElementChild);
        } else if (c instanceof h) {
            var e = function(b) {
                return o.isNumber(c.__min) && o.isNumber(c.__max) ? (c.remove(), p(a, c.object, c.property, {
                    before: c.__li.nextElementSibling,
                    factoryArgs: [ c.__min, c.__max, c.__step ]
                })) : b;
            };
            c.min = o.compose(e, c.min), c.max = o.compose(e, c.max);
        } else c instanceof f ? (n.bind(b, "click", function() {
            n.fakeEvent(c.__checkbox, "click");
        }), n.bind(c.__checkbox, "click", function(a) {
            a.stopPropagation();
        })) : c instanceof g ? (n.bind(b, "click", function() {
            n.fakeEvent(c.__button, "click");
        }), n.bind(b, "mouseover", function() {
            n.addClass(c.__button, "hover");
        }), n.bind(b, "mouseout", function() {
            n.removeClass(c.__button, "hover");
        })) : c instanceof k && (n.addClass(b, "color"), c.updateDisplay = o.compose(function(a) {
            return b.style.borderLeftColor = c.__color.toString(), a;
        }, c.updateDisplay), c.updateDisplay());
        c.setValue = o.compose(function(b) {
            return a.getRoot().__preset_select && c.isModified() && y(a.getRoot(), !0), b;
        }, c.setValue);
    }
    function s(a, b) {
        var c = a.getRoot(), d = c.__rememberedObjects.indexOf(b.object);
        if (-1 != d) {
            var e = c.__rememberedObjectIndecesToControllers[d];
            if (void 0 === e && (e = {}, c.__rememberedObjectIndecesToControllers[d] = e), e[b.property] = b, 
            c.load && c.load.remembered) {
                if (c = c.load.remembered, c[a.preset]) c = c[a.preset]; else {
                    if (!c[B]) return;
                    c = c[B];
                }
                c[d] && void 0 !== c[d][b.property] && (d = c[d][b.property], b.initialValue = d, 
                b.setValue(d));
            }
        }
    }
    function t(a) {
        var b = a.__save_row = document.createElement("li");
        n.addClass(a.domElement, "has-save"), a.__ul.insertBefore(b, a.__ul.firstChild), 
        n.addClass(b, "save-row");
        var c = document.createElement("span");
        c.innerHTML = "&nbsp;", n.addClass(c, "button gears");
        var d = document.createElement("span");
        d.innerHTML = "Save", n.addClass(d, "button"), n.addClass(d, "save");
        var e = document.createElement("span");
        e.innerHTML = "New", n.addClass(e, "button"), n.addClass(e, "save-as");
        var f = document.createElement("span");
        f.innerHTML = "Revert", n.addClass(f, "button"), n.addClass(f, "revert");
        var g = a.__preset_select = document.createElement("select");
        if (a.load && a.load.remembered ? o.each(a.load.remembered, function(b, c) {
            x(a, c, c == a.preset);
        }) : x(a, B, !1), n.bind(g, "change", function() {
            for (var b = 0; b < a.__preset_select.length; b++) a.__preset_select[b].innerHTML = a.__preset_select[b].value;
            a.preset = this.value;
        }), b.appendChild(g), b.appendChild(c), b.appendChild(d), b.appendChild(e), b.appendChild(f), 
        A) {
            var b = document.getElementById("dg-save-locally"), h = document.getElementById("dg-local-explain");
            b.style.display = "block", b = document.getElementById("dg-local-storage"), "true" === localStorage.getItem(document.location.href + ".isLocal") && b.setAttribute("checked", "checked");
            var i = function() {
                h.style.display = a.useLocalStorage ? "block" : "none";
            };
            i(), n.bind(b, "change", function() {
                a.useLocalStorage = !a.useLocalStorage, i();
            });
        }
        var j = document.getElementById("dg-new-constructor");
        n.bind(j, "keydown", function(a) {
            !a.metaKey || 67 !== a.which && 67 != a.keyCode || D.hide();
        }), n.bind(c, "click", function() {
            j.innerHTML = JSON.stringify(a.getSaveObject(), void 0, 2), D.show(), j.focus(), 
            j.select();
        }), n.bind(d, "click", function() {
            a.save();
        }), n.bind(e, "click", function() {
            var b = prompt("Enter a new preset name.");
            b && a.saveAs(b);
        }), n.bind(f, "click", function() {
            a.revert();
        });
    }
    function u(a) {
        function b(b) {
            return b.preventDefault(), e = b.clientX, n.addClass(a.__closeButton, I.CLASS_DRAG), 
            n.bind(window, "mousemove", c), n.bind(window, "mouseup", d), !1;
        }
        function c(b) {
            return b.preventDefault(), a.width += e - b.clientX, a.onResize(), e = b.clientX, 
            !1;
        }
        function d() {
            n.removeClass(a.__closeButton, I.CLASS_DRAG), n.unbind(window, "mousemove", c), 
            n.unbind(window, "mouseup", d);
        }
        a.__resize_handle = document.createElement("div"), o.extend(a.__resize_handle.style, {
            width: "6px",
            marginLeft: "-3px",
            height: "200px",
            cursor: "ew-resize",
            position: "absolute"
        });
        var e;
        n.bind(a.__resize_handle, "mousedown", b), n.bind(a.__closeButton, "mousedown", b), 
        a.domElement.insertBefore(a.__resize_handle, a.domElement.firstElementChild);
    }
    function v(a, b) {
        a.domElement.style.width = b + "px", a.__save_row && a.autoPlace && (a.__save_row.style.width = b + "px"), 
        a.__closeButton && (a.__closeButton.style.width = b + "px");
    }
    function w(a, b) {
        var c = {};
        return o.each(a.__rememberedObjects, function(d, e) {
            var f = {};
            o.each(a.__rememberedObjectIndecesToControllers[e], function(a, c) {
                f[c] = b ? a.initialValue : a.getValue();
            }), c[e] = f;
        }), c;
    }
    function x(a, b, c) {
        var d = document.createElement("option");
        d.innerHTML = b, d.value = b, a.__preset_select.appendChild(d), c && (a.__preset_select.selectedIndex = a.__preset_select.length - 1);
    }
    function y(a, b) {
        var c = a.__preset_select[a.__preset_select.selectedIndex];
        c.innerHTML = b ? c.value + "*" : c.value;
    }
    function z(a) {
        0 != a.length && l(function() {
            z(a);
        }), o.each(a, function(a) {
            a.updateDisplay();
        });
    }
    a.inject(c);
    var A, B = "Default";
    try {
        A = "localStorage" in window && null !== window.localStorage;
    } catch (C) {
        A = !1;
    }
    var D, E, F = !0, G = !1, H = [], I = function(a) {
        function b() {
            localStorage.setItem(document.location.href + ".gui", JSON.stringify(d.getSaveObject()));
        }
        function c() {
            var a = d.getRoot();
            a.width += 1, o.defer(function() {
                a.width -= 1;
            });
        }
        var d = this;
        this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), 
        this.domElement.appendChild(this.__ul), n.addClass(this.domElement, "dg"), this.__folders = {}, 
        this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], 
        this.__listening = [], a = a || {}, a = o.defaults(a, {
            autoPlace: !0,
            width: I.DEFAULT_WIDTH
        }), a = o.defaults(a, {
            resizable: a.autoPlace,
            hideable: a.autoPlace
        }), o.isUndefined(a.load) ? a.load = {
            preset: B
        } : a.preset && (a.load.preset = a.preset), o.isUndefined(a.parent) && a.hideable && H.push(this), 
        a.resizable = o.isUndefined(a.parent) && a.resizable, a.autoPlace && o.isUndefined(a.scrollable) && (a.scrollable = !0);
        var e = A && "true" === localStorage.getItem(document.location.href + ".isLocal");
        if (Object.defineProperties(this, {
            parent: {
                get: function() {
                    return a.parent;
                }
            },
            scrollable: {
                get: function() {
                    return a.scrollable;
                }
            },
            autoPlace: {
                get: function() {
                    return a.autoPlace;
                }
            },
            preset: {
                get: function() {
                    return d.parent ? d.getRoot().preset : a.load.preset;
                },
                set: function(b) {
                    for (d.parent ? d.getRoot().preset = b : a.load.preset = b, b = 0; b < this.__preset_select.length; b++) this.__preset_select[b].value == this.preset && (this.__preset_select.selectedIndex = b);
                    d.revert();
                }
            },
            width: {
                get: function() {
                    return a.width;
                },
                set: function(b) {
                    a.width = b, v(d, b);
                }
            },
            name: {
                get: function() {
                    return a.name;
                },
                set: function(b) {
                    a.name = b, g && (g.innerHTML = a.name);
                }
            },
            closed: {
                get: function() {
                    return a.closed;
                },
                set: function(b) {
                    a.closed = b, a.closed ? n.addClass(d.__ul, I.CLASS_CLOSED) : n.removeClass(d.__ul, I.CLASS_CLOSED), 
                    this.onResize(), d.__closeButton && (d.__closeButton.innerHTML = b ? I.TEXT_OPEN : I.TEXT_CLOSED);
                }
            },
            load: {
                get: function() {
                    return a.load;
                }
            },
            useLocalStorage: {
                get: function() {
                    return e;
                },
                set: function(a) {
                    A && ((e = a) ? n.bind(window, "unload", b) : n.unbind(window, "unload", b), localStorage.setItem(document.location.href + ".isLocal", a));
                }
            }
        }), o.isUndefined(a.parent)) {
            if (a.closed = !1, n.addClass(this.domElement, I.CLASS_MAIN), n.makeSelectable(this.domElement, !1), 
            A && e) {
                d.useLocalStorage = !0;
                var f = localStorage.getItem(document.location.href + ".gui");
                f && (a.load = JSON.parse(f));
            }
            this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = I.TEXT_CLOSED, 
            n.addClass(this.__closeButton, I.CLASS_CLOSE_BUTTON), this.domElement.appendChild(this.__closeButton), 
            n.bind(this.__closeButton, "click", function() {
                d.closed = !d.closed;
            });
        } else {
            void 0 === a.closed && (a.closed = !0);
            var g = document.createTextNode(a.name);
            n.addClass(g, "controller-name"), f = q(d, g), n.addClass(this.__ul, I.CLASS_CLOSED), 
            n.addClass(f, "title"), n.bind(f, "click", function(a) {
                return a.preventDefault(), d.closed = !d.closed, !1;
            }), a.closed || (this.closed = !1);
        }
        a.autoPlace && (o.isUndefined(a.parent) && (F && (E = document.createElement("div"), 
        n.addClass(E, "dg"), n.addClass(E, I.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(E), 
        F = !1), E.appendChild(this.domElement), n.addClass(this.domElement, I.CLASS_AUTO_PLACE)), 
        this.parent || v(d, a.width)), n.bind(window, "resize", function() {
            d.onResize();
        }), n.bind(this.__ul, "webkitTransitionEnd", function() {
            d.onResize();
        }), n.bind(this.__ul, "transitionend", function() {
            d.onResize();
        }), n.bind(this.__ul, "oTransitionEnd", function() {
            d.onResize();
        }), this.onResize(), a.resizable && u(this), d.getRoot(), a.parent || c();
    };
    return I.toggleHide = function() {
        G = !G, o.each(H, function(a) {
            a.domElement.style.zIndex = G ? -999 : 999, a.domElement.style.opacity = G ? 0 : 1;
        });
    }, I.CLASS_AUTO_PLACE = "a", I.CLASS_AUTO_PLACE_CONTAINER = "ac", I.CLASS_MAIN = "main", 
    I.CLASS_CONTROLLER_ROW = "cr", I.CLASS_TOO_TALL = "taller-than-window", I.CLASS_CLOSED = "closed", 
    I.CLASS_CLOSE_BUTTON = "close-button", I.CLASS_DRAG = "drag", I.DEFAULT_WIDTH = 245, 
    I.TEXT_CLOSED = "Close Controls", I.TEXT_OPEN = "Open Controls", n.bind(window, "keydown", function(a) {
        "text" === document.activeElement.type || 72 !== a.which && 72 != a.keyCode || I.toggleHide();
    }, !1), o.extend(I.prototype, {
        add: function(a, b) {
            return p(this, a, b, {
                factoryArgs: Array.prototype.slice.call(arguments, 2)
            });
        },
        addColor: function(a, b) {
            return p(this, a, b, {
                color: !0
            });
        },
        remove: function(a) {
            this.__ul.removeChild(a.__li), this.__controllers.slice(this.__controllers.indexOf(a), 1);
            var b = this;
            o.defer(function() {
                b.onResize();
            });
        },
        destroy: function() {
            this.autoPlace && E.removeChild(this.domElement);
        },
        addFolder: function(a) {
            if (void 0 !== this.__folders[a]) throw Error('You already have a folder in this GUI by the name "' + a + '"');
            var b = {
                name: a,
                parent: this
            };
            return b.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[a] && (b.closed = this.load.folders[a].closed, 
            b.load = this.load.folders[a]), b = new I(b), this.__folders[a] = b, a = q(this, b.domElement), 
            n.addClass(a, "folder"), b;
        },
        open: function() {
            this.closed = !1;
        },
        close: function() {
            this.closed = !0;
        },
        onResize: function() {
            var a = this.getRoot();
            if (a.scrollable) {
                var b = n.getOffset(a.__ul).top, c = 0;
                o.each(a.__ul.childNodes, function(b) {
                    a.autoPlace && b === a.__save_row || (c += n.getHeight(b));
                }), window.innerHeight - b - 20 < c ? (n.addClass(a.domElement, I.CLASS_TOO_TALL), 
                a.__ul.style.height = window.innerHeight - b - 20 + "px") : (n.removeClass(a.domElement, I.CLASS_TOO_TALL), 
                a.__ul.style.height = "auto");
            }
            a.__resize_handle && o.defer(function() {
                a.__resize_handle.style.height = a.__ul.offsetHeight + "px";
            }), a.__closeButton && (a.__closeButton.style.width = a.width + "px");
        },
        remember: function() {
            if (o.isUndefined(D) && (D = new m(), D.domElement.innerHTML = b), this.parent) throw Error("You can only call remember on a top level GUI.");
            var a = this;
            o.each(Array.prototype.slice.call(arguments), function(b) {
                0 == a.__rememberedObjects.length && t(a), -1 == a.__rememberedObjects.indexOf(b) && a.__rememberedObjects.push(b);
            }), this.autoPlace && v(this, this.width);
        },
        getRoot: function() {
            for (var a = this; a.parent; ) a = a.parent;
            return a;
        },
        getSaveObject: function() {
            var a = this.load;
            return a.closed = this.closed, 0 < this.__rememberedObjects.length && (a.preset = this.preset, 
            a.remembered || (a.remembered = {}), a.remembered[this.preset] = w(this)), a.folders = {}, 
            o.each(this.__folders, function(b, c) {
                a.folders[c] = b.getSaveObject();
            }), a;
        },
        save: function() {
            this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = w(this), 
            y(this, !1);
        },
        saveAs: function(a) {
            this.load.remembered || (this.load.remembered = {}, this.load.remembered[B] = w(this, !0)), 
            this.load.remembered[a] = w(this), this.preset = a, x(this, a, !0);
        },
        revert: function(a) {
            o.each(this.__controllers, function(b) {
                this.getRoot().load.remembered ? s(a || this.getRoot(), b) : b.setValue(b.initialValue);
            }, this), o.each(this.__folders, function(a) {
                a.revert(a);
            }), a || y(this.getRoot(), !1);
        },
        listen: function(a) {
            var b = 0 == this.__listening.length;
            this.__listening.push(a), b && z(this.__listening);
        }
    }), I;
}(dat.utils.css, '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>', ".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n", dat.controllers.factory = function(a, b, c, d, e, f, g) {
    return function(h, i, j, k) {
        var l = h[i];
        return g.isArray(j) || g.isObject(j) ? new a(h, i, j) : g.isNumber(l) ? g.isNumber(j) && g.isNumber(k) ? new c(h, i, j, k) : new b(h, i, {
            min: j,
            max: k
        }) : g.isString(l) ? new d(h, i) : g.isFunction(l) ? new e(h, i, "") : g.isBoolean(l) ? new f(h, i) : void 0;
    };
}(dat.controllers.OptionController, dat.controllers.NumberControllerBox, dat.controllers.NumberControllerSlider, dat.controllers.StringController = function(a, b, c) {
    var d = function(a, c) {
        function e() {
            f.setValue(f.__input.value);
        }
        d.superclass.call(this, a, c);
        var f = this;
        this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), 
        b.bind(this.__input, "keyup", e), b.bind(this.__input, "change", e), b.bind(this.__input, "blur", function() {
            f.__onFinishChange && f.__onFinishChange.call(f, f.getValue());
        }), b.bind(this.__input, "keydown", function(a) {
            13 === a.keyCode && this.blur();
        }), this.updateDisplay(), this.domElement.appendChild(this.__input);
    };
    return d.superclass = a, c.extend(d.prototype, a.prototype, {
        updateDisplay: function() {
            return b.isActive(this.__input) || (this.__input.value = this.getValue()), d.superclass.prototype.updateDisplay.call(this);
        }
    }), d;
}(dat.controllers.Controller, dat.dom.dom, dat.utils.common), dat.controllers.FunctionController, dat.controllers.BooleanController, dat.utils.common), dat.controllers.Controller, dat.controllers.BooleanController, dat.controllers.FunctionController, dat.controllers.NumberControllerBox, dat.controllers.NumberControllerSlider, dat.controllers.OptionController, dat.controllers.ColorController = function(a, b, c, d, e) {
    function f(a, b, c, d) {
        a.style.background = "", e.each(i, function(e) {
            a.style.cssText += "background: " + e + "linear-gradient(" + b + ", " + c + " 0%, " + d + " 100%); ";
        });
    }
    function g(a) {
        a.style.background = "", a.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", 
        a.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", 
        a.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", 
        a.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", 
        a.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";
    }
    var h = function(a, i) {
        function j(a) {
            n(a), b.bind(window, "mousemove", n), b.bind(window, "mouseup", k);
        }
        function k() {
            b.unbind(window, "mousemove", n), b.unbind(window, "mouseup", k);
        }
        function l() {
            var a = d(this.value);
            !1 !== a ? (p.__color.__state = a, p.setValue(p.__color.toOriginal())) : this.value = p.__color.toString();
        }
        function m() {
            b.unbind(window, "mousemove", o), b.unbind(window, "mouseup", m);
        }
        function n(a) {
            a.preventDefault();
            var c = b.getWidth(p.__saturation_field), d = b.getOffset(p.__saturation_field), e = (a.clientX - d.left + document.body.scrollLeft) / c;
            return a = 1 - (a.clientY - d.top + document.body.scrollTop) / c, a > 1 ? a = 1 : 0 > a && (a = 0), 
            e > 1 ? e = 1 : 0 > e && (e = 0), p.__color.v = a, p.__color.s = e, p.setValue(p.__color.toOriginal()), 
            !1;
        }
        function o(a) {
            a.preventDefault();
            var c = b.getHeight(p.__hue_field), d = b.getOffset(p.__hue_field);
            return a = 1 - (a.clientY - d.top + document.body.scrollTop) / c, a > 1 ? a = 1 : 0 > a && (a = 0), 
            p.__color.h = 360 * a, p.setValue(p.__color.toOriginal()), !1;
        }
        h.superclass.call(this, a, i), this.__color = new c(this.getValue()), this.__temp = new c(0);
        var p = this;
        this.domElement = document.createElement("div"), b.makeSelectable(this.domElement, !1), 
        this.__selector = document.createElement("div"), this.__selector.className = "selector", 
        this.__saturation_field = document.createElement("div"), this.__saturation_field.className = "saturation-field", 
        this.__field_knob = document.createElement("div"), this.__field_knob.className = "field-knob", 
        this.__field_knob_border = "2px solid ", this.__hue_knob = document.createElement("div"), 
        this.__hue_knob.className = "hue-knob", this.__hue_field = document.createElement("div"), 
        this.__hue_field.className = "hue-field", this.__input = document.createElement("input"), 
        this.__input.type = "text", this.__input_textShadow = "0 1px 1px ", b.bind(this.__input, "keydown", function(a) {
            13 === a.keyCode && l.call(this);
        }), b.bind(this.__input, "blur", l), b.bind(this.__selector, "mousedown", function() {
            b.addClass(this, "drag").bind(window, "mouseup", function() {
                b.removeClass(p.__selector, "drag");
            });
        });
        var q = document.createElement("div");
        e.extend(this.__selector.style, {
            width: "122px",
            height: "102px",
            padding: "3px",
            backgroundColor: "#222",
            boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
        }), e.extend(this.__field_knob.style, {
            position: "absolute",
            width: "12px",
            height: "12px",
            border: this.__field_knob_border + (.5 > this.__color.v ? "#fff" : "#000"),
            boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
            borderRadius: "12px",
            zIndex: 1
        }), e.extend(this.__hue_knob.style, {
            position: "absolute",
            width: "15px",
            height: "2px",
            borderRight: "4px solid #fff",
            zIndex: 1
        }), e.extend(this.__saturation_field.style, {
            width: "100px",
            height: "100px",
            border: "1px solid #555",
            marginRight: "3px",
            display: "inline-block",
            cursor: "pointer"
        }), e.extend(q.style, {
            width: "100%",
            height: "100%",
            background: "none"
        }), f(q, "top", "rgba(0,0,0,0)", "#000"), e.extend(this.__hue_field.style, {
            width: "15px",
            height: "100px",
            display: "inline-block",
            border: "1px solid #555",
            cursor: "ns-resize"
        }), g(this.__hue_field), e.extend(this.__input.style, {
            outline: "none",
            textAlign: "center",
            color: "#fff",
            border: 0,
            fontWeight: "bold",
            textShadow: this.__input_textShadow + "rgba(0,0,0,0.7)"
        }), b.bind(this.__saturation_field, "mousedown", j), b.bind(this.__field_knob, "mousedown", j), 
        b.bind(this.__hue_field, "mousedown", function(a) {
            o(a), b.bind(window, "mousemove", o), b.bind(window, "mouseup", m);
        }), this.__saturation_field.appendChild(q), this.__selector.appendChild(this.__field_knob), 
        this.__selector.appendChild(this.__saturation_field), this.__selector.appendChild(this.__hue_field), 
        this.__hue_field.appendChild(this.__hue_knob), this.domElement.appendChild(this.__input), 
        this.domElement.appendChild(this.__selector), this.updateDisplay();
    };
    h.superclass = a, e.extend(h.prototype, a.prototype, {
        updateDisplay: function() {
            var a = d(this.getValue());
            if (!1 !== a) {
                var b = !1;
                e.each(c.COMPONENTS, function(c) {
                    return e.isUndefined(a[c]) || e.isUndefined(this.__color.__state[c]) || a[c] === this.__color.__state[c] ? void 0 : (b = !0, 
                    {});
                }, this), b && e.extend(this.__color.__state, a);
            }
            e.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;
            var g = .5 > this.__color.v || .5 < this.__color.s ? 255 : 0, h = 255 - g;
            e.extend(this.__field_knob.style, {
                marginLeft: 100 * this.__color.s - 7 + "px",
                marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                backgroundColor: this.__temp.toString(),
                border: this.__field_knob_border + "rgb(" + g + "," + g + "," + g + ")"
            }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, 
            this.__temp.v = 1, f(this.__saturation_field, "left", "#fff", this.__temp.toString()), 
            e.extend(this.__input.style, {
                backgroundColor: this.__input.value = this.__color.toString(),
                color: "rgb(" + g + "," + g + "," + g + ")",
                textShadow: this.__input_textShadow + "rgba(" + h + "," + h + "," + h + ",.7)"
            });
        }
    });
    var i = [ "-moz-", "-o-", "-webkit-", "-ms-", "" ];
    return h;
}(dat.controllers.Controller, dat.dom.dom, dat.color.Color = function(a, b, c, d) {
    function e(a, b, c) {
        Object.defineProperty(a, b, {
            get: function() {
                return "RGB" === this.__state.space ? this.__state[b] : (g(this, b, c), this.__state[b]);
            },
            set: function(a) {
                "RGB" !== this.__state.space && (g(this, b, c), this.__state.space = "RGB"), this.__state[b] = a;
            }
        });
    }
    function f(a, b) {
        Object.defineProperty(a, b, {
            get: function() {
                return "HSV" === this.__state.space ? this.__state[b] : (h(this), this.__state[b]);
            },
            set: function(a) {
                "HSV" !== this.__state.space && (h(this), this.__state.space = "HSV"), this.__state[b] = a;
            }
        });
    }
    function g(a, c, e) {
        if ("HEX" === a.__state.space) a.__state[c] = b.component_from_hex(a.__state.hex, e); else {
            if ("HSV" !== a.__state.space) throw "Corrupted color state";
            d.extend(a.__state, b.hsv_to_rgb(a.__state.h, a.__state.s, a.__state.v));
        }
    }
    function h(a) {
        var c = b.rgb_to_hsv(a.r, a.g, a.b);
        d.extend(a.__state, {
            s: c.s,
            v: c.v
        }), d.isNaN(c.h) ? d.isUndefined(a.__state.h) && (a.__state.h = 0) : a.__state.h = c.h;
    }
    var i = function() {
        if (this.__state = a.apply(this, arguments), !1 === this.__state) throw "Failed to interpret color arguments";
        this.__state.a = this.__state.a || 1;
    };
    return i.COMPONENTS = "r g b h s v hex a".split(" "), d.extend(i.prototype, {
        toString: function() {
            return c(this);
        },
        toOriginal: function() {
            return this.__state.conversion.write(this);
        }
    }), e(i.prototype, "r", 2), e(i.prototype, "g", 1), e(i.prototype, "b", 0), f(i.prototype, "h"), 
    f(i.prototype, "s"), f(i.prototype, "v"), Object.defineProperty(i.prototype, "a", {
        get: function() {
            return this.__state.a;
        },
        set: function(a) {
            this.__state.a = a;
        }
    }), Object.defineProperty(i.prototype, "hex", {
        get: function() {
            return "HEX" !== !this.__state.space && (this.__state.hex = b.rgb_to_hex(this.r, this.g, this.b)), 
            this.__state.hex;
        },
        set: function(a) {
            this.__state.space = "HEX", this.__state.hex = a;
        }
    }), i;
}(dat.color.interpret, dat.color.math = function() {
    var a;
    return {
        hsv_to_rgb: function(a, b, c) {
            var d = a / 60 - Math.floor(a / 60), e = c * (1 - b), f = c * (1 - d * b);
            return b = c * (1 - (1 - d) * b), a = [ [ c, b, e ], [ f, c, e ], [ e, c, b ], [ e, f, c ], [ b, e, c ], [ c, e, f ] ][Math.floor(a / 60) % 6], 
            {
                r: 255 * a[0],
                g: 255 * a[1],
                b: 255 * a[2]
            };
        },
        rgb_to_hsv: function(a, b, c) {
            var d = Math.min(a, b, c), e = Math.max(a, b, c), d = e - d;
            return 0 == e ? {
                h: 0/0,
                s: 0,
                v: 0
            } : (a = (a == e ? (b - c) / d : b == e ? 2 + (c - a) / d : 4 + (a - b) / d) / 6, 
            0 > a && (a += 1), {
                h: 360 * a,
                s: d / e,
                v: e / 255
            });
        },
        rgb_to_hex: function(a, b, c) {
            return a = this.hex_with_component(0, 2, a), a = this.hex_with_component(a, 1, b), 
            a = this.hex_with_component(a, 0, c);
        },
        component_from_hex: function(a, b) {
            return a >> 8 * b & 255;
        },
        hex_with_component: function(b, c, d) {
            return d << (a = 8 * c) | b & ~(255 << a);
        }
    };
}(), dat.color.toString, dat.utils.common), dat.color.interpret, dat.utils.common), dat.utils.requestAnimationFrame = function() {
    return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
        window.setTimeout(a, 1e3 / 60);
    };
}(), dat.dom.CenteredDiv = function(a, b) {
    var c = function() {
        this.backgroundElement = document.createElement("div"), b.extend(this.backgroundElement.style, {
            backgroundColor: "rgba(0,0,0,0.8)",
            top: 0,
            left: 0,
            display: "none",
            zIndex: "1000",
            opacity: 0,
            WebkitTransition: "opacity 0.2s linear"
        }), a.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", 
        this.domElement = document.createElement("div"), b.extend(this.domElement.style, {
            position: "fixed",
            display: "none",
            zIndex: "1001",
            opacity: 0,
            WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
        }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
        var c = this;
        a.bind(this.backgroundElement, "click", function() {
            c.hide();
        });
    };
    return c.prototype.show = function() {
        var a = this;
        this.backgroundElement.style.display = "block", this.domElement.style.display = "block", 
        this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", 
        this.layout(), b.defer(function() {
            a.backgroundElement.style.opacity = 1, a.domElement.style.opacity = 1, a.domElement.style.webkitTransform = "scale(1)";
        });
    }, c.prototype.hide = function() {
        var b = this, c = function() {
            b.domElement.style.display = "none", b.backgroundElement.style.display = "none", 
            a.unbind(b.domElement, "webkitTransitionEnd", c), a.unbind(b.domElement, "transitionend", c), 
            a.unbind(b.domElement, "oTransitionEnd", c);
        };
        a.bind(this.domElement, "webkitTransitionEnd", c), a.bind(this.domElement, "transitionend", c), 
        a.bind(this.domElement, "oTransitionEnd", c), this.backgroundElement.style.opacity = 0, 
        this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)";
    }, c.prototype.layout = function() {
        this.domElement.style.left = window.innerWidth / 2 - a.getWidth(this.domElement) / 2 + "px", 
        this.domElement.style.top = window.innerHeight / 2 - a.getHeight(this.domElement) / 2 + "px";
    }, c;
}(dat.dom.dom, dat.utils.common), dat.dom.dom, dat.utils.common), void 0 === Date.now && (Date.now = function() {
    return new Date().valueOf();
});

var TWEEN = TWEEN || function() {
    var a = [];
    return {
        REVISION: "12",
        getAll: function() {
            return a;
        },
        removeAll: function() {
            a = [];
        },
        add: function(b) {
            a.push(b);
        },
        remove: function(b) {
            b = a.indexOf(b), -1 !== b && a.splice(b, 1);
        },
        update: function(b) {
            if (0 === a.length) return !1;
            for (var c = 0, b = void 0 !== b ? b : "undefined" != typeof window && void 0 !== window.performance && void 0 !== window.performance.now ? window.performance.now() : Date.now(); c < a.length; ) a[c].update(b) ? c++ : a.splice(c, 1);
            return !0;
        }
    };
}();

TWEEN.Tween = function(a) {
    var b, c = {}, d = {}, e = {}, f = 1e3, g = 0, h = !1, i = !1, j = 0, k = null, l = TWEEN.Easing.Linear.None, m = TWEEN.Interpolation.Linear, n = [], o = null, p = !1, q = null, r = null;
    for (b in a) c[b] = parseFloat(a[b], 10);
    this.to = function(a, b) {
        return void 0 !== b && (f = b), d = a, this;
    }, this.start = function(b) {
        TWEEN.add(this), i = !0, p = !1, k = void 0 !== b ? b : "undefined" != typeof window && void 0 !== window.performance && void 0 !== window.performance.now ? window.performance.now() : Date.now(), 
        k += j;
        for (var f in d) {
            if (d[f] instanceof Array) {
                if (0 === d[f].length) continue;
                d[f] = [ a[f] ].concat(d[f]);
            }
            c[f] = a[f], !1 == c[f] instanceof Array && (c[f] *= 1), e[f] = c[f] || 0;
        }
        return this;
    }, this.stop = function() {
        return i ? (TWEEN.remove(this), i = !1, this.stopChainedTweens(), this) : this;
    }, this.stopChainedTweens = function() {
        for (var a = 0, b = n.length; b > a; a++) n[a].stop();
    }, this.delay = function(a) {
        return j = a, this;
    }, this.repeat = function(a) {
        return g = a, this;
    }, this.yoyo = function(a) {
        return h = a, this;
    }, this.easing = function(a) {
        return l = a, this;
    }, this.interpolation = function(a) {
        return m = a, this;
    }, this.chain = function() {
        return n = arguments, this;
    }, this.onStart = function(a) {
        return o = a, this;
    }, this.onUpdate = function(a) {
        return q = a, this;
    }, this.onComplete = function(a) {
        return r = a, this;
    }, this.update = function(b) {
        var i;
        if (k > b) return !0;
        !1 === p && (null !== o && o.call(a), p = !0);
        var s = (b - k) / f, s = s > 1 ? 1 : s, t = l(s);
        for (i in d) {
            var u = c[i] || 0, v = d[i];
            v instanceof Array ? a[i] = m(v, t) : ("string" == typeof v && (v = u + parseFloat(v, 10)), 
            "number" == typeof v && (a[i] = u + (v - u) * t));
        }
        if (null !== q && q.call(a, t), 1 == s) {
            if (!(g > 0)) {
                for (null !== r && r.call(a), i = 0, s = n.length; s > i; i++) n[i].start(b);
                return !1;
            }
            isFinite(g) && g--;
            for (i in e) "string" == typeof d[i] && (e[i] += parseFloat(d[i], 10)), h && (s = e[i], 
            e[i] = d[i], d[i] = s), c[i] = e[i];
            k = b + j;
        }
        return !0;
    };
}, TWEEN.Easing = {
    Linear: {
        None: function(a) {
            return a;
        }
    },
    Quadratic: {
        In: function(a) {
            return a * a;
        },
        Out: function(a) {
            return a * (2 - a);
        },
        InOut: function(a) {
            return 1 > (a *= 2) ? .5 * a * a : -.5 * (--a * (a - 2) - 1);
        }
    },
    Cubic: {
        In: function(a) {
            return a * a * a;
        },
        Out: function(a) {
            return --a * a * a + 1;
        },
        InOut: function(a) {
            return 1 > (a *= 2) ? .5 * a * a * a : .5 * ((a -= 2) * a * a + 2);
        }
    },
    Quartic: {
        In: function(a) {
            return a * a * a * a;
        },
        Out: function(a) {
            return 1 - --a * a * a * a;
        },
        InOut: function(a) {
            return 1 > (a *= 2) ? .5 * a * a * a * a : -.5 * ((a -= 2) * a * a * a - 2);
        }
    },
    Quintic: {
        In: function(a) {
            return a * a * a * a * a;
        },
        Out: function(a) {
            return --a * a * a * a * a + 1;
        },
        InOut: function(a) {
            return 1 > (a *= 2) ? .5 * a * a * a * a * a : .5 * ((a -= 2) * a * a * a * a + 2);
        }
    },
    Sinusoidal: {
        In: function(a) {
            return 1 - Math.cos(a * Math.PI / 2);
        },
        Out: function(a) {
            return Math.sin(a * Math.PI / 2);
        },
        InOut: function(a) {
            return .5 * (1 - Math.cos(Math.PI * a));
        }
    },
    Exponential: {
        In: function(a) {
            return 0 === a ? 0 : Math.pow(1024, a - 1);
        },
        Out: function(a) {
            return 1 === a ? 1 : 1 - Math.pow(2, -10 * a);
        },
        InOut: function(a) {
            return 0 === a ? 0 : 1 === a ? 1 : 1 > (a *= 2) ? .5 * Math.pow(1024, a - 1) : .5 * (-Math.pow(2, -10 * (a - 1)) + 2);
        }
    },
    Circular: {
        In: function(a) {
            return 1 - Math.sqrt(1 - a * a);
        },
        Out: function(a) {
            return Math.sqrt(1 - --a * a);
        },
        InOut: function(a) {
            return 1 > (a *= 2) ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1);
        }
    },
    Elastic: {
        In: function(a) {
            var b, c = .1;
            return 0 === a ? 0 : 1 === a ? 1 : (!c || 1 > c ? (c = 1, b = .1) : b = .4 * Math.asin(1 / c) / (2 * Math.PI), 
            -(c * Math.pow(2, 10 * (a -= 1)) * Math.sin(2 * (a - b) * Math.PI / .4)));
        },
        Out: function(a) {
            var b, c = .1;
            return 0 === a ? 0 : 1 === a ? 1 : (!c || 1 > c ? (c = 1, b = .1) : b = .4 * Math.asin(1 / c) / (2 * Math.PI), 
            c * Math.pow(2, -10 * a) * Math.sin(2 * (a - b) * Math.PI / .4) + 1);
        },
        InOut: function(a) {
            var b, c = .1;
            return 0 === a ? 0 : 1 === a ? 1 : (!c || 1 > c ? (c = 1, b = .1) : b = .4 * Math.asin(1 / c) / (2 * Math.PI), 
            1 > (a *= 2) ? -.5 * c * Math.pow(2, 10 * (a -= 1)) * Math.sin(2 * (a - b) * Math.PI / .4) : .5 * c * Math.pow(2, -10 * (a -= 1)) * Math.sin(2 * (a - b) * Math.PI / .4) + 1);
        }
    },
    Back: {
        In: function(a) {
            return a * a * (2.70158 * a - 1.70158);
        },
        Out: function(a) {
            return --a * a * (2.70158 * a + 1.70158) + 1;
        },
        InOut: function(a) {
            return 1 > (a *= 2) ? .5 * a * a * (3.5949095 * a - 2.5949095) : .5 * ((a -= 2) * a * (3.5949095 * a + 2.5949095) + 2);
        }
    },
    Bounce: {
        In: function(a) {
            return 1 - TWEEN.Easing.Bounce.Out(1 - a);
        },
        Out: function(a) {
            return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375;
        },
        InOut: function(a) {
            return .5 > a ? .5 * TWEEN.Easing.Bounce.In(2 * a) : .5 * TWEEN.Easing.Bounce.Out(2 * a - 1) + .5;
        }
    }
}, TWEEN.Interpolation = {
    Linear: function(a, b) {
        var c = a.length - 1, d = c * b, e = Math.floor(d), f = TWEEN.Interpolation.Utils.Linear;
        return 0 > b ? f(a[0], a[1], d) : b > 1 ? f(a[c], a[c - 1], c - d) : f(a[e], a[e + 1 > c ? c : e + 1], d - e);
    },
    Bezier: function(a, b) {
        var c, d = 0, e = a.length - 1, f = Math.pow, g = TWEEN.Interpolation.Utils.Bernstein;
        for (c = 0; e >= c; c++) d += f(1 - b, e - c) * f(b, c) * a[c] * g(e, c);
        return d;
    },
    CatmullRom: function(a, b) {
        var c = a.length - 1, d = c * b, e = Math.floor(d), f = TWEEN.Interpolation.Utils.CatmullRom;
        return a[0] === a[c] ? (0 > b && (e = Math.floor(d = c * (1 + b))), f(a[(e - 1 + c) % c], a[e], a[(e + 1) % c], a[(e + 2) % c], d - e)) : 0 > b ? a[0] - (f(a[0], a[0], a[1], a[1], -d) - a[0]) : b > 1 ? a[c] - (f(a[c], a[c], a[c - 1], a[c - 1], d - c) - a[c]) : f(a[e ? e - 1 : 0], a[e], a[e + 1 > c ? c : e + 1], a[e + 2 > c ? c : e + 2], d - e);
    },
    Utils: {
        Linear: function(a, b, c) {
            return (b - a) * c + a;
        },
        Bernstein: function(a, b) {
            var c = TWEEN.Interpolation.Utils.Factorial;
            return c(a) / c(b) / c(a - b);
        },
        Factorial: function() {
            var a = [ 1 ];
            return function(b) {
                var c, d = 1;
                if (a[b]) return a[b];
                for (c = b; c > 1; c--) d *= c;
                return a[b] = d;
            };
        }(),
        CatmullRom: function(a, b, c, d, e) {
            var a = .5 * (c - a), d = .5 * (d - b), f = e * e;
            return (2 * b - 2 * c + a + d) * e * f + (-3 * b + 3 * c - 2 * a - d) * f + a * e + b;
        }
    }
};